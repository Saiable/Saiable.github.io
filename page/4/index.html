<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta property="og:type" content="website">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="https://mindcons.cn/page/4/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
<meta name="generator" content="Hexo 6.2.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://mindcons.cn"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main">
  
    <article id="post-web/其他/运维/运维基本实践" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2022/11/13/web/%E5%85%B6%E4%BB%96/%E8%BF%90%E7%BB%B4/%E8%BF%90%E7%BB%B4%E5%9F%BA%E6%9C%AC%E5%AE%9E%E8%B7%B5/" class="article-date">
  <time class="dt-published" datetime="2022-11-13T03:15:24.000Z" itemprop="datePublished">2022-11-13</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2022/11/13/web/%E5%85%B6%E4%BB%96/%E8%BF%90%E7%BB%B4/%E8%BF%90%E7%BB%B4%E5%9F%BA%E6%9C%AC%E5%AE%9E%E8%B7%B5/">运维基本实践</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="Nginx"><a href="#Nginx" class="headerlink" title="Nginx"></a><code>Nginx</code></h1><h2 id="如何找出nginx配置文件的所在位置？"><a href="#如何找出nginx配置文件的所在位置？" class="headerlink" title="如何找出nginx配置文件的所在位置？"></a>如何找出nginx配置文件的所在位置？</h2><p> 对于一台陌生的服务器或安装太久忘了位置，怎么才能简单快速的找到配置文件的位置呢？要找出配置文件的位置，需要先找出nginx可执行文件的路径 ， 这里有几种方法： 1、如果程序在运行中 ps -ef | grep nginx # ps -ef | grep nginx root 29514…</p>
<p>对于一台陌生的服务器或安装太久忘了位置，怎么才能简单快速的找到配置文件的位置呢？<br>要找出配置文件的位置，需要先找出nginx可执行文件的路径 ，</p>
<h3 id="这里有几种方法："><a href="#这里有几种方法：" class="headerlink" title="这里有几种方法："></a>这里有几种方法：</h3><h4 id="1、如果程序在运行中"><a href="#1、如果程序在运行中" class="headerlink" title="1、如果程序在运行中"></a>1、如果程序在运行中</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ps -ef | grep nginx</span><br><span class="line"># ps -ef | grep nginx </span><br><span class="line">root     29514     1  0 Mar01 ?        00:00:00 nginx: master process /usr/sbin/nginx -g daemon on; master_process on;</span><br><span class="line">www-data 29515 29514  0 Mar01 ?        00:00:00 nginx: worker process</span><br><span class="line">root     30276 28948  0 09:36 pts/1    00:00:00 grep --color=auto nginx</span><br></pre></td></tr></table></figure>

<p>通常是 &#x2F;usr&#x2F;sbin&#x2F;nginx</p>
<h4 id="2、程序并没有运行"><a href="#2、程序并没有运行" class="headerlink" title="2、程序并没有运行"></a>2、程序并没有运行</h4><p>查看软件安装路径</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">whereis nginx</span><br></pre></td></tr></table></figure>

<p>查询运行文件所在路径</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">which nginx</span><br></pre></td></tr></table></figure>

<h3 id="当然还有另外的查询方法"><a href="#当然还有另外的查询方法" class="headerlink" title="当然还有另外的查询方法"></a>当然还有另外的查询方法</h3><p>rpm包安装的，可以用rpm -qa | grep “软件或者包的名字”查询;<br>yum方法安装的，可以用yum list installed查找;</p>
<h3 id="获取配置文件位置"><a href="#获取配置文件位置" class="headerlink" title="获取配置文件位置"></a>获取配置文件位置</h3><p>通过上面的一些方法，找到了nginx可执行文件的路径，就可以通过Nginx自身的功能找到配置文件的位置了。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># /usr/sbin/nginx -t</span><br><span class="line">nginx: the configuration file /etc/nginx/nginx.conf syntax is ok</span><br><span class="line">nginx: configuration file /etc/nginx/nginx.conf test is successful</span><br></pre></td></tr></table></figure>



<h2 id="linux-根据Pid-查询对应启动程序文件目录"><a href="#linux-根据Pid-查询对应启动程序文件目录" class="headerlink" title="linux 根据Pid 查询对应启动程序文件目录"></a>linux 根据Pid 查询对应启动程序文件目录</h2><p>需要根据pid查看启动文件所在目录</p>
<ol>
<li><p>ps  -ef|grep  [过滤的字符]   例如： ps -ef|grep java</p>
</li>
<li><p>进入 &#x2F;proc 目录，即可看到7262的文件目录</p>
</li>
<li><p>进入cd 7262</p>
</li>
<li><p>ls -ail ,即可找到对应为全路径文件信息</p>
</li>
</ol>
<h1 id="压缩命令"><a href="#压缩命令" class="headerlink" title="压缩命令"></a>压缩命令</h1><p>1.压缩：</p>
<p>　　tar -cvf &#x2F;tmp&#x2F;etc.tar &#x2F;etc</p>
<p>2.解压：</p>
<p>　　tar -xvf &#x2F;tmp&#x2F;etc.tar -C .</p>
<p>3.tar命令常用的功能</p>
<p>　　-c：创建新的tar文件<br>　　-x：解开tar文件<br>　　-t：列出tar文件中包含的文件的信息<br>　　-r：附加新的文件到tar文件中<br>注意：以上功能是独立的，一次只能使用一个。</p>
<p>4.tar命令常用的参数</p>
<p>　　-z：使用gzip进行解压缩<br>　　-j：使用bzip2进行解压缩<br>　　-Z：使用compress进行解压缩<br>　　-v：显示解压缩执行过程<br>　　-f：指定要处理的文件名</p>
<p>注意：如果需要使用-f参数，需要将f参数放在所有参数最后面，在f之后要立即接文件名，不能有其他参数。</p>
<h2 id="tar压缩排除某个文件夹"><a href="#tar压缩排除某个文件夹" class="headerlink" title="tar压缩排除某个文件夹"></a>tar压缩排除某个文件夹</h2><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_44737312/article/details/124254357">https://blog.csdn.net/qq_44737312/article/details/124254357</a></p>
<p>例如，对BenchmarkSQL打包，打包的时候我们要排除 BenchmarkSQL&#x2F;logs 目录</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar -zcvf BenchmarkSQL.tar.gz --exclude=benchmarksql-5.0/logs  benchmarksql-5.0</span><br></pre></td></tr></table></figure>

<p>如需排除多个目录，增加 –exclude 即可，如下命令排除logs和src两个目录及文件nohup.out</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">tar -zcvf BenchmarkSQL.tar.gz --exclude=benchmarksql-5.0/logs  --exclude=benchmarksql-5.0/src --exclude=benchmarksql-5.0/nohup.out   benchmarksql-5.0</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>注意事项：</strong></p>
<p> 使用tar 的–exclude 命令排除打包的时候，不能加“&#x2F;”，否则还是会把logs目录以及其下的文件打包进去。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#错误写法</span></span><br><span class="line">tar -zcvf BenchmarkSQL.tar.gz --exclude=benchmarksql-5.0/logs/  benchmarksql-5.0</span><br><span class="line"> </span><br><span class="line"><span class="comment">#正确写法</span></span><br><span class="line">tar -zcvf BenchmarkSQL.tar.gz --exclude=benchmarksql-5.0/logs  benchmarksql-5.0</span><br></pre></td></tr></table></figure>



<h1 id="传输命令"><a href="#传输命令" class="headerlink" title="传输命令"></a>传输命令</h1><p>scp远程传输</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://mindcons.cn/2022/11/13/web/%E5%85%B6%E4%BB%96/%E8%BF%90%E7%BB%B4/%E8%BF%90%E7%BB%B4%E5%9F%BA%E6%9C%AC%E5%AE%9E%E8%B7%B5/" data-id="cldol83h5005u3cx6237bcu9l" data-title="运维基本实践" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux/" rel="tag">Linux</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-web/进阶/Node.js/npm基础" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2022/11/13/web/%E8%BF%9B%E9%98%B6/Node.js/npm%E5%9F%BA%E7%A1%80/" class="article-date">
  <time class="dt-published" datetime="2022-11-13T01:03:02.000Z" itemprop="datePublished">2022-11-13</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Node-js/">Node.js</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2022/11/13/web/%E8%BF%9B%E9%98%B6/Node.js/npm%E5%9F%BA%E7%A1%80/">npm基础及常用工具包</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="常用工具包"><a href="#常用工具包" class="headerlink" title="常用工具包"></a>常用工具包</h1><h2 id="加解密"><a href="#加解密" class="headerlink" title="加解密"></a>加解密</h2><h3 id="jsonwebtoken"><a href="#jsonwebtoken" class="headerlink" title="jsonwebtoken"></a><code>jsonwebtoken</code></h3><ul>
<li><p>安装</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i jsonwebtoken</span><br></pre></td></tr></table></figure>
</li>
<li><p>使用</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// server.js - node.js</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 1.引入</span></span><br><span class="line"><span class="keyword">const</span> jwt = <span class="built_in">require</span>(<span class="string">&#x27;jsonwebtoken&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2.服务端加密返回数据</span></span><br><span class="line"><span class="keyword">let</span> person = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;sai&#x27;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="number">18</span>, <span class="comment">// 自定义字段</span></span><br><span class="line">    openId <span class="comment">// 第三方平台的字段，如小程序</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> token = jwt.<span class="title function_">sign</span>(person, <span class="string">&#x27;myMiniProgram&#x27;</span>) <span class="comment">// 自定义秘钥</span></span><br><span class="line">res.<span class="title function_">send</span>(token)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 补充，别人即使拿到了数据，但没有秘钥，也是看不了数据的</span></span><br><span class="line"><span class="keyword">let</span> reuslt = jwt.<span class="title function_">verify</span>(token, <span class="string">&#x27;myMiniProgram-wrong&#x27;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//  client.js - 小程序</span></span><br><span class="line"><span class="comment">// 拿到token后存储本地，发送请求时header携带token</span></span><br><span class="line"><span class="keyword">const</span> _token = <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(token)</span><br><span class="line">wx.<span class="title function_">setStorageSync</span>(<span class="string">&#x27;jwt&#x27;</span>, _token)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 用的时候可以再用 JSON.parse 处理一下存储在 Storage 里的 Token 数据。</span></span><br><span class="line"><span class="keyword">const</span> _jwt = wx.<span class="title function_">getStorageSync</span>(<span class="string">&#x27;jwt&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> jwt = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(_jwt)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 服务端签发过来的 Token ，除了 Token 本身，还有一些用户相关的信息，比如头像，名字，邮件等等。我们可以直接在小程序的页面上利用这些数据。</span></span><br><span class="line">wx.<span class="title function_">setJWT</span>(response.<span class="property">data</span>)</span><br><span class="line">wx.<span class="title function_">switchTab</span>(&#123;</span><br><span class="line">    <span class="attr">url</span>: <span class="string">&#x27;/pages/index/index&#x27;</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ul>
<h1 id="常见问题"><a href="#常见问题" class="headerlink" title="常见问题"></a>常见问题</h1><h2 id="ENOSPC错误"><a href="#ENOSPC错误" class="headerlink" title="ENOSPC错误"></a><code>ENOSPC</code>错误</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">[root@VM-4-12-centos crawler]<span class="comment"># npm run serve</span></span><br><span class="line"></span><br><span class="line">&gt; crawler@0.1.0 serve</span><br><span class="line">&gt; vue-cli-service serve</span><br><span class="line"></span><br><span class="line"> INFO  Starting development server...</span><br><span class="line">[10%] building (0/0 modules)</span><br><span class="line">node:internal/errors:464</span><br><span class="line">    ErrorCaptureStackTrace(err);</span><br><span class="line">    ^</span><br><span class="line"></span><br><span class="line">Error: ENOSPC: System <span class="built_in">limit</span> <span class="keyword">for</span> number of file watchers reached, watch <span class="string">&#x27;/home/coder/code-prac/crawlerSchedule/crawler/public&#x27;</span></span><br><span class="line">    at FSWatcher.&lt;computed&gt; (node:internal/fs/watchers:244:19)</span><br><span class="line">    at Object.watch (node:fs:2249:34)</span><br><span class="line">    at createFsWatchInstance (/home/coder/code-prac/crawlerSchedule/crawler/node_modules/chokidar/lib/nodefs-handler.js:119:15)</span><br><span class="line">    at setFsWatchListener (/home/coder/code-prac/crawlerSchedule/crawler/node_modules/chokidar/lib/nodefs-handler.js:166:15)</span><br><span class="line">    at NodeFsHandler._watchWithNodeFs (/home/coder/code-prac/crawlerSchedule/crawler/node_modules/chokidar/lib/nodefs-handler.js:331:14)</span><br><span class="line">    at NodeFsHandler._handleDir (/home/coder/code-prac/crawlerSchedule/crawler/node_modules/chokidar/lib/nodefs-handler.js:567:19)</span><br><span class="line">    at processTicksAndRejections (node:internal/process/task_queues:96:5)</span><br><span class="line">    at async NodeFsHandler._addToNodeFs (/home/coder/code-prac/crawlerSchedule/crawler/node_modules/chokidar/lib/nodefs-handler.js:617:16)</span><br><span class="line">    at async /home/coder/code-prac/crawlerSchedule/crawler/node_modules/chokidar/index.js:451:21</span><br><span class="line">    at async Promise.all (index 0)</span><br><span class="line">Emitted <span class="string">&#x27;error&#x27;</span> event on FSWatcher instance at:</span><br><span class="line">    at FSWatcher._handleError (/home/coder/code-prac/crawlerSchedule/crawler/node_modules/chokidar/index.js:647:10)</span><br><span class="line">    at NodeFsHandler._addToNodeFs (/home/coder/code-prac/crawlerSchedule/crawler/node_modules/chokidar/lib/nodefs-handler.js:645:18)</span><br><span class="line">    at processTicksAndRejections (node:internal/process/task_queues:96:5)</span><br><span class="line">    at async /home/coder/code-prac/crawlerSchedule/crawler/node_modules/chokidar/index.js:451:21</span><br><span class="line">    at async Promise.all (index 0) &#123;</span><br><span class="line">  errno: -28,</span><br><span class="line">  syscall: <span class="string">&#x27;watch&#x27;</span>,</span><br><span class="line">  code: <span class="string">&#x27;ENOSPC&#x27;</span>,</span><br><span class="line">  path: <span class="string">&#x27;/home/coder/code-prac/crawlerSchedule/crawler/public&#x27;</span>,</span><br><span class="line">  filename: <span class="string">&#x27;/home/coder/code-prac/crawlerSchedule/crawler/public&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>Error: ENOSPC: System limit for number of file watchers reached, watch&#39;所在文件路径&#39;</code></p>
<p><code>vue</code>工程在 deepin15.11 系统环境中运行 <code>npm run serve</code>命令时出现如下错误：</p>
<p>解决方案<br>在终端按顺序执行下面两个命令即可解决问题</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> fs.inotify.max_user_watches=524288 | sudo <span class="built_in">tee</span> -a /etc/sysctl.conf &amp;&amp; sudo sysctl -p</span><br><span class="line"></span><br><span class="line">sudo sysctl --system</span><br></pre></td></tr></table></figure>

<p>是<code>linux</code>系统的限制导致这个报错了，需要设置一下：<code>fs.inotify.max_user_watches</code> 这个参数。</p>
<p><strong>解决方法</strong></p>
<p>执行：<code>vim /etc/sysctl.conf</code>，添加如下内容：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fs.inotify.max_user_watches=524288</span><br></pre></td></tr></table></figure>

<p><code>esc</code>，输入：<code>:wq</code>，保存退出</p>
<p>在命令行执行：<code>sysctl -p</code></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://mindcons.cn/2022/11/13/web/%E8%BF%9B%E9%98%B6/Node.js/npm%E5%9F%BA%E7%A1%80/" data-id="cldol83hz006s3cx6esyic2ew" data-title="npm基础及常用工具包" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Node-js/" rel="tag">Node.js</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-web/进阶/Node.js/node基础" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2022/11/03/web/%E8%BF%9B%E9%98%B6/Node.js/node%E5%9F%BA%E7%A1%80/" class="article-date">
  <time class="dt-published" datetime="2022-11-02T23:15:24.000Z" itemprop="datePublished">2022-11-03</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2022/11/03/web/%E8%BF%9B%E9%98%B6/Node.js/node%E5%9F%BA%E7%A1%80/">node基础</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <blockquote>
<p><a target="_blank" rel="noopener" href="http://dev.nodejs.cn/learn">Node.js 简介 (nodejs.cn)</a>这个中文网，就整了个翻译，然后收109&#x2F;半年。。。咱具体的api还是看英文吧</p>
<p><a target="_blank" rel="noopener" href="https://nodejs.org/dist/latest-v18.x/docs/api/synopsis.html">Usage and example | Node.js v18.12.0 Documentation (nodejs.org)</a></p>
</blockquote>
<h1 id="Node安装"><a href="#Node安装" class="headerlink" title="Node安装"></a><code>Node</code>安装</h1><h2 id="下载"><a href="#下载" class="headerlink" title="下载"></a>下载</h2><h2 id="配置环境变量"><a href="#配置环境变量" class="headerlink" title="配置环境变量"></a>配置环境变量</h2><h2 id="npx管理多版本的node"><a href="#npx管理多版本的node" class="headerlink" title="npx管理多版本的node"></a><code>npx</code>管理多版本的<code>node</code></h2><h1 id="Node-js-简介"><a href="#Node-js-简介" class="headerlink" title="Node.js 简介"></a>Node.js 简介</h1><p>Node.js 是一个开源和跨平台的 JavaScript 运行时环境。 它几乎是任何类型项目的流行工具！</p>
<p>Node.js 在浏览器之外运行 V8 JavaScript 引擎（Google Chrome 的内核）。 这使得 Node.js 的性能非常好。</p>
<p>Node.js 应用程序在单个进程中运行，无需为每个请求创建新的线程。 Node.js 在其标准库中提供了一组异步的 I&#x2F;O 原语，以防止 JavaScript 代码阻塞，通常，Node.js 中的库是使用非阻塞范式编写的，使得阻塞行为成为异常而不是常态。</p>
<p>当 Node.js 执行 I&#x2F;O 操作时（比如从网络读取、访问数据库或文件系统），Node.js 将在响应返回时恢复操作（而不是阻塞线程和浪费 CPU 周期等待）。</p>
<p>这允许 Node.js 使用单个服务器处理数千个并发连接，而不会引入管理线程并发（这可能是错误的重要来源）的负担。</p>
<p>Node.js 具有独特的优势，因为数百万为浏览器编写 JavaScript 的前端开发者现在无需学习完全不同的语言，就可以编写除客户端代码之外的服务器端代码。</p>
<p>在 Node.js 中，可以毫无问题地使用新的 ECMAScript 标准，因为你不必等待所有用户更新他们的浏览器，你负责通过更改 Node.js 版本来决定使用哪个 ECMAScript 版本，你还可以通过运行带有标志的 Node.js 来启用特定的实验性功能。</p>
<h2 id="大量的库"><a href="#大量的库" class="headerlink" title="大量的库"></a>大量的库</h2><p>npm 以其简单的结构帮助 Node.js 生态系统蓬勃发展，现在 npm 仓库托管了超过 1,000,000 个开源包，你可以自由使用。</p>
<h2 id="Node-js-应用程序的示例"><a href="#Node-js-应用程序的示例" class="headerlink" title="Node.js 应用程序的示例"></a>Node.js 应用程序的示例</h2><p>Node.js 中最常见的 Hello World 示例是 Web 服务器：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> http = <span class="built_in">require</span>(<span class="string">&#x27;http&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> hostname = <span class="string">&#x27;127.0.0.1&#x27;</span></span><br><span class="line"><span class="keyword">const</span> port = <span class="number">3000</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> server = http.<span class="title function_">createServer</span>(<span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  res.<span class="property">statusCode</span> = <span class="number">200</span></span><br><span class="line">  res.<span class="title function_">setHeader</span>(<span class="string">&#x27;Content-Type&#x27;</span>, <span class="string">&#x27;text/plain&#x27;</span>)</span><br><span class="line">  res.<span class="title function_">end</span>(<span class="string">&#x27;Hello World\n&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">server.<span class="title function_">listen</span>(port, hostname, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`Server running at http://<span class="subst">$&#123;hostname&#125;</span>:<span class="subst">$&#123;port&#125;</span>/`</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>启动http服务</p>
<p><img src="/2022/11/03/web/%E8%BF%9B%E9%98%B6/Node.js/node%E5%9F%BA%E7%A1%80/image-20221103203843976.png" alt="image-20221103203843976"></p>
<p>浏览器访问</p>
<p><img src="/2022/11/03/web/%E8%BF%9B%E9%98%B6/Node.js/node%E5%9F%BA%E7%A1%80/image-20221103203913961.png" alt="image-20221103203913961"></p>
<p>要运行此代码片段，则将其另存为 <code>server.js</code> 文件并在终端中运行 <code>node server.js</code>。（本例中是index.js）</p>
<p>此代码首先引入 Node.js <a target="_blank" rel="noopener" href="http://nodejs.cn/api/http.html"><code>http</code> 模块</a>。</p>
<p>Node.js 有一个很棒的<a target="_blank" rel="noopener" href="http://nodejs.cn/api/">标准库</a>，包括一流的网络支持。</p>
<p><code>http</code> 的 <code>createServer()</code> 方法创建新的 HTTP 服务器并返回。</p>
<p>服务器设置为监听指定的端口和主机名。 当服务器准备好时，则回调函数被调用，在此示例中会通知我们服务器正在运行。</p>
<p>每当接收到新请求时，都会调用 <a target="_blank" rel="noopener" href="http://nodejs.cn/api/http.html#http_event_request"><code>request</code> 事件</a>，其提供两个对象：请求（<a target="_blank" rel="noopener" href="http://nodejs.cn/api/http.html#http_class_http_incomingmessage"><code>http.IncomingMessage</code></a> 对象）和响应（<a target="_blank" rel="noopener" href="http://nodejs.cn/api/http.html#http_class_http_serverresponse"><code>http.ServerResponse</code></a> 对象）。</p>
<p>这两个对象对于处理 HTTP 调用是必不可少的。</p>
<p>第一个提供请求的详细信息。 在这个简单的示例中，它没有被使用，但是你可以访问请求头和请求数据。</p>
<p>第二个用于向调用者返回数据。</p>
<p>在此示例中：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">res.<span class="property">statusCode</span> = <span class="number">200</span></span><br></pre></td></tr></table></figure>

<p>我们将 statusCode 属性设置为 200，以指示成功响应。</p>
<p>我们设置了 Content-Type 标头：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">res.<span class="title function_">setHeader</span>(<span class="string">&#x27;Content-Type&#x27;</span>, <span class="string">&#x27;text/plain&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>然后我们关闭响应，将内容作为参数添加到 <code>end()</code>：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">res.<span class="title function_">end</span>(<span class="string">&#x27;Hello World\n&#x27;</span>)</span><br></pre></td></tr></table></figure>

<h2 id="Node-js-框架和工具"><a href="#Node-js-框架和工具" class="headerlink" title="Node.js 框架和工具"></a>Node.js 框架和工具</h2><p>Node.js 是一个底层平台。 为了让开发者的工作变得轻松有趣，社区在 Node.js 上构建了数千个库。</p>
<p>许多随着时间的推移而成为流行的选择。 以下是值得学习的部分列表：</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://adonisjs.com/"><strong>AdonisJS</strong></a>：基于 TypeScript 的全功能框架，高度关注开发者的效率、稳定和信任。Adonis 是最快的 Node.js Web 框架之一。</li>
<li><a target="_blank" rel="noopener" href="https://eggjs.org/en/"><strong>Egg.js</strong></a>：使用 Node.js 和 Koa 构建更好的企业级框架和应用程序的框架。</li>
<li><a target="_blank" rel="noopener" href="https://expressjs.com/"><strong>Express</strong></a>：提供了最简单而强大的方式来创建 Web 服务器。它的极简主义方法、没有偏见、专注于服务器的核心功能，是其成功的关键。</li>
<li><a target="_blank" rel="noopener" href="https://fastify.io/"><strong>Fastify</strong></a>：高度专注于以最少的开销和强大的插件架构提供最佳开发者体验的 Web 框架。Fastify 是最快的 Node.js Web 之一 构架。</li>
<li><a target="_blank" rel="noopener" href="https://feathersjs.com/"><strong>FeatherJS</strong></a>：Feathers 是轻量级的网络框架，用于使用 JavaScript 或 TypeScript 创建实时应用程序和 REST API。在几分钟内构建原型，在几天内构建可用于生产的应用程序。</li>
<li><a target="_blank" rel="noopener" href="https://www.gatsbyjs.com/"><strong>Gatsby</strong></a>：基于 <a target="_blank" rel="noopener" href="https://reactjs.org/">React</a>、由 <a target="_blank" rel="noopener" href="https://graphql.org/">GraphQL</a> 驱动的静态网站生成器，具有非常丰富的插件和启动器生态系统。</li>
<li><a target="_blank" rel="noopener" href="https://hapijs.com/"><strong>hapi</strong></a>：用于构建应用程序和服务的富框架，使开发者能够专注于编写可重用的应用程序逻辑，而不是花时间搭建基础设施。</li>
<li><a target="_blank" rel="noopener" href="http://koajs.com/"><strong>koa</strong></a>：由 Express 背后的同一个团队构建，旨在更简单、更小，建立在多年知识的基础上。新项目的诞生是为了在不破坏现有社区的情况下创建不兼容的更改。</li>
<li><a target="_blank" rel="noopener" href="https://loopback.io/"><strong>Loopback.io</strong></a>：使构建需要复杂集成的现代应用程序变得容易。</li>
<li><a target="_blank" rel="noopener" href="https://meteor.com/"><strong>Meteor</strong></a>：非常强大的全栈框架，为您提供同构的方法来使用 JavaScript 构建应用程序，在客户端和服务器上共享代码。曾经是提供所有功能的现成工具，现在可以与前端库 <a target="_blank" rel="noopener" href="https://reactjs.org/">React</a>、<a target="_blank" rel="noopener" href="https://vuejs.org/">Vue</a> 和 <a target="_blank" rel="noopener" href="https://angular.io/">Angular</a> 集成。也可用于创建移动应用程序。</li>
<li><a target="_blank" rel="noopener" href="https://github.com/zeit/micro"><strong>Micro</strong></a>：提供了非常轻量级的服务器来创建异步的 HTTP 微服务。</li>
<li><a target="_blank" rel="noopener" href="https://nestjs.com/"><strong>NestJS</strong></a>：基于 TypeScript 的渐进式 Node.js 框架，用于构建企业级的高效、可靠和可扩展的服务器端应用程序。</li>
<li><a target="_blank" rel="noopener" href="https://nextjs.org/"><strong>Next.js</strong></a>：<a target="_blank" rel="noopener" href="https://reactjs.org/">React</a> 框架，为您提供最佳的开发者体验，包括生产所需的所有功能：混合静态和服务器渲染、TypeScript 支持、智能捆绑、路由预取等。</li>
<li><a target="_blank" rel="noopener" href="https://nx.dev/"><strong>Nx</strong></a>：使用 NestJS、Express、<a target="_blank" rel="noopener" href="https://reactjs.org/">React</a>、<a target="_blank" rel="noopener" href="https://angular.io/">Angular</a> 等进行全栈大仓开发的工具包！Nx 有助于将您的开发从构建单个应用程序的团队扩展到多个团队协作开发多个应用程序！</li>
<li><a target="_blank" rel="noopener" href="https://remix.run/"><strong>Remix</strong></a>：Remix 是一个全栈 Web 框架，用于为 web 构建出色的用户体验。它开箱即用，提供构建现代 web 应用程序所需的一切（包括前端和后端）并将其部署到任何基于 JavaScript 的运行时环境（包括 Node.js）。</li>
<li><a target="_blank" rel="noopener" href="https://sapper.svelte.dev/"><strong>Sapper</strong></a>：Sapper 是用于构建各种规模的 Web 应用程序的框架，具有优美的开发体验和灵活的基于文件系统的路由。提供 SSR 等等！</li>
<li><a target="_blank" rel="noopener" href="https://socket.io/"><strong>Socket.io</strong></a>: 构建网络应用的实时通信引擎。</li>
<li><a target="_blank" rel="noopener" href="https://strapi.io/"><strong>Strapi</strong></a>：Strapi 是灵活开源的 Headless CMS，让开发者可以自由选择他们喜欢的工具和框架，同时还允许编辑人员轻松管理和分发他们的内容。通过插件系统使管理面板和 API 可扩展，Strapi 使世界上最大的公司能够在构建精美的数字体验的同时加速内容交付。</li>
</ul>
<h1 id="Node-js简史"><a href="#Node-js简史" class="headerlink" title="Node.js简史"></a>Node.js简史</h1><p>信不信由你，Node.js 诞生才 12 年。</p>
<p>相比之下，JavaScript 已存在 <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/JavaScript#Beginnings_at_Netscape">26 年</a> ，而 Web 则是 <a target="_blank" rel="noopener" href="https://howoldistheinter.net/">33 年</a>。</p>
<p>12 年在技术领域并不是很长的时间，但 Node.js 似乎已经存在很久了。</p>
<p>在这篇文章中，我们绘制了 Node.js 历史的大图，以透视事物。</p>
<h2 id="一点历史"><a href="#一点历史" class="headerlink" title="一点历史"></a>一点历史</h2><p>JavaScript 是一门编程语言，由 Netscape 创建，作为脚本工具用于在其浏览器 <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Netscape_Navigator">Netscape Navigator</a> 中操作网页。</p>
<p>Netscape 的部分商业模式是销售 Web 服务器，其中包括一个名为 Netscape LiveWire 的环境，可以使用服务器端 JavaScript 创建动态页面。 不幸的是，Netscape LiveWire 并不是很成功，服务器端 JavaScript 直到最近才流行起来，因为 Node.js 的引入。</p>
<p>引领 Node.js 兴起的一个关键因素是时机。 就在几年前，由于“Web 2.0”应用程序（如 Flickr、Gmail 等）向世界展示了网络上的现代体验，JavaScript 才开始被视为一门更严肃的语言。</p>
<p>随着许多浏览器竞相为用户提供最佳性能，JavaScript 引擎也变得相当出色。 主流浏览器背后的开发团队努力为 JavaScript 提供更好的支持，并找到使 JavaScript 运行得更快的方法。 Node.js 在引擎盖下使用的引擎 V8（也称为 Chrome V8，因为它是 Chromium 项目的开源 JavaScript 引擎），由于这场竞争而得到了显着改进。</p>
<p>Node.js 恰好是在正确的时间和地点构建的，但运气并不是它今天流行的唯一原因。 它为 JavaScript 服务端开发引入了很多创新思维和方法，已经帮助了很多开发者。</p>
<h2 id="2009"><a href="#2009" class="headerlink" title="2009"></a>2009</h2><ul>
<li>Node.js 诞生</li>
<li>第一版的 <a target="_blank" rel="noopener" href="https://www.npmjs.com/">npm</a> 被创建</li>
</ul>
<h2 id="2010"><a href="#2010" class="headerlink" title="2010"></a>2010</h2><ul>
<li><a target="_blank" rel="noopener" href="https://expressjs.com/">Express</a> 诞生</li>
<li><a target="_blank" rel="noopener" href="https://socket.io/">Socket.io</a> 诞生</li>
</ul>
<h2 id="2011"><a href="#2011" class="headerlink" title="2011"></a>2011</h2><ul>
<li>npm 发布 1.0 版本</li>
<li>较大的公司（LinkedIn、Uber 等）开始采用 Node.js</li>
<li><a target="_blank" rel="noopener" href="https://hapi.dev/">hapi</a> 诞生</li>
</ul>
<h2 id="2012"><a href="#2012" class="headerlink" title="2012"></a>2012</h2><ul>
<li>普及速度非常快</li>
</ul>
<h2 id="2013"><a href="#2013" class="headerlink" title="2013"></a>2013</h2><ul>
<li>第一个使用 Node.js 的大型博客平台：<a target="_blank" rel="noopener" href="https://ghost.org/">Ghost</a></li>
<li><a target="_blank" rel="noopener" href="https://koajs.com/">Koa</a> 诞生</li>
</ul>
<h2 id="2014"><a href="#2014" class="headerlink" title="2014"></a>2014</h2><ul>
<li>大分支：<a target="_blank" rel="noopener" href="https://iojs.org/">io.js</a> 是 Node.js 的一个主要分支，目的是引入 ES6 支持并加快推进速度</li>
</ul>
<h2 id="2015"><a href="#2015" class="headerlink" title="2015"></a>2015</h2><ul>
<li><a target="_blank" rel="noopener" href="https://foundation.nodejs.org/">Node.js 基金会</a> 诞生</li>
<li>IO.js 被合并回 Node.js</li>
<li>npm 引入私有模块</li>
<li>Node.js 4（以前从未发布过 1、2 和 3 版本）</li>
</ul>
<h2 id="2016"><a href="#2016" class="headerlink" title="2016"></a>2016</h2><ul>
<li><a target="_blank" rel="noopener" href="https://blog.npmjs.org/post/141577284765/kik-left-pad-and-npm">leftpad 事件</a></li>
<li><a target="_blank" rel="noopener" href="https://yarnpkg.com/en/">Yarn</a> 诞生</li>
<li>Node.js 6</li>
</ul>
<h2 id="2017"><a href="#2017" class="headerlink" title="2017"></a>2017</h2><ul>
<li>npm 更加注重安全性</li>
<li>Node.js 8</li>
<li>HTTP&#x2F;2</li>
<li>V8 在其测试套件中引入了 Node.js，除了 Chrome 之外，Node.js 正式成为 JS 引擎的标杆</li>
<li>每周 30 亿次 npm 下载</li>
</ul>
<h2 id="2018"><a href="#2018" class="headerlink" title="2018"></a>2018</h2><ul>
<li>Node.js 10</li>
<li><a target="_blank" rel="noopener" href="https://nodejs.org/api/esm.html">ES 模块</a> .mjs 实验支持</li>
<li>Node.js 11</li>
</ul>
<h2 id="2019"><a href="#2019" class="headerlink" title="2019"></a>2019</h2><ul>
<li>Node.js 12</li>
<li>Node.js 13</li>
</ul>
<h2 id="2020"><a href="#2020" class="headerlink" title="2020"></a>2020</h2><ul>
<li>Node.js 14</li>
<li>Node.js 15</li>
</ul>
<h2 id="2021"><a href="#2021" class="headerlink" title="2021"></a>2021</h2><ul>
<li>Node.js 16</li>
<li>Node.js 17</li>
</ul>
<h1 id="如何安装-Node-js"><a href="#如何安装-Node-js" class="headerlink" title="如何安装 Node.js"></a>如何安装 Node.js</h1><p>Node.js 可以通过多种方式安装。 这篇文章重点介绍了最常见、最方便的几种。</p>
<p>所有主流平台的官方软件包都可以在 <a target="_blank" rel="noopener" href="http://nodejs.cn/download/">http://nodejs.cn/download/</a> 获得。</p>
<p>安装 Node.js 的一种非常方便的方式是通过包管理器。 对于这种情况，每种操作系统都有其自身的包管理器。</p>
<p>其他适用于 MacOS、Linux 和 Windows 的包管理器列出在 <a target="_blank" rel="noopener" href="http://nodejs.cn/download/package-manager/%E3%80%82">http://nodejs.cn/download/package-manager/。</a></p>
<p><code>nvm</code> 是一种流行的运行 Node.js 的方式。 例如，它可以轻松地切换 Node.js 版本，也可以安装新版本用以尝试并且当出现问题时轻松地回滚。</p>
<p>这对于使用旧版本的 Node.js 来测试你的代码非常有用。</p>
<p>有关此选项的更多信息，请参阅 <a target="_blank" rel="noopener" href="https://github.com/nvm-sh/nvm%E3%80%82">https://github.com/nvm-sh/nvm。</a></p>
<p>无论如何，当安装 Node.js 后，你就可以在命令行中访问 <code>node</code> 可执行程序。</p>
<h1 id="使用-Node-js-需要了解多少-JavaScript"><a href="#使用-Node-js-需要了解多少-JavaScript" class="headerlink" title="使用 Node.js 需要了解多少 JavaScript"></a>使用 Node.js 需要了解多少 JavaScript</h1><p>作为初学者，很难达到对自己的编程能力有足够信心的地步。</p>
<p>在学习编码时，您可能还会对 JavaScript 和 Node.js 的边界感到困惑。</p>
<p>在深入研究 Node.js 之前，我建议您能很好地掌握主要的 JavaScript 概念：</p>
<ul>
<li>词汇结构</li>
<li>表达式</li>
<li>类型</li>
<li>类</li>
<li>变量</li>
<li>函数</li>
<li>this</li>
<li>箭头函数</li>
<li>循环</li>
<li>作用域</li>
<li>数组</li>
<li>模板字面量</li>
<li>分号</li>
<li>严格模式</li>
<li>ECMAScript 6、2016、2017</li>
</ul>
<p>牢记这些概念，您就可以成为一名精通浏览器和 Node.js 的 JavaScript 开发人员。</p>
<p>以下概念也是理解异步编程的关键，异步编程是 Node.js 的基本组成部分之一：</p>
<ul>
<li><a target="_blank" rel="noopener" href="http://nodejs.cn/learn/javascript-asynchronous-programming-and-callbacks">异步编程和回调</a></li>
<li><a target="_blank" rel="noopener" href="http://nodejs.cn/learn/discover-javascript-timers">定时器</a></li>
<li><a target="_blank" rel="noopener" href="http://nodejs.cn/learn/understanding-javascript-promises">Promise</a></li>
<li><a target="_blank" rel="noopener" href="http://nodejs.cn/learn/modern-asynchronous-javascript-with-async-and-await">异步和等待</a></li>
<li>闭包</li>
<li><a target="_blank" rel="noopener" href="http://nodejs.cn/learn/the-nodejs-event-loop">事件循环</a></li>
</ul>
<h1 id="Node-js-和浏览器的区别"><a href="#Node-js-和浏览器的区别" class="headerlink" title="Node.js 和浏览器的区别"></a>Node.js 和浏览器的区别</h1><p>浏览器和 Node.js 都使用 JavaScript 作为其编程语言。</p>
<p>构建在浏览器中运行的应用程序与构建 Node.js 应用程序完全不同。</p>
<p>尽管它始终是 JavaScript，但有一些关键的差异使体验完全不同。</p>
<p>从广泛使用 JavaScript 的前端开发人员的角度来看，Node.js 应用程序带来了巨大的优势：使用一种语言编写所有东西（前端和后端）的舒适性。</p>
<p>你有一个巨大的机会，因为我们知道完全、深入地学习一门编程语言是多么困难，并且通过使用同一种语言在 web 上执行你的所有工作，无论是在客户端还是在服务器上，你都处于独特的优势地位。</p>
<p>改变的是生态系统。</p>
<p>在浏览器中，您所做的大部分时间都是与 DOM 或其他 Web 平台 API（如 Cookies）进行交互。 这些当然在 Node.js 中不存在。 您没有浏览器提供的 <code>document</code>、<code>window</code> 和所有其他对象。</p>
<p>在浏览器中，我们没有 Node.js 通过其模块提供的所有友好的 API，比如文件系统访问功能。</p>
<p>另一个很大的不同是在 Node.js 中你可以控制环境。 除非您正在构建一个任何人都可以在任何地方部署的开源应用程序，否则您知道将在哪个版本的 Node.js 上运行该应用程序。 与浏览器环境（您无法奢侈地选择访问者将使用哪种浏览器）相比，这非常方便。</p>
<p>这意味着您可以编写您的 Node.js 版本支持的所有现代的 ES6-7-8-9 JavaScript。</p>
<p>由于 JavaScript 的发展速度如此之快，但浏览器的升级速度可能会有点慢，有时在 web 上你会被旧的 JavaScript &#x2F; ECMAScript 版本所困扰。</p>
<p>你可以在将代码发布到浏览器之前使用 Babel 将代码转换为 ES5 兼容，但在 Node.js 中，你不需要它。</p>
<p>另一个不同之处是 Node.js 使用 CommonJS 模块系统，而在浏览器中我们开始看到正在实施的 ES Modules 标准。</p>
<p>在实践中，这意味着你暂时在 Node.js 中使用 <code>require()</code>，在浏览器中使用 <code>import</code>。</p>
<h1 id="V8-JavaScript-引擎"><a href="#V8-JavaScript-引擎" class="headerlink" title="V8 JavaScript 引擎"></a>V8 JavaScript 引擎</h1><p>V8 是驱动 Google Chrome 的 JavaScript 引擎的名称。 这是在使用 Chrome 浏览时获取我们的 JavaScript 并执行它的东西。</p>
<p>V8 提供了 JavaScript 执行的运行时环境。 DOM 和其他 Web 平台 API 由浏览器提供。</p>
<p>很酷的是 JavaScript 引擎独立于它所在的浏览器。 这个关键特性促成了 Node.js 的兴起。 早在 2009 年，V8 就被选为驱动 Node.js 的引擎，随着 Node.js 的流行，V8 成为现在为大量使用 JavaScript 编写的服务器端代码提供驱动的引擎。</p>
<p>Node.js 生态系统非常庞大，这要归功于 V8，它还支持桌面应用程序，例如 Electron 等项目。</p>
<h2 id="其他-JS-引擎"><a href="#其他-JS-引擎" class="headerlink" title="其他 JS 引擎"></a>其他 JS 引擎</h2><p>其他浏览器有自己的 JavaScript 引擎：</p>
<ul>
<li>Firefox 具有 <a target="_blank" rel="noopener" href="https://spidermonkey.dev/"><strong>SpiderMonkey</strong></a></li>
<li>Safari 具有 <a target="_blank" rel="noopener" href="https://developer.apple.com/documentation/javascriptcore"><strong>JavaScriptCore</strong></a>（也称为 Nitro）</li>
<li>Edge 最初基于 <a target="_blank" rel="noopener" href="https://github.com/Microsoft/ChakraCore"><strong>Chakra</strong></a>，但最近<a target="_blank" rel="noopener" href="https://support.microsoft.com/en-us/help/4501095/download-the-new-microsoft-edge-based-on-chromium">使用 Chromium 和 V8 引擎重建</a>。</li>
</ul>
<p>还有许多其他的存在。</p>
<p>所有这些引擎都实现了 <a target="_blank" rel="noopener" href="https://www.ecma-international.org/publications/standards/Ecma-262.htm">ECMA ES-262 标准</a>，也称为 ECMAScript（JavaScript 使用的标准）。</p>
<h2 id="追求性能"><a href="#追求性能" class="headerlink" title="追求性能"></a>追求性能</h2><p>V8 是用 C++ 编写的，并且在不断改进。 它是可移植的，可以在 Mac、Windows、Linux 和其他几个系统上运行。</p>
<p>在此 V8 介绍中，我们将忽略 V8 的实现细节：它们可以在更权威的网站上找到（例如 <a target="_blank" rel="noopener" href="https://v8.dev/">V8 官方网站</a>），它们经常会从根本上随着时间的推移而变化。</p>
<p>V8 一直在发展，就像周围的其他 JavaScript 引擎一样，以加速 Web 和 Node.js 生态系统。</p>
<p>在 web 上，性能竞赛已经持续了多年，我们（作为用户和开发人员）从这场竞争中受益匪浅，因为我们年复一年地获得更快、更优化的机器。</p>
<h2 id="编译"><a href="#编译" class="headerlink" title="编译"></a>编译</h2><p>JavaScript 通常被认为是一门解释型语言，但是现代的 JavaScript 引擎不再只是解释 JavaScript，它们会编译它。</p>
<p>这从 2009 年开始发生，当时 SpiderMonkey JavaScript 编译器被添加到 Firefox 3.5 中，所有人都遵循这个想法。</p>
<p>JavaScript 由 V8 在内部使用即时 (JIT) 编译以加快执行速度。</p>
<p>这可能看起来有悖常理，但自从 2004 年 Google 地图推出以来，JavaScript 已经从一门通常执行几十行代码的语言发展为在浏览器中运行数千到数十万行代码的完整应用程序。</p>
<p>我们的应用程序现在可以在浏览器中运行数小时，而不仅仅是一些表单验证规则或简单的脚本。</p>
<p>在这个新世界中，编译 JavaScript 非常有意义，因为虽然准备好 JavaScript 可能需要更多时间，但是一旦完成，它将比纯粹的解释型代码性能更高。</p>
<h1 id="Node-js基本使用"><a href="#Node-js基本使用" class="headerlink" title="Node.js基本使用"></a><code>Node.js</code>基本使用</h1>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://mindcons.cn/2022/11/03/web/%E8%BF%9B%E9%98%B6/Node.js/node%E5%9F%BA%E7%A1%80/" data-id="cldol83hy006r3cx65ol7981e" data-title="node基础" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Node-js/" rel="tag">Node.js</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-web/进阶/微信小程序开发/微信小程序概述" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2022/10/15/web/%E8%BF%9B%E9%98%B6/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%BC%80%E5%8F%91/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E6%A6%82%E8%BF%B0/" class="article-date">
  <time class="dt-published" datetime="2022-10-15T01:03:02.000Z" itemprop="datePublished">2022-10-15</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E5%B0%8F%E7%A8%8B%E5%BA%8F/">小程序</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2022/10/15/web/%E8%BF%9B%E9%98%B6/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%BC%80%E5%8F%91/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E6%A6%82%E8%BF%B0/">微信小程序概述</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="开发基本准备"><a href="#开发基本准备" class="headerlink" title="开发基本准备"></a>开发基本准备</h1><p>注册：<a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/introduction/#%E5%B0%8F%E7%A8%8B%E5%BA%8F%E6%B3%A8%E5%86%8C">产品定位及功能介绍 | 微信开放文档 (qq.com)</a></p>
<p>最新接口文档：<a target="_blank" rel="noopener" href="https://github.com/Binaryify/NeteaseCloudMusicApi/releases">https://github.com/Binaryify/NeteaseCloudMusicApi/releases</a></p>
<p><a target="_blank" rel="noopener" href="https://binaryify.github.io/NeteaseCloudMusicApi/#/?id=neteasecloudmusicapi">https://binaryify.github.io/NeteaseCloudMusicApi/#/?id=neteasecloudmusicapi</a></p>
<h1 id="项目初始化"><a href="#项目初始化" class="headerlink" title="项目初始化"></a>项目初始化</h1><p>文件结构说明</p>
<p><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/config.html#%E5%85%A8%E5%B1%80%E9%85%8D%E7%BD%AE">小程序配置 | 微信开放文档 (qq.com)</a></p>
<h1 id="小程序云音乐"><a href="#小程序云音乐" class="headerlink" title="小程序云音乐"></a>小程序云音乐</h1><h2 id="配置项"><a href="#配置项" class="headerlink" title="配置项"></a>配置项</h2><p>项目的配置文件留着，其他都删掉</p>
<p><img src="/2022/10/15/web/%E8%BF%9B%E9%98%B6/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%BC%80%E5%8F%91/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E6%A6%82%E8%BF%B0/image-20221014223704330.png" alt="image-20221014223704330"></p>
<p>一开始会报错</p>
<p><img src="/2022/10/15/web/%E8%BF%9B%E9%98%B6/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%BC%80%E5%8F%91/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E6%A6%82%E8%BF%B0/image-20221014223116106.png" alt="image-20221014223116106"></p>
<h3 id="app-json"><a href="#app-json" class="headerlink" title="app.json"></a>app.json</h3><p>完整内容查看官方文档即可，<a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/config.html">小程序配置 | 微信开放文档 (qq.com)</a></p>
<p>新建app.json</p>
<p><img src="/2022/10/15/web/%E8%BF%9B%E9%98%B6/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%BC%80%E5%8F%91/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E6%A6%82%E8%BF%B0/image-20221014223736990.png" alt="image-20221014223736990"></p>
<p>报错，因为app.json不能为空，需要添加内容，</p>
<p>小程序根目录下的 <code>app.json</code> 文件用来对微信小程序进行全局配置，决定页面文件的路径、窗口表现、设置网络超时时间、设置多 tab 等。</p>
<p><img src="/2022/10/15/web/%E8%BF%9B%E9%98%B6/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%BC%80%E5%8F%91/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E6%A6%82%E8%BF%B0/image-20221014223808736.png" alt="image-20221014223808736"></p>
<p>必填的两个字段是</p>
<ul>
<li><p>pages，页面路径列表（必填）</p>
</li>
<li><p>sitemapLocation：</p>
<ul>
<li>指明 <a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/reference/configuration/sitemap.html">sitemap.json</a> 的位置；</li>
<li>默认为 ‘sitemap.json’ 即在 app.json 同级目录下名字的 <code>sitemap.json</code> 文件，可以不填了</li>
</ul>
</li>
</ul>
<h3 id="创建页面"><a href="#创建页面" class="headerlink" title="创建页面"></a>创建页面</h3><p>增加一个pages字段，保存后微信开发者工具会自动创建对应的4个文件，显示的页面在这里读取</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;pages&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="string">&quot;pages/index/index&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="string">&quot;pages/logs/index&quot;</span></span><br><span class="line">  <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<h3 id="设置窗口"><a href="#设置窗口" class="headerlink" title="设置窗口"></a>设置窗口</h3><p>window字段，用于设置小程序的状态栏、导航条、标题、窗口背景色。<a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/reference/configuration/app.html#window">全局配置 | 微信开放文档 (qq.com)</a></p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;pages&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="string">&quot;pages/index/index&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="string">&quot;pages/logs/index&quot;</span></span><br><span class="line">  <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;window&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;navigationBarBackgroundColor&quot;</span><span class="punctuation">:</span> <span class="string">&quot;#000&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;navigationBarTextStyle&quot;</span><span class="punctuation">:</span> <span class="string">&quot;white&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;navigationBarTitleText&quot;</span><span class="punctuation">:</span> <span class="string">&quot;小程序&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<p><img src="/2022/10/15/web/%E8%BF%9B%E9%98%B6/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%BC%80%E5%8F%91/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E6%A6%82%E8%BF%B0/image-20221015081519071.png" alt="image-20221015081519071"></p>
<h3 id="app-js"><a href="#app-js" class="headerlink" title="app.js"></a>app.js</h3><p>除了app.json文件，全局还应该有一个app.js文件，<a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/app-service/app.html">注册小程序 | 微信开放文档 (qq.com)</a></p>
<p>每个小程序都需要在 <code>app.js</code> 中调用 <code>App</code> 方法注册小程序实例，绑定生命周期回调函数、错误监听和页面不存在监听函数等。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// app.js</span></span><br><span class="line"><span class="title class_">App</span>(&#123;</span><br><span class="line">  onLaunch (options) &#123;</span><br><span class="line">    <span class="comment">// Do something initial when launch.</span></span><br><span class="line">  &#125;,</span><br><span class="line">  onShow (options) &#123;</span><br><span class="line">    <span class="comment">// Do something when show.</span></span><br><span class="line">  &#125;,</span><br><span class="line">  onHide () &#123;</span><br><span class="line">    <span class="comment">// Do something when hide.</span></span><br><span class="line">  &#125;,</span><br><span class="line">  onError (msg) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(msg)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">globalData</span>: <span class="string">&#x27;I am global data&#x27;</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="app-wxss"><a href="#app-wxss" class="headerlink" title="app.wxss"></a>app.wxss</h3><p>全局公共样式，<a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/view/wxss.html">WXSS | 微信开放文档 (qq.com)</a></p>
<h3 id="窗口配置"><a href="#窗口配置" class="headerlink" title="窗口配置"></a>窗口配置</h3><p>新建一个空项目</p>
<p>在全局设置窗口颜色</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&quot;window&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;backgroundTextStyle&quot;</span><span class="punctuation">:</span> <span class="string">&quot;light&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;navigationBarBackgroundColor&quot;</span><span class="punctuation">:</span> <span class="string">&quot;#d43c33&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;navigationBarTitleText&quot;</span><span class="punctuation">:</span> <span class="string">&quot;云音乐&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;navigationBarTextStyle&quot;</span><span class="punctuation">:</span> <span class="string">&quot;white&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br></pre></td></tr></table></figure>

<p><img src="/2022/10/15/web/%E8%BF%9B%E9%98%B6/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%BC%80%E5%8F%91/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E6%A6%82%E8%BF%B0/image-20221015194312378.png" alt="image-20221015194312378"></p>
<h3 id="编写页面"><a href="#编写页面" class="headerlink" title="编写页面"></a>编写页面</h3><p>修改pages&#x2F;index&#x2F;index.wxml</p>
<p><code>view</code>标签相当于<code>div</code>，<code>text</code>标签相当于<code>span</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--pages/index/index.wxml--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">image</span> <span class="attr">src</span>=<span class="string">&quot;/static/images/nvsheng.jpg&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">image</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">text</span>&gt;</span>北方汉子<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">text</span>&gt;</span>Hello World<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>微信开发者工具，不支持文件的复制，可以在本地文件夹复制下（静态资源：）</p>
<p>路径直接从根路径开始写，保存查看页面</p>
<p><img src="/2022/10/15/web/%E8%BF%9B%E9%98%B6/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%BC%80%E5%8F%91/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E6%A6%82%E8%BF%B0/image-20221015083222527.png" alt="image-20221015083222527"></p>
<p>添加类名开始写样式</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--pages/index/index.wxml--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;indexContainer&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">image</span> <span class="attr">class</span>=<span class="string">&quot;avatarUrl&quot;</span> <span class="attr">src</span>=<span class="string">&quot;/static/images/nvsheng.jpg&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">image</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;url&quot;</span>&gt;</span>北方汉子<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;goStudy&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">text</span>&gt;</span>Hello World<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>index.wxss</p>
<p>不能用px作为单位，否则盒子大小不会随着机型分辨率的变化而变化，如果写100px，在任何机型上就都是100px，需要做一下适配（用微信提供的rpx单位）</p>
<p>在iphone6上是100px，随着屏幕变大，在6 plus上的盒子大小应该大一点</p>
<p>那么还能是100rpx吗？不能</p>
<ul>
<li>rpx（responsive pixel）: 可以根据屏幕宽度进行自适应。规定屏幕宽为750rpx。如在 iPhone6 上，屏幕宽度为375px，共有750个物理像素，则750rpx &#x3D; 375px &#x3D; 750物理像素，1rpx &#x3D; 0.5px &#x3D; 1物理像素。</li>
<li><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/view/wxss.html">WXSS | 微信开放文档 (qq.com)</a></li>
</ul>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* pages/index/index.wxss */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* 最外层包了个page标签，相当于body */</span></span><br><span class="line"><span class="comment">/* page放这里不合适，小程序会给每个页面都加一个page标签，其他页面想用就用不了，放到公共样式app.wxss里 */</span></span><br><span class="line"><span class="comment">/* page &#123;</span></span><br><span class="line"><span class="comment">  height: 100%;</span></span><br><span class="line"><span class="comment">&#125; */</span></span><br><span class="line"><span class="selector-class">.indexContainer</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">flex-direction</span>: column;</span><br><span class="line">  <span class="attribute">align-items</span>: center;</span><br><span class="line">  <span class="attribute">background-color</span>: aliceblue; <span class="comment">/*由于是flex布局，高度被内容撑开，不是全屏的*/</span></span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.avatarUrl</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">200</span>rpx;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">200</span>rpx;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">50%</span>;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">100</span>rpx <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.userName</span> &#123;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">32</span>rpx;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">100</span>rpx <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.goStudy</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">300</span>rpx;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">80</span>rpx;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">80</span>rpx;</span><br><span class="line">  <span class="attribute">text-align</span>: center;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">28</span>rpx;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#333</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">10</span>rpx;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>app.wxss</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* app.wxss */</span></span><br><span class="line">page &#123;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>效果：</p>
<p><img src="/2022/10/15/web/%E8%BF%9B%E9%98%B6/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%BC%80%E5%8F%91/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E6%A6%82%E8%BF%B0/image-20221015090618161.png" alt="image-20221015090618161"></p>
<p>优化：图片很明显尺寸不对</p>
<p>原生小程序的wxss不支持background-image的import导入，<a target="_blank" rel="noopener" href="https://www.wzjm.cn/phper/90.html%EF%BC%8C">https://www.wzjm.cn/phper/90.html，</a></p>
<ul>
<li><p>可以使用内联样式后，使用background的属性</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;avatarUrl&quot;</span> <span class="attr">style</span>=<span class="string">&quot;background-image:url(/static/images/nvsheng.jpg)&quot;</span>&gt;</span> <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">  </span><br></pre></td></tr></table></figure>

<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.avatarUrl</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">200</span>rpx;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">200</span>rpx;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">50%</span>;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">100</span>rpx <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">background-size</span>: cover;</span><br><span class="line">  <span class="attribute">background-position</span>: center;</span><br><span class="line">  <span class="comment">/* background-image: url(&#x27;static/images/nvsheng.jpg&#x27;);  */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<p>直接使用image的<code>object-fit:cover</code>也没有生效，小程序不支持此属性，官方提供了自己的方法，mode属性。<a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/component/image.html">image | 微信开放文档 (qq.com)</a></p>
<p>╭(╯^╰)╮</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">image</span> <span class="attr">class</span>=<span class="string">&quot;avatarUrl&quot;</span> <span class="attr">src</span>=<span class="string">&quot;/static/images/nvsheng.jpg&quot;</span> <span class="attr">mode</span>=<span class="string">&quot;aspectFill&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">image</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.avatarUrl</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">200</span>rpx;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">200</span>rpx;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">50%</span>;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">100</span>rpx <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>效果，头像不再是压缩的了：</p>
<p><img src="/2022/10/15/web/%E8%BF%9B%E9%98%B6/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%BC%80%E5%8F%91/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E6%A6%82%E8%BF%B0/image-20221015094047301.png" alt="image-20221015094047301"></p>
<h2 id="开发工具"><a href="#开发工具" class="headerlink" title="开发工具"></a>开发工具</h2><h3 id="使用IDE开发微信小程序"><a href="#使用IDE开发微信小程序" class="headerlink" title="使用IDE开发微信小程序"></a>使用IDE开发微信小程序</h3><h4 id="vscode"><a href="#vscode" class="headerlink" title="vscode"></a>vscode</h4><ul>
<li><p>识别wxss和wxml文件</p>
<ul>
<li><p>选择设置【Ctrl+，】或通过管理-设置</p>
</li>
<li><p>选择右上角图标，第二个图标</p>
<p><img src="/2022/10/15/web/%E8%BF%9B%E9%98%B6/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%BC%80%E5%8F%91/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E6%A6%82%E8%BF%B0/image-20221015200604684.png" alt="image-20221015200604684"></p>
</li>
<li><p>在setting.json中添加如下代码</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&quot;files.associations&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span> <span class="attr">&quot;*.wxml&quot;</span><span class="punctuation">:</span> <span class="string">&quot;html&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;*.wxss&quot;</span><span class="punctuation">:</span> <span class="string">&quot;css&quot;</span><span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>安装相应插件</p>
<ul>
<li><p>小程序开发助手</p>
<p><img src="/2022/10/15/web/%E8%BF%9B%E9%98%B6/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%BC%80%E5%8F%91/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E6%A6%82%E8%BF%B0/image-20221015200920631.png" alt="image-20221015200920631"></p>
</li>
<li><p>WXML：微信小程序wxml格式化以及高亮组件(高度自定义)</p>
<p><img src="/2022/10/15/web/%E8%BF%9B%E9%98%B6/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%BC%80%E5%8F%91/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E6%A6%82%E8%BF%B0/image-20221015200903093.png" alt="image-20221015200903093"></p>
</li>
<li><p>WXSS－peek：为wxss样式提供跳转到定义功能</p>
<p><img src="/2022/10/15/web/%E8%BF%9B%E9%98%B6/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%BC%80%E5%8F%91/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E6%A6%82%E8%BF%B0/image-20221015201053219.png" alt="image-20221015201053219"></p>
</li>
<li><p>vscode weapp api：为vscode提供小程序<a target="_blank" rel="noopener" href="https://so.csdn.net/so/search?q=API&spm=1001.2101.3001.7020">API</a>提示及代码片段</p>
</li>
</ul>
</li>
<li><p>vscode开发小程序只是起到了编辑的效果，真正的调试等还需要在小程序开发工具中进行。</p>
</li>
</ul>
<h3 id="微信小程序中使用字体图标"><a href="#微信小程序中使用字体图标" class="headerlink" title="微信小程序中使用字体图标"></a>微信小程序中使用字体图标</h3><p>阿里图标库选好图标后，由于是css，需要手动复制到wxss文件中，和平时项目中使用iconfont一样，使用类名</p>
<p>如果图标没出来，重启下微信开发者工具</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 五个图标导航区域 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;navContainer&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;navItem&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;iconfont icon-tuijian&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;desc&quot;</span>&gt;</span>每日推荐<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;navItem&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;iconfont icon-gedan&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;desc&quot;</span>&gt;</span>歌单<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;navItem&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;iconfont icon-paixingbang&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;desc&quot;</span>&gt;</span>排行榜<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;navItem&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;iconfont icon-tuijian&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;desc&quot;</span>&gt;</span>电台<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;navItem&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;iconfont icon-zhibo&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;desc&quot;</span>&gt;</span>直播<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>



<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.navContainer</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.navItem</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">flex-direction</span>: column;</span><br><span class="line">  <span class="attribute">align-items</span>: center;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">20%</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.navItem</span> <span class="selector-class">.iconfont</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100</span>rpx;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100</span>rpx;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">20</span>rpx <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="built_in">rgb</span>(<span class="number">240</span>, <span class="number">19</span>, <span class="number">19</span>);</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">50%</span>;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">50</span>rpx;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">100</span>rpx;</span><br><span class="line">  <span class="attribute">text-align</span>: center;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.navItem</span> <span class="selector-class">.desc</span> &#123;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">26</span>rpx;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>效果：</p>
<p><img src="/2022/10/15/web/%E8%BF%9B%E9%98%B6/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%BC%80%E5%8F%91/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E6%A6%82%E8%BF%B0/image-20221016102622176.png" alt="image-20221016102622176"></p>
<h3 id="使用vant框架"><a href="#使用vant框架" class="headerlink" title="使用vant框架"></a>使用vant框架</h3><p><a target="_blank" rel="noopener" href="https://gitee.com/vant-contrib/vant/#http://vant-contrib.gitee.io/vant-weapp">vant: 轻量、可靠的移动端 Vue 组件库 (gitee.com)</a></p>
<h4 id="背景知识"><a href="#背景知识" class="headerlink" title="背景知识"></a>背景知识</h4><p>使用 Vant Weapp 前，请确保你已经学习过微信官方的 <a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/">小程序简易教程</a> 和 <a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/custom-component/">自定义组件介绍</a>。</p>
<p>配置注意：</p>
<p>2.27.0的版本（或以上），没有手动指定<code>miniprogram_npm</code>路径，直接在<code>app.json</code>中引入也可使用</p>
<h3 id="使用Less预处理器"><a href="#使用Less预处理器" class="headerlink" title="使用Less预处理器"></a>使用Less预处理器</h3><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_42592823/article/details/123603996">https://blog.csdn.net/qq_42592823/article/details/123603996</a></p>
<p>vscode下载插件并配置</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&quot;less.compile&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;outExt&quot;</span><span class="punctuation">:</span> <span class="string">&quot;.wxss&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<p>注意：只在小程序项目里配置</p>
<h2 id="获取用户信息"><a href="#获取用户信息" class="headerlink" title="获取用户信息"></a>获取用户信息</h2><p>前置知识：了解完<code>小程序语法</code>这一小节</p>
<h3 id="点击获取用户信息"><a href="#点击获取用户信息" class="headerlink" title="点击获取用户信息"></a>点击获取用户信息</h3><p><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/component/button.html">button | 微信开放文档 (qq.com)</a></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">image</span> <span class="attr">class</span>=<span class="string">&quot;avatarUrl&quot;</span> <span class="attr">src</span>=<span class="string">&quot;&#123;&#123;userInfo.avatarUrl&#125;&#125;&quot;</span> <span class="attr">mode</span>=<span class="string">&quot;aspectFill&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">image</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> <span class="attr">open-type</span>=<span class="string">&quot;getUserInfo&quot;</span> <span class="attr">bindgetuserinfo</span>=<span class="string">&quot;handleGetUserInfo&quot;</span>&gt;</span>点击授权<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;userName&quot;</span>&gt;</span>&#123;&#123;userInfo.nickName&#125;&#125;<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br></pre></td></tr></table></figure>



<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">data</span>: &#123;</span><br><span class="line">  <span class="attr">msg</span>: <span class="string">&#x27;初始化数据&#x27;</span>,</span><br><span class="line">  <span class="attr">userInfo</span>: &#123;&#125;, <span class="comment">//初始化用户数据</span></span><br><span class="line">&#125;,</span><br><span class="line"><span class="title function_">handleGetUserInfo</span>(<span class="params">res</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(res)</span><br><span class="line">  <span class="keyword">if</span>(res.<span class="property">detail</span>.<span class="property">userInfo</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">      <span class="attr">userInfo</span>: res.<span class="property">detail</span>.<span class="property">userInfo</span></span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<p>详细参考官网，button按钮的<code>open-type=&quot;getUserInfo&quot;</code>是开放的api，通过bindgetuserinfo绑定自定义回调，参数是点击后的详细信息</p>
<p><img src="/2022/10/15/web/%E8%BF%9B%E9%98%B6/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%BC%80%E5%8F%91/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E6%A6%82%E8%BF%B0/image-20221015190308372.png" alt="image-20221015190308372"></p>
<p>目前上面的写法，每次重新进入小程序，已经授权的用户信息会丢失，见下一小节</p>
<h3 id="onLoad时获取用户信息"><a href="#onLoad时获取用户信息" class="headerlink" title="onLoad时获取用户信息"></a>onLoad时获取用户信息</h3><p>什么时候获取用户信息？</p>
<ul>
<li><p>越早越好，因为要显示</p>
</li>
<li><p>放在onLoad里，使用<code>wx.getUserInfo</code>，<a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/api/open-api/user-info/wx.getUserInfo.html">wx.getUserInfo(Object object) | 微信开放文档 (qq.com)</a></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">onLoad</span>(<span class="params">options</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;我加载啦&#x27;</span>)</span><br><span class="line">  wx.<span class="title function_">getUserInfo</span>(&#123;</span><br><span class="line">    <span class="attr">success</span>: <span class="function">(<span class="params">res</span>) =&gt;</span> &#123; <span class="comment">// 要用箭头函数，回调函数被调用时，是wx页面实例调的</span></span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;获取授权成功&#x27;</span>, res)</span><br><span class="line">      <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">        <span class="attr">userInfo</span>: res.<span class="property">userInfo</span></span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">fail</span>: <span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;获取授权失败&#x27;</span>, err)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<p><img src="/2022/10/15/web/%E8%BF%9B%E9%98%B6/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%BC%80%E5%8F%91/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E6%A6%82%E8%BF%B0/image-20221015192210943.png" alt="image-20221015192210943"></p>
</li>
<li><p>由于之前的api，获取用户信息需要用户点击授权确认，放在onLoad里，是为了第二次进入小程序时，直接获取授权后的用户信息</p>
<ul>
<li>现在没那个弹出窗口了，进入时，后台直接就获取成功的结果了</li>
</ul>
</li>
</ul>
<p>使用条件渲染，优化代码：没授权时，头像和昵称的结构不应该显示</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">image</span> <span class="attr">wx:if</span>=<span class="string">&quot;&#123;&#123;userInfo.avatarUrl&#125;&#125;&quot;</span> <span class="attr">class</span>=<span class="string">&quot;avatarUrl&quot;</span> <span class="attr">src</span>=<span class="string">&quot;&#123;&#123;userInfo.avatarUrl&#125;&#125;&quot;</span> <span class="attr">mode</span>=<span class="string">&quot;aspectFill&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">image</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">wx:else</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> <span class="attr">open-type</span>=<span class="string">&quot;getUserInfo&quot;</span> <span class="attr">bindgetuserinfo</span>=<span class="string">&quot;handleGetUserInfo&quot;</span>&gt;</span>点击授权<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">text</span> <span class="attr">wx:if</span>=<span class="string">&quot;&#123;&#123;userInfo.avatarUrl&#125;&#125;&quot;</span> <span class="attr">class</span>=<span class="string">&quot;userName&quot;</span>&gt;</span>&#123;&#123;userInfo.nickName&#125;&#125;<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h2 id="轮播图"><a href="#轮播图" class="headerlink" title="轮播图"></a>轮播图</h2><p>使用swiper组件，<a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/component/swiper.html">swiper | 微信开放文档 (qq.com)</a></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--index.wxml--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 轮播图区域 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">swiper</span> <span class="attr">class</span>=<span class="string">&quot;banners&quot;</span> <span class="attr">indicator-dots</span> <span class="attr">indicator-color</span>=<span class="string">&quot;ivory&quot;</span> <span class="attr">indicator-active-color</span>=<span class="string">&quot;#d43c33&quot;</span> <span class="attr">autoplay</span> <span class="attr">interval</span>=<span class="string">&quot;5000&quot;</span> <span class="attr">circular</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">swiper-item</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">image</span> <span class="attr">mode</span>=<span class="string">&quot;aspectFill&quot;</span> <span class="attr">src</span>=<span class="string">&quot;/static/images/nvsheng.jpg&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">image</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">swiper-item</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">swiper-item</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">image</span> <span class="attr">mode</span>=<span class="string">&quot;aspectFill&quot;</span> <span class="attr">src</span>=<span class="string">&quot;/static/images/nvsheng.jpg&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">image</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">swiper-item</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">swiper-item</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">image</span> <span class="attr">mode</span>=<span class="string">&quot;aspectFill&quot;</span> <span class="attr">src</span>=<span class="string">&quot;/static/images/nvsheng.jpg&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">image</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">swiper-item</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">swiper</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src="/2022/10/15/web/%E8%BF%9B%E9%98%B6/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%BC%80%E5%8F%91/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E6%A6%82%E8%BF%B0/image-20221015200104128.png" alt="image-20221015200104128"></p>
<h2 id="推荐歌曲"><a href="#推荐歌曲" class="headerlink" title="推荐歌曲"></a>推荐歌曲</h2><p>scroll-view，可滚动的试图区域，<a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/component/scroll-view.html">scroll-view | 微信开放文档 (qq.com)</a></p>
<p>该组件需要设置enable-flex属性为true，设置flex才会生效</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 推荐歌曲区域 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;recommendContainer&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;header&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;title&quot;</span>&gt;</span>123<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;desc&quot;</span>&gt;</span>为你精心推荐<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;more&quot;</span>&gt;</span>查看更多<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 内容区 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">scroll-view</span> <span class="attr">class</span>=<span class="string">&quot;recommendScroll&quot;</span> <span class="attr">enable-flex</span> <span class="attr">scroll-x</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;scrollItem&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">image</span> <span class="attr">mode</span>=<span class="string">&quot;aspectFill&quot;</span> <span class="attr">src</span>=<span class="string">&quot;/static/images/nvsheng.jpg&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">image</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">text</span>&gt;</span>推荐歌曲内容区<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;scrollItem&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">image</span> <span class="attr">mode</span>=<span class="string">&quot;aspectFill&quot;</span> <span class="attr">src</span>=<span class="string">&quot;/static/images/nvsheng.jpg&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">image</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">text</span>&gt;</span>推荐歌曲内容区<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;scrollItem&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">image</span> <span class="attr">mode</span>=<span class="string">&quot;aspectFill&quot;</span> <span class="attr">src</span>=<span class="string">&quot;/static/images/nvsheng.jpg&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">image</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">text</span>&gt;</span>推荐歌曲内容区推荐歌曲内容区<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;scrollItem&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">image</span> <span class="attr">mode</span>=<span class="string">&quot;aspectFill&quot;</span> <span class="attr">src</span>=<span class="string">&quot;/static/images/nvsheng.jpg&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">image</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">text</span>&gt;</span>推荐歌曲内容区推荐歌曲内容区<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;scrollItem&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">image</span> <span class="attr">mode</span>=<span class="string">&quot;aspectFill&quot;</span> <span class="attr">src</span>=<span class="string">&quot;/static/images/nvsheng.jpg&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">image</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">text</span>&gt;</span>推荐歌曲内容区推荐歌曲内容区<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;scrollItem&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">image</span> <span class="attr">mode</span>=<span class="string">&quot;aspectFill&quot;</span> <span class="attr">src</span>=<span class="string">&quot;/static/images/nvsheng.jpg&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">image</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">text</span>&gt;</span>aaaa<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">scroll-view</span>&gt;</span></span><br><span class="line">    </span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>



<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 推荐歌曲开始 */</span></span><br><span class="line"><span class="selector-class">.recommendContainer</span> &#123;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">20</span>rpx;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.recommendContainer</span> <span class="selector-class">.header</span> &#123;</span><br><span class="line">  <span class="attribute">margin-bottom</span>: <span class="number">20</span>rpx;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.recommendContainer</span> <span class="selector-class">.header</span> <span class="selector-class">.title</span> &#123;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">32</span>rpx;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">40</span>rpx;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#666</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.recommendContainer</span> <span class="selector-class">.header</span> <span class="selector-class">.item</span> &#123;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">60</span>rpx;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.recommendContainer</span> <span class="selector-class">.header</span> <span class="selector-class">.desc</span> &#123;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">30</span>rpx;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">60</span>rpx;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.recommendContainer</span> <span class="selector-class">.header</span> <span class="selector-class">.more</span> &#123;</span><br><span class="line">  <span class="attribute">float</span>: right;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">10</span>rpx <span class="number">20</span>rpx;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#333</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">30</span>rpx;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">24</span>rpx;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 推荐歌曲内容区开始 */</span></span><br><span class="line"><span class="selector-class">.recommendScroll</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.scrollItem</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">200</span>rpx;</span><br><span class="line">  <span class="attribute">margin-right</span>: <span class="number">20</span>rpx;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.scrollItem</span> image &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">200</span>rpx;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">200</span>rpx;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">10</span>rpx;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.scrollItem</span> text &#123;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">26</span>rpx;</span><br><span class="line">  <span class="comment">/* 单行文本溢出 */</span></span><br><span class="line">  <span class="comment">/* display: block;</span></span><br><span class="line"><span class="comment">  white-space: nowrap;</span></span><br><span class="line"><span class="comment">  overflow: hidden;</span></span><br><span class="line"><span class="comment">  text-overflow: ellipsis; */</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">/* 多行文本溢出 */</span></span><br><span class="line">  <span class="attribute">overflow</span>: hidden;</span><br><span class="line">  <span class="attribute">text-overflow</span>: ellipsis;</span><br><span class="line">  <span class="attribute">display</span>: -webkit-box;</span><br><span class="line">  -webkit-box-orient: vertical;</span><br><span class="line">  -webkit-line-clamp: <span class="number">2</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 推荐歌曲内容区结束 */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* 推荐歌曲结束 */</span></span><br></pre></td></tr></table></figure>

<h2 id="前后端交互"><a href="#前后端交互" class="headerlink" title="前后端交互"></a>前后端交互</h2><p>网络基础说明文档：<a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/ability/network.html">网络 | 微信开放文档 (qq.com)</a></p>
<p>网易云音乐有自己的开放接口，我们用nodejs做一下中间层，分发路由</p>
<p>我们把服务部署在服务器上（也可以直接跑本地）</p>
<p>安装pm2管理</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm i pm2</span><br><span class="line">npx pm2 start app.js --name music</span><br></pre></td></tr></table></figure>

<p><img src="/2022/10/15/web/%E8%BF%9B%E9%98%B6/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%BC%80%E5%8F%91/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E6%A6%82%E8%BF%B0/image-20221017230803035.png" alt="image-20221017230803035"></p>
<p>接口文档及后台，见项目资料</p>
<p>正式编写代码时，用测试工具测试一下接口</p>
<p>微信中发送网络请求：<a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/api/network/request/wx.request.html">RequestTask | 微信开放文档 (qq.com)</a></p>
<p>语法：wx.request()</p>
<p>注意点：</p>
<ul>
<li>协议必须是https协议</li>
<li>一个接口最多配置20个域名</li>
<li>并发限制上限是10个</li>
</ul>
<p>启动后台测试服务</p>
<p><img src="/2022/10/15/web/%E8%BF%9B%E9%98%B6/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%BC%80%E5%8F%91/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E6%A6%82%E8%BF%B0/image-20221016183008646.png" alt="image-20221016183008646"></p>
<p>在小程序后台配置接口地址，配置会失败</p>
<p><img src="/2022/10/15/web/%E8%BF%9B%E9%98%B6/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%BC%80%E5%8F%91/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E6%A6%82%E8%BF%B0/image-20221016182917797.png" alt="image-20221016182917797"></p>
<p><img src="/2022/10/15/web/%E8%BF%9B%E9%98%B6/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%BC%80%E5%8F%91/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E6%A6%82%E8%BF%B0/image-20221016183305281.png" alt="image-20221016183305281"></p>
<p>只能配已备案过的域名，如果是在企业开发，后台应该提供的是https的接口</p>
<ul>
<li>包括：域名申请、付费、企业备案、接口部署</li>
</ul>
<p>不过开发时，可以在开发者工具中，设置不校验合法域名</p>
<p><img src="/2022/10/15/web/%E8%BF%9B%E9%98%B6/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%BC%80%E5%8F%91/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E6%A6%82%E8%BF%B0/image-20221016182731361.png" alt="image-20221016182731361"></p>
<p>在onLoad或者onReady里面发送</p>
<p><code>pages/index/index.js</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// index.js</span></span><br><span class="line"><span class="title class_">Page</span>(&#123;</span><br><span class="line">    <span class="attr">data</span>: &#123;</span><br><span class="line"></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">onLoad</span>: <span class="keyword">function</span>(<span class="params">options</span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;index加载了&#x27;</span>)</span><br><span class="line">        wx.<span class="title function_">request</span>(&#123;</span><br><span class="line">            <span class="attr">url</span>: <span class="string">&#x27;http://localhost:3000/banner&#x27;</span>,</span><br><span class="line">            <span class="attr">data</span>: &#123;</span><br><span class="line">                <span class="attr">type</span>: <span class="number">2</span></span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="attr">success</span>: <span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">                <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;请求成功&#x27;</span>, res)</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="attr">fail</span>: <span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">                <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;请求失败&#x27;</span>, err)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>请求成功：</p>
<p><img src="/2022/10/15/web/%E8%BF%9B%E9%98%B6/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%BC%80%E5%8F%91/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E6%A6%82%E8%BF%B0/image-20221016184358852.png" alt="image-20221016184358852"></p>
<h2 id="封装请求功能函数"><a href="#封装请求功能函数" class="headerlink" title="封装请求功能函数"></a>封装请求功能函数</h2><blockquote>
<p>发送ajax请求</p>
<p>1.封装功能函数</p>
<ul>
<li>功能点明确</li>
<li>函数内部应该保留固定代码（静态的）</li>
<li>将动态的数据抽取成形参，由使用者根据自身的情况动态的传入实参</li>
<li>一个良好的功能函数应该设置形参的默认值（ES6的形参默认值）</li>
</ul>
<p>2.封装功能组件</p>
<ul>
<li><p>功能点明确</p>
</li>
<li><p>组件内部保留静态代码</p>
</li>
<li><p>将动态的数据抽取成props参数，由使用者根据自身的情况以标签属性的形式动态传入props数据</p>
</li>
<li><p>一个良好的组件应该设置组件的必要性及数据类型</p>
<p>props: {</p>
<p>​	msg: {</p>
<p>​		required:  true,</p>
<p>​		default: 默认值,</p>
<p>​		type: String</p>
<p>​	}</p>
<p>}</p>
</li>
</ul>
</blockquote>
<p>新建<code>utils/request.js</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> config <span class="keyword">from</span> <span class="string">&#x27;./config.js&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> (url, data = &#123;&#125;, method = <span class="string">&#x27;GET&#x27;</span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">        wx.<span class="title function_">request</span>(&#123;</span><br><span class="line">            <span class="attr">url</span>: config.<span class="property">host</span> + url,</span><br><span class="line">            data,</span><br><span class="line">            <span class="attr">success</span>: <span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">                <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;请求成功&#x27;</span>, res)</span><br><span class="line">                <span class="title function_">resolve</span>(res.<span class="property">data</span>)</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="attr">fail</span>: <span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">                <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;请求失败&#x27;</span>, err)</span><br><span class="line">                <span class="title function_">reject</span>(err)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>新建配置文件</p>
<p><code>utils/config.js</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 服务器配置相关</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="attr">host</span>: <span class="string">&#x27;http://localhost:3000&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>发送请求</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// index.js</span></span><br><span class="line"><span class="keyword">import</span> request <span class="keyword">from</span> <span class="string">&#x27;../../utils/request.js&#x27;</span></span><br><span class="line"><span class="title class_">Page</span>(&#123;</span><br><span class="line">    <span class="attr">data</span>: &#123;</span><br><span class="line"></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">onLoad</span>: <span class="keyword">async</span> <span class="keyword">function</span>(<span class="params">options</span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;index加载了&#x27;</span>)</span><br><span class="line">        <span class="keyword">let</span> result = <span class="keyword">await</span> <span class="title function_">request</span>(<span class="string">&#x27;/banner&#x27;</span>, &#123;<span class="attr">type</span>: <span class="number">2</span>&#125;)</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(result)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="渲染轮播图数据"><a href="#渲染轮播图数据" class="headerlink" title="渲染轮播图数据"></a>渲染轮播图数据</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 轮播图区域 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">swiper</span> <span class="attr">class</span>=<span class="string">&quot;banners&quot;</span>	<span class="attr">indicator-dots</span> <span class="attr">indicator-color</span>=<span class="string">&quot;ivory&quot;</span> <span class="attr">indicator-active-color</span>=<span class="string">&quot;#d43c33&quot;</span> <span class="attr">autoplay</span> 	<span class="attr">interval</span>=<span class="string">&quot;5000&quot;</span> <span class="attr">circular</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">swiper-item</span> <span class="attr">wx:for</span>=<span class="string">&quot;&#123;&#123;bannerList&#125;&#125;&quot;</span> <span class="attr">wx:key</span>=<span class="string">&quot;bannerId&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">image</span> <span class="attr">mode</span>=<span class="string">&quot;aspectFill&quot;</span> <span class="attr">src</span>=<span class="string">&quot;&#123;&#123;item.pic&#125;&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">image</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">swiper-item</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">swiper</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// index.js</span></span><br><span class="line"><span class="keyword">import</span> request <span class="keyword">from</span> <span class="string">&#x27;../../utils/request.js&#x27;</span></span><br><span class="line"><span class="title class_">Page</span>(&#123;</span><br><span class="line">    <span class="attr">data</span>: &#123;</span><br><span class="line">        <span class="attr">bannerList</span>: []</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">onLoad</span>: <span class="keyword">async</span> <span class="keyword">function</span>(<span class="params">options</span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;index加载了&#x27;</span>)</span><br><span class="line">        <span class="keyword">let</span> bannerListData = <span class="keyword">await</span> <span class="title function_">request</span>(<span class="string">&#x27;/banner&#x27;</span>, &#123;<span class="attr">type</span>: <span class="number">2</span>&#125;)</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(bannerListData)</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">            <span class="attr">bannerList</span>: bannerListData.<span class="property">banners</span></span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>效果</p>
<p><img src="/2022/10/15/web/%E8%BF%9B%E9%98%B6/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%BC%80%E5%8F%91/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E6%A6%82%E8%BF%B0/image-20221016213848906.png" alt="image-20221016213848906"></p>
<h2 id="推荐歌曲动态实现"><a href="#推荐歌曲动态实现" class="headerlink" title="推荐歌曲动态实现"></a>推荐歌曲动态实现</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 推荐歌曲区域 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;recommendContainer&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;header&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;title&quot;</span>&gt;</span>推荐歌曲<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;desc&quot;</span>&gt;</span>为你精心推荐<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;more&quot;</span>&gt;</span>查看更多<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 内容区 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">scroll-view</span> <span class="attr">class</span>=<span class="string">&quot;recommendScroll&quot;</span> <span class="attr">enable-flex</span> <span class="attr">scroll-x</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;scrollItem&quot;</span> <span class="attr">wx:for</span>=<span class="string">&quot;&#123;&#123;recommendList&#125;&#125;&quot;</span> <span class="attr">wx:key</span>=<span class="string">&quot;id&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">image</span> <span class="attr">mode</span>=<span class="string">&quot;aspectFill&quot;</span> <span class="attr">src</span>=<span class="string">&quot;&#123;&#123;item.picUrl&#125;&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">image</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">text</span>&gt;</span>&#123;&#123;item.name&#125;&#125;<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">scroll-view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// index.js</span></span><br><span class="line"><span class="keyword">import</span> request <span class="keyword">from</span> <span class="string">&#x27;../../utils/request.js&#x27;</span></span><br><span class="line"><span class="title class_">Page</span>(&#123;</span><br><span class="line">    <span class="attr">data</span>: &#123;</span><br><span class="line">        <span class="attr">bannerList</span>: [], <span class="comment">// 轮播图数据</span></span><br><span class="line">        <span class="attr">recommendList</span>: [], <span class="comment">// 推荐歌单数据</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">onLoad</span>: <span class="keyword">async</span> <span class="keyword">function</span>(<span class="params">options</span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;index加载了&#x27;</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 获取轮播图数据</span></span><br><span class="line">        <span class="keyword">let</span> bannerListData = <span class="keyword">await</span> <span class="title function_">request</span>(<span class="string">&#x27;/banner&#x27;</span>, &#123;<span class="attr">type</span>: <span class="number">2</span>&#125;)</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">            <span class="attr">bannerList</span>: bannerListData.<span class="property">banners</span></span><br><span class="line">        &#125;)</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 获取歌单数据</span></span><br><span class="line">        <span class="keyword">let</span> recommendListData = <span class="keyword">await</span> <span class="title function_">request</span>(<span class="string">&#x27;/personalized&#x27;</span>, &#123;<span class="attr">limit</span>: <span class="number">10</span>&#125;)</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">            <span class="attr">recommendList</span>: recommendListData.<span class="property">result</span></span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>效果：</p>
<p><img src="/2022/10/15/web/%E8%BF%9B%E9%98%B6/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%BC%80%E5%8F%91/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E6%A6%82%E8%BF%B0/image-20221016215310501.png" alt="image-20221016215310501"></p>
<h2 id="自定义组件"><a href="#自定义组件" class="headerlink" title="自定义组件"></a>自定义组件</h2><p><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/reference/api/Component.html">Component(Object object) | 微信开放文档 (qq.com)</a></p>
<p>新建<code>components/NavHeader</code>，及对应的4个文件</p>
<p>定义组件</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--components/NavHeader.wxml--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;header&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;title&quot;</span>&gt;</span>推荐歌曲<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;desc&quot;</span>&gt;</span>为你精心推荐<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;more&quot;</span>&gt;</span>查看更多<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* components/NavHeader.wxss */</span></span><br><span class="line"><span class="selector-class">.header</span> &#123;</span><br><span class="line">    <span class="attribute">margin-bottom</span>: <span class="number">20</span>rpx;</span><br><span class="line">  &#125;</span><br><span class="line"><span class="selector-class">.header</span> <span class="selector-class">.title</span> &#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">32</span>rpx;</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">40</span>rpx;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#666</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.header</span> <span class="selector-class">.item</span> &#123;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">60</span>rpx;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.header</span> <span class="selector-class">.desc</span> &#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">30</span>rpx;</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">60</span>rpx;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.header</span> <span class="selector-class">.more</span> &#123;</span><br><span class="line">    <span class="attribute">float</span>: right;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">10</span>rpx <span class="number">20</span>rpx;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#333</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">30</span>rpx;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">24</span>rpx;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>index.json</code>中注册组件</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;usingComponents&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;NavHeader&quot;</span><span class="punctuation">:</span> <span class="string">&quot;/components/NavHeader/NavHeader&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<p>使用组件</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 推荐歌曲区域 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;recommendContainer&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">NavHeader</span>&gt;</span><span class="tag">&lt;/<span class="name">NavHeader</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 内容区 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">scroll-view</span> <span class="attr">class</span>=<span class="string">&quot;recommendScroll&quot;</span> <span class="attr">enable-flex</span> <span class="attr">scroll-x</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;scrollItem&quot;</span> <span class="attr">wx:for</span>=<span class="string">&quot;&#123;&#123;recommendList&#125;&#125;&quot;</span> <span class="attr">wx:key</span>=<span class="string">&quot;id&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">image</span> <span class="attr">mode</span>=<span class="string">&quot;aspectFill&quot;</span> <span class="attr">src</span>=<span class="string">&quot;&#123;&#123;item.picUrl&#125;&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">image</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">text</span>&gt;</span>&#123;&#123;item.name&#125;&#125;<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">scroll-view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 排行榜区域 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 头部区域 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">NavHeader</span>&gt;</span><span class="tag">&lt;/<span class="name">NavHeader</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 内容区域 --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>调整scrollView的高度</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.recommendScroll</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">300</span>rpx;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="排行榜"><a href="#排行榜" class="headerlink" title="排行榜"></a>排行榜</h2><p>增加样式</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 排行榜开始 */</span></span><br><span class="line"><span class="selector-class">.topList</span> &#123;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">20</span>rpx;</span><br><span class="line">  <span class="attribute">padding-top</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.topListSwiper</span> &#123;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">400</span>rpx;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.swiperItem</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">96%</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#fbfbfb</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.swiperItem</span> <span class="selector-class">.title</span> &#123;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">30</span>rpx;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">80</span>rpx;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.musicItem</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">margin-bottom</span>: <span class="number">20</span>rpx;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.musicItem</span> image &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100</span>rpx;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100</span>rpx;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">6</span>rpx;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.musicItem</span> <span class="selector-class">.count</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100</span>rpx;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100</span>rpx;</span><br><span class="line">  <span class="attribute">text-align</span>: center;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">100</span>rpx;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.musicItem</span> <span class="selector-class">.musicName</span> &#123;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100</span>rpx;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">100</span>rpx;</span><br><span class="line">  <span class="attribute">max-width</span>: <span class="number">400</span>rpx;</span><br><span class="line">  <span class="attribute">white-space</span>: nowrap;</span><br><span class="line">  <span class="attribute">overflow</span>: hidden;</span><br><span class="line">  <span class="attribute">text-overflow</span>: ellipsis;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 排行榜结束 */</span></span><br></pre></td></tr></table></figure>



<p>组件封装时，我们需要传入动态的数据</p>
<p><code>NavHeader.js</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// components/NavHeader.js</span></span><br><span class="line"><span class="title class_">Component</span>(&#123;</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 组件的属性列表</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="attr">properties</span>: &#123;</span><br><span class="line">    <span class="attr">title</span>: &#123;</span><br><span class="line">      <span class="attr">type</span>: <span class="title class_">String</span>,</span><br><span class="line">      <span class="attr">value</span>: <span class="string">&#x27;我是title默认值&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">nav</span>: &#123;</span><br><span class="line">      <span class="attr">type</span>: <span class="title class_">String</span>,</span><br><span class="line">      <span class="attr">value</span>: <span class="string">&#x27;我是nav默认值&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 组件的初始数据</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="attr">data</span>: &#123;</span><br><span class="line"></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 组件的方法列表</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="attr">methods</span>: &#123;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 推荐歌曲区域 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;recommendContainer&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">NavHeader</span> <span class="attr">title</span>=<span class="string">&quot;推荐歌曲&quot;</span> <span class="attr">nav</span>=<span class="string">&quot;为你精心推荐&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">NavHeader</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 内容区 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">scroll-view</span> <span class="attr">class</span>=<span class="string">&quot;recommendScroll&quot;</span> <span class="attr">enable-flex</span> <span class="attr">scroll-x</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;scrollItem&quot;</span> <span class="attr">wx:for</span>=<span class="string">&quot;&#123;&#123;recommendList&#125;&#125;&quot;</span> <span class="attr">wx:key</span>=<span class="string">&quot;id&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">image</span> <span class="attr">mode</span>=<span class="string">&quot;aspectFill&quot;</span> <span class="attr">src</span>=<span class="string">&quot;&#123;&#123;item.picUrl&#125;&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">image</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">text</span>&gt;</span>&#123;&#123;item.name&#125;&#125;<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">scroll-view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 排行榜区域 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;topList&quot;</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 头部区域 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">NavHeader</span> <span class="attr">title</span>=<span class="string">&quot;排行榜&quot;</span> <span class="attr">nav</span>=<span class="string">&quot;热歌风向标&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">NavHeader</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 内容区域 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">swiper</span> <span class="attr">class</span>=<span class="string">&quot;topListSwiper&quot;</span> <span class="attr">circular</span> <span class="attr">next-margin</span>=<span class="string">&quot;50rpx&quot;</span> <span class="attr">previous-margin</span>=<span class="string">&quot;50rpx&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">swiper-item</span> <span class="attr">wx:for</span>=<span class="string">&quot;&#123;&#123;topList&#125;&#125;&quot;</span> <span class="attr">wx:key</span>=<span class="string">&quot;name&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;swiperItem&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;title&quot;</span>&gt;</span></span><br><span class="line">          &#123;&#123;item.name&#125;&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;musicItem&quot;</span> <span class="attr">wx:for</span>=<span class="string">&quot;&#123;&#123;item.tracks&#125;&#125;&quot;</span> <span class="attr">wx:key</span>=<span class="string">&quot;id&quot;</span> <span class="attr">wx:for-item</span>=<span class="string">&quot;musicItem&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">image</span> <span class="attr">src</span>=<span class="string">&quot;&#123;&#123;musicItem.al.picUrl&#125;&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">image</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;count&quot;</span>&gt;</span>&#123;&#123;index + 1&#125;&#125;<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;musicName&quot;</span>&gt;</span>&#123;&#123;musicItem.name&#125;&#125;<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">swiper-item</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">swiper</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>



<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">    <span class="attr">data</span>: &#123;</span><br><span class="line">		<span class="comment">// ...</span></span><br><span class="line">        <span class="attr">topList</span>: [], <span class="comment">// 排行榜数据</span></span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取排行榜数据</span></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * 需求分析：</span></span><br><span class="line"><span class="comment">         *  1.需要根据idx的值获取对应的数据</span></span><br><span class="line"><span class="comment">         *  2.idx的取值范围是0-20，我们需要0-4</span></span><br><span class="line"><span class="comment">         *  3.需要发5次请求</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="keyword">let</span> index = <span class="number">0</span>,</span><br><span class="line">            resultArr = []</span><br><span class="line">        <span class="keyword">while</span>(index &lt; <span class="number">5</span>) &#123;</span><br><span class="line">            <span class="keyword">let</span> topListData = <span class="keyword">await</span> <span class="title function_">request</span>(<span class="string">&#x27;/top/list&#x27;</span>, &#123;<span class="attr">idx</span>: index++&#125;)</span><br><span class="line">            <span class="keyword">let</span> topListItem  = &#123;</span><br><span class="line">                <span class="attr">name</span>: topListData.<span class="property">playlist</span>.<span class="property">name</span>,</span><br><span class="line">                <span class="attr">tracks</span>: topListData.<span class="property">playlist</span>.<span class="property">tracks</span>.<span class="title function_">slice</span>(<span class="number">0</span>, <span class="number">3</span>)</span><br><span class="line">            &#125;</span><br><span class="line">            resultArr.<span class="title function_">push</span>(topListItem)</span><br><span class="line">            <span class="comment">// 更新topList的值，发一次就更新一次（多渲染几次，牺牲点性能，用户体验较好，弱网用户不会有较长时间的白屏）</span></span><br><span class="line">            <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">                <span class="attr">topList</span>: resultArr</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure>

<p>效果：</p>
<p><img src="/2022/10/15/web/%E8%BF%9B%E9%98%B6/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%BC%80%E5%8F%91/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E6%A6%82%E8%BF%B0/image-20221018213944706.png" alt="image-20221018213944706"></p>
<p>更新：最新接口已不支持idx形式调用，根据最新接口文档自行调整</p>
<p><img src="/2022/10/15/web/%E8%BF%9B%E9%98%B6/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%BC%80%E5%8F%91/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E6%A6%82%E8%BF%B0/image-20221030185320382.png" alt="image-20221030185320382"></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// index.js</span></span><br><span class="line"><span class="keyword">import</span> request <span class="keyword">from</span> <span class="string">&#x27;../../utils/request.js&#x27;</span></span><br><span class="line"><span class="title class_">Page</span>(&#123;</span><br><span class="line">    <span class="attr">data</span>: &#123;</span><br><span class="line">        <span class="attr">bannerList</span>: [], <span class="comment">// 轮播图数据</span></span><br><span class="line">        <span class="attr">recommendList</span>: [], <span class="comment">// 推荐歌单数据</span></span><br><span class="line">        <span class="attr">topList</span>: [], <span class="comment">// 排行榜数据</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">onLoad</span>: <span class="keyword">async</span> <span class="keyword">function</span>(<span class="params">options</span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;index加载了&#x27;</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 获取轮播图数据</span></span><br><span class="line">        <span class="keyword">let</span> bannerListData = <span class="keyword">await</span> <span class="title function_">request</span>(<span class="string">&#x27;/banner&#x27;</span>, &#123;<span class="attr">type</span>: <span class="number">2</span>&#125;)</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">            <span class="attr">bannerList</span>: bannerListData.<span class="property">banners</span></span><br><span class="line">        &#125;)</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 获取歌单数据</span></span><br><span class="line">        <span class="keyword">let</span> recommendListData = <span class="keyword">await</span> <span class="title function_">request</span>(<span class="string">&#x27;/personalized&#x27;</span>, &#123;<span class="attr">limit</span>: <span class="number">10</span>&#125;)</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">            <span class="attr">recommendList</span>: recommendListData.<span class="property">result</span></span><br><span class="line">        &#125;)</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 获取排行榜数据</span></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * 需求分析：</span></span><br><span class="line"><span class="comment">         *  1.需要根据idx的值获取对应的数据</span></span><br><span class="line"><span class="comment">         *  2.idx的取值范围是0-20，我们需要0-4</span></span><br><span class="line"><span class="comment">         *  3.需要发5次请求</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="keyword">let</span> index = <span class="number">0</span>,</span><br><span class="line">            resultArr = []</span><br><span class="line">        <span class="comment">// while(index &lt; 5) &#123;</span></span><br><span class="line">        <span class="comment">//     let topListData = await request(&#x27;/top/list&#x27;, &#123;idx: index++&#125;)</span></span><br><span class="line">        <span class="comment">//     let topListItem  = &#123;</span></span><br><span class="line">        <span class="comment">//         name: topListData.playlist.name,</span></span><br><span class="line">        <span class="comment">//         tracks: topListData.playlist.tracks.slice(0, 3)</span></span><br><span class="line">        <span class="comment">//     &#125;</span></span><br><span class="line">        <span class="comment">//     resultArr.push(topListItem)</span></span><br><span class="line">        <span class="comment">//     // 更新topList的值，发一次就更新一次（多渲染几次，用户体验较好，弱网用户不会有较长时间的白屏）</span></span><br><span class="line">        <span class="comment">//     this.setData(&#123;</span></span><br><span class="line">        <span class="comment">//         topList: resultArr</span></span><br><span class="line">        <span class="comment">//     &#125;)</span></span><br><span class="line">        <span class="comment">// &#125;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 获取所有排行榜的信息，根据id字段获取歌单的详细信息（排行榜也是歌单的一种）</span></span><br><span class="line">        <span class="keyword">let</span> topListData = <span class="keyword">await</span> <span class="title function_">request</span>(<span class="string">&#x27;/toplist&#x27;</span>)</span><br><span class="line">        <span class="keyword">let</span> list = topListData.<span class="property">list</span></span><br><span class="line"></span><br><span class="line">        list.<span class="title function_">forEach</span>(<span class="keyword">async</span> (item, index) =&gt; &#123;</span><br><span class="line">            <span class="keyword">if</span>(index &lt; <span class="number">5</span>) &#123;</span><br><span class="line">                <span class="keyword">let</span> &#123;name, id&#125; = item</span><br><span class="line">                <span class="keyword">let</span> listDetailData = <span class="keyword">await</span> <span class="title function_">request</span>(<span class="string">&#x27;/playlist/detail&#x27;</span>, &#123;id&#125;)</span><br><span class="line">                <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;aa&#x27;</span>,listDetailData)</span><br><span class="line">                <span class="keyword">let</span> topListItem = &#123;</span><br><span class="line">                    name,</span><br><span class="line">                    <span class="attr">tracks</span>: listDetailData.<span class="property">playlist</span>.<span class="property">tracks</span>.<span class="title function_">slice</span>(<span class="number">0</span>, <span class="number">3</span>)</span><br><span class="line">                &#125;</span><br><span class="line">                resultArr.<span class="title function_">push</span>(topListItem)</span><br><span class="line">            &#125;</span><br><span class="line">            index++</span><br><span class="line">            <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">                <span class="attr">topList</span>: resultArr</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>



<h2 id="内网穿透"><a href="#内网穿透" class="headerlink" title="内网穿透"></a>内网穿透</h2><p>真机调试时需要用到</p>
<p>但由于接口已经部署到服务器上了，可以公网访问，此小节跳过</p>
<h2 id="tabBar使用"><a href="#tabBar使用" class="headerlink" title="tabBar使用"></a>tabBar使用</h2><p>微信开发者工具中，新建perosnal和video两个页面</p>
<p>tabBar配置，<a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/reference/configuration/app.html#tabBar">全局配置 | 微信开放文档 (qq.com)</a></p>
<p>微信开发者工具中，在app.json全局配置中，新增tabBar配置</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;pages&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="string">&quot;pages/index/index&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="string">&quot;pages/personal/personal&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="string">&quot;pages/video/video&quot;</span></span><br><span class="line">  <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;window&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;backgroundTextStyle&quot;</span><span class="punctuation">:</span> <span class="string">&quot;light&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;navigationBarBackgroundColor&quot;</span><span class="punctuation">:</span> <span class="string">&quot;#d43c33&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;navigationBarTitleText&quot;</span><span class="punctuation">:</span> <span class="string">&quot;云音乐&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;navigationBarTextStyle&quot;</span><span class="punctuation">:</span> <span class="string">&quot;white&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;style&quot;</span><span class="punctuation">:</span> <span class="string">&quot;v2&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;sitemapLocation&quot;</span><span class="punctuation">:</span> <span class="string">&quot;sitemap.json&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;tabBar&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;color&quot;</span><span class="punctuation">:</span> <span class="string">&quot;#333&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;selectedColor&quot;</span><span class="punctuation">:</span> <span class="string">&quot;#d43c33&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;backgroundColor&quot;</span><span class="punctuation">:</span> <span class="string">&quot;#ffffff&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;list&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">      <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;pagePath&quot;</span><span class="punctuation">:</span> <span class="string">&quot;pages/index/index&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;text&quot;</span><span class="punctuation">:</span> <span class="string">&quot;主页&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;iconPath&quot;</span><span class="punctuation">:</span> <span class="string">&quot;/static/myImages/tabs/tab-home.png&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;selectedIconPath&quot;</span><span class="punctuation">:</span> <span class="string">&quot;/static/myImages/tabs/tab-home-current.png&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;pagePath&quot;</span><span class="punctuation">:</span> <span class="string">&quot;pages/video/video&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;text&quot;</span><span class="punctuation">:</span> <span class="string">&quot;视频&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;iconPath&quot;</span><span class="punctuation">:</span> <span class="string">&quot;/static/myImages/tabs/video.png&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;selectedIconPath&quot;</span><span class="punctuation">:</span> <span class="string">&quot;/static/myImages/tabs/video-selected.png&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;pagePath&quot;</span><span class="punctuation">:</span> <span class="string">&quot;pages/personal/personal&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;text&quot;</span><span class="punctuation">:</span> <span class="string">&quot;主页&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;iconPath&quot;</span><span class="punctuation">:</span> <span class="string">&quot;/static/myImages/tabs/tab-my.png&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;selectedIconPath&quot;</span><span class="punctuation">:</span> <span class="string">&quot;/static/myImages/tabs/tab-my-current.png&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">]</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<p>可以去阿里图标库里找一些好看的图标</p>
<h2 id="个人中心静态页面"><a href="#个人中心静态页面" class="headerlink" title="个人中心静态页面"></a>个人中心静态页面</h2><p>app.json中，先把个人中心页提到第一个</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;personalContainer&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;user-section&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">image</span> <span class="attr">mode</span>=<span class="string">&quot;aspectFill&quot;</span> <span class="attr">class</span>=<span class="string">&quot;bg&quot;</span> <span class="attr">src</span>=<span class="string">&quot;/static/images/personal/bgImg2.jpg&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">image</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;user-info-box&quot;</span> <span class="attr">bindtap</span>=<span class="string">&quot;toLogin&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;portrait-box&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">image</span> <span class="attr">class</span>=<span class="string">&quot;portrait&quot;</span> <span class="attr">src</span>=<span class="string">&#x27;&#123;&#123;userInfo.avatarUrl?userInfo.avatarUrl:&quot;/static/images/personal/missing-face.png&quot;&#125;&#125;&#x27;</span>&gt;</span><span class="tag">&lt;/<span class="name">image</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;info-box&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;username&quot;</span>&gt;</span>&#123;&#123;userInfo.nickname?userInfo.nickname: &#x27;游客&#x27;&#125;&#125;<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;vip-card-box&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">image</span> <span class="attr">class</span>=<span class="string">&quot;card-bg&quot;</span> <span class="attr">src</span>=<span class="string">&quot;/static/images/personal/vip-card-bg.png&quot;</span> <span class="attr">mode</span>=<span class="string">&quot;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">image</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;b-btn&quot;</span>&gt;</span></span><br><span class="line">        立即开通</span><br><span class="line">      <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;tit&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 会员图标--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;iconfont icon-huiyuan-&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">        硅谷会员</span><br><span class="line">      <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;e-m&quot;</span>&gt;</span>atguigu Union<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;e-b&quot;</span>&gt;</span>开通会员听歌<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span></span></span><br><span class="line"><span class="tag">      <span class="attr">class</span>=<span class="string">&quot;cover-container&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">bindtouchstart</span>=<span class="string">&quot;handleTouchStart&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">bindtouchmove</span>=<span class="string">&quot;handleTouchMove&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">bindtouchend</span>=<span class="string">&quot;handleTouchEnd&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">style</span>=<span class="string">&quot;transform: &#123;&#123;coverTransform&#125;&#125;; transition: &#123;&#123;coveTransition&#125;&#125;&quot;</span></span></span><br><span class="line"><span class="tag">  &gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">image</span> <span class="attr">class</span>=<span class="string">&quot;arc&quot;</span> <span class="attr">src</span>=<span class="string">&quot;/static/images/personal/arc.png&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">image</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 个人中心导航 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;nav-section&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;nav-item&quot;</span>  <span class="attr">hover-class</span>=<span class="string">&quot;common-hover&quot;</span>  <span class="attr">hover-stay-time</span>=<span class="string">&quot;50&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;iconfont icon-xiaoxi&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">text</span>&gt;</span>我的消息<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;nav-item&quot;</span>   <span class="attr">hover-class</span>=<span class="string">&quot;common-hover&quot;</span> <span class="attr">hover-stay-time</span>=<span class="string">&quot;50&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;iconfont icon-myRecommender&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">text</span>&gt;</span>我的好友<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;nav-item&quot;</span>  <span class="attr">hover-class</span>=<span class="string">&quot;common-hover&quot;</span>  <span class="attr">hover-stay-time</span>=<span class="string">&quot;50&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;iconfont icon-gerenzhuye&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">text</span>&gt;</span>个人主页<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;nav-item&quot;</span> <span class="attr">hover-class</span>=<span class="string">&quot;common-hover&quot;</span>  <span class="attr">hover-stay-time</span>=<span class="string">&quot;50&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;iconfont icon-gexingzhuangban&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">text</span>&gt;</span>个性装扮<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 个人中心列表 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;personalContent&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;recentPlayContainer&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;title&quot;</span>&gt;</span>最近播放<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 最近播放记录 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">scroll-view</span> <span class="attr">wx:if</span>=<span class="string">&quot;&#123;&#123;recentPlayList.length&#125;&#125;&quot;</span> <span class="attr">scroll-x</span> <span class="attr">class</span>=<span class="string">&quot;recentScroll&quot;</span> <span class="attr">enable-flex</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;recentItem&quot;</span> <span class="attr">wx:for</span>=<span class="string">&quot;&#123;&#123;recentPlayList&#125;&#125;&quot;</span> <span class="attr">wx:key</span>=<span class="string">&quot;&#123;&#123;id&#125;&#125;&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">image</span> <span class="attr">src</span>=<span class="string">&quot;&#123;&#123;item.song.al.picUrl&#125;&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">image</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">scroll-view</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">view</span> <span class="attr">wx:else</span>&gt;</span>暂无播放记录<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"></span><br><span class="line">      <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;cardList&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;card-item&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;title&quot;</span>&gt;</span>我的音乐<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;more&quot;</span>&gt;</span> &gt; <span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;card-item&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;title&quot;</span>&gt;</span>我的收藏<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;more&quot;</span>&gt;</span> &gt; <span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;card-item&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;title&quot;</span>&gt;</span>我的电台<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;more&quot;</span>&gt;</span> &gt; <span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>



<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* pages/personal/personal.wxss */</span></span><br><span class="line"><span class="selector-class">.personalContainer</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.personalContainer</span> <span class="selector-class">.user-section</span> &#123;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">520</span>rpx;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">100</span>rpx <span class="number">30</span>rpx <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.user-section</span> <span class="selector-class">.bg</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">0.95</span>;</span><br><span class="line">  <span class="attribute">filter</span>: <span class="built_in">blur</span>(<span class="number">1px</span>);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="selector-class">.user-info-box</span>&#123;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">180</span>rpx;</span><br><span class="line">  <span class="attribute">display</span>:flex;</span><br><span class="line">  <span class="attribute">align-items</span>:center;</span><br><span class="line">  <span class="attribute">position</span>:relative;</span><br><span class="line">  <span class="attribute">z-index</span>: <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.user-info-box</span> <span class="selector-class">.portrait</span>&#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">130</span>rpx;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">130</span>rpx;</span><br><span class="line">  <span class="attribute">border</span>:<span class="number">5</span>rpx solid <span class="number">#fff</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">50%</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.user-info-box</span> <span class="selector-class">.username</span>&#123;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">24</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#303133</span>;</span><br><span class="line">  <span class="attribute">margin-left</span>: <span class="number">20</span>rpx;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/* vip-box */</span></span><br><span class="line"><span class="selector-class">.vip-card-box</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">flex-direction</span>: column;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">linear-gradient</span>(left, red, black);</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, .<span class="number">7</span>);</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">240</span>rpx;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#f7d680</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">16</span>rpx <span class="number">16</span>rpx <span class="number">0</span> <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">20</span>rpx <span class="number">24</span>rpx;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="selector-class">.vip-card-box</span> <span class="selector-class">.card-bg</span>&#123;</span><br><span class="line">  <span class="attribute">position</span>:absolute;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">20</span>rpx;</span><br><span class="line">  <span class="attribute">right</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">380</span>rpx;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">260</span>rpx;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.vip-card-box</span> <span class="selector-class">.b-btn</span>&#123;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">right</span>: <span class="number">20</span>rpx;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">16</span>rpx;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">132</span>rpx;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">40</span>rpx;</span><br><span class="line">  <span class="attribute">text-align</span>: center;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">40</span>rpx;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">22</span>rpx;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#36343c</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">20px</span>;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#f9e6af</span>;</span><br><span class="line">  <span class="attribute">z-index</span>: <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.vip-card-box</span> <span class="selector-class">.b-btn</span>&#123;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">right</span>: <span class="number">20</span>rpx;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">16</span>rpx;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">132</span>rpx;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">40</span>rpx;</span><br><span class="line">  <span class="attribute">text-align</span>: center;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">40</span>rpx;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">22</span>rpx;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#36343c</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">20px</span>;</span><br><span class="line">  <span class="comment">/*background: linear-gradient(left, #f9e6af, #ffd465);*/</span> <span class="comment">/*渐变不生效*/</span></span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#f9e6af</span>;</span><br><span class="line">  <span class="attribute">z-index</span>: <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.vip-card-box</span> <span class="selector-class">.tit</span> &#123;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">22</span>rpx;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#f7d680</span>;</span><br><span class="line">  <span class="attribute">margin-bottom</span>: <span class="number">28</span>rpx;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.vip-card-box</span> <span class="selector-class">.tit</span> <span class="selector-class">.iconfont</span>&#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#f6e5a3</span>;</span><br><span class="line">  <span class="attribute">margin-right</span>: <span class="number">16</span>rpx;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="selector-class">.vip-card-box</span> <span class="selector-class">.e-m</span>&#123;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">34</span>rpx;</span><br><span class="line">  <span class="attribute">margin-top</span>: <span class="number">10</span>rpx;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.vip-card-box</span> <span class="selector-class">.e-b</span>&#123;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">24</span>rpx;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#d8cba9</span>;</span><br><span class="line">  <span class="attribute">margin-top</span>: <span class="number">10</span>rpx;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="selector-class">.cover-container</span>&#123;</span><br><span class="line">  <span class="attribute">margin-top</span>: -<span class="number">150</span>rpx;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">30</span>rpx;</span><br><span class="line">  <span class="attribute">position</span>:relative;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#f5f5f5</span>;</span><br><span class="line">  <span class="attribute">padding-bottom</span>: <span class="number">20</span>rpx;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.cover-container</span> <span class="selector-class">.arc</span>&#123;</span><br><span class="line">  <span class="attribute">position</span>:absolute;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">top</span>: -<span class="number">34</span>rpx;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">36</span>rpx;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/* 导航部分 */</span></span><br><span class="line"><span class="selector-class">.cover-container</span> <span class="selector-class">.nav-section</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#fff</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">20</span>rpx <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">15</span>rpx;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="selector-class">.nav-section</span> <span class="selector-class">.nav-item</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">25%</span>;</span><br><span class="line">  <span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">flex-direction</span>: column;</span><br><span class="line">  <span class="attribute">align-items</span>: center;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.nav-section</span> <span class="selector-class">.nav-item</span> <span class="selector-class">.iconfont</span> &#123;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">50</span>rpx;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#d43c33</span>;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">70</span>rpx;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.nav-section</span> <span class="selector-class">.nav-item</span> text<span class="selector-pseudo">:last-child</span> &#123;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">22</span>rpx;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/* 个人中心列表 */</span></span><br><span class="line"><span class="selector-class">.personalContent</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#fff</span>;</span><br><span class="line">  <span class="attribute">margin-top</span>: <span class="number">20</span>rpx;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 最近播放 */</span></span><br><span class="line"><span class="selector-class">.personalContent</span> <span class="selector-class">.scrollView</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">160</span>rpx;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.personalContent</span> <span class="selector-class">.recentPlay</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.recentPlayContainer</span> <span class="selector-class">.title</span> &#123;</span><br><span class="line">  <span class="attribute">padding-left</span>: <span class="number">20</span>rpx;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">26</span>rpx;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#333</span>;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">80</span>rpx;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.personalContent</span> <span class="selector-class">.recentPlay</span> image &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">160</span>rpx;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">160</span>rpx;</span><br><span class="line">  <span class="attribute">margin-left</span>: <span class="number">20</span>rpx;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">20</span>rpx;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="selector-class">.cardList</span> &#123;</span><br><span class="line">  <span class="attribute">margin-top</span>: <span class="number">20</span>rpx;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.cardList</span> <span class="selector-class">.card-item</span>&#123;</span><br><span class="line">  <span class="attribute">border-top</span>: <span class="number">1</span>rpx solid <span class="number">#eee</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">80</span>rpx;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">80</span>rpx;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">10</span>rpx;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">26</span>rpx;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#333</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.cardList</span> <span class="selector-class">.card-item</span> <span class="selector-class">.more</span> &#123;</span><br><span class="line">  <span class="attribute">float</span>: right;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 最近播放记录 */</span></span><br><span class="line"><span class="selector-class">.recentScroll</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">200</span>rpx;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.recentItem</span> &#123;</span><br><span class="line">  <span class="attribute">margin-right</span>: <span class="number">20</span>rpx;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.recentItem</span> image &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">200</span>rpx;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">200</span>rpx;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">10</span>rpx;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="个人中心动画效果实现"><a href="#个人中心动画效果实现" class="headerlink" title="个人中心动画效果实现"></a>个人中心动画效果实现</h2><p>不足：不够丝滑</p>
<ul>
<li>二次touch的时候，会立即重置动画</li>
<li>下拉会有卡顿</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// pages/personal.js</span></span><br><span class="line"><span class="keyword">let</span> startY = <span class="number">0</span>,</span><br><span class="line">  moveY = <span class="number">0</span>,</span><br><span class="line">  moveDistance = <span class="number">0</span>;</span><br><span class="line"><span class="title class_">Page</span>(&#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 页面的初始数据</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="attr">data</span>: &#123;</span><br><span class="line">    <span class="attr">coverTransform</span>: <span class="string">&#x27;translateY(0)&#x27;</span>,</span><br><span class="line">    <span class="attr">coverTransition</span>: <span class="string">&#x27;&#x27;</span></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 生命周期函数--监听页面加载</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="title function_">onLoad</span>(<span class="params">options</span>) &#123;</span><br><span class="line"></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="title function_">handleTouchStart</span>(<span class="params">event</span>) &#123;</span><br><span class="line">    <span class="comment">// console.log(&#x27;handleTouchStart&#x27;)</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(event)</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">      <span class="attr">coverTransition</span>: <span class="string">&#x27;&#x27;</span></span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="comment">// 获取手指起始坐标</span></span><br><span class="line">    startY = event.<span class="property">touches</span>[<span class="number">0</span>].<span class="property">clientY</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">handleTouchMove</span>(<span class="params">event</span>) &#123;</span><br><span class="line">    <span class="comment">// console.log(&#x27;handleTouchMove&#x27;)</span></span><br><span class="line">    moveY = event.<span class="property">touches</span>[<span class="number">0</span>].<span class="property">clientY</span></span><br><span class="line">    moveDistance = moveY - startY</span><br><span class="line">    <span class="comment">// 动态更新coverTransform的状态值</span></span><br><span class="line">    <span class="keyword">if</span>(moveDistance &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(moveDistance &gt;= <span class="number">80</span>) &#123;</span><br><span class="line">      moveDistance = <span class="number">80</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">      <span class="attr">coverTransform</span>: <span class="string">`translateY(<span class="subst">$&#123;moveDistance&#125;</span>rpx)`</span></span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">handleTouchEnd</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// console.log(&#x27;handleTouchEnd&#x27;)</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">      <span class="attr">coverTransform</span>: <span class="string">&#x27;translateY(0rpx)&#x27;</span>,</span><br><span class="line">      <span class="attr">coverTransition</span>: <span class="string">&#x27;transform 0.5s linear&#x27;</span></span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 生命周期函数--监听页面初次渲染完成</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="title function_">onReady</span>(<span class="params"></span>) &#123;</span><br><span class="line"></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 生命周期函数--监听页面显示</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="title function_">onShow</span>(<span class="params"></span>) &#123;</span><br><span class="line"></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 生命周期函数--监听页面隐藏</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="title function_">onHide</span>(<span class="params"></span>) &#123;</span><br><span class="line"></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 生命周期函数--监听页面卸载</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="title function_">onUnload</span>(<span class="params"></span>) &#123;</span><br><span class="line"></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 页面相关事件处理函数--监听用户下拉动作</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="title function_">onPullDownRefresh</span>(<span class="params"></span>) &#123;</span><br><span class="line"></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 页面上拉触底事件的处理函数</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="title function_">onReachBottom</span>(<span class="params"></span>) &#123;</span><br><span class="line"></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 用户点击右上角分享</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="title function_">onShareAppMessage</span>(<span class="params"></span>) &#123;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="登录界面及表单数据收集"><a href="#登录界面及表单数据收集" class="headerlink" title="登录界面及表单数据收集"></a>登录界面及表单数据收集</h2><p>新建login页，配置app.json</p>
<p>登录流程：</p>
<ul>
<li>前端验证<ul>
<li>验证用户信息（账号、密码）是否合法</li>
<li>前端验证不通过就提示用户，不需要发请求给后端</li>
<li>前端验证通过了，发请求（携带账号、密码（加密））给服务器</li>
</ul>
</li>
<li>后端验证<ul>
<li>查询数据库，验证用户是否存在</li>
<li>用户不存在，告诉前端密码或账户名错误</li>
<li>用户存在，解密验证密码是否正确</li>
<li>密码不正确，告诉前端密码或账户名错误</li>
<li>密码正确，签发token，提示前端登录成功</li>
</ul>
</li>
<li>前端获取token，存储在本地，每次请求携带token</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;wrapper&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;left-top-sign&quot;</span>&gt;</span>LOGIN<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;welcome&quot;</span>&gt;</span></span><br><span class="line">      欢迎回来！</span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;input-content&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;input-item&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;tit&quot;</span>&gt;</span>手机号码<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span>  <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;请输入手机号码&quot;</span> <span class="attr">data-test</span>=<span class="string">&quot;abc&quot;</span> <span class="attr">data-type</span>=<span class="string">&quot;phone&quot;</span> <span class="attr">id</span>=<span class="string">&quot;phone&quot;</span> <span class="attr">bindinput</span>=<span class="string">&quot;handleInput&quot;</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;input-item&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;tit&quot;</span>&gt;</span>密码<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span>  <span class="attr">placeholder</span>=<span class="string">&quot;请输入密码&quot;</span> <span class="attr">data-test</span>=<span class="string">&quot;abc&quot;</span> <span class="attr">data-type</span>=<span class="string">&quot;password&quot;</span> <span class="attr">id</span>=<span class="string">&quot;password&quot;</span> <span class="attr">bindinput</span>=<span class="string">&quot;handleInput&quot;</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">&quot;confirm-btn&quot;</span> <span class="attr">bindtap</span>=<span class="string">&quot;login&quot;</span>&gt;</span>登录<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;forget-section&quot;</span>&gt;</span></span><br><span class="line">      忘记密码?</span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;register-section&quot;</span>&gt;</span></span><br><span class="line">    还没有账号?</span><br><span class="line">    <span class="tag">&lt;<span class="name">text</span> &gt;</span>马上注册<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* pages/login/login.wxss */</span></span><br><span class="line"><span class="selector-class">.wrapper</span>&#123;</span><br><span class="line">  <span class="attribute">position</span>:relative;</span><br><span class="line">  <span class="attribute">z-index</span>: <span class="number">90</span>;</span><br><span class="line">  <span class="attribute">padding-bottom</span>: <span class="number">40</span>rpx;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.left-top-sign</span>&#123;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">120</span>rpx;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#f8f8f8</span>;</span><br><span class="line">  <span class="attribute">position</span>:relative;</span><br><span class="line">  <span class="attribute">left</span>: -<span class="number">16</span>rpx;</span><br><span class="line">  <span class="attribute">letter-spacing</span>: <span class="number">2</span>rpx;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.welcome</span>&#123;</span><br><span class="line">  <span class="attribute">position</span>:relative;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">50</span>rpx;</span><br><span class="line">  <span class="attribute">top</span>: -<span class="number">90</span>rpx;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">46</span>rpx;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#555</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="selector-class">.input-content</span>&#123;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">60</span>rpx;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.input-item</span>&#123;</span><br><span class="line">  <span class="attribute">display</span>:flex;</span><br><span class="line">  <span class="attribute">flex-direction</span>: column;</span><br><span class="line">  <span class="attribute">align-items</span>:flex-start;</span><br><span class="line">  <span class="attribute">justify-content</span>: center;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">30</span>rpx;</span><br><span class="line">  <span class="attribute">background</span>:<span class="number">#f8f6fc</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">120</span>rpx;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">4px</span>;</span><br><span class="line">  <span class="attribute">margin-bottom</span>: <span class="number">50</span>rpx;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.input-item</span><span class="selector-pseudo">:last-child</span>&#123;</span><br><span class="line">  <span class="attribute">margin-bottom</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.input-item</span> <span class="selector-class">.tit</span>&#123;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">50</span>rpx;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">56</span>rpx;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">30</span>rpx;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#606266</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.input-item</span> <span class="selector-tag">input</span>&#123;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">60</span>rpx;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">30</span>rpx;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#303133</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.confirm-btn</span>&#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">630</span>rpx<span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">76</span>rpx;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">76</span>rpx;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">50</span>rpx;</span><br><span class="line">  <span class="attribute">margin-top</span>: <span class="number">70</span>rpx;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#d43c33</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">32</span>rpx;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.confirm-btn2</span><span class="selector-pseudo">:after</span>&#123;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">100px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.forget-section</span>&#123;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">28</span>rpx;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#4399fc</span>;</span><br><span class="line">  <span class="attribute">text-align</span>: center;</span><br><span class="line">  <span class="attribute">margin-top</span>: <span class="number">40</span>rpx;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.register-section</span>&#123;</span><br><span class="line">  <span class="attribute">position</span>:absolute;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">bottom</span>: <span class="number">50</span>rpx;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">28</span>rpx;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#606266</span>;</span><br><span class="line">  <span class="attribute">text-align</span>: center;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.register-section</span> text&#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#4399fc</span>;</span><br><span class="line">  <span class="attribute">margin-left</span>: <span class="number">10</span>rpx;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// pages/login.js</span></span><br><span class="line"><span class="title class_">Page</span>(&#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 页面的初始数据</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="attr">data</span>: &#123;</span><br><span class="line">    <span class="attr">phone</span>: <span class="string">&#x27;&#x27;</span>, <span class="comment">// 手机号</span></span><br><span class="line">    <span class="attr">password</span>: <span class="string">&#x27;&#x27;</span>, <span class="comment">// 用户密码</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">handleInput</span>(<span class="params">event</span>) &#123;</span><br><span class="line">    <span class="comment">// let type = event.currentTarget.id // phone || password 通过id传值</span></span><br><span class="line">    <span class="keyword">let</span> type = event.<span class="property">currentTarget</span>.<span class="property">dataset</span>.<span class="property">type</span> </span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(type, event.<span class="property">detail</span>.<span class="property">value</span>)</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">      [type]: event.<span class="property">detail</span>.<span class="property">value</span></span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 生命周期函数--监听页面加载</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="title function_">onLoad</span>(<span class="params">options</span>) &#123;</span><br><span class="line"></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 生命周期函数--监听页面初次渲染完成</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="title function_">onReady</span>(<span class="params"></span>) &#123;</span><br><span class="line"></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 生命周期函数--监听页面显示</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="title function_">onShow</span>(<span class="params"></span>) &#123;</span><br><span class="line"></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 生命周期函数--监听页面隐藏</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="title function_">onHide</span>(<span class="params"></span>) &#123;</span><br><span class="line"></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 生命周期函数--监听页面卸载</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="title function_">onUnload</span>(<span class="params"></span>) &#123;</span><br><span class="line"></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 页面相关事件处理函数--监听用户下拉动作</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="title function_">onPullDownRefresh</span>(<span class="params"></span>) &#123;</span><br><span class="line"></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 页面上拉触底事件的处理函数</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="title function_">onReachBottom</span>(<span class="params"></span>) &#123;</span><br><span class="line"></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 用户点击右上角分享</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="title function_">onShareAppMessage</span>(<span class="params"></span>) &#123;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/view/wxml/event.html">事件 | 微信开放文档 (qq.com)</a></p>
<p>当只传递唯一标识时，可以通过id来传递</p>
<p>当传递多个自定义属性，可以通过<code>data-</code>的方式</p>
<h2 id="登录字段验证"><a href="#登录字段验证" class="headerlink" title="登录字段验证"></a>登录字段验证</h2><h3 id="前端验证"><a href="#前端验证" class="headerlink" title="前端验证"></a>前端验证</h3><p>界面交互API，<a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/api/ui/interaction/wx.showToast.html">wx.showToast(Object object) | 微信开放文档 (qq.com)</a></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// pages/login.js</span></span><br><span class="line"><span class="title class_">Page</span>(&#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 页面的初始数据</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="attr">data</span>: &#123;</span><br><span class="line">    <span class="attr">phone</span>: <span class="string">&#x27;&#x27;</span>, <span class="comment">// 手机号</span></span><br><span class="line">    <span class="attr">password</span>: <span class="string">&#x27;&#x27;</span>, <span class="comment">// 用户密码</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">handleInput</span>(<span class="params">event</span>) &#123; <span class="comment">// 收集表单数据</span></span><br><span class="line">    <span class="comment">// let type = event.currentTarget.id // phone || password 通过id传值</span></span><br><span class="line">    <span class="keyword">let</span> type = event.<span class="property">currentTarget</span>.<span class="property">dataset</span>.<span class="property">type</span> </span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(type, event.<span class="property">detail</span>.<span class="property">value</span>)</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">      [type]: event.<span class="property">detail</span>.<span class="property">value</span></span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">login</span>(<span class="params"></span>) &#123; <span class="comment">// 登录的回调</span></span><br><span class="line">    <span class="comment">// 收集表单项数据</span></span><br><span class="line">    <span class="keyword">let</span> &#123;phone , password&#125; = <span class="variable language_">this</span>.<span class="property">data</span></span><br><span class="line">    <span class="comment">// 前端验证</span></span><br><span class="line">    <span class="keyword">if</span>(!phone) &#123;</span><br><span class="line">      <span class="comment">// 提示用户</span></span><br><span class="line">      wx.<span class="title function_">showToast</span>(&#123;</span><br><span class="line">        <span class="attr">title</span>: <span class="string">&#x27;手机号不能为空&#x27;</span>,</span><br><span class="line">        <span class="attr">icon</span>: <span class="string">&#x27;none&#x27;</span></span><br><span class="line">      &#125;)</span><br><span class="line">      <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 定义正则</span></span><br><span class="line">    <span class="keyword">let</span> phoneReg = <span class="regexp">/^1(3|4|5|6|7|8|9)\d&#123;9&#125;$/</span></span><br><span class="line">    <span class="keyword">if</span>(!phoneReg.<span class="title function_">test</span>(phone)) &#123;</span><br><span class="line">      wx.<span class="title function_">showToast</span>(&#123;</span><br><span class="line">        <span class="attr">title</span>: <span class="string">&#x27;手机号格式错误&#x27;</span>,</span><br><span class="line">        <span class="attr">icon</span>: <span class="string">&#x27;none&#x27;</span></span><br><span class="line">      &#125;)</span><br><span class="line">      <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(!password) &#123;</span><br><span class="line">      wx.<span class="title function_">showToast</span>(&#123;</span><br><span class="line">        <span class="attr">title</span>: <span class="string">&#x27;密码不能为空&#x27;</span>,</span><br><span class="line">        <span class="attr">icon</span>: <span class="string">&#x27;none&#x27;</span></span><br><span class="line">      &#125;)</span><br><span class="line">      <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>后端验证</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// pages/login.js</span></span><br><span class="line"><span class="keyword">import</span> request <span class="keyword">from</span> <span class="string">&#x27;../../utils/request&#x27;</span></span><br><span class="line"><span class="title class_">Page</span>(&#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 页面的初始数据</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="attr">data</span>: &#123;</span><br><span class="line">    <span class="attr">phone</span>: <span class="string">&#x27;&#x27;</span>, <span class="comment">// 手机号</span></span><br><span class="line">    <span class="attr">password</span>: <span class="string">&#x27;&#x27;</span>, <span class="comment">// 用户密码</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">handleInput</span>(<span class="params">event</span>) &#123; <span class="comment">// 收集表单数据</span></span><br><span class="line">    <span class="comment">// let type = event.currentTarget.id // phone || password 通过id传值</span></span><br><span class="line">    <span class="keyword">let</span> type = event.<span class="property">currentTarget</span>.<span class="property">dataset</span>.<span class="property">type</span> </span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(type, event.<span class="property">detail</span>.<span class="property">value</span>)</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">      [type]: event.<span class="property">detail</span>.<span class="property">value</span></span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="keyword">async</span> <span class="title function_">login</span>(<span class="params"></span>) &#123; <span class="comment">// 登录的回调</span></span><br><span class="line">    <span class="comment">// 收集表单项数据</span></span><br><span class="line">    <span class="keyword">let</span> &#123;phone , password&#125; = <span class="variable language_">this</span>.<span class="property">data</span></span><br><span class="line">    <span class="comment">// 前端验证</span></span><br><span class="line">    <span class="keyword">if</span>(!phone) &#123;</span><br><span class="line">      <span class="comment">// 提示用户</span></span><br><span class="line">      wx.<span class="title function_">showToast</span>(&#123;</span><br><span class="line">        <span class="attr">title</span>: <span class="string">&#x27;手机号不能为空&#x27;</span>,</span><br><span class="line">        <span class="attr">icon</span>: <span class="string">&#x27;none&#x27;</span></span><br><span class="line">      &#125;)</span><br><span class="line">      <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 定义正则</span></span><br><span class="line">    <span class="keyword">let</span> phoneReg = <span class="regexp">/^1(3|4|5|6|7|8|9)\d&#123;9&#125;$/</span></span><br><span class="line">    <span class="keyword">if</span>(!phoneReg.<span class="title function_">test</span>(phone)) &#123;</span><br><span class="line">      wx.<span class="title function_">showToast</span>(&#123;</span><br><span class="line">        <span class="attr">title</span>: <span class="string">&#x27;手机号格式错误&#x27;</span>,</span><br><span class="line">        <span class="attr">icon</span>: <span class="string">&#x27;none&#x27;</span></span><br><span class="line">      &#125;)</span><br><span class="line">      <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(!password) &#123;</span><br><span class="line">      wx.<span class="title function_">showToast</span>(&#123;</span><br><span class="line">        <span class="attr">title</span>: <span class="string">&#x27;密码不能为空&#x27;</span>,</span><br><span class="line">        <span class="attr">icon</span>: <span class="string">&#x27;none&#x27;</span></span><br><span class="line">      &#125;)</span><br><span class="line">      <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 后端验证</span></span><br><span class="line">    <span class="keyword">let</span> res = <span class="keyword">await</span> <span class="title function_">request</span>(<span class="string">&#x27;/login/cellphone&#x27;</span>, &#123;phone, password&#125;)</span><br><span class="line">    <span class="comment">// 实际开发中，要考虑多种状态码的情况</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">switch</span> (res.<span class="property">code</span>)&#123;</span><br><span class="line">      <span class="keyword">case</span> <span class="number">200</span>:</span><br><span class="line">        wx.<span class="title function_">showToast</span>( &#123;</span><br><span class="line">          <span class="attr">title</span>: <span class="string">&#x27;登录成功&#x27;</span></span><br><span class="line">        &#125;)</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">      <span class="keyword">case</span> <span class="number">400</span>:</span><br><span class="line">        wx.<span class="title function_">showToast</span>(&#123;</span><br><span class="line">          <span class="attr">title</span>: <span class="string">&#x27;手机号或密码错误&#x27;</span>,</span><br><span class="line">          <span class="attr">icon</span>: <span class="string">&#x27;none&#x27;</span></span><br><span class="line">        &#125;)</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">      <span class="keyword">case</span> <span class="number">502</span>:</span><br><span class="line">        wx.<span class="title function_">showToast</span>(&#123;</span><br><span class="line">          <span class="attr">title</span>: <span class="string">&#x27;手机号或密码错误&#x27;</span>,</span><br><span class="line">          <span class="attr">icon</span>: <span class="string">&#x27;none&#x27;</span></span><br><span class="line">        &#125;)</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">      <span class="attr">default</span>:</span><br><span class="line">        wx.<span class="title function_">showToast</span>(&#123;</span><br><span class="line">          <span class="attr">title</span>: res.<span class="property">message</span> || <span class="string">&#x27;登录失败，请重新登录&#x27;</span>,</span><br><span class="line">          <span class="attr">icon</span>: <span class="string">&#x27;none&#x27;</span></span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="个人中心、登录页面交互（本地存储）"><a href="#个人中心、登录页面交互（本地存储）" class="headerlink" title="个人中心、登录页面交互（本地存储）"></a>个人中心、登录页面交互（本地存储）</h2><p>把个人中心页在app.json中提到第一页</p>
<p>数据本地存储，<a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/api/storage/wx.setStorage.html">wx.setStorage(Object object) | 微信开放文档 (qq.com)</a></p>
<p>personal.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// pages/personal.js</span></span><br><span class="line"><span class="keyword">let</span> startY = <span class="number">0</span>,</span><br><span class="line">  moveY = <span class="number">0</span>,</span><br><span class="line">  moveDistance = <span class="number">0</span>;</span><br><span class="line"><span class="title class_">Page</span>(&#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 页面的初始数据</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="attr">data</span>: &#123;</span><br><span class="line">    <span class="attr">coverTransform</span>: <span class="string">&#x27;translateY(0)&#x27;</span>,</span><br><span class="line">    <span class="attr">coverTransition</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">    <span class="attr">userInfo</span>: &#123;&#125;</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 生命周期函数--监听页面加载，只执行一次</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="title function_">onLoad</span>(<span class="params">options</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> localUserInfo = wx.<span class="title function_">getStorageSync</span>(<span class="string">&#x27;userInfo&#x27;</span>)</span><br><span class="line">    <span class="keyword">if</span>(localUserInfo) &#123;</span><br><span class="line">      <span class="comment">// 更新userInfo状态</span></span><br><span class="line">      <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">        <span class="attr">userInfo</span>: <span class="title class_">JSON</span>.<span class="title function_">parse</span>(localUserInfo)</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="title function_">handleTouchStart</span>(<span class="params">event</span>) &#123;</span><br><span class="line">    <span class="comment">// console.log(&#x27;handleTouchStart&#x27;)</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(event)</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">      <span class="attr">coverTransition</span>: <span class="string">&#x27;&#x27;</span></span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="comment">// 获取手指起始坐标</span></span><br><span class="line">    startY = event.<span class="property">touches</span>[<span class="number">0</span>].<span class="property">clientY</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">handleTouchMove</span>(<span class="params">event</span>) &#123;</span><br><span class="line">    <span class="comment">// console.log(&#x27;handleTouchMove&#x27;)</span></span><br><span class="line">    moveY = event.<span class="property">touches</span>[<span class="number">0</span>].<span class="property">clientY</span></span><br><span class="line">    moveDistance = moveY - startY</span><br><span class="line">    <span class="comment">// 动态更新coverTransform的状态值</span></span><br><span class="line">    <span class="keyword">if</span>(moveDistance &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(moveDistance &gt;= <span class="number">80</span>) &#123;</span><br><span class="line">      moveDistance = <span class="number">80</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">      <span class="attr">coverTransform</span>: <span class="string">`translateY(<span class="subst">$&#123;moveDistance&#125;</span>rpx)`</span></span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">handleTouchEnd</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// console.log(&#x27;handleTouchEnd&#x27;)</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">      <span class="attr">coverTransform</span>: <span class="string">&#x27;translateY(0rpx)&#x27;</span>,</span><br><span class="line">      <span class="attr">coverTransition</span>: <span class="string">&#x27;transform 0.5s linear&#x27;</span></span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 跳转到登录页面</span></span><br><span class="line">  <span class="title function_">toLogin</span>(<span class="params"></span>) &#123;</span><br><span class="line">    wx.<span class="title function_">navigateTo</span>(&#123;</span><br><span class="line">      <span class="attr">url</span>: <span class="string">&#x27;/pages/login/login&#x27;</span></span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>login.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">switch</span> (res.<span class="property">code</span>)&#123;</span><br><span class="line">      <span class="keyword">case</span> <span class="number">200</span>:</span><br><span class="line">        wx.<span class="title function_">showToast</span>( &#123;</span><br><span class="line">          <span class="attr">title</span>: <span class="string">&#x27;登录成功&#x27;</span></span><br><span class="line">        &#125;)</span><br><span class="line">        <span class="comment">// 本地存储个人信息</span></span><br><span class="line">        wx.<span class="property">wx</span>.<span class="title function_">setStorage</span>(&#123;</span><br><span class="line">          <span class="attr">key</span>: <span class="string">&#x27;userinfo&#x27;</span>,</span><br><span class="line">          <span class="attr">data</span>: <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(res.<span class="property">profile</span>)</span><br><span class="line">        &#125;)</span><br><span class="line">        <span class="comment">// 跳转到个人中心</span></span><br><span class="line">        wx.<span class="title function_">reLaunch</span>(&#123; <span class="comment">// perosnal获取本地数据放在了onload里，用reLauch方法保证onload回调会重新执行，当然也可以不把读取用户数据的方法放在onLoad里，放在onShow里面（性能不太好，每次页面显示都会执行）</span></span><br><span class="line">          <span class="attr">url</span>: <span class="string">&#x27;/pages/personal/personal&#x27;</span></span><br><span class="line">        &#125;)</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">// ...</span></span><br></pre></td></tr></table></figure>

<p>personal.wxml</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;portrait-box&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">image</span> <span class="attr">class</span>=<span class="string">&quot;portrait&quot;</span> <span class="attr">src</span>=<span class="string">&#x27;&#123;&#123;userInfo.avatarUrl ? userInfo.avatarUrl : &quot;/static/images/personal/missing-face.png&quot;&#125;&#125;&#x27;</span>&gt;</span><span class="tag">&lt;/<span class="name">image</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;info-box&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;username&quot;</span>&gt;</span>&#123;&#123;userInfo.nickname ? userInfo.nickname : &#x27;游客&#x27;&#125;&#125;<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="获取用户播放记录"><a href="#获取用户播放记录" class="headerlink" title="获取用户播放记录"></a>获取用户播放记录</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">onLoad</span>(<span class="params">options</span>) &#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> localUserInfo = wx.<span class="title function_">getStorageSync</span>(<span class="string">&#x27;userinfo&#x27;</span>)</span><br><span class="line">    <span class="comment">// console.log(localUserInfo)</span></span><br><span class="line">    <span class="keyword">if</span>(localUserInfo) &#123;</span><br><span class="line">      <span class="comment">// 更新userInfo状态</span></span><br><span class="line">      <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">        <span class="attr">userInfo</span>: <span class="title class_">JSON</span>.<span class="title function_">parse</span>(localUserInfo)</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 获取用户播放记录</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">getUserRecentPlayList</span>(<span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">userInfo</span>.<span class="property">userId</span>)</span><br><span class="line">  &#125; <span class="keyword">catch</span>(err) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(err)</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">&#125;,</span><br><span class="line"><span class="keyword">async</span> <span class="title function_">getUserRecentPlayList</span>(<span class="params">userId</span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> recentPlayListData = <span class="keyword">await</span> <span class="title function_">request</span>(<span class="string">&#x27;/user/record&#x27;</span>,&#123;<span class="attr">uid</span>: userId, <span class="attr">type</span>: <span class="number">0</span>&#125;)</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(recentPlayListData)</span><br><span class="line">  <span class="keyword">let</span> index = <span class="number">0</span></span><br><span class="line">  <span class="comment">// 构造数组每一项，添加id</span></span><br><span class="line">  <span class="keyword">let</span> recentPlayList= recentPlayListData.<span class="property">allData</span>.<span class="title function_">splice</span>(<span class="number">0</span>, <span class="number">10</span>).<span class="title function_">map</span>(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">    item.<span class="property">id</span> = index++</span><br><span class="line">    <span class="keyword">return</span> item</span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">    recentPlayList</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<p><img src="/2022/10/15/web/%E8%BF%9B%E9%98%B6/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%BC%80%E5%8F%91/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E6%A6%82%E8%BF%B0/image-20221030221454399.png" alt="image-20221030221454399"></p>
<h2 id="video导航区域"><a href="#video导航区域" class="headerlink" title="video导航区域"></a>video导航区域</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// pages/video/video.js</span></span><br><span class="line"><span class="keyword">import</span> request <span class="keyword">from</span> <span class="string">&#x27;../../utils/request&#x27;</span></span><br><span class="line"><span class="title class_">Page</span>(&#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 页面的初始数据</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="attr">data</span>: &#123;</span><br><span class="line">    <span class="attr">videoGroupList</span>: [], <span class="comment">// 导航的标签数据（命名和接口保持一致）</span></span><br><span class="line">    <span class="attr">navId</span>: <span class="number">0</span>, <span class="comment">// 导航的标识</span></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 生命周期函数--监听页面加载</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="title function_">onLoad</span>(<span class="params">options</span>) &#123;</span><br><span class="line">    <span class="comment">// 获取导航标签数据</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">getVideoGroupListData</span>()</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="keyword">async</span> <span class="title function_">getVideoGroupListData</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> videoGroupListData = <span class="keyword">await</span> <span class="title function_">request</span>(<span class="string">&#x27;/video/group/list&#x27;</span>)</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">      <span class="attr">videoGroupList</span>: videoGroupListData.<span class="property">data</span>.<span class="title function_">slice</span>(<span class="number">0</span>, <span class="number">14</span>),</span><br><span class="line">      <span class="attr">navId</span>: videoGroupListData.<span class="property">data</span>[<span class="number">0</span>].<span class="property">id</span></span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 拿到navId后，获取视频列表数据</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">getVideoList</span>(<span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">navId</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 点击切换导航的回调</span></span><br><span class="line">  <span class="title function_">changeNav</span>(<span class="params">event</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> navId = <span class="title class_">Number</span>(event.<span class="property">currentTarget</span>.<span class="property">id</span>)</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">      navId</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 获取视频列表数据</span></span><br><span class="line">  <span class="keyword">async</span> <span class="title function_">getVideoList</span>(<span class="params">navId</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span>(!navId) <span class="keyword">return</span></span><br><span class="line">    <span class="keyword">let</span> videoListData = <span class="keyword">await</span> <span class="title function_">request</span>(<span class="string">&#x27;/video/group&#x27;</span>, &#123;<span class="attr">id</span>: navId&#125;)</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(videoListData)</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>



<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--pages/video/video.wxml--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;videoContainer&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 头部区域 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;header&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">image</span> <span class="attr">src</span>=<span class="string">&quot;/static/images/video/video.jpg&quot;</span> <span class="attr">mode</span>=<span class="string">&quot;aspectFit&quot;</span> <span class="attr">lazy-load</span>=<span class="string">&quot;false&quot;</span> <span class="attr">binderror</span>=<span class="string">&quot;&quot;</span> <span class="attr">bindload</span>=<span class="string">&quot;&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;search&quot;</span>&gt;</span>搜索商品<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">image</span> <span class="attr">src</span>=<span class="string">&quot;/static/images/logo.png&quot;</span> <span class="attr">mode</span>=<span class="string">&quot;aspectFit&quot;</span> <span class="attr">lazy-load</span>=<span class="string">&quot;false&quot;</span> <span class="attr">binderror</span>=<span class="string">&quot;&quot;</span> <span class="attr">bindload</span>=<span class="string">&quot;&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 导航区域 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scroll-view</span> <span class="attr">scroll-x</span>=<span class="string">&quot;true&quot;</span> <span class="attr">class</span>=<span class="string">&quot;navScroll&quot;</span> <span class="attr">enable-flex</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;navItem&quot;</span> <span class="attr">wx:for</span>=<span class="string">&quot;&#123;&#123;videoGroupList&#125;&#125;&quot;</span> <span class="attr">wx:key</span>=<span class="string">&quot;id&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;navContent &#123;&#123;navId === item.id ? &#x27;active&#x27; : &#x27;&#x27;&#125;&#125;&quot;</span> <span class="attr">bindtap</span>=<span class="string">&quot;changeNav&quot;</span> <span class="attr">id</span>=<span class="string">&quot;&#123;&#123;item.id&#125;&#125;&quot;</span>&gt;</span>&#123;&#123;item.name&#125;&#125;<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">        </span><br><span class="line">    <span class="tag">&lt;/<span class="name">scroll-view</span>&gt;</span></span><br><span class="line">      </span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* pages/video/video.wxss */</span></span><br><span class="line"><span class="selector-class">.videoContainer</span> <span class="selector-class">.header</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">10</span>rpx;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.videoContainer</span> <span class="selector-class">.header</span> image &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">60</span>rpx;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">60</span>rpx;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.videoContainer</span> <span class="selector-class">.header</span> <span class="selector-class">.search</span> &#123;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#eee</span>;</span><br><span class="line">    <span class="attribute">flex</span>: <span class="number">1</span>;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span> <span class="number">20</span>rpx;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">26</span>rpx;</span><br><span class="line">    <span class="attribute">text-align</span>: center;</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">60</span>rpx;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#d43c33</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 导航区域 */</span></span><br><span class="line"></span><br><span class="line"><span class="selector-class">.navScroll</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">white-space</span>: nowrap;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.navScroll</span> <span class="selector-class">.navItem</span> &#123;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">60</span>rpx;</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">60</span>rpx;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">30</span>rpx;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">28</span>rpx;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.navItem</span> <span class="selector-class">.active</span> &#123;</span><br><span class="line">    <span class="attribute">border-bottom</span>: <span class="number">1px</span> solid <span class="number">#d43c33</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="保存cookie"><a href="#保存cookie" class="headerlink" title="保存cookie"></a>保存cookie</h2><p>由于封装request时，返回的是res.data，但cookie在res中，所以需要在request.js中处理cookie</p>
<p>不直接判断请求是否包含login，而是通过传参控制</p>
<p><code>login.js</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 后端验证</span></span><br><span class="line">    <span class="keyword">let</span> res = <span class="keyword">await</span> <span class="title function_">request</span>(<span class="string">&#x27;/login/cellphone&#x27;</span>, &#123;phone, password, <span class="attr">isLogin</span>: <span class="literal">true</span>&#125;)</span><br></pre></td></tr></table></figure>

<p><code>request.js</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">wx.<span class="title function_">request</span>(&#123;</span><br><span class="line">    <span class="attr">url</span>: config.<span class="property">host</span> + url,</span><br><span class="line">    data,</span><br><span class="line">    <span class="attr">success</span>: <span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;请求成功&#x27;</span>, res)</span><br><span class="line">        <span class="comment">// 登录请求</span></span><br><span class="line">        <span class="keyword">if</span>(data.<span class="property">isLogin</span>) &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;hasCookie&#x27;</span>)</span><br><span class="line">            wx.<span class="title function_">setStorage</span>(&#123;</span><br><span class="line">                <span class="attr">key</span>: <span class="string">&#x27;cookie&#x27;</span>,</span><br><span class="line">                <span class="attr">data</span>: res.<span class="property">cookie</span></span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="title function_">resolve</span>(res.<span class="property">data</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">fail</span>: <span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;请求失败&#x27;</span>, err)</span><br><span class="line">        <span class="title function_">reject</span>(err)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>但是，人家接口改了，cookie放到了res.data里，所以还是在登录成功的回调里保存cookie</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">case</span> <span class="number">200</span>:</span><br><span class="line">        wx.<span class="title function_">showToast</span>( &#123;</span><br><span class="line">          <span class="attr">title</span>: <span class="string">&#x27;登录成功&#x27;</span></span><br><span class="line">        &#125;)</span><br><span class="line">        <span class="comment">// 本地存储个人信息</span></span><br><span class="line">        wx.<span class="title function_">setStorage</span>(&#123;</span><br><span class="line">          <span class="attr">key</span>: <span class="string">&#x27;userinfo&#x27;</span>,</span><br><span class="line">          <span class="attr">data</span>: <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(res.<span class="property">profile</span>)</span><br><span class="line">        &#125;)</span><br><span class="line">		<span class="comment">// 存储cookie</span></span><br><span class="line">        wx.<span class="title function_">setStorage</span>(&#123;</span><br><span class="line">          <span class="attr">key</span>: <span class="string">&#x27;cookie&#x27;</span>,</span><br><span class="line">          <span class="attr">data</span>: res.<span class="property">cookie</span></span><br><span class="line">        &#125;)</span><br><span class="line">        <span class="comment">// 跳转到个人中心</span></span><br><span class="line">        wx.<span class="title function_">reLaunch</span>(&#123; <span class="comment">// perosnal获取本地数据放在了onload里，用reLauch方法保证onload回调会重新执行，当然也可以不把读取用户数据的方法放在onLoad里，放在onShow里面（性能不太好，每次页面显示都会执行）</span></span><br><span class="line">          <span class="attr">url</span>: <span class="string">&#x27;/pages/personal/personal&#x27;</span></span><br><span class="line">        &#125;)</span><br><span class="line">        <span class="keyword">break</span></span><br></pre></td></tr></table></figure>

<p>在request.js中设置发送请求的请求头，获取cookie时使用同步获取</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">wx.<span class="title function_">request</span>(&#123;</span><br><span class="line">    <span class="attr">url</span>: config.<span class="property">host</span> + url,</span><br><span class="line">    data,</span><br><span class="line">    <span class="attr">header</span>: &#123;</span><br><span class="line">        <span class="attr">cookie</span>: wx.<span class="title function_">getStorageSync</span>(<span class="string">&#x27;cookie&#x27;</span>) <span class="comment">// 同步获取cookie</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">success</span>: <span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;请求成功&#x27;</span>, res)</span><br><span class="line">        <span class="title function_">resolve</span>(res.<span class="property">data</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">fail</span>: <span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;请求失败&#x27;</span>, err)</span><br><span class="line">        <span class="title function_">reject</span>(err)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>获取标签下的视频，这个接口的<code>offset</code>参数必需带上（文档上说是可选…）</p>
<h2 id="视频列表动态显示"><a href="#视频列表动态显示" class="headerlink" title="视频列表动态显示"></a>视频列表动态显示</h2><p>使用到了<code>Promise.all</code>方法，map方法迭代时，需要再一次发送异步方法，相当于map的时候，发送了多个异步请求，用<code>Promise.all</code>包裹一下，不然会报错</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 获取视频列表数据</span></span><br><span class="line">  <span class="keyword">async</span> <span class="title function_">getVideoList</span>(<span class="params">navId</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span>(!navId) <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> videoListData = <span class="keyword">await</span> <span class="title function_">request</span>(<span class="string">&#x27;/video/group&#x27;</span>, &#123;<span class="attr">id</span>: navId, <span class="attr">offset</span>: <span class="number">0</span>&#125;) <span class="comment">// 还要传一个offset参数</span></span><br><span class="line">    <span class="comment">// console.log(videoListData)</span></span><br><span class="line">    <span class="keyword">let</span> index = <span class="number">0</span></span><br><span class="line">    <span class="keyword">let</span> videoList = <span class="keyword">await</span> <span class="title class_">Promise</span>.<span class="title function_">all</span>(videoListData.<span class="property">datas</span>.<span class="title function_">map</span>(<span class="keyword">async</span> item =&gt; &#123;</span><br><span class="line">      item.<span class="property">id</span> = index++</span><br><span class="line">      <span class="keyword">let</span> urlInfo = <span class="keyword">await</span> <span class="title function_">request</span>(<span class="string">&#x27;/video/url&#x27;</span>, &#123;<span class="attr">id</span>: item.<span class="property">data</span>.<span class="property">vid</span>&#125;)</span><br><span class="line">      item.<span class="property">dealedUrl</span> = urlInfo.<span class="property">urls</span>[<span class="number">0</span>].<span class="property">url</span></span><br><span class="line">      <span class="keyword">return</span> item</span><br><span class="line">    &#125;))</span><br><span class="line"></span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">      videoList</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure>



<p>但这种写法，真机调试时，会报<code>videoListData.datas</code>是<code>undefined</code>，要把拿出来</p>
<p>实际上发现，其实就是<code>/video/group</code>前面的这个接口，报302没拿到数据！！估计跟NodeJS中间件的做了2分钟缓存有关，重新清除下数据，又可以拿到了</p>
<p>这个接口不知道咋回事，有时候会返回数据，有时候就是空，所以在做map的时候，是<code>undefined.map</code></p>
<p>还是做下异常处理吧</p>
<p>最后在issue上和人讨论解决了：<a target="_blank" rel="noopener" href="https://github.com/Binaryify/NeteaseCloudMusicApi/issues/1640">通过查询视频分类列表获取视频id，用此id作为参数查询视频列表没有数据 · Issue #1640 · Binaryify&#x2F;NeteaseCloudMusicApi (github.com)</a></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 获取视频列表数据</span></span><br><span class="line"><span class="keyword">async</span> <span class="title function_">getVideoList</span>(<span class="params">navId</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span>(!navId) <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> videoListData = <span class="keyword">await</span> <span class="title function_">request</span>(<span class="string">&#x27;/video/group&#x27;</span>, &#123;<span class="attr">id</span>: navId, <span class="attr">offset</span>: <span class="number">0</span>&#125;) <span class="comment">// 这个接口有时候会报302,然后就导致获取视频url的接口有问题，undefined.map会报错</span></span><br><span class="line"></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(videoListData)</span><br><span class="line">    <span class="keyword">let</span> index = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> videoList = <span class="keyword">await</span> <span class="title class_">Promise</span>.<span class="title function_">all</span>(videoListData.<span class="property">datas</span>.<span class="title function_">map</span>(<span class="keyword">async</span> item =&gt; &#123;</span><br><span class="line">      item.<span class="property">id</span> = index++</span><br><span class="line">      <span class="keyword">let</span> urlInfo = <span class="keyword">await</span> <span class="title function_">request</span>(<span class="string">&#x27;/video/url&#x27;</span>, &#123;<span class="attr">id</span>: item.<span class="property">data</span>.<span class="property">vid</span>&#125;)</span><br><span class="line">      item.<span class="property">dealedUrl</span> = urlInfo.<span class="property">urls</span>[<span class="number">0</span>].<span class="property">url</span></span><br><span class="line">      <span class="keyword">return</span> item</span><br><span class="line">    &#125;))</span><br><span class="line"></span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">      videoList,</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125; <span class="keyword">catch</span>(err) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(err)</span><br><span class="line">    wx.<span class="title function_">showToast</span>(&#123;</span><br><span class="line">      <span class="attr">title</span>: <span class="string">&#x27;资源转移，请稍后再试&#x27;</span>,</span><br><span class="line">      <span class="attr">icon</span>: <span class="string">&#x27;none&#x27;</span></span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<p><code>login.js</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 本地存储个人信息</span></span><br><span class="line">wx.<span class="title function_">setStorage</span>(&#123;</span><br><span class="line">  <span class="attr">key</span>: <span class="string">&#x27;userinfo&#x27;</span>,</span><br><span class="line">  <span class="attr">data</span>: <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(res.<span class="property">profile</span>)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">let</span> cookie = res.<span class="property">cookie</span>.<span class="title function_">split</span>(<span class="string">&#x27;;;&#x27;</span>).<span class="title function_">find</span>(<span class="function"><span class="params">item</span> =&gt;</span> item.<span class="title function_">indexOf</span>(<span class="string">&#x27;MUSIC_U&#x27;</span>) !== -<span class="number">1</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(cookie)</span><br><span class="line">wx.<span class="title function_">setStorage</span>(&#123;</span><br><span class="line">  <span class="attr">key</span>: <span class="string">&#x27;cookie&#x27;</span>,</span><br><span class="line">  <span class="comment">// data: res.cookie,</span></span><br><span class="line">  <span class="attr">data</span>: cookie,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>



<p>调整下样式</p>
<p>在点击菜单栏的回调中，调用上面的函数</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 点击切换导航的回调</span></span><br><span class="line"><span class="title function_">changeNav</span>(<span class="params">event</span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> navId = <span class="title class_">Number</span>(event.<span class="property">currentTarget</span>.<span class="property">id</span>)</span><br><span class="line">  <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">    navId</span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="comment">// 动态获取当前导航对应的视频数据</span></span><br><span class="line">  <span class="variable language_">this</span>.<span class="title function_">getVideoList</span>(navId)</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<p>加下过渡，使用wx的api</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">    wx.<span class="title function_">showLoading</span>(&#123;</span><br><span class="line">      <span class="attr">title</span>: <span class="string">&#x27;加载中&#x27;</span>,</span><br><span class="line">    &#125;);</span><br><span class="line">      </span><br><span class="line">    <span class="comment">// 动态获取当前导航对应的视频数据</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">getVideoList</span>(navId)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">....</span><br><span class="line"></span><br><span class="line">      <span class="keyword">let</span> videoList = <span class="keyword">await</span> <span class="title class_">Promise</span>.<span class="title function_">all</span>(videoListData.<span class="property">datas</span>.<span class="title function_">map</span>(<span class="keyword">async</span> item =&gt; &#123;</span><br><span class="line">        item.<span class="property">id</span> = index++</span><br><span class="line">        <span class="keyword">let</span> urlInfo = <span class="keyword">await</span> <span class="title function_">request</span>(<span class="string">&#x27;/video/url&#x27;</span>, &#123;<span class="attr">id</span>: item.<span class="property">data</span>.<span class="property">vid</span>&#125;)</span><br><span class="line">        item.<span class="property">dealedUrl</span> = urlInfo.<span class="property">urls</span>[<span class="number">0</span>].<span class="property">url</span></span><br><span class="line">        <span class="keyword">return</span> item</span><br><span class="line">      &#125;))</span><br><span class="line">      wx.<span class="title function_">hideLoading</span>() <span class="comment">// 获取全部数据后关闭</span></span><br><span class="line">        </span><br></pre></td></tr></table></figure>

<p>在点击新的导航时，旧的视频数据不应该让它显示出来的，只要清空下videoList变量里的数据即可</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 点击切换导航的回调</span></span><br><span class="line"><span class="title function_">changeNav</span>(<span class="params">event</span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> navId = <span class="title class_">Number</span>(event.<span class="property">currentTarget</span>.<span class="property">id</span>)</span><br><span class="line">  <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">    navId,</span><br><span class="line">    <span class="attr">videoList</span>: [] <span class="comment">// 每次切换时，都重置下视频数据</span></span><br><span class="line">  &#125;)</span><br><span class="line">  wx.<span class="title function_">showLoading</span>(&#123;</span><br><span class="line">    <span class="attr">title</span>: <span class="string">&#x27;加载中&#x27;</span>,</span><br><span class="line">  &#125;);</span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">  <span class="variable language_">this</span>.<span class="title function_">getVideoList</span>(navId)</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<h2 id="导航过渡效果实现"><a href="#导航过渡效果实现" class="headerlink" title="导航过渡效果实现"></a>导航过渡效果实现</h2><p>点击哪个导航，哪个导航移动到第一位</p>
<p>使用<code>scroll-view</code>的<code>scroll-into-view</code>属性，值和被包裹的元素的id保持一致，且只能以字母开头</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 导航区域 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">scroll-view</span> <span class="attr">scroll-x</span>=<span class="string">&quot;true&quot;</span> <span class="attr">class</span>=<span class="string">&quot;navScroll&quot;</span> <span class="attr">enable-flex</span> <span class="attr">scroll-into-view</span>=<span class="string">&quot;&#123;&#123;&#x27;scroll&#x27; + navId&#125;&#125;&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;navItem&quot;</span> <span class="attr">wx:for</span>=<span class="string">&quot;&#123;&#123;videoGroupList&#125;&#125;&quot;</span> <span class="attr">wx:key</span>=<span class="string">&quot;id&quot;</span>  <span class="attr">id</span>=<span class="string">&quot;&#123;&#123;&#x27;scroll&#x27;+item.id&#125;&#125;&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;navContent &#123;&#123;navId === item.id ? &#x27;active&#x27; : &#x27;&#x27;&#125;&#125;&quot;</span> <span class="attr">bindtap</span>=<span class="string">&quot;changeNav&quot;</span> <span class="attr">id</span>=<span class="string">&quot;&#123;&#123;item.id&#125;&#125;&quot;</span>&gt;</span>&#123;&#123;item.name&#125;&#125;<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">scroll-view</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>但现在过渡很生硬，在<code>scroll-view</code>上加上过渡<code>scroll-with-animation</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 导航区域 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">scroll-view</span> <span class="attr">scroll-x</span>=<span class="string">&quot;true&quot;</span> <span class="attr">class</span>=<span class="string">&quot;navScroll&quot;</span> <span class="attr">enable-flex</span> <span class="attr">scroll-into-view</span>=<span class="string">&quot;&#123;&#123;&#x27;scroll&#x27; + navId&#125;&#125;&quot;</span> <span class="attr">scroll-with-animation</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="解决多个视频同时播放问题"><a href="#解决多个视频同时播放问题" class="headerlink" title="解决多个视频同时播放问题"></a>解决多个视频同时播放问题</h2><p><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/component/video.html">video | 微信开放文档 (qq.com)</a></p>
<p><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/api/media/video/wx.createVideoContext.html">VideoContext | 微信开放文档 (qq.com)</a></p>
<p>同时只能有一个视频播放，</p>
<p>当播放新的视频时，关闭播放的视频</p>
<p>video组件的bindplay事件</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">video</span> <span class="attr">src</span>=<span class="string">&quot;&#123;&#123;item.dealedUrl&#125;&#125;&quot;</span> <span class="attr">bindplay</span>=<span class="string">&quot;handlePlay&quot;</span> <span class="attr">id</span>=<span class="string">&quot;&#123;&#123;item.data.vid&#125;&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">video</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>



<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 播放视频的回调</span></span><br><span class="line">  <span class="title function_">handlePlay</span>(<span class="params">event</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;play&#x27;</span>)</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 1.播放的回调中，需要找到上一个播放的视频</span></span><br><span class="line"><span class="comment">     * 2.在播放新视频之前，关闭上一个播放的视频</span></span><br><span class="line"><span class="comment">     * 关键：</span></span><br><span class="line"><span class="comment">     *    1.如何找到上一个视频的实例对象：将属性添加到this身上</span></span><br><span class="line"><span class="comment">     *    2.如何确定点击播放的视频和正在播放的视频，不是同一个视频：每次都保存在vid并比较</span></span><br><span class="line"><span class="comment">     * </span></span><br><span class="line"><span class="comment">     * 通过给this身上只绑定一个属性，并且控制代码顺序，可以实现上面的效果</span></span><br><span class="line"><span class="comment">     * 这就是单例模式：</span></span><br><span class="line"><span class="comment">     *  1.需要创建多个对象的场景下，通过一个变量接收，始终保持只有一个对象</span></span><br><span class="line"><span class="comment">     *  2.节省内存空间</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">let</span> vid = event.<span class="property">currentTarget</span>.<span class="property">id</span></span><br><span class="line">    <span class="comment">// 关闭上一个播放的视频</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">vid</span> !== vid &amp;&amp; <span class="variable language_">this</span>.<span class="property">videoContext</span> &amp;&amp; <span class="variable language_">this</span>.<span class="property">videoContext</span>.<span class="title function_">stop</span>()</span><br><span class="line">    <span class="comment">// this.vid // 在挂载之前，拿到的id，就是上一次id</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">vid</span> = vid <span class="comment">// 第一次播放时，把vid挂载到this上</span></span><br><span class="line">    <span class="comment">// 创建控制video标签的实例对象</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">videoContext</span> =  wx.<span class="title function_">createVideoContext</span>(vid)</span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure>

<h2 id="使用image代替video"><a href="#使用image代替video" class="headerlink" title="使用image代替video"></a>使用image代替video</h2><p><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/community/develop/doc/000e4ef22583d8961919efb6b56009">同一页面存在多个video时，video无法正常播放一直在加载转圈 | 微信开放社区 (qq.com)</a></p>
<p>使用poster属性，同时新增image标签</p>
<p>零和控制图片标签和video标签</p>
<ul>
<li>data中定义videoId</li>
<li>图片标签也用视频标签的回调，注意视频标签是<code>bindplay</code>，图片时<code>bindtap</code><ul>
<li>点击图片时，也给该回调传递当前视频的id，保存到<code>videoId</code>中，现在点击哪张图，就存了哪个视频的id，就可以通过此控制开启哪个视频标签</li>
</ul>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 播放视频的回调</span></span><br><span class="line">  <span class="title function_">handlePlay</span>(<span class="params">event</span>) &#123;</span><br><span class="line">    <span class="comment">// console.log(&#x27;play&#x27;)</span></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 1.播放的回调中，需要找到上一个播放的视频</span></span><br><span class="line"><span class="comment">     * 2.在播放新视频之前，关闭上一个播放的视频</span></span><br><span class="line"><span class="comment">     * 关键：</span></span><br><span class="line"><span class="comment">     *    1.如何找到上一个视频的实例对象：将属性添加到this身上</span></span><br><span class="line"><span class="comment">     *    2.如何确定点击播放的视频和正在播放的视频，不是同一个视频：每次都保存在vid并比较</span></span><br><span class="line"><span class="comment">     * </span></span><br><span class="line"><span class="comment">     * 通过给this身上只绑定一个属性，并且控制代码顺序，可以实现上面的效果</span></span><br><span class="line"><span class="comment">     * 这就是单例模式：</span></span><br><span class="line"><span class="comment">     *  1.需要创建多个对象的场景下，通过一个变量接收，始终保持只有一个对象</span></span><br><span class="line"><span class="comment">     *  2.节省内存空间</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">let</span> vid = event.<span class="property">currentTarget</span>.<span class="property">id</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 图片标签相关代码1</span></span><br><span class="line">    <span class="comment">// 点击图片时，拿到传过来对应的视频id，更新data中的videoId的状态</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">      <span class="attr">videoId</span>: vid</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 关闭上一个播放的视频</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">vid</span> !== vid &amp;&amp; <span class="variable language_">this</span>.<span class="property">videoContext</span> &amp;&amp; <span class="variable language_">this</span>.<span class="property">videoContext</span>.<span class="title function_">stop</span>()</span><br><span class="line">    <span class="comment">// this.vid // 在挂载之前，拿到的id，就是上一次id</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">vid</span> = vid <span class="comment">// 第一次播放时，把vid挂载到this上</span></span><br><span class="line">    <span class="comment">// 创建控制video标签的实例对象</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">videoContext</span> =  wx.<span class="title function_">createVideoContext</span>(vid)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 图片标签相关代码2</span></span><br><span class="line">    <span class="comment">// 点击图片后，视频应自动播放</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">videoContext</span>.<span class="title function_">play</span>()</span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure>



<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">video</span> </span></span><br><span class="line"><span class="tag">             <span class="attr">src</span>=<span class="string">&quot;&#123;&#123;item.dealedUrl&#125;&#125;&quot;</span> </span></span><br><span class="line"><span class="tag">             <span class="attr">bindplay</span>=<span class="string">&quot;handlePlay&quot;</span> </span></span><br><span class="line"><span class="tag">             <span class="attr">id</span>=<span class="string">&quot;&#123;&#123;item.data.vid&#125;&#125;&quot;</span> </span></span><br><span class="line"><span class="tag">             <span class="attr">poster</span>=<span class="string">&quot;&#123;&#123;item.data.coverUrl&#125;&#125;&quot;</span> </span></span><br><span class="line"><span class="tag">             <span class="attr">class</span>=<span class="string">&quot;common&quot;</span></span></span><br><span class="line"><span class="tag">             <span class="attr">wx:if</span>=<span class="string">&quot;&#123;&#123;videoId === item.data.vid&#125;&#125;&quot;</span></span></span><br><span class="line"><span class="tag">         &gt;</span><span class="tag">&lt;/<span class="name">video</span>&gt;</span></span><br><span class="line">         <span class="comment">&lt;!-- 性能优化，使用image图片代替video标签 --&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">image</span> </span></span><br><span class="line"><span class="tag">             <span class="attr">class</span>=<span class="string">&quot;common&quot;</span> </span></span><br><span class="line"><span class="tag">             <span class="attr">src</span>=<span class="string">&quot;&#123;&#123;item.data.coverUrl&#125;&#125;&quot;</span> </span></span><br><span class="line"><span class="tag">             <span class="attr">mode</span>=<span class="string">&quot;aspectFit&quot;</span> </span></span><br><span class="line"><span class="tag">             <span class="attr">bindtap</span>=<span class="string">&quot;handlePlay&quot;</span> </span></span><br><span class="line"><span class="tag">             <span class="attr">id</span>=<span class="string">&quot;&#123;&#123;item.data.vid&#125;&#125;&quot;</span></span></span><br><span class="line"><span class="tag">             <span class="attr">wx:else</span></span></span><br><span class="line"><span class="tag">         /&gt;</span></span><br></pre></td></tr></table></figure>



<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.videoItem</span> <span class="selector-class">.common</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">360</span>rpx;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">10</span>rpx;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.videoItem</span> image<span class="selector-class">.common</span> &#123;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#000000</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>注意：由于我们用image替代了video，上一小节的优化代码就可以注释掉了，因为不存在多个视频同时存在的情况了</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 播放视频的回调</span></span><br><span class="line"><span class="title function_">handlePlay</span>(<span class="params">event</span>) &#123;</span><br><span class="line">  <span class="comment">// console.log(&#x27;play&#x27;)</span></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 1.播放的回调中，需要找到上一个播放的视频</span></span><br><span class="line"><span class="comment">   * 2.在播放新视频之前，关闭上一个播放的视频</span></span><br><span class="line"><span class="comment">   * 关键：</span></span><br><span class="line"><span class="comment">   *    1.如何找到上一个视频的实例对象：将属性添加到this身上</span></span><br><span class="line"><span class="comment">   *    2.如何确定点击播放的视频和正在播放的视频，不是同一个视频：每次都保存在vid并比较</span></span><br><span class="line"><span class="comment">   * </span></span><br><span class="line"><span class="comment">   * 通过给this身上只绑定一个属性，并且控制代码顺序，可以实现上面的效果</span></span><br><span class="line"><span class="comment">   * 这就是单例模式：</span></span><br><span class="line"><span class="comment">   *  1.需要创建多个对象的场景下，通过一个变量接收，始终保持只有一个对象</span></span><br><span class="line"><span class="comment">   *  2.节省内存空间</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">let</span> vid = event.<span class="property">currentTarget</span>.<span class="property">id</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// 图片标签相关代码1</span></span><br><span class="line">  <span class="comment">// 点击图片时，拿到传过来对应的视频id，更新data中的videoId的状态</span></span><br><span class="line">  <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">    <span class="attr">videoId</span>: vid</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 关闭上一个播放的视频</span></span><br><span class="line">  <span class="comment">// this.vid !== vid &amp;&amp; this.videoContext &amp;&amp; this.videoContext.stop()</span></span><br><span class="line">  <span class="comment">// this.vid // 在挂载之前，拿到的id，就是上一次id</span></span><br><span class="line">  <span class="comment">// this.vid = vid // 第一次播放时，把vid挂载到this上</span></span><br><span class="line">  <span class="comment">// 创建控制video标签的实例对象</span></span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">videoContext</span> =  wx.<span class="title function_">createVideoContext</span>(vid)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 图片标签相关代码2</span></span><br><span class="line">  <span class="comment">// 点击图片后，视频应自动播放</span></span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">videoContext</span>.<span class="title function_">play</span>()</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<p>那么此时里面的逻辑就比较清晰了，相当于每次就只针对一个视频在写逻辑了，因为页面同时只会出现一个视频</p>
<ul>
<li>拿到视频id</li>
<li>更新id</li>
<li>创建视频实例</li>
<li>播放</li>
</ul>
<p>模拟器上有一个小问题：点击第一个播放，点击第二个播放，点击第三个播放，再回到第一个点击，没有自动播放</p>
<p>视频里说，这个是模拟器的问题，真机调试的时候是没有的</p>
<p>经过测试，真机上的问题比这个还严重，每一个点击都没有自动播放（等了一会，应该是视频资源加载的问题，但有时候又不行，等死了都没自动播放）</p>
<p>这一块应该可以优化，后面优化篇再说，先把整体流程过一遍</p>
<h2 id="解决视频大小和图片大小不一致的问题"><a href="#解决视频大小和图片大小不一致的问题" class="headerlink" title="解决视频大小和图片大小不一致的问题"></a>解决视频大小和图片大小不一致的问题</h2><p>教程里是调整video标签的object-fit属性，但我们上一小节自己调整了图片的mode属性，</p>
<p>视频还是保持原宽高比最好，调整图片吧</p>
<h2 id="视频列表滑动功能"><a href="#视频列表滑动功能" class="headerlink" title="视频列表滑动功能"></a>视频列表滑动功能</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 视频列表 */</span></span><br><span class="line"><span class="selector-class">.videoScroll</span> &#123;</span><br><span class="line">    <span class="attribute">margin-top</span>: <span class="number">20</span>rpx; <span class="comment">/* 移除掉导航的margin-bottom样式*/</span></span><br><span class="line">    <span class="comment">/* scroll-view需要指定height才会生效，动态计算：视口高度 - 头部 - 导航 - 边距 ，计算完还要在外面滑动一下，外面不能有滚动条*/</span></span><br><span class="line">    <span class="comment">/* height: calc(100vh - 60rpx - 60rpx - 40rpx); */</span></span><br><span class="line">    <span class="attribute">height</span>: <span class="built_in">calc</span>(<span class="number">100vh</span> - <span class="number">160</span>rpx); </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>数字左右需要加空格，计算才会生效</p>
<h2 id="实现再次播放跳转到指定位置"><a href="#实现再次播放跳转到指定位置" class="headerlink" title="实现再次播放跳转到指定位置"></a>实现再次播放跳转到指定位置</h2><p>问题描述：点击第二个视频，再点回第一个视频，视频又重新播放了</p>
<p>产生原因：我们用image标签做了性能优化，每次播放的时候，相当于重新加载了</p>
<p>解决问题：</p>
<ul>
<li><p>wx提供了跳转到视频指定位置的api：<a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/api/media/video/VideoContext.seek.html">VideoContext.seek(number position) | 微信开放文档 (qq.com)</a></p>
</li>
<li><p>需要知道视频播放的事件，以及视频id，所以数据结构设计成数组包对象的格式</p>
<ul>
<li>data中定义<code>videoUpdateTime: []</code></li>
<li>一个视频对象，只需要push一次</li>
</ul>
</li>
<li><p>如何知道视频播放的时间： <code>bindtimeupdate</code>属性</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 监听视频播放进度的回调</span></span><br><span class="line"><span class="title function_">handleTimeUpdate</span>(<span class="params">event</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(event)</span><br><span class="line">  <span class="keyword">let</span> videoTimeObj = &#123;</span><br><span class="line">    <span class="attr">vid</span>: event.<span class="property">currentTarget</span>.<span class="property">id</span>,</span><br><span class="line">    <span class="attr">currentTime</span>: event.<span class="property">detail</span>.<span class="property">currentTime</span></span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">let</span> &#123;videoUpdateTime&#125; = <span class="variable language_">this</span>.<span class="property">data</span></span><br><span class="line">  <span class="comment">// 判断videoUpdateTime中，是否有当前视频的播放记录</span></span><br><span class="line">  <span class="keyword">let</span> videoItem = videoUpdateTime.<span class="title function_">find</span>(<span class="function"><span class="params">item</span> =&gt;</span> item.<span class="property">vid</span> ===  videoTimeObj.<span class="property">vid</span>)</span><br><span class="line">  <span class="keyword">if</span>(videoItem) &#123;</span><br><span class="line">    videoItem.<span class="property">currentTime</span> = videoTimeObj.<span class="property">currentTime</span></span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    videoUpdateTime.<span class="title function_">push</span>(videoTimeObj)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 更新播放状态</span></span><br><span class="line">  <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">    videoUpdateTime</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">video</span> </span></span><br><span class="line"><span class="tag">    <span class="attr">src</span>=<span class="string">&quot;&#123;&#123;item.dealedUrl&#125;&#125;&quot;</span> </span></span><br><span class="line"><span class="tag">    <span class="attr">bindplay</span>=<span class="string">&quot;handlePlay&quot;</span> </span></span><br><span class="line"><span class="tag">    <span class="attr">id</span>=<span class="string">&quot;&#123;&#123;item.data.vid&#125;&#125;&quot;</span> </span></span><br><span class="line"><span class="tag">    <span class="attr">poster</span>=<span class="string">&quot;&#123;&#123;item.data.coverUrl&#125;&#125;&quot;</span> </span></span><br><span class="line"><span class="tag">    <span class="attr">class</span>=<span class="string">&quot;common&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">wx:if</span>=<span class="string">&quot;&#123;&#123;videoId === item.data.vid&#125;&#125;&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">bindtimeupdate</span>=<span class="string">&quot;handleTimeUpdate&quot;</span></span></span><br><span class="line"><span class="tag">&gt;</span><span class="tag">&lt;/<span class="name">video</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><img src="/2022/10/15/web/%E8%BF%9B%E9%98%B6/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%BC%80%E5%8F%91/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E6%A6%82%E8%BF%B0/image-20221105084451343.png" alt="image-20221105084451343"></p>
</li>
<li><p>在播放的回调中，正式播放时，再加一个判断，判读是否有播放记录，如果有，跳转至指定位置</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 判断是否有播放记录，如果有，跳转至指定位置</span></span><br><span class="line"><span class="keyword">let</span> &#123;videoUpdateTime&#125; = <span class="variable language_">this</span>.<span class="property">data</span></span><br><span class="line"><span class="keyword">let</span> videoItem = videoUpdateTime.<span class="title function_">find</span>(<span class="function"><span class="params">item</span> =&gt;</span> item.<span class="property">vid</span> === vid)</span><br><span class="line"><span class="keyword">if</span>(videoItem) &#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">videoContext</span>.<span class="title function_">seek</span>(videoItem.<span class="property">currentTime</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 图片标签相关代码2</span></span><br><span class="line"><span class="comment">// 点击图片后，视频应自动播放</span></span><br><span class="line"><span class="variable language_">this</span>.<span class="property">videoContext</span>.<span class="title function_">play</span>()</span><br></pre></td></tr></table></figure>
</li>
<li><p>视频播放结束时，清空播放记录，使用<code>bindended</code>事件</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 监听视频播放结束</span></span><br><span class="line"><span class="title function_">handleEnded</span>(<span class="params">event</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;播放结束&#x27;</span>)</span><br><span class="line">  <span class="comment">// 移出当前播放视频的对象</span></span><br><span class="line">  <span class="keyword">let</span> &#123;videoUpdateTime&#125; = <span class="variable language_">this</span>.<span class="property">data</span></span><br><span class="line">  <span class="keyword">let</span> index = videoUpdateTime.<span class="title function_">findIndex</span>(<span class="function"><span class="params">item</span> =&gt;</span> item.<span class="property">vid</span> === event.<span class="property">currentTarget</span>.<span class="property">id</span>)</span><br><span class="line">  videoUpdateTime.<span class="title function_">splice</span>(index, <span class="number">1</span>)</span><br><span class="line">  <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">    videoUpdateTime</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">video</span> </span></span><br><span class="line"><span class="tag">    <span class="attr">src</span>=<span class="string">&quot;&#123;&#123;item.dealedUrl&#125;&#125;&quot;</span> </span></span><br><span class="line"><span class="tag">    <span class="attr">bindplay</span>=<span class="string">&quot;handlePlay&quot;</span> </span></span><br><span class="line"><span class="tag">    <span class="attr">id</span>=<span class="string">&quot;&#123;&#123;item.data.vid&#125;&#125;&quot;</span> </span></span><br><span class="line"><span class="tag">    <span class="attr">poster</span>=<span class="string">&quot;&#123;&#123;item.data.coverUrl&#125;&#125;&quot;</span> </span></span><br><span class="line"><span class="tag">    <span class="attr">class</span>=<span class="string">&quot;common&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">wx:if</span>=<span class="string">&quot;&#123;&#123;videoId === item.data.vid&#125;&#125;&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">bindtimeupdate</span>=<span class="string">&quot;handleTimeUpdate&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">bindended</span>=<span class="string">&quot;handleEnded&quot;</span></span></span><br><span class="line"><span class="tag">&gt;</span><span class="tag">&lt;/<span class="name">video</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="scroll-view下拉刷新，上拉加载"><a href="#scroll-view下拉刷新，上拉加载" class="headerlink" title="scroll-view下拉刷新，上拉加载"></a><code>scroll-view</code>下拉刷新，上拉加载</h2><p><strong>下拉刷新</strong></p>
<p>使用<code>bindrefresherrefresh</code>，自定义下拉被触发这个属性，需要使用<code>refresher-enabled</code>开启</p>
<p>刷新时调用接口获取视频数据</p>
<p>添加<code>refresher-triggered</code>属性，用一个变量标识下拉刷新是否被触发，默认给false，在获取视频数据接口中，添加控制，设置为true</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 监听下拉刷新事件</span></span><br><span class="line"><span class="title function_">handleRefresher</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">// console.log(&#x27;下拉刷新&#x27;)</span></span><br><span class="line">  <span class="comment">// 再次发请求，获取视频列表的数据</span></span><br><span class="line">  <span class="variable language_">this</span>.<span class="title function_">getVideoList</span>(<span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">navId</span>)</span><br><span class="line">&#125;,</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line"><span class="comment">// 获取视频列表数据</span></span><br><span class="line"><span class="keyword">async</span> <span class="title function_">getVideoList</span>(<span class="params">navId</span>) &#123;</span><br><span class="line"> <span class="comment">// ...</span></span><br><span class="line">    <span class="comment">// 关闭消息提示框</span></span><br><span class="line">    wx.<span class="title function_">hideLoading</span>()</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">      videoList,</span><br><span class="line">      <span class="attr">isTrigger</span>: <span class="literal">false</span>, <span class="comment">// 关闭下拉刷新</span></span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;,</span><br><span class="line">    </span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 视频列表区域 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">scroll-view</span> </span></span><br><span class="line"><span class="tag">    <span class="attr">class</span>=<span class="string">&quot;videoScroll&quot;</span> </span></span><br><span class="line"><span class="tag">    <span class="attr">scroll-y</span>=<span class="string">&quot;true&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">refresher-enabled</span></span></span><br><span class="line"><span class="tag">    <span class="attr">bindrefresherrefresh</span>=<span class="string">&quot;handleRefresher&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">refresher-triggered</span>=<span class="string">&quot;&#123;&#123;isTrigger&#125;&#125;&quot;</span></span></span><br><span class="line"><span class="tag">&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>上拉加载</strong></p>
<p>使用<code>bindscrolltolowder</code>属性</p>
<p>现在接口提供了offset，支持分页了，自己实现</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 监听下拉触底事件</span></span><br><span class="line"><span class="keyword">async</span> <span class="title function_">handleToLower</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;下拉&#x27;</span>)</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 数据分页</span></span><br><span class="line"><span class="comment">   * 1.前端分页</span></span><br><span class="line"><span class="comment">   * 2.后端分页</span></span><br><span class="line"><span class="comment">   * 备注：网易云音乐没有开放的分页的接口</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">let</span> newVideoList = <span class="keyword">await</span> <span class="variable language_">this</span>.<span class="title function_">getVideoList</span>(<span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">navId</span>, <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">offset</span>+=<span class="number">8</span>)</span><br><span class="line">  <span class="keyword">let</span> videoList = <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">videoList</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(videoList)</span><br><span class="line">  <span class="comment">// 将新数据更新到原有视频列表中</span></span><br><span class="line">  videoList.<span class="title function_">push</span>(...newVideoList)</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(videoList)</span><br><span class="line">  <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">    videoList</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<p>获取视频数据的接口要修正一下，</p>
<p>data中初始化offset为0，上拉刷新时，offset每次加8</p>
<p>需要对setData的逻辑做下判断处理</p>
<p>同时需要对id的生成规则重新做下处理</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 获取视频列表数据</span></span><br><span class="line"><span class="keyword">async</span> <span class="title function_">getVideoList</span>(<span class="params">navId, offset = <span class="variable language_">this</span>.data.offset</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span>(!navId) <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> videoListData = <span class="keyword">await</span> <span class="title function_">request</span>(<span class="string">&#x27;/video/group&#x27;</span>, &#123;<span class="attr">id</span>: navId, offset&#125;) <span class="comment">// 这个接口有时候会报302,然后就导致获取视频url的接口有问题，undefined.map会报错</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// console.log(videoListData)</span></span><br><span class="line">    <span class="keyword">let</span> index = <span class="number">0</span></span><br><span class="line">    <span class="keyword">let</span> videoList = <span class="keyword">await</span> <span class="title class_">Promise</span>.<span class="title function_">all</span>(videoListData.<span class="property">datas</span>.<span class="title function_">map</span>(<span class="keyword">async</span> item =&gt; &#123;</span><br><span class="line">      <span class="comment">// index++</span></span><br><span class="line">      <span class="comment">// let temp = offset </span></span><br><span class="line">      <span class="comment">// let distance = temp * 8 - 1</span></span><br><span class="line"></span><br><span class="line">      <span class="keyword">let</span> temp = offset - <span class="number">1</span></span><br><span class="line">      index++</span><br><span class="line">      item.<span class="property">id</span> = temp += index</span><br><span class="line">      <span class="keyword">let</span> urlInfo = <span class="keyword">await</span> <span class="title function_">request</span>(<span class="string">&#x27;/video/url&#x27;</span>, &#123;<span class="attr">id</span>: item.<span class="property">data</span>.<span class="property">vid</span>&#125;)</span><br><span class="line">      item.<span class="property">dealedUrl</span> = urlInfo.<span class="property">urls</span>[<span class="number">0</span>].<span class="property">url</span></span><br><span class="line">      <span class="keyword">return</span> item</span><br><span class="line">    &#125;))</span><br><span class="line">    <span class="keyword">if</span>(offset === <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">        videoList,</span><br><span class="line">        <span class="attr">isTrigger</span>: <span class="literal">false</span>, <span class="comment">// 关闭下拉刷新</span></span><br><span class="line">      &#125;)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">        <span class="attr">isTrigger</span>: <span class="literal">false</span>, <span class="comment">// 关闭下拉刷新</span></span><br><span class="line">      &#125;)</span><br><span class="line">      <span class="keyword">return</span> videoList <span class="comment">// 把视频数据交出去，实际上更新数据的逻辑，放在外面会好一点</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 关闭消息提示框</span></span><br><span class="line">    wx.<span class="title function_">hideLoading</span>()</span><br><span class="line">  &#125; <span class="keyword">catch</span>(err) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(err)</span><br><span class="line">    wx.<span class="title function_">showToast</span>(&#123;</span><br><span class="line">      <span class="attr">title</span>: <span class="string">&#x27;资源转移，请稍后再试&#x27;</span>,</span><br><span class="line">      <span class="attr">icon</span>: <span class="string">&#x27;none&#x27;</span></span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<p><code>scrol-view</code>的上拉触底可能会触发多次，有时候到了底部，往上滑离开底部边界时，也会触发</p>
<p>这部分待优化</p>
<h2 id="页面下拉刷新、上拉触底事件说明"><a href="#页面下拉刷新、上拉触底事件说明" class="headerlink" title="页面下拉刷新、上拉触底事件说明"></a>页面下拉刷新、上拉触底事件说明</h2><p>上面我们处理的是<code>scroll-view</code>的刷新事件</p>
<p>作为页面，也是有对应的事件的</p>
<p>在页面的生命周期函数里</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 页面相关事件处理函数--监听用户下拉动作</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="title function_">onPullDownRefresh</span>(<span class="params"></span>) &#123;</span><br><span class="line"></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 页面上拉触底事件的处理函数</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="title function_">onReachBottom</span>(<span class="params"></span>) &#123;</span><br><span class="line"></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 用户点击右上角分享</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="title function_">onShareAppMessage</span>(<span class="params"></span>) &#123;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<p>页面要有滚动条，才会触发</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 视频列表 */</span></span><br><span class="line"><span class="selector-class">.videoScroll</span> &#123;</span><br><span class="line">    <span class="attribute">margin-top</span>: <span class="number">20</span>rpx; <span class="comment">/* 移除掉导航的margin-bottom样式*/</span></span><br><span class="line">    <span class="comment">/* scroll-view需要指定height才会生效，动态计算：视口高度 - 头部 - 导航 - 边距 ，计算完还要在外面滑动一下，外面不能有滚动条*/</span></span><br><span class="line">    <span class="comment">/* height: calc(100vh - 60rpx - 60rpx - 40rpx);  */</span></span><br><span class="line">    <span class="comment">/* height: calc(100vh - 160rpx);  */</span></span><br><span class="line">    <span class="attribute">height</span>: <span class="built_in">calc</span>(<span class="number">100vh</span> - <span class="number">100</span>rpx); <span class="comment">/*测试页面的上拉触底*/</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>高度给高点，我们不需要做其他事情，上拉触底直接会在回调中被调用</p>
<p>而下拉刷新，需要设置一下<a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/reference/api/Page.html">Page(Object object) | 微信开放文档 (qq.com)</a>的<code>onPullDownRefresh</code>的属性</p>
<p>在video.json中配置，<a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/reference/api/Page.html#onPullDownRefresh">Page(Object object) | 微信开放文档 (qq.com)</a></p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;usingComponents&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span><span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;navigationBarTitleText&quot;</span><span class="punctuation">:</span> <span class="string">&quot;视频页&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;enablePullDownRefresh&quot;</span><span class="punctuation">:</span> <span class="keyword">true</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<p>页面的下拉刷新，会自动回收的，但没有动画</p>
<p>实际开发时，到底用页面的事件，还是用<code>scroll-veiw</code>的事件，看实际需求</p>
<h2 id="转发分享功能实现"><a href="#转发分享功能实现" class="headerlink" title="转发分享功能实现"></a>转发分享功能实现</h2><p>视频的button转发，设置<code>open-type=&quot;share&quot;</code></p>
<p>页面转发，在对应js最外层的回调中，<a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/reference/api/Page.html">Page(Object object) | 微信开放文档 (qq.com)</a></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 用户点击右上角分享</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="title function_">onShareAppMessage</span>(<span class="params">&#123;<span class="keyword">from</span>&#125;</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span>(<span class="keyword">from</span> === <span class="string">&#x27;button&#x27;</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">title</span>: <span class="string">&#x27;来自button的转发&#x27;</span>,</span><br><span class="line">      <span class="attr">page</span>: <span class="string">&#x27;/pages/video/video&#x27;</span>,</span><br><span class="line">      <span class="attr">imageUrl</span>: <span class="string">&#x27;/static/images/nvsheng.jpg&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">title</span>: <span class="string">&#x27;来自menu的转发&#x27;</span>,</span><br><span class="line">      <span class="attr">page</span>: <span class="string">&#x27;/pages/video/video&#x27;</span>,</span><br><span class="line">      <span class="attr">imageUrl</span>: <span class="string">&#x27;/static/images/nvsheng.jpg&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>小程序后台，给好友添加体验权限</p>
<p><img src="/2022/10/15/web/%E8%BF%9B%E9%98%B6/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%BC%80%E5%8F%91/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E6%A6%82%E8%BF%B0/image-20221105114532987.png" alt="image-20221105114532987"></p>
<h2 id="每日推荐静态页面搭建"><a href="#每日推荐静态页面搭建" class="headerlink" title="每日推荐静态页面搭建"></a>每日推荐静态页面搭建</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--pages/recommendSong.wxml--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;recommendSongContainer&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 头部 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;header&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">image</span> <span class="attr">class</span>=<span class="string">&quot;image&quot;</span> <span class="attr">src</span>=<span class="string">&quot;/static/images/recommendSong/recommendSong.jpg&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;date&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;day&quot;</span>&gt;</span>17 /<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;month&quot;</span>&gt;</span>10<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>



<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* pages/recommendSong.wxss */</span></span><br><span class="line"><span class="selector-class">.recommendSongContainer</span> <span class="selector-class">.header</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">300</span>rpx;</span><br><span class="line">    <span class="comment">/* margin: 0; */</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.recommendSongContainer</span> <span class="selector-class">.header</span> <span class="selector-class">.image</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.recommendSongContainer</span> <span class="selector-class">.header</span> <span class="selector-class">.date</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">translate</span>(-<span class="number">50%</span>, -<span class="number">50%</span>);</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">300</span>rpx;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100</span>rpx;</span><br><span class="line">    <span class="comment">/* border: 1rpx solid red; */</span></span><br><span class="line">    <span class="attribute">text-align</span>: center;</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">100</span>rpx;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.header</span> <span class="selector-class">.date</span> <span class="selector-class">.day</span> &#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">38</span>rpx;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="/2022/10/15/web/%E8%BF%9B%E9%98%B6/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%BC%80%E5%8F%91/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E6%A6%82%E8%BF%B0/image-20221105144928984.png" alt="image-20221105144928984"></p>
<h2 id="日期动态显示"><a href="#日期动态显示" class="headerlink" title="日期动态显示"></a>日期动态显示</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--pages/recommendSong.wxml--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;recommendSongContainer&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 头部 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;header&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">image</span> <span class="attr">class</span>=<span class="string">&quot;image&quot;</span> <span class="attr">src</span>=<span class="string">&quot;/static/images/recommendSong/recommendSong.jpg&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;date&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;day&quot;</span>&gt;</span>&#123;&#123;day&#125;&#125; / <span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;month&quot;</span>&gt;</span>&#123;&#123;month&#125;&#125;<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>



<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 页面的初始数据</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="attr">data</span>: &#123;</span><br><span class="line">  <span class="attr">day</span>: <span class="string">&#x27;&#x27;</span>, <span class="comment">// 天</span></span><br><span class="line">  <span class="attr">month</span>: <span class="string">&#x27;&#x27;</span>, <span class="comment">//月</span></span><br><span class="line">&#125;,</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 生命周期函数--监听页面加载</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="title function_">onLoad</span>(<span class="params">options</span>) &#123;</span><br><span class="line">  <span class="comment">// 更新时间</span></span><br><span class="line">  <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">    <span class="attr">day</span>: <span class="keyword">new</span> <span class="title class_">Date</span>().<span class="title function_">getDate</span>(),</span><br><span class="line">    <span class="attr">month</span>: <span class="keyword">new</span> <span class="title class_">Date</span>().<span class="title function_">getMonth</span>() + <span class="number">1</span></span><br><span class="line">  &#125;)</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<h2 id="内容区静态页面搭建"><a href="#内容区静态页面搭建" class="headerlink" title="内容区静态页面搭建"></a>内容区静态页面搭建</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 内容区 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scroll-view</span> <span class="attr">class</span>=<span class="string">&quot;listScroll&quot;</span> <span class="attr">scroll-y</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;scrollItem&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">image</span> <span class="attr">src</span>=<span class="string">&quot;/static/images/nvsheng.jpg&quot;</span> <span class="attr">class</span>=<span class="string">&quot;image&quot;</span> <span class="attr">mode</span>=<span class="string">&quot;aspectFill&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;musicInfo&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;musicName text&quot;</span>&gt;</span>aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;author text&quot;</span>&gt;</span>aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;iconfont icon-gengduo-shuxiang&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        </span><br><span class="line">        <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;scrollItem&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">image</span> <span class="attr">src</span>=<span class="string">&quot;/static/images/nvsheng.jpg&quot;</span> <span class="attr">class</span>=<span class="string">&quot;image&quot;</span> <span class="attr">mode</span>=<span class="string">&quot;aspectFill&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;musicInfo&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;musicName text&quot;</span>&gt;</span>aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;author text&quot;</span>&gt;</span>aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;iconfont icon-gengduo-shuxiang&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">view</span>&gt;</span><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;scrollItem&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">image</span> <span class="attr">src</span>=<span class="string">&quot;/static/images/nvsheng.jpg&quot;</span> <span class="attr">class</span>=<span class="string">&quot;image&quot;</span> <span class="attr">mode</span>=<span class="string">&quot;aspectFill&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;musicInfo&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;musicName text&quot;</span>&gt;</span>aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;author text&quot;</span>&gt;</span>aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;iconfont icon-gengduo-shuxiang&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">view</span>&gt;</span><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;scrollItem&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">image</span> <span class="attr">src</span>=<span class="string">&quot;/static/images/nvsheng.jpg&quot;</span> <span class="attr">class</span>=<span class="string">&quot;image&quot;</span> <span class="attr">mode</span>=<span class="string">&quot;aspectFill&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;musicInfo&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;musicName text&quot;</span>&gt;</span>aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;author text&quot;</span>&gt;</span>aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;iconfont icon-gengduo-shuxiang&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">view</span>&gt;</span><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;scrollItem&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">image</span> <span class="attr">src</span>=<span class="string">&quot;/static/images/nvsheng.jpg&quot;</span> <span class="attr">class</span>=<span class="string">&quot;image&quot;</span> <span class="attr">mode</span>=<span class="string">&quot;aspectFill&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;musicInfo&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;musicName text&quot;</span>&gt;</span>aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;author text&quot;</span>&gt;</span>aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;iconfont icon-gengduo-shuxiang&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">view</span>&gt;</span><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;scrollItem&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">image</span> <span class="attr">src</span>=<span class="string">&quot;/static/images/nvsheng.jpg&quot;</span> <span class="attr">class</span>=<span class="string">&quot;image&quot;</span> <span class="attr">mode</span>=<span class="string">&quot;aspectFill&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;musicInfo&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;musicName text&quot;</span>&gt;</span>aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;author text&quot;</span>&gt;</span>aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;iconfont icon-gengduo-shuxiang&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">view</span>&gt;</span><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;scrollItem&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">image</span> <span class="attr">src</span>=<span class="string">&quot;/static/images/nvsheng.jpg&quot;</span> <span class="attr">class</span>=<span class="string">&quot;image&quot;</span> <span class="attr">mode</span>=<span class="string">&quot;aspectFill&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;musicInfo&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;musicName text&quot;</span>&gt;</span>aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;author text&quot;</span>&gt;</span>aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;iconfont icon-gengduo-shuxiang&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">view</span>&gt;</span><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;scrollItem&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">image</span> <span class="attr">src</span>=<span class="string">&quot;/static/images/nvsheng.jpg&quot;</span> <span class="attr">class</span>=<span class="string">&quot;image&quot;</span> <span class="attr">mode</span>=<span class="string">&quot;aspectFill&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;musicInfo&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;musicName text&quot;</span>&gt;</span>aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;author text&quot;</span>&gt;</span>aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;iconfont icon-gengduo-shuxiang&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">view</span>&gt;</span><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;scrollItem&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">image</span> <span class="attr">src</span>=<span class="string">&quot;/static/images/nvsheng.jpg&quot;</span> <span class="attr">class</span>=<span class="string">&quot;image&quot;</span> <span class="attr">mode</span>=<span class="string">&quot;aspectFill&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;musicInfo&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;musicName text&quot;</span>&gt;</span>aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;author text&quot;</span>&gt;</span>aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;iconfont icon-gengduo-shuxiang&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">view</span>&gt;</span><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;scrollItem&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">image</span> <span class="attr">src</span>=<span class="string">&quot;/static/images/nvsheng.jpg&quot;</span> <span class="attr">class</span>=<span class="string">&quot;image&quot;</span> <span class="attr">mode</span>=<span class="string">&quot;aspectFill&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;musicInfo&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;musicName text&quot;</span>&gt;</span>aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;author text&quot;</span>&gt;</span>aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;iconfont icon-gengduo-shuxiang&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">view</span>&gt;</span><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;scrollItem&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">image</span> <span class="attr">src</span>=<span class="string">&quot;/static/images/nvsheng.jpg&quot;</span> <span class="attr">class</span>=<span class="string">&quot;image&quot;</span> <span class="attr">mode</span>=<span class="string">&quot;aspectFill&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;musicInfo&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;musicName text&quot;</span>&gt;</span>aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;author text&quot;</span>&gt;</span>aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;iconfont icon-gengduo-shuxiang&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">scroll-view</span>&gt;</span></span><br></pre></td></tr></table></figure>



<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.recommendSongContainer</span> <span class="selector-class">.header</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">300</span>rpx;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.recommendSongContainer</span> <span class="selector-class">.header</span> <span class="selector-class">.image</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.recommendSongContainer</span> <span class="selector-class">.header</span> <span class="selector-class">.date</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">translate</span>(-<span class="number">50%</span>, -<span class="number">50%</span>);</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">300</span>rpx;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100</span>rpx;</span><br><span class="line">    <span class="comment">/* border: 1rpx solid red; */</span></span><br><span class="line">    <span class="attribute">text-align</span>: center;</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">100</span>rpx;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.header</span> <span class="selector-class">.date</span> <span class="selector-class">.day</span> &#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">38</span>rpx;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 列表区域 */</span></span><br><span class="line"><span class="selector-class">.listContainer</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">    <span class="attribute">top</span>: -<span class="number">20</span>rpx;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">20</span>rpx;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">30</span>rpx;</span><br><span class="line">    <span class="attribute">background</span>: <span class="number">#fff</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.listHeader</span> &#123;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">80</span>rpx;</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">80</span>rpx;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.listHeader</span> <span class="selector-class">.changeMore</span> &#123;</span><br><span class="line">    <span class="attribute">float</span>: right</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 内容区 */</span></span><br><span class="line"><span class="selector-class">.listScroll</span> &#123;</span><br><span class="line">    <span class="attribute">height</span>: <span class="built_in">calc</span>(<span class="number">100vh</span> - <span class="number">300</span>rpx - <span class="number">80</span>rpx );</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.scrollItem</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">20</span>rpx;</span><br><span class="line">    <span class="attribute">margin-bottom</span>: <span class="number">10</span>rpx;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.scrollItem</span> <span class="selector-class">.image</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">80</span>rpx;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">80</span>rpx;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">8</span>rpx;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.musicInfo</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">flex-direction</span>: column;</span><br><span class="line">    <span class="attribute">margin-left</span>: <span class="number">20</span>rpx;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.musicInfo</span> <span class="selector-class">.text</span>&#123;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">40</span>rpx; <span class="comment">/*直接添加高度不生效，因为text标签是行内元素，给父元素添加flex，其变为了块元素*/</span></span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">40</span>rpx;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">24</span>rpx;</span><br><span class="line"></span><br><span class="line">    <span class="attribute">max-width</span>: <span class="number">500</span>rpx;</span><br><span class="line">    <span class="attribute">white-space</span>: nowrap;</span><br><span class="line">    <span class="attribute">overflow</span>: hidden;</span><br><span class="line">    <span class="attribute">text-overflow</span>: ellipsis;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.scrollItem</span> <span class="selector-class">.iconfont</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">right</span>: <span class="number">20</span>rpx;</span><br><span class="line"></span><br><span class="line">    <span class="attribute">width</span>: <span class="number">80</span>rpx;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">80</span>rpx;</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">80</span>rpx;</span><br><span class="line">    <span class="comment">/* background: red; */</span></span><br><span class="line">    <span class="attribute">text-align</span>: right;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="内容区动态显示"><a href="#内容区动态显示" class="headerlink" title="内容区动态显示"></a>内容区动态显示</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// pages/recommendSong.js</span></span><br><span class="line"><span class="keyword">import</span> request <span class="keyword">from</span> <span class="string">&#x27;../../utils/request.js&#x27;</span></span><br><span class="line"><span class="title class_">Page</span>(&#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 页面的初始数据</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="attr">data</span>: &#123;</span><br><span class="line">    <span class="attr">day</span>: <span class="string">&#x27;&#x27;</span>, <span class="comment">// 天</span></span><br><span class="line">    <span class="attr">month</span>: <span class="string">&#x27;&#x27;</span>, <span class="comment">//月,</span></span><br><span class="line">    <span class="attr">recommendList</span>: [], <span class="comment">// 推荐列表数据</span></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 生命周期函数--监听页面加载</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="title function_">onLoad</span>(<span class="params">options</span>) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 判断用户是否登录</span></span><br><span class="line">    <span class="keyword">let</span> userInfo = wx.<span class="title function_">getStorageSync</span>(<span class="string">&#x27;userinfo&#x27;</span>)</span><br><span class="line">    <span class="keyword">if</span>(!userInfo) &#123;</span><br><span class="line">      wx.<span class="title function_">showToast</span>(&#123;</span><br><span class="line">        <span class="attr">title</span>: <span class="string">&#x27;请先登录&#x27;</span>,</span><br><span class="line">        <span class="attr">icon</span>: <span class="string">&#x27;none&#x27;</span>,</span><br><span class="line">        <span class="attr">success</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">          <span class="comment">// 成功的回调中，跳转至登录界面</span></span><br><span class="line">          wx.<span class="title function_">reLaunch</span>(&#123;</span><br><span class="line">            <span class="attr">url</span>: <span class="string">&#x27;/pages/login/login&#x27;</span></span><br><span class="line">          &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 更新时间</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">      <span class="attr">day</span>: <span class="keyword">new</span> <span class="title class_">Date</span>().<span class="title function_">getDate</span>(),</span><br><span class="line">      <span class="attr">month</span>: <span class="keyword">new</span> <span class="title class_">Date</span>().<span class="title function_">getMonth</span>() + <span class="number">1</span></span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 获取每日推荐歌曲数据</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">getRecommendList</span>()</span><br><span class="line"></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 获取用户每日推荐数据</span></span><br><span class="line">  <span class="keyword">async</span> <span class="title function_">getRecommendList</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> recommendListData = <span class="keyword">await</span> <span class="title function_">request</span>(<span class="string">&#x27;/recommend/songs&#x27;</span>)</span><br><span class="line">    <span class="comment">// console.log(recommendListData)</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">      <span class="attr">recommendList</span>: recommendListData.<span class="property">data</span>.<span class="property">dailySongs</span></span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>



<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 内容区 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">scroll-view</span> <span class="attr">class</span>=<span class="string">&quot;listScroll&quot;</span> <span class="attr">scroll-y</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;scrollItem&quot;</span> <span class="attr">wx:for</span>=<span class="string">&quot;&#123;&#123;recommendList&#125;&#125;&quot;</span> <span class="attr">wx:key</span>=<span class="string">&quot;id&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">image</span> <span class="attr">src</span>=<span class="string">&quot;&#123;&#123;item.al.picUrl&#125;&#125;&quot;</span> <span class="attr">class</span>=<span class="string">&quot;image&quot;</span> <span class="attr">mode</span>=<span class="string">&quot;aspectFill&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;musicInfo&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;musicName text&quot;</span>&gt;</span>&#123;&#123;item.name&#125;&#125;<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;author text&quot;</span>&gt;</span>&#123;&#123;item.ar[0].name&#125;&#125;<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;iconfont icon-gengduo-shuxiang&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">scroll-view</span>&gt;</span></span><br></pre></td></tr></table></figure>



<p><img src="/2022/10/15/web/%E8%BF%9B%E9%98%B6/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%BC%80%E5%8F%91/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E6%A6%82%E8%BF%B0/image-20221106161343901.png" alt="image-20221106161343901"></p>
<h2 id="歌曲详情页静态页面搭建"><a href="#歌曲详情页静态页面搭建" class="headerlink" title="歌曲详情页静态页面搭建"></a>歌曲详情页静态页面搭建</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--pages/songDetail/songDetail.wxml--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;songDetailContainer&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;author&quot;</span>&gt;</span>sai<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;circle&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">image</span> <span class="attr">class</span>=<span class="string">&quot;needle&quot;</span> <span class="attr">src</span>=<span class="string">&quot;/static/images/song/needle.png&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;discContainer&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">image</span> <span class="attr">class</span>=<span class="string">&quot;disc&quot;</span> <span class="attr">src</span>=<span class="string">&quot;/static/images/song/disc.png&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">image</span> <span class="attr">class</span>=<span class="string">&quot;musicImg&quot;</span> <span class="attr">src</span>=<span class="string">&quot;/static/images/nvsheng.jpg&quot;</span> <span class="attr">mode</span>=<span class="string">&quot;aspectFill&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>



<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* pages/songDetail/songDetail.wxss */</span></span><br><span class="line"><span class="selector-class">.songDetailContainer</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">flex-direction</span>: column;</span><br><span class="line">    <span class="attribute">align-items</span>: center;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="built_in">rgba</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,.<span class="number">5</span>);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 底座 */</span></span><br><span class="line"><span class="selector-class">.circle</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">    <span class="attribute">z-index</span>: <span class="number">100</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">60</span>rpx;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">60</span>rpx;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#fff</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">10</span>rpx <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 摇杆 */</span></span><br><span class="line"><span class="selector-class">.needle</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">    <span class="attribute">z-index</span>: <span class="number">99</span>;</span><br><span class="line">    <span class="attribute">top</span>: -<span class="number">40</span>rpx;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">60</span>rpx;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">192</span>rpx;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">274</span>rpx;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.discContainer</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">    <span class="attribute">top</span>: -<span class="number">170</span>rpx;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">598</span>rpx;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">598</span>rpx;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">1px</span> solid red;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.disc</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.musicImg</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">bottom</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">right</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">margin</span>: auto;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">370</span>rpx;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">370</span>rpx;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">50%</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="/2022/10/15/web/%E8%BF%9B%E9%98%B6/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%BC%80%E5%8F%91/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E6%A6%82%E8%BF%B0/image-20221106163915022.png" alt="image-20221106163915022"></p>
<h2 id="摇杆动画实现"><a href="#摇杆动画实现" class="headerlink" title="摇杆动画实现"></a>摇杆动画实现</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--pages/songDetail/songDetail.wxml--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;songDetailContainer&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;author&quot;</span>&gt;</span>sai<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;circle&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">image</span> <span class="attr">class</span>=<span class="string">&quot;needle &#123;&#123;isPlay ? &#x27;needleRotate&#x27;: &#x27;&#x27;&#125;&#125;&quot;</span> <span class="attr">src</span>=<span class="string">&quot;/static/images/song/needle.png&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;discContainer&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">image</span> <span class="attr">class</span>=<span class="string">&quot;disc&quot;</span> <span class="attr">src</span>=<span class="string">&quot;/static/images/song/disc.png&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">image</span> <span class="attr">class</span>=<span class="string">&quot;musicImg&quot;</span> <span class="attr">src</span>=<span class="string">&quot;/static/images/nvsheng.jpg&quot;</span> <span class="attr">mode</span>=<span class="string">&quot;aspectFill&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>



<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* pages/songDetail/songDetail.wxss */</span></span><br><span class="line"><span class="selector-class">.songDetailContainer</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">flex-direction</span>: column;</span><br><span class="line">    <span class="attribute">align-items</span>: center;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="built_in">rgba</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,.<span class="number">5</span>);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 底座 */</span></span><br><span class="line"><span class="selector-class">.circle</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">    <span class="attribute">z-index</span>: <span class="number">100</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">60</span>rpx;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">60</span>rpx;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#fff</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">10</span>rpx <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 摇杆 */</span></span><br><span class="line"><span class="selector-class">.needle</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">    <span class="attribute">z-index</span>: <span class="number">99</span>;</span><br><span class="line">    <span class="attribute">top</span>: -<span class="number">40</span>rpx;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">60</span>rpx;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">192</span>rpx;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">274</span>rpx;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">1px</span> solid red;</span><br><span class="line"></span><br><span class="line">    <span class="attribute">transform-origin</span>: <span class="number">40</span>rpx <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">rotate</span>(-<span class="number">20deg</span>);</span><br><span class="line">    <span class="attribute">transition</span>: transform <span class="number">1s</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.needleRotate</span> &#123;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">0</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.discContainer</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">    <span class="attribute">top</span>: -<span class="number">170</span>rpx;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">598</span>rpx;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">598</span>rpx;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">1px</span> solid red;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.disc</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.musicImg</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">bottom</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">right</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">margin</span>: auto;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">370</span>rpx;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">370</span>rpx;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">50%</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="磁盘动画实现"><a href="#磁盘动画实现" class="headerlink" title="磁盘动画实现"></a>磁盘动画实现</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;discContainer &#123;&#123;isPlay ? &#x27;discAnimation&#x27;: &#x27;&#x27;&#125;&#125;&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">image</span> <span class="attr">class</span>=<span class="string">&quot;disc&quot;</span> <span class="attr">src</span>=<span class="string">&quot;/static/images/song/disc.png&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">image</span> <span class="attr">class</span>=<span class="string">&quot;musicImg&quot;</span> <span class="attr">src</span>=<span class="string">&quot;/static/images/nvsheng.jpg&quot;</span> <span class="attr">mode</span>=<span class="string">&quot;aspectFill&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>



<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 磁盘动画 */</span></span><br><span class="line"><span class="selector-class">.discAnimation</span> &#123;</span><br><span class="line">    <span class="attribute">animation</span>: disc <span class="number">4s</span> linear infinite;</span><br><span class="line">    <span class="attribute">animation-delay</span>: <span class="number">0.8s</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@keyframes</span> disc &#123;</span><br><span class="line">    <span class="selector-tag">from</span> &#123;</span><br><span class="line">        <span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="selector-tag">to</span> &#123;</span><br><span class="line">        <span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">360deg</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="底部控制区域搭建"><a href="#底部控制区域搭建" class="headerlink" title="底部控制区域搭建"></a>底部控制区域搭建</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">handleMusicPlay</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">    <span class="attr">isPlay</span>: !<span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">isPlay</span></span><br><span class="line">  &#125;)</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>



<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 底部控制区域 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;musicControl&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;text iconfont icon-24gl-shuffle&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;text iconfont icon-24gl-previousFrame&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;text iconfont &#123;&#123;isPlay ? &#x27;icon-bofang&#x27; : &#x27;icon-bofang1&#x27;&#125;&#125;&#125; big&quot;</span> <span class="attr">bindtap</span>=<span class="string">&quot;handleMusicPlay&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;text iconfont icon-24gl-nextFrame&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;text iconfont icon-24gl-playlistMusic3&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>



<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 底部控制区域 */</span></span><br><span class="line"><span class="selector-class">.musicControl</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">bottom</span>: <span class="number">40</span>rpx;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line"></span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">border-top</span>: <span class="number">1px</span> solid <span class="number">#fff</span>;    </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.musicControl</span> <span class="selector-class">.text</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">20%</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">120</span>rpx;</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">120</span>rpx;</span><br><span class="line">    <span class="attribute">text-align</span>: center;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">40</span>rpx;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.musicControl</span> <span class="selector-class">.text</span><span class="selector-class">.big</span> &#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">70</span>rpx;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="路由跳转传参"><a href="#路由跳转传参" class="headerlink" title="路由跳转传参"></a>路由跳转传参</h2><p><code>onLoad</code>函数中的<code>options</code>参数，专门用来接收路由跳转的<code>query</code>参数，值会转为字符串</p>
<p>原生小程序中，路由传参对参数的长度是有限制的，它会截取</p>
<p>所以我们不传整个歌曲的item对象了，告诉详情页歌曲id，让它自己重新发请求</p>
<p><code>recommendSong.js</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 跳转至歌曲详细信息页面</span></span><br><span class="line"><span class="title function_">toSongDetail</span>(<span class="params">event</span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> song = event.<span class="property">currentTarget</span>.<span class="property">dataset</span>.<span class="property">song</span></span><br><span class="line">  <span class="comment">// 路由跳转传参，支持query参数</span></span><br><span class="line">  wx.<span class="title function_">navigateTo</span>(&#123;</span><br><span class="line">    <span class="attr">url</span>: <span class="string">`/pages/songDetail/songDetail?musicId=<span class="subst">$&#123;song.id&#125;</span>`</span></span><br><span class="line">  &#125;)</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>



<p><code>songDetail.js</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">onLoad</span>(<span class="params">options</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> musicId = options.<span class="property">musicId</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(options.<span class="property">musicId</span>)</span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure>

<h2 id="动态显示歌曲详情"><a href="#动态显示歌曲详情" class="headerlink" title="动态显示歌曲详情"></a>动态显示歌曲详情</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;author&quot;</span>&gt;</span>&#123;&#123;song.ar[0].name&#125;&#125;<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;circle&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">image</span> <span class="attr">class</span>=<span class="string">&quot;needle &#123;&#123;isPlay ? &#x27;needleRotate&#x27;: &#x27;&#x27;&#125;&#125;&quot;</span> <span class="attr">src</span>=<span class="string">&quot;/static/images/song/needle.png&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;discContainer &#123;&#123;isPlay ? &#x27;discAnimation&#x27;: &#x27;&#x27;&#125;&#125;&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">image</span> <span class="attr">class</span>=<span class="string">&quot;disc&quot;</span> <span class="attr">src</span>=<span class="string">&quot;/static/images/song/disc.png&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">image</span> <span class="attr">class</span>=<span class="string">&quot;musicImg&quot;</span> <span class="attr">src</span>=<span class="string">&quot;&#123;&#123;song.al.picUrl&#125;&#125;&quot;</span> <span class="attr">mode</span>=<span class="string">&quot;aspectFill&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">onLoad</span>(<span class="params">options</span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> musicId = options.<span class="property">musicId</span></span><br><span class="line">  <span class="variable language_">this</span>.<span class="title function_">getMusicInfo</span>(musicId)</span><br><span class="line">&#125;,</span><br><span class="line"><span class="comment">// 获取音乐详情的回调函数</span></span><br><span class="line"><span class="keyword">async</span> <span class="title function_">getMusicInfo</span>(<span class="params">musicId</span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> song = <span class="keyword">await</span> <span class="title function_">request</span>(<span class="string">&#x27;/song/detail&#x27;</span>, &#123;<span class="attr">ids</span>: musicId&#125;)</span><br><span class="line">  <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">    <span class="attr">song</span>: song.<span class="property">songs</span>[<span class="number">0</span>]</span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="comment">// 动态修改窗口标题</span></span><br><span class="line">  wx.<span class="title function_">setNavigationBarTitle</span>(&#123;</span><br><span class="line">    <span class="attr">title</span>: <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">song</span>.<span class="property">name</span>,</span><br><span class="line">  &#125;);</span><br><span class="line">    </span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<h2 id="音乐播放暂停的功能函数"><a href="#音乐播放暂停的功能函数" class="headerlink" title="音乐播放暂停的功能函数"></a>音乐播放暂停的功能函数</h2><p><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/api/media/background-audio/wx.getBackgroundAudioManager.html">BackgroundAudioManager | 微信开放文档 (qq.com)</a></p>
<p>如果不设置标题，音乐实际不会给你播放的</p>
<p>如果要实现后台播放，<a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/reference/configuration/app.html#requiredBackgroundModes">全局配置 | 微信开放文档 (qq.com)</a></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">handleMusicPlay</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">    <span class="attr">isPlay</span>: !<span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">isPlay</span></span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="keyword">let</span> &#123;isPlay, musicId&#125; = <span class="variable language_">this</span>.<span class="property">data</span></span><br><span class="line">  <span class="variable language_">this</span>.<span class="title function_">musicControl</span>(isPlay, musicId)</span><br><span class="line">&#125;,</span><br><span class="line"><span class="comment">// 控制音乐播放/暂停的功能函数</span></span><br><span class="line"><span class="keyword">async</span> <span class="title function_">musicControl</span>(<span class="params">isPlay, musicId</span>) &#123;</span><br><span class="line">  <span class="comment">// 创建控制音乐播放的实例</span></span><br><span class="line">  <span class="keyword">let</span> backgroundAudioManager = wx.<span class="title function_">getBackgroundAudioManager</span>()</span><br><span class="line">  <span class="keyword">if</span>(isPlay) &#123; <span class="comment">// 音乐播放</span></span><br><span class="line">    <span class="keyword">let</span> musicLinkData = <span class="keyword">await</span> <span class="title function_">request</span>(<span class="string">&#x27;/song/url&#x27;</span>, &#123;<span class="attr">id</span>: musicId&#125;)</span><br><span class="line">    <span class="keyword">let</span> musicLink = musicLinkData.<span class="property">data</span>[<span class="number">0</span>].<span class="property">url</span></span><br><span class="line"></span><br><span class="line">    backgroundAudioManager.<span class="property">src</span> = musicLink</span><br><span class="line">    backgroundAudioManager.<span class="property">title</span> = <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">song</span>.<span class="property">name</span></span><br><span class="line">  &#125; <span class="keyword">else</span> &#123; <span class="comment">// 暂停音乐</span></span><br><span class="line">    backgroundAudioManager.<span class="title function_">pause</span>()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<h2 id="解决系统任务栏控制音乐播放状态不一致的问题"><a href="#解决系统任务栏控制音乐播放状态不一致的问题" class="headerlink" title="解决系统任务栏控制音乐播放状态不一致的问题"></a>解决系统任务栏控制音乐播放状态不一致的问题</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">onLoad</span>(<span class="params">options</span>) &#123;</span><br><span class="line">   <span class="keyword">let</span> musicId = options.<span class="property">musicId</span></span><br><span class="line">   <span class="variable language_">this</span>.<span class="title function_">getMusicInfo</span>(musicId)</span><br><span class="line">   <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">     musicId</span><br><span class="line">   &#125;)</span><br><span class="line">   <span class="comment">// 创建控制音乐播放的实例</span></span><br><span class="line">   <span class="variable language_">this</span>.<span class="property">backgroundAudioManager</span> = wx.<span class="title function_">getBackgroundAudioManager</span>()</span><br><span class="line">   <span class="comment">// 监视音乐播放/暂停</span></span><br><span class="line">   <span class="variable language_">this</span>.<span class="property">backgroundAudioManager</span>.<span class="title function_">onPlay</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">     <span class="variable language_">this</span>.<span class="title function_">changePlayState</span>(<span class="literal">true</span>)</span><br><span class="line"></span><br><span class="line">   &#125;)</span><br><span class="line">   <span class="variable language_">this</span>.<span class="property">backgroundAudioManager</span>.<span class="title function_">onPause</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">     <span class="variable language_">this</span>.<span class="title function_">changePlayState</span>(<span class="literal">false</span>)</span><br><span class="line"></span><br><span class="line">   &#125;)</span><br><span class="line">   <span class="variable language_">this</span>.<span class="property">backgroundAudioManager</span>.<span class="title function_">onStop</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">     <span class="variable language_">this</span>.<span class="title function_">changePlayState</span>(<span class="literal">false</span>)</span><br><span class="line">   &#125;)</span><br><span class="line"> &#125;,</span><br><span class="line"> <span class="comment">// 修改播放状态</span></span><br><span class="line"> <span class="title function_">changePlayState</span>(<span class="params">isPlay</span>) &#123;</span><br><span class="line">   <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">     isPlay</span><br><span class="line">   &#125;)</span><br><span class="line"> &#125;,</span><br><span class="line">     </span><br><span class="line">     </span><br><span class="line">     </span><br><span class="line"><span class="comment">// ...</span></span><br><span class="line">  <span class="title function_">handleMusicPlay</span>(<span class="params"></span>) &#123;</span><br><span class="line">   <span class="comment">// this.setData(&#123;</span></span><br><span class="line">   <span class="comment">//   isPlay: !this.data.isPlay</span></span><br><span class="line">   <span class="comment">// &#125;)</span></span><br><span class="line">   <span class="keyword">let</span> isPlay = !<span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">isPlay</span></span><br><span class="line">   <span class="keyword">let</span> &#123; musicId&#125; = <span class="variable language_">this</span>.<span class="property">data</span></span><br><span class="line">   <span class="variable language_">this</span>.<span class="title function_">musicControl</span>(isPlay, musicId)</span><br><span class="line"> &#125;,</span><br></pre></td></tr></table></figure>

<h2 id="解决页面回退，歌曲详情页面销毁问题"><a href="#解决页面回退，歌曲详情页面销毁问题" class="headerlink" title="解决页面回退，歌曲详情页面销毁问题"></a>解决页面回退，歌曲详情页面销毁问题</h2><p>如果某个音乐在播放，应该把这个状态存起来（不受页面销毁的影响：1.存本地；2.<a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/reference/api/getApp.html">AppObject getApp(Object object) | 微信开放文档 (qq.com)</a>）</p>
<p>下次回到这个页面时，拿出这个状态</p>
<p><code>App.js</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// app.js</span></span><br><span class="line"><span class="title class_">App</span>(&#123;</span><br><span class="line">    <span class="attr">globalData</span>: &#123;</span><br><span class="line">        <span class="attr">isMusicPlay</span>: <span class="literal">false</span>, <span class="comment">// 是否有音乐播放</span></span><br><span class="line">        <span class="attr">musicId</span>: <span class="string">&#x27;&#x27;</span>, <span class="comment">// 音乐id</span></span><br><span class="line">    &#125;,</span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><code>songDetail.js</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// pages/songDetail/songDetail.js</span></span><br><span class="line"><span class="keyword">import</span> request <span class="keyword">from</span> <span class="string">&#x27;../../utils/request.js&#x27;</span></span><br><span class="line"><span class="comment">// 获取全局实例</span></span><br><span class="line"><span class="keyword">const</span> appInstance = <span class="title function_">getApp</span>()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// ...</span></span><br><span class="line"><span class="title function_">onLoad</span>(<span class="params">options</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> musicId = options.<span class="property">musicId</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">getMusicInfo</span>(musicId)</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">      musicId</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(appInstance)</span><br><span class="line">    <span class="comment">// 判断当前页面音乐是否在播放</span></span><br><span class="line">    <span class="keyword">if</span>(appInstance.<span class="property">globalData</span>.<span class="property">isMusicPlay</span> &amp;&amp; appInstance.<span class="property">globalData</span>.<span class="property">musicId</span> == musicId) &#123;</span><br><span class="line">      <span class="comment">// 修改当前音乐播放状态为true</span></span><br><span class="line">      <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">        <span class="attr">isPlay</span>: <span class="literal">true</span></span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">backgroundAudioManager</span> = wx.<span class="title function_">getBackgroundAudioManager</span>()</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">backgroundAudioManager</span>.<span class="title function_">onPlay</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="title function_">changePlayState</span>(<span class="literal">true</span>)</span><br><span class="line">      <span class="comment">// 修改全局音乐播放的状态</span></span><br><span class="line">      appInstance.<span class="property">globalData</span>.<span class="property">musicId</span> = musicId</span><br><span class="line"></span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">backgroundAudioManager</span>.<span class="title function_">onPause</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="title function_">changePlayState</span>(<span class="literal">false</span>)</span><br><span class="line"></span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">backgroundAudioManager</span>.<span class="title function_">onStop</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="title function_">changePlayState</span>(<span class="literal">false</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 修改播放状态</span></span><br><span class="line">  <span class="title function_">changePlayState</span>(<span class="params">isPlay</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">      isPlay</span><br><span class="line">    &#125;)</span><br><span class="line">    appInstance.<span class="property">globalData</span>.<span class="property">isMusicPlay</span> = isPlay</span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure>

<h2 id="页面通信需求分析，npm包使用准备"><a href="#页面通信需求分析，npm包使用准备" class="headerlink" title="页面通信需求分析，npm包使用准备"></a>页面通信需求分析，npm包使用准备</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;text iconfont icon-24gl-previousFrame&quot;</span> <span class="attr">id</span>=<span class="string">&quot;prev&quot;</span> <span class="attr">bindtap</span>=<span class="string">&quot;handleSwitch&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;text iconfont &#123;&#123;isPlay ? &#x27;icon-bofang&#x27; : &#x27;icon-bofang1&#x27;&#125;&#125;&#125; big&quot;</span> <span class="attr">bindtap</span>=<span class="string">&quot;handleMusicPlay&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;text iconfont icon-24gl-nextFrame&quot;</span> <span class="attr">id</span>=<span class="string">&quot;next&quot;</span> <span class="attr">bindtap</span>=<span class="string">&quot;handleSwitch&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br></pre></td></tr></table></figure>



<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 点击切歌的回调</span></span><br><span class="line">  <span class="title function_">handleSwitch</span>(<span class="params">event</span>) &#123;</span><br><span class="line">    <span class="comment">// 获取切歌的类型</span></span><br><span class="line">    <span class="keyword">let</span> type = event.<span class="property">currentTarget</span>.<span class="property">id</span></span><br><span class="line">    </span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure>



<p>项目根目录执行<code>npm init -y</code></p>
<p>小程序开发者工具，设置允许使用npm，2.27.0版本的基础库没有这个设置了，猜测应该默认支持了</p>
<p>下载pubsub-js包：<code>npm install pubsub-js</code></p>
<p>工具-构建npm，小程序会默认到构建后的<code>miniprogram_npm</code>目录下找第三方的包</p>
<h2 id="页面通信完整实现"><a href="#页面通信完整实现" class="headerlink" title="页面通信完整实现"></a>页面通信完整实现</h2><p><code>songDetail.js</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 点击切歌的回调</span></span><br><span class="line"><span class="title function_">handleSwitch</span>(<span class="params">event</span>) &#123;</span><br><span class="line">  <span class="comment">// 获取切歌的类型</span></span><br><span class="line">  <span class="keyword">let</span> type = event.<span class="property">currentTarget</span>.<span class="property">id</span></span><br><span class="line">  <span class="comment">// 订阅来自recommendSong页面发布的musicId的消息</span></span><br><span class="line">  <span class="title class_">PubSub</span>.<span class="title function_">subscribe</span>(<span class="string">&#x27;musicId&#x27;</span>, <span class="function">(<span class="params">msg, musicId</span>) =&gt;</span> &#123; <span class="comment">// 不能放在切歌的回调中，每点击一次就会订阅一次（PubSub底层用数组存储回调的），订阅完需要取消订阅</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(msg, musicId)</span><br><span class="line">    <span class="comment">// 每订阅完一次，取消订阅</span></span><br><span class="line">    <span class="title class_">PubSub</span>.<span class="title function_">unsubscribe</span>()</span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="comment">// 发布消息给recommendSong页面</span></span><br><span class="line">  <span class="title class_">PubSub</span>.<span class="title function_">publish</span>(<span class="string">&#x27;switchType&#x27;</span>, type)</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<p><code>recommendSong.js</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// onLoad</span></span><br><span class="line">    <span class="comment">// 订阅消息</span></span><br><span class="line">    <span class="title class_">PubSub</span>.<span class="title function_">subscribe</span>(<span class="string">&#x27;switchType&#x27;</span>, <span class="function">(<span class="params">msg, type</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">let</span> &#123;recommendList, index&#125; = <span class="variable language_">this</span>.<span class="property">data</span></span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(msg, type)</span><br><span class="line">      <span class="keyword">if</span>(type === <span class="string">&#x27;prev&#x27;</span>) &#123; <span class="comment">// 上一首</span></span><br><span class="line">        index -= <span class="number">1</span></span><br><span class="line">      &#125; <span class="keyword">else</span> &#123; <span class="comment">// 下一首</span></span><br><span class="line">        index += <span class="number">1</span></span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">let</span> musicId = recommendList[index].<span class="property">id</span></span><br><span class="line">      <span class="comment">// 将id回传给detail页面</span></span><br><span class="line">      <span class="title class_">PubSub</span>.<span class="title function_">publish</span>(<span class="string">&#x27;musicId&#x27;</span>, musicId)</span><br><span class="line">    &#125;)</span><br></pre></td></tr></table></figure>

<p><code>recommendSong.wxml</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;scrollItem&quot;</span> <span class="attr">wx:for</span>=<span class="string">&quot;&#123;&#123;recommendList&#125;&#125;&quot;</span> <span class="attr">wx:key</span>=<span class="string">&quot;id&quot;</span> <span class="attr">bindtap</span>=<span class="string">&quot;toSongDetail&quot;</span> <span class="attr">data-song</span>=<span class="string">&quot;&#123;&#123;item&#125;&#125;&quot;</span> <span class="attr">data-index</span>=<span class="string">&quot;&#123;&#123;index&#125;&#125;&quot;</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="切换歌曲功能实现"><a href="#切换歌曲功能实现" class="headerlink" title="切换歌曲功能实现"></a>切换歌曲功能实现</h2><p><code>songDetail.js</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 点击切歌的回调</span></span><br><span class="line">  <span class="title function_">handleSwitch</span>(<span class="params">event</span>) &#123;</span><br><span class="line">    <span class="comment">// 获取切歌的类型</span></span><br><span class="line">    <span class="keyword">let</span> type = event.<span class="property">currentTarget</span>.<span class="property">id</span></span><br><span class="line">    <span class="comment">// 关闭当前播放的音乐</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">backgroundAudioManager</span>.<span class="title function_">stop</span>()</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 订阅来自recommendSong页面发布的musicId的消息</span></span><br><span class="line">    <span class="title class_">PubSub</span>.<span class="title function_">subscribe</span>(<span class="string">&#x27;musicId&#x27;</span>, <span class="function">(<span class="params">msg, musicId</span>) =&gt;</span> &#123; <span class="comment">// 不能放在切歌的回调中，每点击一次就会订阅一次（PubSub底层用数组存储回调的），订阅完需要取消订阅</span></span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(musicId)</span><br><span class="line">        </span><br><span class="line">      <span class="comment">// 更新musicId（视频里漏掉了）</span></span><br><span class="line">      <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">        musicId </span><br><span class="line">      &#125;)</span><br><span class="line">      appInstance.<span class="property">globalData</span>.<span class="property">musicId</span> = musicId</span><br><span class="line">        </span><br><span class="line">      <span class="comment">// 获取音乐详情信息</span></span><br><span class="line">      <span class="variable language_">this</span>.<span class="title function_">getMusicInfo</span>(musicId)</span><br><span class="line">      <span class="comment">// 自动播放当前音乐</span></span><br><span class="line">      <span class="variable language_">this</span>.<span class="title function_">musicControl</span>(<span class="literal">true</span>, musicId)</span><br><span class="line">      <span class="comment">// 每订阅完一次，取消订阅</span></span><br><span class="line">      <span class="title class_">PubSub</span>.<span class="title function_">unsubscribe</span>(<span class="string">&#x27;musicId&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="comment">// 发布消息给recommendSong页面</span></span><br><span class="line">    <span class="title class_">PubSub</span>.<span class="title function_">publish</span>(<span class="string">&#x27;switchType&#x27;</span>, type)</span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure>

<p><code>recommendSong.js</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// onLoad</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 订阅消息</span></span><br><span class="line">    <span class="title class_">PubSub</span>.<span class="title function_">subscribe</span>(<span class="string">&#x27;switchType&#x27;</span>, <span class="function">(<span class="params">msg, type</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">let</span> &#123;recommendList, index&#125; = <span class="variable language_">this</span>.<span class="property">data</span></span><br><span class="line">      <span class="comment">// console.log(msg, type)</span></span><br><span class="line">      <span class="keyword">if</span>(type === <span class="string">&#x27;prev&#x27;</span>) &#123; <span class="comment">// 上一首</span></span><br><span class="line">        (index === <span class="number">0</span>) &amp;&amp; (index = recommendList.<span class="property">length</span>)</span><br><span class="line">        index -= <span class="number">1</span></span><br><span class="line">      &#125; <span class="keyword">else</span> &#123; <span class="comment">// 下一首</span></span><br><span class="line">        (index === recommendList.<span class="property">length</span> - <span class="number">1</span>) &amp;&amp; (index = -<span class="number">1</span>)</span><br><span class="line">        index += <span class="number">1</span></span><br><span class="line">      &#125;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">        index</span><br><span class="line">      &#125;)</span><br><span class="line">      <span class="keyword">let</span> musicId = recommendList[index].<span class="property">id</span></span><br><span class="line">      <span class="comment">// 将id回传给detail页面</span></span><br><span class="line">      <span class="title class_">PubSub</span>.<span class="title function_">publish</span>(<span class="string">&#x27;musicId&#x27;</span>, musicId)</span><br><span class="line">    &#125;)</span><br></pre></td></tr></table></figure>



<h2 id="播放歌曲性能优化"><a href="#播放歌曲性能优化" class="headerlink" title="播放歌曲性能优化"></a>播放歌曲性能优化</h2><p>暂停歌曲后，每次点击播放，都会发送请求，没必要</p>
<p>利用形参来控制</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 控制音乐播放/暂停的逻辑函数</span></span><br><span class="line"> <span class="title function_">handleMusicPlay</span>(<span class="params"></span>) &#123;</span><br><span class="line">   <span class="comment">// this.setData(&#123;</span></span><br><span class="line">   <span class="comment">//   isPlay: !this.data.isPlay</span></span><br><span class="line">   <span class="comment">// &#125;)</span></span><br><span class="line">   <span class="keyword">let</span> isPlay = !<span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">isPlay</span></span><br><span class="line">   <span class="keyword">let</span> &#123; musicId, musicLink&#125; = <span class="variable language_">this</span>.<span class="property">data</span></span><br><span class="line">   <span class="variable language_">this</span>.<span class="title function_">musicControl</span>(isPlay, musicId, musicLink)</span><br><span class="line"> &#125;,</span><br><span class="line"> <span class="comment">// 控制音乐播放/暂停的功能函数</span></span><br><span class="line"> <span class="keyword">async</span> <span class="title function_">musicControl</span>(<span class="params">isPlay, musicId, musicLink</span>) &#123;</span><br><span class="line">   <span class="keyword">if</span>(isPlay) &#123; <span class="comment">// 音乐播放</span></span><br><span class="line">     <span class="keyword">if</span>(!musicLink) &#123;</span><br><span class="line">       <span class="keyword">let</span> musicLinkData = <span class="keyword">await</span> <span class="title function_">request</span>(<span class="string">&#x27;/song/url&#x27;</span>, &#123;<span class="attr">id</span>: musicId&#125;)</span><br><span class="line">       musicLink = musicLinkData.<span class="property">data</span>[<span class="number">0</span>].<span class="property">url</span></span><br><span class="line">       <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">         musicLink</span><br><span class="line">       &#125;)</span><br><span class="line">     &#125;</span><br><span class="line">     </span><br><span class="line"></span><br><span class="line">     <span class="variable language_">this</span>.<span class="property">backgroundAudioManager</span>.<span class="property">src</span> = musicLink</span><br><span class="line">     <span class="variable language_">this</span>.<span class="property">backgroundAudioManager</span>.<span class="property">title</span> = <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">song</span>.<span class="property">name</span></span><br><span class="line">   &#125; <span class="keyword">else</span> &#123; <span class="comment">// 暂停音乐</span></span><br><span class="line">     <span class="variable language_">this</span>.<span class="property">backgroundAudioManager</span>.<span class="title function_">pause</span>()</span><br><span class="line">   &#125;</span><br><span class="line"> &#125;,</span><br></pre></td></tr></table></figure>

<h2 id="进度条区域静态页面搭建"><a href="#进度条区域静态页面搭建" class="headerlink" title="进度条区域静态页面搭建"></a>进度条区域静态页面搭建</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 进度条区域 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;progressControl&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">text</span>&gt;</span>00:00<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 总进度条 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;progressControl__barControl&quot;</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 实时进度条 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;progressControl__barControl__currtentTimeBar&quot;</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!-- 小圆球 --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;progressControl__barControl__currtentTimeBar__circle&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">text</span>&gt;</span>03:10<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>



<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 进度条控制区域 */</span></span><br><span class="line"><span class="selector-class">.progressControl</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">bottom</span>: <span class="number">200</span>rpx;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">640</span>rpx;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">80</span>rpx;</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">80</span>rpx;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.progressControl__barControl</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">450</span>rpx;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">4</span>rpx;</span><br><span class="line">    <span class="attribute">margin</span>: auto;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="built_in">rgba</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,.<span class="number">4</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.progressControl__barControl__currtentTimeBar</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100</span>rpx;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">4</span>rpx;</span><br><span class="line">    <span class="attribute">background-color</span>: red;</span><br><span class="line">    <span class="attribute">z-index</span>: <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.progressControl__barControl__currtentTimeBar__circle</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">top</span>: -<span class="number">4</span>rpx;</span><br><span class="line">    <span class="attribute">right</span>: -<span class="number">12</span>rpx;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">12</span>rpx;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">12</span>rpx;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#fff</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="音乐总时长格式化显示"><a href="#音乐总时长格式化显示" class="headerlink" title="音乐总时长格式化显示"></a>音乐总时长格式化显示</h2><p><code>npm i moment</code></p>
<p>构建时的提示，不影响使用</p>
<p><img src="/2022/10/15/web/%E8%BF%9B%E9%98%B6/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%BC%80%E5%8F%91/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E6%A6%82%E8%BF%B0/image-20221110203633034.png" alt="image-20221110203633034"></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 获取音乐详情的回调函数</span></span><br><span class="line">  <span class="keyword">async</span> <span class="title function_">getMusicInfo</span>(<span class="params">musicId</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> song = <span class="keyword">await</span> <span class="title function_">request</span>(<span class="string">&#x27;/song/detail&#x27;</span>, &#123;<span class="attr">ids</span>: musicId&#125;)</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// song.songs[0].dt 单位是ms</span></span><br><span class="line">    <span class="keyword">let</span> durationTime = <span class="title function_">moment</span>(song.<span class="property">songs</span>[<span class="number">0</span>].<span class="property">dt</span>).<span class="title function_">format</span>(<span class="string">&#x27;mm:ss&#x27;</span>)</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">      <span class="attr">song</span>: song.<span class="property">songs</span>[<span class="number">0</span>],</span><br><span class="line">      durationTime</span><br><span class="line">    &#125;)</span><br><span class="line">    wx.<span class="title function_">setNavigationBarTitle</span>(&#123;</span><br><span class="line">      <span class="attr">title</span>: <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">song</span>.<span class="property">name</span>,</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure>





<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 进度条区域 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;progressControl&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">text</span>&gt;</span>&#123;&#123;currentTime&#125;&#125;<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 总进度条 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;progressControl__barControl&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 实时进度条 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;progressControl__barControl__currtentTimeBar&quot;</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 小圆球 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;progressControl__barControl__currtentTimeBar__circle&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">text</span>&gt;</span>&#123;&#123;durationTime&#125;&#125;<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>



<p><img src="/2022/10/15/web/%E8%BF%9B%E9%98%B6/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%BC%80%E5%8F%91/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E6%A6%82%E8%BF%B0/image-20221110204052490.png" alt="image-20221110204052490"></p>
<h2 id="音乐实时播放时间格式化显示"><a href="#音乐实时播放时间格式化显示" class="headerlink" title="音乐实时播放时间格式化显示"></a>音乐实时播放时间格式化显示</h2><p><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/api/media/background-audio/BackgroundAudioManager.onTimeUpdate.html">BackgroundAudioManager.onTimeUpdate(function listener) | 微信开放文档 (qq.com)</a></p>
<p>监听背景音频播放进度更新事件，只有小程序在前台时会回调</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// onload</span></span><br><span class="line">    <span class="comment">// 监听音乐实时播放的进度</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">backgroundAudioManager</span>.<span class="title function_">onTimeUpdate</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">// console.log(&#x27;总时长：&#x27;, this.backgroundAudioManager.duration)</span></span><br><span class="line">      <span class="comment">// console.log(&#x27;实时时长&#x27;, this.backgroundAudioManager.currentTime)</span></span><br><span class="line">      <span class="keyword">let</span> currentTime = <span class="title function_">moment</span>(<span class="variable language_">this</span>.<span class="property">backgroundAudioManager</span>.<span class="property">currentTime</span> * <span class="number">1000</span>).<span class="title function_">format</span>(<span class="string">&#x27;mm:ss&#x27;</span>) <span class="comment">// 单位是s，要转换成ms</span></span><br><span class="line">      <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">        currentTime</span><br><span class="line">      &#125;)</span><br></pre></td></tr></table></figure>

<h2 id="进度条动态展示"><a href="#进度条动态展示" class="headerlink" title="进度条动态展示"></a>进度条动态展示</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 监听音乐实时播放的进度</span></span><br><span class="line"><span class="variable language_">this</span>.<span class="property">backgroundAudioManager</span>.<span class="title function_">onTimeUpdate</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// console.log(&#x27;总时长：&#x27;, this.backgroundAudioManager.duration)</span></span><br><span class="line">  <span class="comment">// console.log(&#x27;实时时长&#x27;, this.backgroundAudioManager.currentTime)</span></span><br><span class="line">  <span class="keyword">let</span> currentTime = <span class="title function_">moment</span>(<span class="variable language_">this</span>.<span class="property">backgroundAudioManager</span>.<span class="property">currentTime</span> * <span class="number">1000</span>).<span class="title function_">format</span>(<span class="string">&#x27;mm:ss&#x27;</span>) <span class="comment">// 单位是s，要转换成ms</span></span><br><span class="line">  <span class="keyword">let</span> currentWidth = <span class="variable language_">this</span>.<span class="property">backgroundAudioManager</span>.<span class="property">currentTime</span>/<span class="variable language_">this</span>.<span class="property">backgroundAudioManager</span>.<span class="property">duration</span> * <span class="number">450</span> <span class="comment">// 比例计算，450是总长度</span></span><br><span class="line"></span><br><span class="line">  <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">    currentTime,</span><br><span class="line">    currentWidth</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>



<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 实时进度条 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;progressControl__barControl__currtentTimeBar&quot;</span> <span class="attr">style</span>=<span class="string">&quot;width: &#123;&#123;currentWidth + &#x27;rpx&#x27;&#125;&#125;&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="音乐播放结束自动播放下一首"><a href="#音乐播放结束自动播放下一首" class="headerlink" title="音乐播放结束自动播放下一首"></a>音乐播放结束自动播放下一首</h2><p><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/api/media/background-audio/BackgroundAudioManager.onEnded.html">BackgroundAudioManager.onEnded(function listener) | 微信开放文档 (qq.com)</a></p>
<h2 id="关联页面"><a href="#关联页面" class="headerlink" title="关联页面"></a>关联页面</h2><p>关联主页和歌曲详情页</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 跳转至recommendSong页面的回调</span></span><br><span class="line"><span class="title function_">toRecommendSong</span>(<span class="params"></span>) &#123;</span><br><span class="line">    wx.<span class="title function_">navigateTo</span>(&#123;</span><br><span class="line">        <span class="attr">url</span>: <span class="string">&#x27;/pages/recommendSong/recommendSong&#x27;</span></span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><code>index.wxml</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;navItem&quot;</span> <span class="attr">bindtap</span>=<span class="string">&quot;toRecommendSong&quot;</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h2 id="作业"><a href="#作业" class="headerlink" title="作业"></a>作业</h2><p>单曲循环，随机播放</p>
<ul>
<li>随机播放<ul>
<li>要给到随机播放的标识，生成可选值范围内的随机下标，并且不能随机到当前歌曲</li>
</ul>
</li>
<li>单曲循环<ul>
<li>播放完后，再重新播放当前音乐</li>
</ul>
</li>
</ul>
<h2 id="搜索页面"><a href="#搜索页面" class="headerlink" title="搜索页面"></a>搜索页面</h2><h3 id="search头部及热搜榜静态页面搭建"><a href="#search头部及热搜榜静态页面搭建" class="headerlink" title="search头部及热搜榜静态页面搭建"></a>search头部及热搜榜静态页面搭建</h3><p>新建page，并配置标题</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;usingComponents&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span><span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;navigationBarTitleText&quot;</span><span class="punctuation">:</span> <span class="string">&quot;发现音乐&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>



<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--pages/search/search.wxml--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;searchContainer&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 头部搜索区域 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;header&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;header__searchInput&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;iconfont icon-search header__searchInput__icon&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;搜索歌曲&quot;</span> <span class="attr">class</span>=<span class="string">&quot;header__searchInput__input&quot;</span> <span class="attr">placeholder-class</span>=<span class="string">&quot;placeholder&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;header__cancel&quot;</span>&gt;</span>取消<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 热搜榜 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;hotContainer&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;hotContainer__title&quot;</span>&gt;</span>热搜榜<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 热搜列表 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;hotContainer__hotList&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;hotContainer__hotList__hotItem&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;hotContainer__hotList__hotItem__order&quot;</span>&gt;</span>1<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;hotContainer__hotList__hotItem__text&quot;</span>&gt;</span>偏爱<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;hotContainer__hotList__hotItem&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;hotContainer__hotList__hotItem__order&quot;</span>&gt;</span>1<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;hotContainer__hotList__hotItem__text&quot;</span>&gt;</span>偏爱<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">view</span>&gt;</span>            <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;hotContainer__hotList__hotItem&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;hotContainer__hotList__hotItem__order&quot;</span>&gt;</span>1<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;hotContainer__hotList__hotItem__text&quot;</span>&gt;</span>偏爱<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">view</span>&gt;</span>            <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;hotContainer__hotList__hotItem&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;hotContainer__hotList__hotItem__order&quot;</span>&gt;</span>1<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;hotContainer__hotList__hotItem__text&quot;</span>&gt;</span>偏爱<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">view</span>&gt;</span>            <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;hotContainer__hotList__hotItem&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;hotContainer__hotList__hotItem__order&quot;</span>&gt;</span>1<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;hotContainer__hotList__hotItem__text&quot;</span>&gt;</span>偏爱<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">view</span>&gt;</span>            <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;hotContainer__hotList__hotItem&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;hotContainer__hotList__hotItem__order&quot;</span>&gt;</span>1<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;hotContainer__hotList__hotItem__text&quot;</span>&gt;</span>偏爱<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">            </span><br><span class="line">        <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>



<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* pages/search/search.wxss */</span></span><br><span class="line"><span class="selector-class">.searchContainer</span> &#123;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">20</span>rpx;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.header</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">60</span>rpx;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">10</span>rpx <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">60</span>rpx;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.header__searchInput</span> &#123;</span><br><span class="line">    <span class="attribute">flex</span>: <span class="number">1</span>; <span class="comment">/*右侧固定长度，左侧自适应*/</span></span><br><span class="line">    <span class="attribute">background-color</span>: <span class="built_in">rgba</span>(<span class="number">237</span>,<span class="number">237</span>,<span class="number">237</span>,.<span class="number">3</span>);</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">30</span>rpx;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.header__searchInput__icon</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">15</span>rpx;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.header__searchInput__input</span> &#123;</span><br><span class="line">    <span class="attribute">margin-left</span>: <span class="number">50</span>rpx;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">60</span>rpx;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.placeholder</span> &#123;</span><br><span class="line">    <span class="comment">/* color:  #d43c33; */</span></span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">28</span>rpx;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.header__cancel</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100</span>rpx;</span><br><span class="line">    <span class="attribute">text-align</span>: center;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 热搜榜 */</span></span><br><span class="line"><span class="selector-class">.hotContainer__title</span> &#123;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">80</span>rpx;</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">80</span>rpx;</span><br><span class="line">    <span class="attribute">border-bottom</span>: <span class="number">1px</span> solid <span class="number">#eee</span>;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">28</span>rpx;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.hotContainer__hotList</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">flex-wrap</span>: wrap;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.hotContainer__hotList__hotItem</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">80</span>rpx;</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">80</span>rpx;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">26</span>rpx;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.hotContainer__hotList__hotItem__order</span> &#123;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span> <span class="number">10</span>rpx;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>效果：</p>
<p><img src="/2022/10/15/web/%E8%BF%9B%E9%98%B6/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%BC%80%E5%8F%91/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E6%A6%82%E8%BF%B0/image-20221110220421626.png" alt="image-20221110220421626"></p>
<h3 id="热搜榜、placeholder数据动态展示"><a href="#热搜榜、placeholder数据动态展示" class="headerlink" title="热搜榜、placeholder数据动态展示"></a>热搜榜、placeholder数据动态展示</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 获取初始化数据</span></span><br><span class="line"><span class="keyword">async</span> <span class="title function_">getInitData</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> placeHolderData = <span class="keyword">await</span> <span class="title function_">request</span>(<span class="string">&#x27;/search/default&#x27;</span>)</span><br><span class="line">  <span class="keyword">let</span> hostListData = <span class="keyword">await</span> <span class="title function_">request</span>(<span class="string">&#x27;/search/hot/detail&#x27;</span>)</span><br><span class="line">  <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">    <span class="attr">placeholderContent</span>: placeHolderData.<span class="property">data</span>.<span class="property">showKeyword</span>,</span><br><span class="line">    <span class="attr">hotList</span>: hostListData.<span class="property">data</span></span><br><span class="line">  &#125;)</span><br><span class="line">&#125;, </span><br></pre></td></tr></table></figure>



<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--pages/search/search.wxml--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;searchContainer&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 头部搜索区域 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;header&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;header__searchInput&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;iconfont icon-search header__searchInput__icon&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;&#123;&#123;placeholderContent&#125;&#125;&quot;</span> <span class="attr">class</span>=<span class="string">&quot;header__searchInput__input&quot;</span> <span class="attr">placeholder-class</span>=<span class="string">&quot;placeholder&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;header__cancel&quot;</span>&gt;</span>取消<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 热搜榜 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;hotContainer&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;hotContainer__title&quot;</span>&gt;</span>热搜榜<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 热搜列表 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;hotContainer__hotList&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;hotContainer__hotList__hotItem&quot;</span> <span class="attr">wx:for</span>=<span class="string">&quot;&#123;&#123;hotList&#125;&#125;&quot;</span> <span class="attr">wx:key</span>=<span class="string">&quot;searchWord&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;hotContainer__hotList__hotItem__order&quot;</span>&gt;</span>&#123;&#123;index + 1&#125;&#125;<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;hotContainer__hotList__hotItem__text&quot;</span>&gt;</span>&#123;&#123;item.searchWord&#125;&#125;<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">image</span> <span class="attr">class</span>=<span class="string">&quot;hotContainer__hotList__hotItem__iconImage&quot;</span> <span class="attr">wx:if</span>=<span class="string">&quot;&#123;&#123;item.iconUrl&#125;&#125;&quot;</span> <span class="attr">src</span>=<span class="string">&quot;&#123;&#123;item.iconUrl&#125;&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">image</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>



<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.hotContainer__hotList__hotItem__iconImage</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">30</span>rpx;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">25</span>rpx;</span><br><span class="line">    <span class="attribute">margin-left</span>: <span class="number">10</span>rpx;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="关键词模糊匹配搜索数据"><a href="#关键词模糊匹配搜索数据" class="headerlink" title="关键词模糊匹配搜索数据"></a>关键词模糊匹配搜索数据</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// pages/search/search.js</span></span><br><span class="line"><span class="keyword">import</span> request <span class="keyword">from</span> <span class="string">&#x27;../../utils/request.js&#x27;</span></span><br><span class="line"><span class="keyword">let</span> isSend = <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 表单项内容发生改变的回调</span></span><br><span class="line">  <span class="title function_">handleInputChange</span>(<span class="params">event</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(event)</span><br><span class="line">    <span class="comment">// 更新searchContent的状态</span></span><br><span class="line">    <span class="keyword">if</span>(event.<span class="property">detail</span>.<span class="property">value</span> == <span class="string">&#x27;&#x27;</span>) <span class="keyword">return</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">      <span class="attr">searchContent</span>: event.<span class="property">detail</span>.<span class="property">value</span>.<span class="title function_">trim</span>()</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="keyword">if</span>(isSend) <span class="keyword">return</span></span><br><span class="line">    isSend = <span class="literal">true</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">getSearchList</span>()</span><br><span class="line">    <span class="comment">// 函数节流</span></span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      isSend = <span class="literal">false</span></span><br><span class="line">    &#125;, <span class="number">3000</span>)</span><br><span class="line"></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="keyword">async</span> <span class="title function_">getSearchList</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// 发请求获取关键字模糊匹配数据</span></span><br><span class="line">    <span class="keyword">let</span> searchListData = <span class="keyword">await</span> <span class="title function_">request</span>(<span class="string">&#x27;/search&#x27;</span>, &#123;<span class="attr">keywords</span>: <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">searchContent</span>, <span class="attr">limit</span>: <span class="number">10</span>&#125;)</span><br><span class="line">    <span class="comment">// console.log(searchListData)</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">      <span class="attr">searchList</span>: searchListData.<span class="property">result</span>.<span class="property">songs</span></span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure>

<p>待优化：isSend放data配置项里不行，得放全局</p>
<p>删除输入时，最后剩一个空串也会发一次（已优化）</p>
<h3 id="搜索列表动态显示"><a href="#搜索列表动态显示" class="headerlink" title="搜索列表动态显示"></a>搜索列表动态显示</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 表单项内容发生改变的回调</span></span><br><span class="line"><span class="title function_">handleInputChange</span>(<span class="params">event</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(event)</span><br><span class="line">  <span class="comment">// 更新searchContent的状态</span></span><br><span class="line">  <span class="keyword">if</span>(!event.<span class="property">detail</span>.<span class="property">value</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">      <span class="attr">searchList</span>: []  <span class="comment">// 置空配合wx:if</span></span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">    <span class="attr">searchContent</span>: event.<span class="property">detail</span>.<span class="property">value</span>.<span class="title function_">trim</span>()</span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="keyword">if</span>(isSend) <span class="keyword">return</span></span><br><span class="line">  isSend = <span class="literal">true</span></span><br><span class="line">  <span class="variable language_">this</span>.<span class="title function_">getSearchList</span>()</span><br><span class="line">  <span class="comment">// 函数节流</span></span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    isSend = <span class="literal">false</span></span><br><span class="line">  &#125;, <span class="number">3000</span>)</span><br><span class="line"></span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>



<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">block</span> <span class="attr">wx:if</span>=<span class="string">&#x27;&#123;&#123;searchList.length&#125;&#125;&#x27;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 搜索内容展示 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;showSearchContent&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;showSearchContent__content&quot;</span>&gt;</span>搜索内容：&#123;&#123;searchContent&#125;&#125;<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;showSearchContent__list&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;showSearchContent__list__item&quot;</span> <span class="attr">wx:for</span>=<span class="string">&quot;&#123;&#123;searchList&#125;&#125;&quot;</span> <span class="attr">wx:key</span>=<span class="string">&quot;id&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;iconfont icon-search&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;showSearchContent__list__item__content&quot;</span>&gt;</span>&#123;&#123;item.name&#125;&#125;<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">                </span><br><span class="line">            <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">block</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">block</span> <span class="attr">wx:else</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 热搜榜 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;hotContainer&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;hotContainer__title&quot;</span>&gt;</span>热搜榜<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 热搜列表 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;hotContainer__hotList&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;hotContainer__hotList__hotItem&quot;</span> <span class="attr">wx:for</span>=<span class="string">&quot;&#123;&#123;hotList&#125;&#125;&quot;</span> <span class="attr">wx:key</span>=<span class="string">&quot;searchWord&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;hotContainer__hotList__hotItem__order&quot;</span>&gt;</span>&#123;&#123;index + 1&#125;&#125;<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;hotContainer__hotList__hotItem__text&quot;</span>&gt;</span>&#123;&#123;item.searchWord&#125;&#125;<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">image</span> <span class="attr">class</span>=<span class="string">&quot;hotContainer__hotList__hotItem__iconImage&quot;</span> <span class="attr">wx:if</span>=<span class="string">&quot;&#123;&#123;item.iconUrl&#125;&#125;&quot;</span> <span class="attr">src</span>=<span class="string">&quot;&#123;&#123;item.iconUrl&#125;&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">image</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">block</span>&gt;</span></span><br></pre></td></tr></table></figure>



<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.showSearchContent__content</span> &#123;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">80</span>rpx;</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">80</span>rpx;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">24</span>rpx;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#d43c33</span>;</span><br><span class="line">    <span class="attribute">border-bottom</span>: <span class="number">1</span>rpx solid <span class="number">#d43c33</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.showSearchContent__list__item</span> &#123;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">80</span>rpx;</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">80</span>rpx;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.showSearchContent__list__item__content</span> &#123;</span><br><span class="line">    <span class="attribute">flex</span>: <span class="number">1</span>;</span><br><span class="line">    <span class="attribute">margin-left</span>: <span class="number">20</span>rpx;</span><br><span class="line">    <span class="attribute">border-bottom</span>: <span class="number">1px</span> solid <span class="number">#eee</span>;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">26</span>rpx;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="历史记录静态页面"><a href="#历史记录静态页面" class="headerlink" title="历史记录静态页面"></a>历史记录静态页面</h3><ul>
<li>静态页面<ul>
<li>和热搜榜是同时显示的</li>
</ul>
</li>
<li>点击可以清空历史记录</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 历史记录 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;history&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;history__title&quot;</span>&gt;</span>历史记录<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;history__item&quot;</span>&gt;</span>你好<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;history__item&quot;</span>&gt;</span>你好<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;history__item&quot;</span>&gt;</span>你好<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;history__item&quot;</span>&gt;</span>你好<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;history__item&quot;</span>&gt;</span>你好<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;history__item&quot;</span>&gt;</span>你好<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;history__item&quot;</span>&gt;</span>你好<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 删除 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;history__icon iconfont icon-delete_light&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>



<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 搜索历史 */</span></span><br><span class="line"><span class="selector-class">.history</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">flex-wrap</span>: wrap;</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">50</span>rpx;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">28</span>rpx;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.history__title</span> &#123;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">50</span>rpx;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.history__item</span> &#123;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">50</span>rpx;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">26</span>rpx;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#ededed</span>;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">10</span>rpx <span class="number">20</span>rpx;</span><br><span class="line">    </span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">30</span>rpx;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">20</span>rpx;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.history__icon</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">bottom</span>: <span class="number">10</span>rpx;</span><br><span class="line">    <span class="attribute">right</span>: <span class="number">15</span>rpx;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">36</span>rpx;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="/2022/10/15/web/%E8%BF%9B%E9%98%B6/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%BC%80%E5%8F%91/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E6%A6%82%E8%BF%B0/image-20221112073329146.png" alt="image-20221112073329146"></p>
<h3 id="添加搜索历史记录"><a href="#添加搜索历史记录" class="headerlink" title="添加搜索历史记录"></a>添加搜索历史记录</h3><p>添加历史记录</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">  <span class="title function_">onLoad</span>(<span class="params">options</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">getInitData</span>()</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">getSearchHistory</span>()</span><br><span class="line">  &#125;,</span><br><span class="line">      </span><br><span class="line">      </span><br><span class="line">      </span><br><span class="line">        <span class="comment">// 获取本地搜索记录</span></span><br><span class="line">  <span class="title function_">getSearchHistory</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> historyList = wx.<span class="title function_">getStorageSync</span>(<span class="string">&#x27;searchHistory&#x27;</span>)</span><br><span class="line">    <span class="keyword">if</span>(historyList) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">        historyList</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">      </span><br><span class="line"><span class="keyword">async</span> <span class="title function_">getSearchList</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> &#123;searchContent, historyList&#125; = <span class="variable language_">this</span>.<span class="property">data</span></span><br><span class="line">    <span class="keyword">let</span> searchListData = <span class="keyword">await</span> <span class="title function_">request</span>(<span class="string">&#x27;/search&#x27;</span>, &#123;<span class="attr">keywords</span>: searchContent, <span class="attr">limit</span>: <span class="number">10</span>&#125;)</span><br><span class="line">    <span class="comment">// console.log(searchListData)</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">      <span class="attr">searchList</span>: searchListData.<span class="property">result</span>.<span class="property">songs</span></span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="comment">// 添加搜索记录</span></span><br><span class="line">    <span class="keyword">if</span>(historyList.<span class="title function_">indexOf</span>(searchContent) !== -<span class="number">1</span>) &#123;</span><br><span class="line">      historyList.<span class="title function_">splice</span>(historyList.<span class="title function_">indexOf</span>(searchContent), <span class="number">1</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    historyList.<span class="title function_">unshift</span>(searchContent)</span><br><span class="line"></span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">      historyList</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="comment">// 搜索记录需要存到本地</span></span><br><span class="line">    wx.<span class="title function_">setStorageSync</span>(<span class="string">&#x27;searchHistory&#x27;</span>, historyList)</span><br><span class="line">  &#125;,</span><br><span class="line">      </span><br><span class="line">      </span><br><span class="line"></span><br><span class="line">      </span><br></pre></td></tr></table></figure>



<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;history__title&quot;</span>&gt;</span>历史记录<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;history__item&quot;</span> <span class="attr">wx:for</span>=<span class="string">&quot;&#123;&#123;historyList&#125;&#125;&quot;</span> <span class="attr">wx:key</span>=<span class="string">&quot;item&quot;</span>&gt;</span>&#123;&#123;item&#125;&#125;<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>清除输入</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 清空搜索内容</span></span><br><span class="line"><span class="title function_">clearSearchContent</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">    <span class="attr">searchContent</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">    <span class="attr">searchList</span>: []</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">input type=&quot;text&quot; placeholder=&quot;&#123;&#123;placeholderContent&#125;&#125;&quot; class=&quot;header__searchInput__input&quot; placeholder-class=&quot;placeholder&quot; bindinput=&quot;handleInputChange&quot; value=&quot;&#123;&#123;searchContent&#125;&#125;&quot; /&gt;</span><br><span class="line">            <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;header__searchInput__clear iconfont icon-qingkong&quot;</span> <span class="attr">bindtap</span>=<span class="string">&quot;clearSearchContent&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="删除历史记录"><a href="#删除历史记录" class="headerlink" title="删除历史记录"></a>删除历史记录</h3><p>弹出询问框，<a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/api/ui/interaction/wx.showModal.html">wx.showModal(Object object) | 微信开放文档 (qq.com)</a></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 清空历史记录</span></span><br><span class="line"><span class="title function_">deleteHistory</span>(<span class="params"></span>) &#123;</span><br><span class="line">  wx.<span class="title function_">showModal</span>(&#123;</span><br><span class="line">    <span class="comment">// title: &#x27;清空&#x27;,</span></span><br><span class="line">    <span class="attr">content</span>: <span class="string">&#x27;确定清空全部历史记录？&#x27;</span>,</span><br><span class="line">    <span class="attr">success</span>: <span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span>(res.<span class="property">confirm</span>) &#123;</span><br><span class="line">        <span class="comment">// 清空data中的historyList</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">          <span class="attr">historyList</span>: []</span><br><span class="line">        &#125;)</span><br><span class="line">        <span class="comment">// 移除本地缓存</span></span><br><span class="line">        wx.<span class="title function_">removeStorageSync</span>(<span class="string">&#x27;searchHistory&#x27;</span>)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;header__searchInput__clear iconfont icon-qingkong&quot;</span> <span class="attr">bindtap</span>=<span class="string">&quot;clearSearchContent&quot;</span> <span class="attr">hidden</span>=<span class="string">&quot;&#123;&#123;!searchContent&#125;&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="关联搜索页面和视频页"><a href="#关联搜索页面和视频页" class="headerlink" title="关联搜索页面和视频页"></a>关联搜索页面和视频页</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">toSearch</span>(<span class="params"></span>) &#123;</span><br><span class="line">  wx.<span class="title function_">navigateTo</span>(&#123;</span><br><span class="line">    <span class="attr">url</span>: <span class="string">&#x27;/pages/search/search&#x27;</span></span><br><span class="line">  &#125;)</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>



<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;search&quot;</span> <span class="attr">bindtap</span>=<span class="string">&quot;toSearch&quot;</span>&gt;</span>搜索音乐<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h1 id="小程序语法"><a href="#小程序语法" class="headerlink" title="小程序语法"></a>小程序语法</h1><h2 id="数据绑定"><a href="#数据绑定" class="headerlink" title="数据绑定"></a>数据绑定</h2><p><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/reference/wxml/">WXML | 微信开放文档 (qq.com)</a></p>
<p>页面.js文件的data配置项中初始化数据</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// pages/index/index.js</span></span><br><span class="line"><span class="title class_">Page</span>(&#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 页面的初始数据</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="attr">data</span>: &#123;</span><br><span class="line">    <span class="attr">msg</span>: <span class="string">&#x27;初始化数据&#x27;</span></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 生命周期函数--监听页面加载</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="title function_">onLoad</span>(<span class="params">options</span>) &#123;</span><br><span class="line"></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 生命周期函数--监听页面初次渲染完成</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="title function_">onReady</span>(<span class="params"></span>) &#123;</span><br><span class="line"></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 生命周期函数--监听页面显示</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="title function_">onShow</span>(<span class="params"></span>) &#123;</span><br><span class="line"></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 生命周期函数--监听页面隐藏</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="title function_">onHide</span>(<span class="params"></span>) &#123;</span><br><span class="line"></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 生命周期函数--监听页面卸载</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="title function_">onUnload</span>(<span class="params"></span>) &#123;</span><br><span class="line"></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 页面相关事件处理函数--监听用户下拉动作</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="title function_">onPullDownRefresh</span>(<span class="params"></span>) &#123;</span><br><span class="line"></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 页面上拉触底事件的处理函数</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="title function_">onReachBottom</span>(<span class="params"></span>) &#123;</span><br><span class="line"></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 用户点击右上角分享</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="title function_">onShareAppMessage</span>(<span class="params"></span>) &#123;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>控制台中AppData菜单可以看到，小程序页面中用到的数据都来自这里</p>
<p><img src="/2022/10/15/web/%E8%BF%9B%E9%98%B6/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%BC%80%E5%8F%91/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E6%A6%82%E8%BF%B0/image-20221015094904328.png" alt="image-20221015094904328"></p>
<p>使用模板语法使用数据</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;userName&quot;</span>&gt;</span>&#123;&#123;msg&#125;&#125;<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><img src="/2022/10/15/web/%E8%BF%9B%E9%98%B6/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%BC%80%E5%8F%91/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E6%A6%82%E8%BF%B0/image-20221015094944879.png" alt="image-20221015094944879"></p>
<p>修改msg状态：<code>this.setData</code>，this代表当前页面的实例对象</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">onLoad</span>(<span class="params">options</span>) &#123;</span><br><span class="line">   <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>)</span><br><span class="line">   <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">     <span class="attr">msg</span>: <span class="string">&#x27;修改之后的数据&#x27;</span></span><br><span class="line">   &#125;)</span><br><span class="line"> &#125;,</span><br></pre></td></tr></table></figure>

<p>在非自身的回调函数中，修改也是同步的</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">onLoad</span>(<span class="params">options</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">msg</span>)</span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">      <span class="attr">msg</span>: <span class="string">&#x27;修改之后的数据&#x27;</span></span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,<span class="number">2000</span>)</span><br><span class="line">&#125;,</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>小结：</p>
<ul>
<li><p>小程序：</p>
<ul>
<li><p>data中初始化数据</p>
</li>
<li><p>修改数据：this.setData()</p>
<ul>
<li>修改数据的行为始终是同步的</li>
</ul>
</li>
<li><p>数据流：</p>
<ul>
<li>单向：Model &#x3D;&gt; View</li>
</ul>
</li>
</ul>
</li>
<li><p>Vue：</p>
<ul>
<li>data中初始化数据</li>
<li>修改数据：this.key &#x3D; value</li>
<li>数据流：<ul>
<li>Vue是单向数据流：Model &#x3D;&gt; View</li>
<li>Vue中实现了双向数据绑定</li>
</ul>
</li>
</ul>
</li>
<li><p>React：</p>
<ul>
<li>state中初始化数据状态</li>
<li>修改数据：<ul>
<li>自身钩子函数中（componentDidMount）异步的</li>
<li>非自身的钩子函数中（定时器的回调）同步的</li>
</ul>
</li>
<li>数据流：<ul>
<li>单向：Model &#x3D;&gt; View</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>小程序中的数据代理用的是Object.defineProperty()</p>
<h2 id="事件绑定"><a href="#事件绑定" class="headerlink" title="事件绑定"></a>事件绑定</h2><p><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/view/wxml/event.html">事件 | 微信开放文档 (qq.com)</a></p>
<p>1.bind绑定：事件绑定不会阻止冒泡事件向上冒泡</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">bindtap</span>=<span class="string">&quot;handleTap&quot;</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">text</span>&gt;</span><span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>2.catch绑定：事件绑定可以阻止冒泡事件向上冒泡</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">catchtap</span>=<span class="string">&quot;handleTap&quot;</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">text</span>&gt;</span><span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>



<p>自定义事件写在*.js中，与data评级</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">handleTap</span>(<span class="params"></span>) &#123;</span><br><span class="line">   <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;hello world&#x27;</span>)</span><br><span class="line"> &#125;,</span><br></pre></td></tr></table></figure>



<h2 id="路由跳转"><a href="#路由跳转" class="headerlink" title="路由跳转"></a>路由跳转</h2><p><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/api/route/wx.navigateTo.html">wx.navigateTo(Object object) | 微信开放文档 (qq.com)</a></p>
<p>页面配置</p>
<p>app.json</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;pages&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="string">&quot;pages/index/index&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="string">&quot;pages/logs/index&quot;</span></span><br><span class="line">  <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;window&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;navigationBarBackgroundColor&quot;</span><span class="punctuation">:</span> <span class="string">&quot;#fff&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;navigationBarTextStyle&quot;</span><span class="punctuation">:</span> <span class="string">&quot;black&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;navigationBarTitleText&quot;</span><span class="punctuation">:</span> <span class="string">&quot;小程序&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<p>设置跳转</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">handleTap</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;hello world&#x27;</span>)</span><br><span class="line">  wx.<span class="title function_">navigateTo</span>(&#123;</span><br><span class="line">    <span class="attr">url</span>: <span class="string">&#x27;/pages/logs/index&#x27;</span>, <span class="comment">// 这里要加根路径/</span></span><br><span class="line">  &#125;)</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<p><img src="/2022/10/15/web/%E8%BF%9B%E9%98%B6/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%BC%80%E5%8F%91/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E6%A6%82%E8%BF%B0/image-20221015154910766.png" alt="image-20221015154910766"></p>
<p><code>wx.redirectTo(Object object)</code>的效果</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">handleTap</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;hello world&#x27;</span>)</span><br><span class="line">  wx.<span class="title function_">redirectTo</span>(&#123;</span><br><span class="line">    <span class="attr">url</span>: <span class="string">&#x27;/pages/logs/index&#x27;</span>,</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<p><img src="/2022/10/15/web/%E8%BF%9B%E9%98%B6/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%BC%80%E5%8F%91/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E6%A6%82%E8%BF%B0/image-20221015155028533.png" alt="image-20221015155028533"></p>
<p>左上角不再是返回上一页，而是返回主页</p>
<p>跳转的各个方法的区别，在于关不关闭当前页面，和页面的生命周期有关，后面会讲到</p>
<p>如果需要单独配置某个页面的导航，可以在自己文件下的json文件中设置</p>
<p><code>pages/logs/index.json</code></p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;usingComponents&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span><span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;navigationBarTitleText&quot;</span><span class="punctuation">:</span> <span class="string">&quot;日志&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<p>局部配置的优先级，高于全局</p>
<h2 id="生命周期"><a href="#生命周期" class="headerlink" title="生命周期"></a>生命周期</h2><p><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/app-service/page-life-cycle.html">生命周期 | 微信开放文档 (qq.com)</a></p>
<p>五个生命周期，如图：</p>
<ul>
<li>第一次onLoad和OnShow时，逻辑层的数据还没来呢</li>
<li>onLoad、onReady等执行次数，取决于路由跳转是选择的api</li>
<li>使用<code>wx.redirectTo</code>跳转路由时，会关闭当前页面，执行一次onUnload回调</li>
<li>如果使用的是<code>wx.navigateTo</code>跳转路由，页面不会销毁，切换页面时执行onHide回调</li>
</ul>
<p><img src="/2022/10/15/web/%E8%BF%9B%E9%98%B6/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%BC%80%E5%8F%91/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E6%A6%82%E8%BF%B0/page-lifecycle.2e646c86.png" alt="img"></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 生命周期函数--监听页面加载</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="title function_">onLoad</span>(<span class="params">options</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">msg</span>)</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">        <span class="attr">msg</span>: <span class="string">&#x27;修改之后的数据&#x27;</span></span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;,<span class="number">2000</span>)</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 生命周期函数--监听页面初次渲染完成</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="title function_">onReady</span>(<span class="params"></span>) &#123;</span><br><span class="line"></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 生命周期函数--监听页面显示</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="title function_">onShow</span>(<span class="params"></span>) &#123;</span><br><span class="line"></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 生命周期函数--监听页面隐藏</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="title function_">onHide</span>(<span class="params"></span>) &#123;</span><br><span class="line"></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 生命周期函数--监听页面卸载</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="title function_">onUnload</span>(<span class="params"></span>) &#123;</span><br><span class="line"></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="条件渲染"><a href="#条件渲染" class="headerlink" title="条件渲染"></a>条件渲染</h2><p><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/reference/wxml/conditional.html">条件渲染 | 微信开放文档 (qq.com)</a></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">wx:if</span>=<span class="string">&quot;&#123;&#123;length &gt; 5&#125;&#125;&quot;</span>&gt;</span> 1 <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">wx:elif</span>=<span class="string">&quot;&#123;&#123;length &gt; 2&#125;&#125;&quot;</span>&gt;</span> 2 <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">wx:else</span>&gt;</span> 3 <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="列表渲染"><a href="#列表渲染" class="headerlink" title="列表渲染"></a>列表渲染</h2><p><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/reference/wxml/list.html">列表渲染 | 微信开放文档 (qq.com)</a></p>
<p><code>wx:for</code></p>
<p>在组件上使用 <code>wx:for</code> 控制属性绑定一个数组，即可使用数组中各项的数据重复渲染该组件。</p>
<p>默认数组的当前项的下标变量名默认为 <code>index</code>，数组当前项的变量名默认为 <code>item</code></p>
<p><code>wx:key</code></p>
<p>如果列表中项目的位置会动态改变或者有新的项目添加到列表中，并且希望列表中的项目保持自己的特征和状态（如 <a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/component/input.html">input</a> 中的输入内容，<a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/component/switch.html">switch</a> 的选中状态），需要使用 <code>wx:key</code> 来指定列表中项目的唯一的标识符。</p>
<p><code>wx:key</code> 的值以两种形式提供</p>
<ol>
<li>字符串，代表在 for 循环的 array 中 item 的某个 property，该 property 的值需要是列表中唯一的字符串或数字，且不能动态改变。</li>
<li>保留关键字 <code>*this</code> 代表在 for 循环中的 item 本身，这种表示需要 item 本身是一个唯一的字符串或者数字。</li>
</ol>
<p>可以自定义index和item变量名</p>
<p>使用 <code>wx:for-item</code> 可以指定数组当前元素的变量名，</p>
<p>使用 <code>wx:for-index</code> 可以指定数组当前下标的变量名；</p>
<h2 id="模板使用"><a href="#模板使用" class="headerlink" title="模板使用"></a>模板使用</h2><p><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/reference/wxml/template.html">模板 | 微信开放文档 (qq.com)</a></p>
<p>定义模板</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--template/template01/template01.wxml--&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 定义模板 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span> <span class="attr">name</span>=<span class="string">&quot;myTmp&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;title&quot;</span>&gt;</span>自定义模板<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>使用模板</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--test/test.wxml--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">import</span> <span class="attr">src</span>=<span class="string">&quot;/template/template01/template01.wxml&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;testContainer&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span>&gt;</span>测试使用模板<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 测试模板--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">template</span> <span class="attr">is</span>=<span class="string">&quot;myTmp&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>样式也要在对应的样式文件中引入</p>
<p>定义样式</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* template/template01/template01.wxss */</span></span><br><span class="line"><span class="selector-class">.title</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: red;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>使用样式</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* test/test.wxss */</span></span><br><span class="line"><span class="comment">/* 引入模板样式 */</span></span><br><span class="line"><span class="keyword">@import</span> <span class="string">&#x27;/template/template01/template01.wxss&#x27;</span>;</span><br></pre></td></tr></table></figure>

<p>可以给模板传递数据</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--template/template01/template01.<span class="property">wxml</span>--&gt;</span><br><span class="line">&lt;!-- 定义模板 --&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">template</span> <span class="attr">name</span>=<span class="string">&quot;myTmp&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">view</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;title&quot;</span>&gt;</span>自定义模板<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;userInfo&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;userInfo__name&quot;</span>&gt;</span>姓名：&#123;&#123;userName&#125;&#125;<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;userInfo__age&quot;</span>&gt;</span>年龄：&#123;&#123;useAge&#125;&#125;<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br></pre></td></tr></table></figure>



<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// test/test.js</span></span><br><span class="line"><span class="title class_">Page</span>(&#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 页面的初始数据</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="attr">data</span>: &#123;</span><br><span class="line">    <span class="attr">userInfo</span>: &#123;</span><br><span class="line">      <span class="attr">userName</span>: <span class="string">&#x27;sai&#x27;</span>,</span><br><span class="line">      <span class="attr">useAge</span>: <span class="number">18</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--test/test.wxml--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">import</span> <span class="attr">src</span>=<span class="string">&quot;/template/template01/template01.wxml&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;testContainer&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span>&gt;</span>测试使用模板<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 测试模板--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">template</span> <span class="attr">is</span>=<span class="string">&quot;myTmp&quot;</span> <span class="attr">data</span>=<span class="string">&quot;&#123;&#123;...userInfo&#125;&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><img src="/2022/10/15/web/%E8%BF%9B%E9%98%B6/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%BC%80%E5%8F%91/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E6%A6%82%E8%BF%B0/image-20221112210003771.png" alt="image-20221112210003771"></p>
<h1 id="小程序API"><a href="#小程序API" class="headerlink" title="小程序API"></a>小程序API</h1><h1 id="小程序重点知识汇总"><a href="#小程序重点知识汇总" class="headerlink" title="小程序重点知识汇总"></a>小程序重点知识汇总</h1><h2 id="小程序本地存储"><a href="#小程序本地存储" class="headerlink" title="小程序本地存储"></a>小程序本地存储</h2><h2 id="小程序前后端交互"><a href="#小程序前后端交互" class="headerlink" title="小程序前后端交互"></a>小程序前后端交互</h2><h2 id="小程序页面通信"><a href="#小程序页面通信" class="headerlink" title="小程序页面通信"></a>小程序页面通信</h2><h2 id="小程序自定义组件"><a href="#小程序自定义组件" class="headerlink" title="小程序自定义组件"></a>小程序自定义组件</h2><h3 id="基本使用"><a href="#基本使用" class="headerlink" title="基本使用"></a>基本使用</h3><ul>
<li>基本使用：<a target="_blank" rel="noopener" href="https://blog.csdn.net/m0_55734030/article/details/127892242">https://blog.csdn.net/m0_55734030/article/details/127892242</a></li>
</ul>
<h4 id="如何创建自定义组件"><a href="#如何创建自定义组件" class="headerlink" title="如何创建自定义组件"></a>如何创建自定义组件</h4><p>（1）在项目根目录中，鼠标右键创建 components 文件夹<br>（2）右击components文件夹,创建item文件夹<br>（3）右击item文件夹，点击新建Component，输入item<br>（3）回车，自动生成四个小程序文件<code>js json wxml wxss</code></p>
<h4 id="自定义组件的使用（局部引入）"><a href="#自定义组件的使用（局部引入）" class="headerlink" title="自定义组件的使用（局部引入）"></a>自定义组件的使用（局部引入）</h4><p>在页面xxx.json UsingComponent中注册，是以键值对的形式，前面的键就是我们创建的组件标签名，后面是url路径</p>
<p><img src="/2022/10/15/web/%E8%BF%9B%E9%98%B6/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%BC%80%E5%8F%91/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E6%A6%82%E8%BF%B0/image-20221225093051542.png" alt="image-20221225093051542"></p>
<h3 id="插槽"><a href="#插槽" class="headerlink" title="插槽"></a>插槽</h3><ul>
<li>插槽：<a target="_blank" rel="noopener" href="https://blog.csdn.net/chengqiuming/article/details/126804533">https://blog.csdn.net/chengqiuming/article/details/126804533</a></li>
</ul>
<h4 id="单个插槽"><a href="#单个插槽" class="headerlink" title="单个插槽"></a>单个插槽</h4><p>在小程序中，默认每个自定义组件中只允许使用一个 <slot> 进行占位，这种个数上的限制叫做单个插槽。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 组件的封装者 --&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span>&gt;</span>这里是组件的内部结构<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!-- 对于不确定的内容，可以使用&lt;slot&gt; 进行占位，具体的内容由组件的使用者决定--&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">slot</span>&gt;</span><span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>



<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">my-test4</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 这部分内容将被放置为组件 &lt;slot&gt; 的位置上 --&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span>&gt;</span>这是通过插槽填充的内容<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">my-test4</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="多个插槽"><a href="#多个插槽" class="headerlink" title="多个插槽"></a>多个插槽</h4><p>在小程序的自定义组件中，需要使用多 <slot> 插槽时，可以在组件的 .js 文件中，通过如下方式进行启用。</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Component(<span class="punctuation">&#123;</span></span><br><span class="line"></span><br><span class="line">  options<span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line"></span><br><span class="line">    multipleSlots<span class="punctuation">:</span> <span class="keyword">true</span> <span class="comment">// 在组件定义时的选项中启用多个 slot 支持</span></span><br><span class="line"></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="punctuation">&#125;</span>)</span><br></pre></td></tr></table></figure>

<p>可以在组件的 .wxml 中使用多个<code> &lt;slot&gt;</code> 标签，以不同的 name 来区分不同的插槽。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">view</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!-- name 为 before 的第一个 slot 插槽--&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">slot</span> <span class="attr">name</span>=<span class="string">&quot;before&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span>&gt;</span>这里是组件的内部结构<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!-- name 为 after 的第二个 slot 插槽--&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">slot</span> <span class="attr">name</span>=<span class="string">&quot;after&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>使用</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">my-test4</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span> <span class="attr">slot</span>=<span class="string">&quot;before&quot;</span>&gt;</span>这是插入到组件 slot name=&quot;before&quot;中的内容<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span> <span class="attr">slot</span>=<span class="string">&quot;after&quot;</span>&gt;</span>这是插入到组件 slot name=&quot;after&quot;中的内容<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">my-test4</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h3 id="参数传递"><a href="#参数传递" class="headerlink" title="参数传递"></a>参数传递</h3><ul>
<li>参数传递：<a target="_blank" rel="noopener" href="https://blog.csdn.net/unimpossibles/article/details/125091511">https://blog.csdn.net/unimpossibles/article/details/125091511</a></li>
</ul>
<p>1.在使用组件时传递自定义属性，如下：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">PubTitle</span> <span class="attr">myTitle</span>=<span class="string">&quot;学生作品&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">PubTitle</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>2.在PubTitle自定义组件的js文件中，接收该自定义属性，如：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">properties</span>: &#123;</span><br><span class="line">    <span class="comment">//myTitle就是自定义的属性名，需要指定type（String,Number,Array,Objact）</span></span><br><span class="line">   <span class="attr">myTitle</span>:&#123;</span><br><span class="line">     <span class="attr">type</span>:<span class="title class_">String</span>,</span><br><span class="line">     <span class="attr">value</span>:<span class="string">&quot;&quot;</span></span><br><span class="line">   &#125;</span><br><span class="line"> &#125;,</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>3.在PubTitle.wxml中渲染从前端传递来的属性，如：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;pubTitle&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;txt&quot;</span>&gt;</span>&#123;&#123;myTitle&#125;&#125;<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">navigator</span> <span class="attr">class</span>=<span class="string">&quot;more&quot;</span>&gt;</span>更多 &gt;<span class="tag">&lt;/<span class="name">navigator</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h2 id="小程序获取用户基本信息"><a href="#小程序获取用户基本信息" class="headerlink" title="小程序获取用户基本信息"></a>小程序获取用户基本信息</h2><h2 id="小程序获取用户唯一标识openId"><a href="#小程序获取用户唯一标识openId" class="headerlink" title="小程序获取用户唯一标识openId"></a>小程序获取用户唯一标识<code>openId</code></h2><p><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/api/open-api/login/wx.login.html">wx.login(Object object) | 微信开放文档 (qq.com)</a></p>
<p><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/open-ability/login.html">小程序登录 | 微信开放文档 (qq.com)</a></p>
<p><img src="/2022/10/15/web/%E8%BF%9B%E9%98%B6/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%BC%80%E5%8F%91/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E6%A6%82%E8%BF%B0/api-login.2fcc9f35.jpg" alt="img"></p>
<p><strong>说明</strong></p>
<ol>
<li><p>调用 <a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/api/open-api/login/wx.login.html">wx.login()</a> 获取 <strong>临时登录凭证code</strong> ，并回传到开发者服务器。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 获取用户openId的回调</span></span><br><span class="line"><span class="title function_">handleGetOpenId</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">// 1.获取登录凭证,wx.login()</span></span><br><span class="line">  wx.<span class="title function_">login</span>(&#123;</span><br><span class="line">    <span class="attr">success</span>: <span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(res)</span><br><span class="line">      <span class="keyword">let</span> code = res.<span class="property">code</span></span><br><span class="line">      <span class="comment">// 2.将登录凭证发送给服务器</span></span><br><span class="line">   </span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<p><img src="/2022/10/15/web/%E8%BF%9B%E9%98%B6/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%BC%80%E5%8F%91/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E6%A6%82%E8%BF%B0/image-20221112211834182.png" alt="image-20221112211834182"></p>
</li>
<li><p>调用 <a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/api-backend/open-api/login/auth.code2Session.html">auth.code2Session</a> 接口，换取 <strong>用户唯一标识 OpenID</strong> 、 用户在微信开放平台帐号下的<strong>唯一标识UnionID</strong>（若当前小程序已绑定到微信开放平台帐号） 和 <strong>会话密钥 session_key</strong>。</p>
<ul>
<li><p>后台需要额外提供一个接口，和微信的服务器通信</p>
<p><code>server.js</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 后台接口时4.8.2版本，在server.js文件的182行新增路由</span></span><br><span class="line">  <span class="comment">// 注册获取用户唯一标识的接口</span></span><br><span class="line">  app.<span class="title function_">use</span>(<span class="string">&#x27;/getOpenId&#x27;</span>, <span class="function">(<span class="params">req, res, next</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> code = req.<span class="property">query</span>.<span class="property">code</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;code&#x27;</span>, code)</span><br><span class="line">    res.<span class="title function_">send</span>(<span class="string">&#x27;测试数据&#x27;</span>)</span><br><span class="line">  &#125;)</span><br></pre></td></tr></table></figure>

<p><code>test.js</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 获取用户openId的回调</span></span><br><span class="line"><span class="title function_">handleGetOpenId</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">// 1.获取登录凭证,wx.login()</span></span><br><span class="line">  wx.<span class="title function_">login</span>(&#123;</span><br><span class="line">    <span class="attr">success</span>: <span class="keyword">async</span> (res) =&gt; &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(res)</span><br><span class="line">      <span class="keyword">let</span> code = res.<span class="property">code</span></span><br><span class="line">      <span class="comment">// 2.将登录凭证发送给服务器，后台需要额外提供一个接口，和微信的服务器通信</span></span><br><span class="line">      <span class="keyword">let</span> result = <span class="keyword">await</span> <span class="title function_">request</span>(<span class="string">&#x27;/getOpenId&#x27;</span>, &#123;code&#125;)</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(result)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<p><img src="/2022/10/15/web/%E8%BF%9B%E9%98%B6/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%BC%80%E5%8F%91/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E6%A6%82%E8%BF%B0/image-20221112214122106.png" alt="image-20221112214122106"></p>
<p>拿到code后继续完善，小程序后台获取appId和app，发请求给微信的服务器，<a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/api-backend/open-api/login/auth.code2Session.html">auth.code2Session | 微信开放文档 (qq.com)</a></p>
<p><code>server.js</code></p>
<ul>
<li><p>安装<code>fly.js</code>，一个多平台的网络请求库，类似<code>axios</code>，<code>npm i flyio</code></p>
</li>
<li><p>node中引入，并向微信服务器发送请求，拿到包含openid</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 注册获取用户唯一标识的接口</span></span><br><span class="line">app.<span class="title function_">use</span>(<span class="string">&#x27;/getOpenId&#x27;</span>, <span class="keyword">async</span> (req, res, next) =&gt; &#123;</span><br><span class="line">  <span class="keyword">let</span> code = req.<span class="property">query</span>.<span class="property">code</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;code&#x27;</span>, code)</span><br><span class="line">  <span class="keyword">let</span> appId = <span class="string">&#x27;wxaff67bc5012b8d5b&#x27;</span>,</span><br><span class="line">  appSecret = <span class="string">&#x27;8881533a8cb2de57b9b1f7135769b7b4&#x27;</span>; <span class="comment">// 小程序开发者设置中获取</span></span><br><span class="line">  <span class="keyword">let</span> url = <span class="string">`https://api.weixin.qq.com/sns/jscode2session?appid=<span class="subst">$&#123;appId&#125;</span>&amp;secret=<span class="subst">$&#123;appSecret&#125;</span>&amp;js_code=<span class="subst">$&#123;code&#125;</span>&amp;grant_type=authorization_code`</span></span><br><span class="line">  <span class="keyword">let</span> result = <span class="keyword">await</span> fly.<span class="title function_">get</span>(url)</span><br><span class="line">  <span class="keyword">if</span>(result.<span class="property">data</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> openId = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(result.<span class="property">data</span>).<span class="property">openid</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(openId)</span><br><span class="line">  &#125;</span><br><span class="line">  res.<span class="title function_">send</span>(<span class="string">&#x27;测试数据&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
</li>
</ol>
<p>之后开发者服务器可以根据用户标识来生成自定义登录态，用于后续业务逻辑中前后端交互时识别用户身份。</p>
<p>拿到用户openId后，一方面要存到数据库，另一方面要返回给客户端（使用<code>jsonwebtoken</code>包，对返回的openId加密）</p>
<p>安装<code>jsonwebtoken</code>：<code>npm i jsonwebtoken</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// server.js</span></span><br><span class="line"><span class="keyword">const</span> jwt = <span class="built_in">require</span>(<span class="string">&#x27;jsonwebtoken&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="comment">// 注册获取用户唯一标识的接口</span></span><br><span class="line">  app.<span class="title function_">use</span>(<span class="string">&#x27;/getOpenId&#x27;</span>, <span class="keyword">async</span> (req, res, next) =&gt; &#123;</span><br><span class="line">    <span class="keyword">let</span> code = req.<span class="property">query</span>.<span class="property">code</span></span><br><span class="line">    <span class="comment">// console.log(&#x27;code&#x27;, code)</span></span><br><span class="line">    <span class="keyword">let</span> appId = <span class="string">&#x27;wxaff67bc5012b8d5b&#x27;</span>,</span><br><span class="line">    appSecret = <span class="string">&#x27;8881533a8cb2de57b9b1f7135769b7b4&#x27;</span>;</span><br><span class="line">    <span class="keyword">let</span> url = <span class="string">`https://api.weixin.qq.com/sns/jscode2session?appid=<span class="subst">$&#123;appId&#125;</span>&amp;secret=<span class="subst">$&#123;appSecret&#125;</span>&amp;js_code=<span class="subst">$&#123;code&#125;</span>&amp;grant_type=authorization_code`</span></span><br><span class="line">    <span class="keyword">let</span> result = <span class="keyword">await</span> fly.<span class="title function_">get</span>(url)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span>(result.<span class="property">data</span>) &#123;</span><br><span class="line">      <span class="keyword">let</span> openId = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(result.<span class="property">data</span>).<span class="property">openid</span></span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(openId)</span><br><span class="line">      <span class="comment">// 一方面要存到数据库，另一方面要返回给客户端（返回的openId要加密）</span></span><br><span class="line">      <span class="keyword">let</span> person = &#123;</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&#x27;sai&#x27;</span>,</span><br><span class="line">        <span class="attr">age</span>: <span class="number">18</span>,</span><br><span class="line">        openId</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="comment">// 对用户的数据加密</span></span><br><span class="line">      <span class="keyword">let</span> token = jwt.<span class="title function_">sign</span>(person, <span class="string">&#x27;myMiniProgram&#x27;</span>) <span class="comment">// 自定义秘钥</span></span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(token)</span><br><span class="line">      res.<span class="title function_">send</span>(token)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//  client.js - 小程序</span></span><br><span class="line"><span class="comment">// 拿到token后存储本地，发送请求时header携带token</span></span><br><span class="line"><span class="keyword">const</span> _token = <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(token)</span><br><span class="line">wx.<span class="title function_">setStorageSync</span>(<span class="string">&#x27;jwt&#x27;</span>, _token)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 用的时候可以再用 JSON.parse 处理一下存储在 Storage 里的 Token 数据。</span></span><br><span class="line"><span class="keyword">const</span> _jwt = wx.<span class="title function_">getStorageSync</span>(<span class="string">&#x27;jwt&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> jwt = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(_jwt)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 服务端签发过来的 Token ，除了 Token 本身，还有一些用户相关的信息，比如头像，名字，邮件等等。我们可以直接在小程序的页面上利用这些数据。</span></span><br><span class="line">wx.<span class="title function_">setJWT</span>(response.<span class="property">data</span>)</span><br><span class="line">wx.<span class="title function_">switchTab</span>(&#123;</span><br><span class="line">    <span class="attr">url</span>: <span class="string">&#x27;/pages/index/index&#x27;</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>注意事项</strong></p>
<ol>
<li>会话密钥 <code>session_key</code> 是对用户数据进行 <a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/open-ability/signature.html">加密签名</a> 的密钥。为了应用自身的数据安全，开发者服务器<strong>不应该把会话密钥下发到小程序，也不应该对外提供这个密钥</strong>。（和 <code>openId</code> 一起返回的字段）</li>
<li>临时登录凭证 <code>code</code> 只能使用一次</li>
</ol>
<h2 id="小程序分包流程"><a href="#小程序分包流程" class="headerlink" title="小程序分包流程"></a>小程序分包流程</h2><p><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/subpackages.html">分包加载 | 微信开放文档 (qq.com)</a></p>
<blockquote>
<p>微信客户端 6.6.0，基础库 <a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">1.7.3</a> 及以上版本开始支持。开发者工具请使用 1.01.1712150 及以上版本，可<a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/devtools/download.html">点此下载</a>。</p>
</blockquote>
<p>某些情况下，开发者需要将小程序划分成不同的子包，在构建时打包成不同的分包，用户在使用时按需进行加载。</p>
<p>在构建小程序分包项目时，构建会输出一个或多个分包。每个使用分包小程序必定含有一个<strong>主包</strong>。所谓的主包，即放置默认启动页面&#x2F;TabBar 页面，以及一些所有分包都需用到公共资源&#x2F;JS 脚本；而<strong>分包</strong>则是根据开发者的配置进行划分。</p>
<p>在小程序启动时，默认会下载主包并启动主包内页面，当用户进入分包内某个页面时，客户端会把对应分包下载下来，下载完成后再进行展示。</p>
<p>目前小程序分包大小有以下限制：</p>
<ul>
<li>整个小程序所有分包大小不超过 20M</li>
<li>单个分包&#x2F;主包大小不能超过 2M</li>
</ul>
<p>对小程序进行分包，可以优化小程序首次启动的下载时间，以及在多团队共同开发时可以更好的解耦协作。</p>
<p>具体使用方法请参考：</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/subpackages/basic.html">使用分包</a></li>
<li><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/subpackages/independent.html">独立分包</a></li>
<li><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/subpackages/preload.html">分包预下载</a></li>
<li><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/subpackages/async.html">分包异步化</a></li>
</ul>
<h3 id="使用分包（常规分包）"><a href="#使用分包（常规分包）" class="headerlink" title="使用分包（常规分包）"></a>使用分包（常规分包）</h3><p><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/subpackages/basic.html">使用分包 | 微信开放文档 (qq.com)</a></p>
<p>案例：</p>
<p>新建<code>songPackage/pages</code>子包文件夹，把歌曲相关的两个文件夹放入其中（这两个页面不需要一开始加载），注意原来的引入路径需要修改</p>
<p><img src="/2022/10/15/web/%E8%BF%9B%E9%98%B6/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%BC%80%E5%8F%91/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E6%A6%82%E8%BF%B0/image-20221113095018071.png" alt="image-20221113095018071"></p>
<p><code>app.json</code>中添加<code>subpackages</code>字段，并修改<code>pages</code>字段，</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&quot;pages&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">  <span class="string">&quot;pages/index/index&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="string">&quot;pages/search/search&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="string">&quot;pages/login/login&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="string">&quot;pages/video/video&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="string">&quot;pages/personal/personal&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="string">&quot;template/template01/template01&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="string">&quot;test/test&quot;</span></span><br><span class="line"><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;subpackages&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">  <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;root&quot;</span><span class="punctuation">:</span> <span class="string">&quot;songPackages&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;pages&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">      <span class="string">&quot;pages/recommendSong/recommendSong&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="string">&quot;pages/songDetail/songDetail&quot;</span></span><br><span class="line">    <span class="punctuation">]</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">]</span><span class="punctuation">,</span></span><br></pre></td></tr></table></figure>

<p>同理，我们把测试页面也单独放一个包</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&quot;pages&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">  <span class="string">&quot;pages/index/index&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="string">&quot;pages/search/search&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="string">&quot;pages/login/login&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="string">&quot;pages/video/video&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="string">&quot;pages/personal/personal&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="string">&quot;template/template01/template01&quot;</span></span><br><span class="line"><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;subpackages&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">  <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;root&quot;</span><span class="punctuation">:</span> <span class="string">&quot;songPackage&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;pages&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">      <span class="string">&quot;pages/recommendSong/recommendSong&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="string">&quot;pages/songDetail/songDetail&quot;</span></span><br><span class="line">    <span class="punctuation">]</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;root&quot;</span><span class="punctuation">:</span> <span class="string">&quot;testPackage&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;pages&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">      <span class="string">&quot;test/test&quot;</span></span><br><span class="line">    <span class="punctuation">]</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">]</span><span class="punctuation">,</span></span><br></pre></td></tr></table></figure>

<p>分包之后，查看微信开发者工具的基本信息</p>
<p><img src="/2022/10/15/web/%E8%BF%9B%E9%98%B6/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%BC%80%E5%8F%91/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E6%A6%82%E8%BF%B0/image-20221113095620523.png" alt="image-20221113095620523"></p>
<p>分包过后，我们写在<code>js</code>中的各种逻辑跳转的路径，需要修改一下，要加一层根目录文件夹（建议后期优化时，类似封装<code>axios</code>额外再封装一层请求）</p>
<h3 id="独立分包"><a href="#独立分包" class="headerlink" title="独立分包"></a>独立分包</h3><p><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/subpackages/independent.html">独立分包 | 微信开放文档 (qq.com)</a></p>
<p>独立分包是小程序中一种特殊类型的分包，可以独立于主包和其他分包运行。从独立分包中页面进入小程序时，不需要下载主包。当用户进入普通分包或主包内页面时，主包才会被下载。</p>
<p>开发者可以按需将某些具有一定功能独立性的页面配置到独立分包中。当小程序从普通的分包页面启动时，需要首先下载主包；而独立分包不依赖主包即可运行，可以很大程度上提升分包页面的启动速度。</p>
<p>一个小程序中可以有多个独立分包。</p>
<p>开发者通过在<code>app.json</code>的<code>subpackages</code>字段中对应的分包配置项中定义<code>independent</code>字段声明对应分包为独立分包。</p>
<p>特点：</p>
<ul>
<li>独立分包可单独访问分包的内容，不需要下载主包</li>
<li>独立分包不能依赖主包或者其它包的内容，比如<code>iconfont</code>、全局的样式等，需要在自己包单独引入</li>
</ul>
<p>使用场景：</p>
<ul>
<li>通常某些页面和当前小程序的其它页面关联不大的时候，可进行独立分包</li>
<li>如：临时加的广告页或活动页</li>
</ul>
<h3 id="分包预下载"><a href="#分包预下载" class="headerlink" title="分包预下载"></a>分包预下载</h3><p>开发者可以通过配置，在进入小程序某个页面时，由框架自动预下载可能需要的分包，提升进入后续分包页面时的启动速度。对于<a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/subpackages/independent.html">独立分包</a>，也可以预下载主包。</p>
<p>使用<code>preloadRule</code>字段（和<code>pages</code>字段同级）</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&quot;subpackages&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">  <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;root&quot;</span><span class="punctuation">:</span> <span class="string">&quot;songPackage&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;pages&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">      <span class="string">&quot;pages/recommendSong/recommendSong&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="string">&quot;pages/songDetail/songDetail&quot;</span></span><br><span class="line">    <span class="punctuation">]</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;root&quot;</span><span class="punctuation">:</span> <span class="string">&quot;testPackage&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;pages&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">      <span class="string">&quot;test/test&quot;</span></span><br><span class="line">    <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;test&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;preloadRule&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;pages/index/index&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span> <span class="comment">// 进入首页时，预下载以下两个包</span></span><br><span class="line">    <span class="attr">&quot;packages&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">      <span class="string">&quot;songPackage&quot;</span><span class="punctuation">,</span> <span class="comment">// 通过root字段找到</span></span><br><span class="line">      <span class="string">&quot;test&quot;</span> <span class="comment">// 通过name字段找到</span></span><br><span class="line">    <span class="punctuation">]</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br></pre></td></tr></table></figure>

<p>预加载主包</p>
<p>应用场景：独立分包的时候</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&quot;preloadRule&quot;: &#123;</span><br><span class="line">  &quot;pages/independent/independent&quot;: &#123;</span><br><span class="line">    &quot;packages&quot;: [&quot;__APP__&quot;]</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<h2 id="小程序转发分享"><a href="#小程序转发分享" class="headerlink" title="小程序转发分享"></a>小程序转发分享</h2><h2 id="小程序支付流程"><a href="#小程序支付流程" class="headerlink" title="小程序支付流程"></a>小程序支付流程</h2><p>前提：必须是企业账号</p>
<p>流程要注册填写各种信息，法人要录视频声明，对公账号打钱（1毛钱也行），需要将小程序发布，成功发布后才能申请支付</p>
<p>（目前我们用的是网易云的数据，发布不了的）</p>
<h3 id="流程"><a href="#流程" class="headerlink" title="流程"></a>流程</h3><p>图示</p>
<p><img src="/2022/10/15/web/%E8%BF%9B%E9%98%B6/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%BC%80%E5%8F%91/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E6%A6%82%E8%BF%B0/image-20221113103729991.png" alt="image-20221113103729991"></p>
<ol>
<li><p>用户在小程序客服端下单(包含用户及商品信息)</p>
</li>
<li><p>小程序客户端发送下单支付请求给商家服务器</p>
</li>
<li><p>商家服务器同微信服务器对接获取唯一标识 openID</p>
</li>
<li><p>商家服务器根据 openId 生成商户订单(包含商户信息)</p>
</li>
<li><p>商家服务器发送请求调用统一下单 API 获取预支付订单信息</p>
</li>
</ol>
<p>​		a) 接口地址: <a target="_blank" rel="noopener" href="https://api.mch.weixin.qq.com/pay/unifiedorder">https://api.mch.weixin.qq.com/pay/unifiedorder</a></p>
<ol start="6">
<li>商家对预支付信息签名加密后返回给小程序客户端</li>
</ol>
<p>​		a) 签名方式： MD5</p>
<p>​		b) 签名字段：小程序 ID, 时间戳， 随机串，数据包，签名方式</p>
<p>​		c) 参考地址 :<a target="_blank" rel="noopener" href="https://pay.weixin.qq.com/wiki/doc/api/wxa/wxa_api.php?chapter=7_7&amp;index=3">https://pay.weixin.qq.com/wiki/doc/api/wxa/wxa_api.php?chapter=7_7&amp;index=3</a></p>
<ol start="7">
<li>用户确认支付（鉴权调起支付）</li>
</ol>
<p>​		a) API: wx.requestPayment()</p>
<ol start="8">
<li><p>微信服务器返回支付结果给小程序客户端</p>
</li>
<li><p>微信服务器推送支付结果给商家服务器端</p>
</li>
</ol>
<p><a target="_blank" rel="noopener" href="https://pay.weixin.qq.com/wiki/doc/api/wxa/wxa_api.php?chapter=7_3&amp;index=1">https://pay.weixin.qq.com/wiki/doc/api/wxa/wxa_api.php?chapter=7_3&amp;index=1</a></p>
<h1 id="小程序上线环境准备"><a href="#小程序上线环境准备" class="headerlink" title="小程序上线环境准备"></a>小程序上线环境准备</h1><h2 id="域名"><a href="#域名" class="headerlink" title="域名"></a>域名</h2><p>购买域名（开发版暂不需要备案）</p>
<p>配置<code>@</code>记录和<code>www</code>记录</p>
<p><img src="/2022/10/15/web/%E8%BF%9B%E9%98%B6/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%BC%80%E5%8F%91/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E6%A6%82%E8%BF%B0/image-20221113115119637.png" alt="image-20221113115119637"></p>
<h2 id="部署https"><a href="#部署https" class="headerlink" title="部署https"></a>部署https</h2><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/ssINT/article/details/109116937">腾讯云上部署免费HTTPS</a></p>
<p><strong>SSL证书免费申请提醒</strong></p>
<p>尊敬的腾讯云用户，您好！</p>
<p>您的腾讯云账号（账号 ID：<code>10**8047</code>，昵称：<code>**</code>） 购买的TrustAsia TLS RSA CA证书（年限：1年，证书ID：xGolouYI）现已创建成功。可访问 <a target="_blank" rel="noopener" href="https://console.cloud.tencent.com/certoverview">证书管理控制台</a> 进行查看。域名验证方式可参考 <a target="_blank" rel="noopener" href="https://cloud.tencent.com/document/product/400/4142">域名验证指引</a> 。证书颁发后需要安装至服务器，您可根据 <a target="_blank" rel="noopener" href="https://cloud.tencent.com/document/product/400/44758">最佳实践</a> 中安装范例进行配置操作。</p>
<p>【腾讯云】尊敬的用户，您的域名 <code>*****.cn</code> 的 TrustAsia TLS RSA CA（1年）证书已审核通过并成功颁发。登录控制台查看证书：<a target="_blank" rel="noopener" href="https://mc.tencent.com/g9algEWM">https://mc.tencent.com/g9algEWM</a> 。证书部署可参考文档：<a target="_blank" rel="noopener" href="https://mc.tencent.com/ZKGAc9go">https://mc.tencent.com/ZKGAc9go</a> 。您的腾讯云账号（账号ID：<code>10**8047</code>，昵称：<code>**</code>）。</p>
<p>下载证书：</p>
<p><img src="/2022/10/15/web/%E8%BF%9B%E9%98%B6/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%BC%80%E5%8F%91/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E6%A6%82%E8%BF%B0/image-20221113114520379.png" alt="image-20221113114520379"></p>
<p>找到服务器<code>nginx</code>位置，进行配置</p>
<p><a target="_blank" rel="noopener" href="https://cloud.tencent.com/document/product/400/35244">SSL 证书 Nginx 服务器 SSL 证书安装部署-证书安装-文档中心-腾讯云 (tencent.com)</a></p>
<h2 id="备案"><a href="#备案" class="headerlink" title="备案"></a>备案</h2><p>国内需要备案，配置成功后，过一会儿如果https协议头访问不了，试试http协议头，然后会提示备案</p>
<p>需要在域名注册72小时后才可备案</p>
<h2 id="配置nginx反向代理nodejs服务"><a href="#配置nginx反向代理nodejs服务" class="headerlink" title="配置nginx反向代理nodejs服务"></a>配置nginx反向代理nodejs服务</h2><p>前言</p>
<p>Node.js自身能作为web服务器用，但是如果要在一台机器上开启多个Node.js应用该如何做呢？有一种答案就是使用nginx做反向代理。反向代理在这里的作用就是，当代理服务器接收到请求，将请求转发到目的服务器，然后获取数据后返回。</p>
<p>步骤样例</p>
<p>一、正常使用node.js开启web服务</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> http = <span class="built_in">require</span>(<span class="string">&#x27;http&#x27;</span>);</span><br><span class="line">http.<span class="title function_">createServer</span>(<span class="keyword">function</span> (<span class="params">request, response</span>) &#123;</span><br><span class="line">    response.<span class="title function_">writeHead</span>(<span class="number">200</span>, &#123;<span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;text/plain&#x27;</span>&#125;);</span><br><span class="line">    response.<span class="title function_">end</span>(<span class="string">&#x27;hello world</span></span><br><span class="line"><span class="string">&#x27;</span>);</span><br><span class="line">&#125;).<span class="title function_">listen</span>(<span class="number">1337</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Server running at http://127.0.0.1:1337/&#x27;</span>);</span><br></pre></td></tr></table></figure>

<p>二、为域名配置nginx</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@iZ25lzba47vZ vhost]<span class="comment"># ls</span></span><br><span class="line">default.conf               node.ruanwenwu.cn.conf  test.ruanwenwu.conf    www.tjzsyl.com.conf</span><br><span class="line">laravel.ruanwenwu.cn.conf  wss.ruanwenwu.cn.conf  www.tjzsyl.com.conf.bak</span><br><span class="line">[root@iZ25lzba47vZ vhost]<span class="comment"># pwd</span></span><br></pre></td></tr></table></figure>

<p>node.ruanwenwu.cn.conf：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">server&#123;</span><br><span class="line">    listen 80;</span><br><span class="line">    server_name node.ruanwenwu.cn;</span><br><span class="line">    location / &#123;</span><br><span class="line">        proxy_pass http://127.0.0.1:1337;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>实际配置</p>
<p>新增一个server</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">    listen       8090;</span><br><span class="line">    server_name  1.***.78;</span><br><span class="line">    location / &#123;</span><br><span class="line">        <span class="comment"># root   html; # root和proxy_pass不会同时生效，注释掉</span></span><br><span class="line">        <span class="comment"># index  index.html index.htm;</span></span><br><span class="line">        proxy_pass  http://localhost:3000;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>小程序中的config.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 服务器配置相关</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="comment">// host: &#x27;http://localhost:3000&#x27;,</span></span><br><span class="line">    <span class="comment">// host: &#x27;http://1.***.78:3000&#x27;,</span></span><br><span class="line">    <span class="attr">host</span>: <span class="string">&#x27;http://1.***.78:8090&#x27;</span>, <span class="comment">// 反向代理</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>






      
    </div>
    <footer class="article-footer">
      <a data-url="https://mindcons.cn/2022/10/15/web/%E8%BF%9B%E9%98%B6/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%BC%80%E5%8F%91/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E6%A6%82%E8%BF%B0/" data-id="cldol83i300703cx60c6pes9v" data-title="微信小程序概述" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%B0%8F%E7%A8%8B%E5%BA%8F/" rel="tag">小程序</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-web/CSS/Books/CSS书籍" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2022/10/14/web/CSS/Books/CSS%E4%B9%A6%E7%B1%8D/" class="article-date">
  <time class="dt-published" datetime="2022-10-14T11:03:02.000Z" itemprop="datePublished">2022-10-14</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E4%B9%A6%E7%B1%8D/">书籍</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2022/10/14/web/CSS/Books/CSS%E4%B9%A6%E7%B1%8D/">CSS书籍</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>[TOC]</p>
<h1 id="CSS"><a href="#CSS" class="headerlink" title="CSS"></a>CSS</h1><h2 id="《超实用的CSS代码段》"><a href="#《超实用的CSS代码段》" class="headerlink" title="《超实用的CSS代码段》"></a>《超实用的CSS代码段》</h2><p>《超实用的CSS代码段》精选400余段CSS代码，覆盖网页上所有的设计元素，堪称史上最有用的CSS书籍，是网站建设和网页设计人员不可或缺的解决方案、技巧和模板。《超实用的CSS代码段》的代码跨平台、跨设备、跨浏览器，充分向读者演示了如何使用CSS的各项技术，实现令人眩目的网页布局和效果。</p>
<p>《超实用的CSS代码段》从网页效果的不同类型和使用场景，对常用的CSS代码段进行了全方位的介绍和演示。《超实用的CSS代码段》分为11章，包含文字、字体、边框、图片、按钮、链接、背景、颜色、动画、页面布局、美化、盒子、3D、CSS Hack等网页设计和交互技术，对那些客户要求高、工作节奏快的网站开发人员和设计人员有着尤其重要的指导作用。</p>
<p>《超实用的CSS代码段》内容简洁明了、代码精练、重点突出、实例丰富、语言通俗易懂、原理清晰明白，是广大网页设计入门者和提高者的良好选择，同时也非常适合大中专院校学生学习阅读，也可作为高等院校非计算机专业，以及计算机非网络工程和相关专业的辅助读物。</p>
<p>目录:<br>第1章 文字与字体 1<br>第2章 边框和图片 12<br>第3章 按钮和链接 71<br>第4章 背景和颜色 108<br>第5章 变换与动画 120<br>第6章 页面的布局 170<br>第7章 美化与装饰 209<br>第8章 盒子 241<br>第9章 3D相关 251<br>第10章 CSS Hack 273<br>第11章 其他常用代码 297</p>
<h2 id="《深入解析-CSS》"><a href="#《深入解析-CSS》" class="headerlink" title="《深入解析 CSS》"></a>《深入解析 CSS》</h2><p>CSS入门容易，但精通不易。学习CSS并不是学习一两个小技巧，而是要理解这门语言的方方面面，并知道如何将其搭配使用。不管你是入行不久的新手，还是有一定经验但需要提升CSS技能的开发人员，这本书都能帮助你紧跟CSS发展的步伐。</p>
<p>本书旨在帮你深度掌握CSS语言，并快速了解CSS的新进展和新特性。书中不仅有讲解透彻的概念介绍，而且还有详细的分步示例，能够帮助你提升Web开发技能，并激发设计灵感，让你成为真正的Web开发高手。</p>
<p>内容概要</p>
<p>● CSS基础：层叠、相对单位和盒模型</p>
<p>● 学习使用网页布局工具，例如浮动、Flexbox和定位</p>
<p>● 了解如何在项目中编写和组织CSS，学习模块化CSS，并使用模式库</p>
<p>● 高级话题：渐变、阴影、排版、过渡、变换、动画，等等</p>
<p>“本书可以让你在CSS领域从小白变大牛！”</p>
<p>——Pierfrancesco D’Orsogna，GamePix软件工程师</p>
<p>“这是一本紧跟时代的CSS宝典。”</p>
<p>——Phily Austria，Hollar前端研发总监</p>
<p>“本书行文流畅、简洁。阅读本书时，每分每秒我都非常享受。”</p>
<p>——Tanya Wilke，Sanlam Web开发人员、解决方案架构师、UI&#x2F;UX设计师</p>
<p>“一份完整而清晰的CSS指南。”</p>
<p>——Giancarlo Massari，Swisscom高级Java工程师</p>
<h2 id="《CSS-实战手册（第四版）》"><a href="#《CSS-实战手册（第四版）》" class="headerlink" title="《CSS 实战手册（第四版）》"></a>《CSS 实战手册（第四版）》</h2><p>《CSS 实战手册（第四版）》使用 CSS 能创建专业的网站，不过即使是有经验的 Web 设计师，也很难学会 CSS 的各种细节。在前几版的基础上做了全面升级，提供了zui新、zui有用的提示和技巧，而且通过教程说明现今可用的 CSS。会教你如何使用新工具（如弹性盒和 Sass）构建外观精美的网页，而且在任何桌面设备或移动设备中都能快速运行。适合业余和有经验的设计师等阅读。</p>
<p>从基础知识入手。编写对 CSS 友好的 HTML 代码，包括现今的浏览器能识别的 HTML5 标签。</p>
<p>为移动设备设计。创建对移动设备友好的网页，以便访客随时随地浏览。</p>
<p>创建充满活力的网页。添加能吸引眼球的动画，创建用户体验好的表单。</p>
<p>控制页面的布局。使用专业的设计技术，例如浮动和定位。</p>
<p>让布局更灵活。使用弹性盒设计网站，适应不同的设备和屏幕宽度。</p>
<p>更有效地工作。使用 Sass，减少编写的 CSS 代码量，以小型文件组织样式。</p>
<p>作者简介:<br>David Sawyer McFarland，是 Web 开发者、教师和作者。他从 1995 年开始开发网站，并设计了一份给通信专家阅读的在线杂志。David 曾任教于加州大学伯克利分校新闻研究生院、电子艺术中心、波特兰艺术学院和波特兰州立大学。现在他是在线教育网站 Treehouse（<a target="_blank" rel="noopener" href="http://teamtreehouse.com)的教学团队主管./">http://teamtreehouse.com）的教学团队主管。</a></p>
<p>目录:<br>第1章 HTML和CSS 17<br>第2章编写样式和样式表 33<br>第3章选择符：标识要装饰的目标 51<br>第4章继承样式，节省时间 95<br>第5章管理多个样式：层叠 105<br>第二部分 CSS实用技术第6章装饰文本 129<br>第7章外边距、内边距和边框 193<br>第8章把图形添加到网页中 233<br>第9章装饰网站的导航 279<br>第10章 CSS变形，过渡和动画 317<br>第11章装饰表格和表单 353<br>第三部分 CSS页面布局第12章 CSS布局简介 379<br>第13章构建基于浮动的布局 391<br>第14章定位网页中的元素 423<br>第15章响应式Web 设计 449<br>第16章使用CSS栅格系统 483<br>第17章 Web 布局新方法：弹性盒 513<br>第四部分 CSS高级话题第18章改善编写CSS的习惯 551<br>第19章使用Sass增强样式 571</p>
<h2 id="《CSS3秘笈》"><a href="#《CSS3秘笈》" class="headerlink" title="《CSS3秘笈》"></a>《CSS3秘笈》</h2><p>《CSS3秘笈（第3版）》从为CSS重新思考HTML介绍最基本的CSS知识开始，到建立用于打印网页的CSS和改进你的CSS习惯的最佳实践。将关于CSS的选择器、继承、层叠、格式化、边距、填充、边框、图片、网站导航、表格、表单、浮动布局、CSS动画之transform、transition和animation属性、响应式Web设计、定位网页上的元素以及用于打印网页的CSS等技术通过逐步的讲解与教程串联了起来。每一章内容从简单到复杂，一步一步地建立起一个完整的教程示例，并在每章都会详细讨论一些技巧、最佳实践和各浏览器之间一致性的兼容问题以及如何进行修复，并给出实际的解决办法来创建最佳展现效果的页面，在各章节的最后都给出了相应教程的详细操作步骤。并且介绍了最新的CSS 3特性以及常见问题，最后还提供了完整的CSS属性参考、以及书中提到的相关CSS资源列表。</p>
<p>《CSS3秘笈（第3版）》适合于刚刚接触CSS的朋友们阅读并亲自动手实践，具有HTML、XHTML和CSS基本知识但想创建更加完美的网页的设计人员，以及需要创建在各种不同的浏览器之间兼容并都能够达到同样展现效果的CSS专家们作为参考。</p>
<p>作者简介:<br>作者：David Sawyer McFarland Sawyer McFarland Media公司董事长，为Macworld.com和UC Berkeley以及其它客户创建和管理Web站点已经有15年了。同时，他也是一位教员，David编写过畅销的Dreamweaver、CSS和JavaScript实战手册。 译者：俞黎敏 2008年7月1日加入国际商业机器（中国）有限公司广州分公司（IBM广州），担任软件部高级信息工程师、资深技术顾问，主要负责IBM WebSphere系列产品以及云计算、物联网相关的技术支持工作，专注于产品新特性、系统性能调优、疑难问题诊断与解决。开源爱好者，曾经参与Spring中文论坛组织“Spring 2.0 Reference”中文翻译的一审与二审工作，“满江红开放技术研究组织”的“Seam 1.2.1 Reference… 作者：David Sawyer McFarland Sawyer McFarland Media公司董事长，为Macworld.com和UC Berkeley以及其它客户创建和管理Web站点已经有15年了。同时，他也是一位教员，David编写过畅销的Dreamweaver、CSS和JavaScript实战手册。 译者：俞黎敏 2008年7月1日加入国际商业机器（中国）有限公司广州分公司（IBM广州），担任软件部高级信息工程师、资深技术顾问，主要负责IBM WebSphere系列产品以及云计算、物联网相关的技术支持工作，专注于产品新特性、系统性能调优、疑难问题诊断与解决。开源爱好者，曾经参与Spring中文论坛组织“Spring 2.0 Reference”中文翻译的一审与二审工作，“满江红开放技术研究组织”的“Seam 1.2.1 Reference”中文翻译工作，并组织和完成“Seam 2.0 Reference”中文翻译工作。利用业余时间担任CSDN、CJSDN、Dev2Dev、Matrix、JavaWorldTW、Spring中文、WebSphereChina.net等Java论坛版主，在各大技术社区推动开源和敏捷开发做出了积极的贡献。参与审校与翻译的书籍有《Ajax设计模式》、《CSS实战手册》、《Hibernate实战》（第二版）、《Java脚本编程》、《Effective Java中文版》第2版、《Spring攻略》、《Seam实战》、《CSS实战手册》（第二版）、REST实战（中文版）、《Java 7程序设计》、《Servlet和JSP学习指南》、《Java 7并发编程实战手册》等。</p>
<p>目录:<br>第1章 CSS 需要的HTML…………………………………………………. 19<br>第2章创建样式和样式表 ………………………………………………… 41<br>第3章选择器：明确设置哪些样式 …………………………………….. 65<br>第4章用样式继承节省时间……………………………………………… 109<br>第5章用层叠管理多样式 ………………………………………………… 121<br>第6章文本格式化………………………………………………………….. 147<br>第7章 margin 、padding 和 border ……………………………………. 221<br>第8章给网页添加图片……………………………………………………. 269<br>第9章装饰网站导航………………………………………………………. 329<br>第10章 CSS的transform、transition和animation属性…………… 375<br>第1章表格和表单的格式化 ……………………………………………. 419<br>第12章 CSS 布局简介 ……………………………………………………. 451<br>第13章构建基于浮动的布局……………………………………………. 465<br>第14章响应式Web设计………………………………………………….. 503<br>第15章定位网页上的元素……………………………………………….. 541<br>第16章设计打印页面的CSS技术…………………………………….. 573<br>第17章改正CSS 设计习惯 ………………………………………………. 595</p>
<h2 id="《CSS揭秘》"><a href="#《CSS揭秘》" class="headerlink" title="《CSS揭秘》"></a>《CSS揭秘》</h2><p>本书是一本注重实践的教程，作者为我们揭示了 47 个鲜为人知的 CSS 技巧，主要内容包括背景与边框、形状、 视觉效果、字体排印、用户体验、结构与布局、过渡与动画等。本书将带领读者循序渐进地探寻更优雅的解决方案，攻克每天都会遇到的各种网页样式难题。</p>
<p>本书的读者对象为前端工程师、网页开发人员。</p>
<p>目录:</p>
<p>第1章 引言<br>第2章 背景与边框<br>第3章 形状<br>第4章 视觉效果<br>第5章 字体排印<br>第6章 用户体验<br>第7章 结构与布局<br>第8章 过渡与动画</p>
<h2 id="《CSS禅意花园》"><a href="#《CSS禅意花园》" class="headerlink" title="《CSS禅意花园》"></a>《CSS禅意花园》</h2><p>《CSS禅意花园(修订版)》作者谢伊、霍尔茨是世界著名的网站设计师，书中的范例来自网站设计领域最著名的网站——CSS Zen Garden(CSS禅意花园)。全书分为两个主要部分。第1章为第一部分，讨论网站“CSS禅意花园”及其最基本的主题，包含正确的标记结构和灵活性规划等。第二部分包括6章，占据了本书的大部分篇幅。每章剖析“CSS禅意花园”收录的6件设计作品，每章介绍的作品围绕一个主要的设计概念展开，如文字的使用等。通过探索36件设计作品面临的挑战和解决的问题，读者将洞悉主要的Web设计原则以及它们运用的CSS布局技巧，理解CSS设计的精髓，恰当地处理图形和字体来创建界面优美、性能优良且具有强大生命力的网站。</p>
<p>《CSS禅意花园(修订版)》原版书自出版以来持续畅销，受到众多网站设计师的推崇。本书适合网站设计人员和网站设计爱好者阅读，更是专业网站设计师必读的经典著作。</p>
<p>目录:</p>
<p>第1章 追本溯源<br>第2章 设计<br>第3章 正文布局<br>第4章 图像<br>第5章 字体排印<br>第6章 特效<br>第7章 重构</p>
<h2 id="《CSS世界》"><a href="#《CSS世界》" class="headerlink" title="《CSS世界》"></a>《CSS世界》</h2><p>本书从前端开发人员的需求出发，以“流”为线索，从结构、内容到美化装饰等方面，全面且深入地讲解前端开发人员必须了解和掌握的大量的CSS知识点。同时，作者结合多年的从业经验，通过大量的实战案例，详尽解析CSS的相关知识与常见问题。作者还为本书开发了专门的配套网站，进行实例展示、问题答疑。</p>
<p>作为一本CSS深度学习的书，书中介绍大量许多前端开发人员都不知道的CSS知识点。通过阅读本书，读者会对CSS世界的深度和广度有一个全新的认识。</p>
<p>作者简介:<br>张鑫旭，前端开发工程师，国内知名前端博客“鑫空间-鑫生活”博主，目前就职于阅文集团用户体验设计部（YUX），担任技术经理。2007年开始接触前端，10年来一直工作在前端开发一线，在HTML&#x2F;CSS等与交互体验关系密切的领域花了大量的时间学习和研究，有比较多的心得体会。</p>
<p>目录:<br>第 1章　概述 1<br>第 2章　需提前了解的术语和概念 8<br>第3章　流、元素与基本尺寸 13<br>第4章　盒尺寸四大家族 45<br>第5章　内联元素与流 111<br>第6章　流的破坏与保护 147<br>第7章　CSS世界的层叠规则 211<br>第8章　强大的文本处理能力 225<br>第9章　元素的装饰与美化 280<br>第 10章　元素的显示与隐藏 292<br>第 11章　用户界面样式 302<br>第 12章　流向的改变 315</p>
<h2 id="《图解CSS3：核心技术与案例实战》"><a href="#《图解CSS3：核心技术与案例实战》" class="headerlink" title="《图解CSS3：核心技术与案例实战》"></a>《图解CSS3：核心技术与案例实战》</h2><p>本书是CSS3领域的标准性著作，由资深Web前端工程师根据CSS3的最新技术标准撰写。内容极为全面、丰富和翔实，由浅入深地讲解了CSS3新特性的语法、功能和使用技巧，涵盖选择器、边框、背景、文本、颜色、UI、动画、新型盒模型、媒体查询、响应式设计等各种模块；写作方式创新，有趣且易懂，用图解的方式来描述CSS3的每一个特性甚至每一个步骤都配有实战效果图；包含大量案例，实战性强，每个特性都有作者从实践中精心归纳和挑选出来的案例辅助讲解，同时还包含一个综合性的大案例。无论你是完全没有经验的准前端工程师，还是已经有一定经验的前端工程师，如果你想系统学习CSS3，那么本书将会是你的最佳选择；如果你是一位成熟的前端开发工程师，但时常为如何合理地使用某些特性而费时去查阅相关资料，那么本书也是你的不二选择。</p>
<p>作者简介:<br>廖伟华（网名：大漠）， 资深Web前端工程师，W3cplus创始人，目前就职于Ctrip UED。中国Drupal社区核心成员之一。对HTML5、CSS3、XHTML和Sass等前端脚本语言有非常深入的认识和丰富的实践经验，尤其专注对CSS3的研究，是国内最早研究和使用CSS3技术的一批人。现在还关注Web产品策划、交互设计、SEO以及移动端开发。2012年4月刊的《程序员》杂志上发表文章“Twitter Bootstrap：前端框架利器”。</p>
<p>目录:<br>第1章　揭开CSS3的面纱 1<br>第2章　CSS3选择器 15<br>第3章　CSS3边框 85<br>第4章　CSS3背景 134<br>第5章　CSS3文本 160<br>☆第6章　CSS3颜色特性 181<br>第7章　CSS3盒模型198<br>第8章　CSS3伸缩布局盒模型214<br>第9章　CSS3多列布局 293<br>☆第10章　CSS3渐变312<br>第11章　CSS3变形 358</p>
<h2 id="《精彩绝伦的CSS》"><a href="#《精彩绝伦的CSS》" class="headerlink" title="《精彩绝伦的CSS》"></a>《精彩绝伦的CSS》</h2><p>内容简介：</p>
<p>打造现代布局的专业技术</p>
<p>本书远非只是介绍基础知识，它不仅全面细致地讲解布局与效果，而且展望了HTML5和CSS3的未来。业内很少有人能像Eric A. Meyer一样详细阐明CSS，他在本书中深入分析了普遍适用的实用技术，讲解了如何选用正确的工具、如何通过jQuery使用CSS效果和CSS3技术。</p>
<p>本书主要内容如下：</p>
<p>显示或隐藏元素</p>
<p>通过XHTML为body或html元素设置背景</p>
<p>超过15种布局技巧，包括清除浮动、两栏&#x2F;三栏布局、伪造栏布局、“唯一布局”、Holy Grail、基于em的布局、流式网格、固定页脚等</p>
<p>各种CSS效果，包括CSS弹出框、框冲切、圆角、CSS精灵、滑动门、流式漂白、参差浮动等</p>
<p>应用CSS表样式，包括使用表头、主体、脚注、行标题、面向列的样式、表的映射和图形化等</p>
<p>使用CSS3元素、多背景支持、RGBA，以及通过jQuery执行CSS3选取操作等</p>
<p>本书适合具有一定的CSS和JavaScript使用经验的Web开发人员学习参考。</p>
<p>作者简介:<br>作者介绍： Eric A. Meyer 国际公认的HTML、CSS、Web标准方面的专家，自1993年开始从事与Web设计与开发相关的工作。著有《Eric Meyer谈CSS（卷1）》和《Eric Meyer谈CSS（卷2）》。</p>
<p>目录:<br>第1章　 工具　　2<br>第2章　 选择器　　31<br>第3章　 提示　　58<br>第4章　 布局　　88<br>第5章　 效果　　134<br>第6章　 表格　　172<br>第7章　 可预见的未来　　194</p>
<h2 id="《精通CSS-第2版-：高级Web标准解决方案》"><a href="#《精通CSS-第2版-：高级Web标准解决方案》" class="headerlink" title="《精通CSS(第2版) ：高级Web标准解决方案》"></a>《精通CSS(第2版) ：高级Web标准解决方案》</h2><p>本书汇集了最有用的CSS技术，介绍了CSS的基本概念和最佳实践，结合实例探讨了图像、链接和列表的操纵，还有表单设计、数据表格设计、纯CSS布局等核心CSS技术。此外，书中着眼于创建跨浏览器的技术，讨论了bug及其捕捉和修复技术，还将所有技术组合成两个精彩的实例，讲述这些技术的工作原理和实际用法。 本书适合具有HTML和CSS基础知识的读者阅读。</p>
<p>作者简介:<br>Andy Budd 国际顶尖的网页设计师，著名的Web标准倡导者，网页咨询公司Clearleft的创始人之一。曾组织过英国首届Web 2.0会议，经常在Web Directions、An Event Apart、SXSW等国际会议上发表演讲，参与一些国际设计奖项的评选，他还是.NET Magazine的咨询委员会成员。 Cameron Moll 设计过大量优秀网站，常在有关用户界面设计的各种国内和国际会议上发言。其作品和理念曾被HOW期刊、Print杂志、Communication Arts杂志以及美国国家公共电台等知名媒体引用和推荐。他创办了Authentic Jobs公司。 Simon Collison创办了著名的Erskine Design公司，拥有八支卓越而富创造力的Web设计团队。曾任Agenzia的首席设计师，为许多全球知名的唱片公司… Andy Budd 国际顶尖的网页设计师，著名的Web标准倡导者，网页咨询公司Clearleft的创始人之一。曾组织过英国首届Web 2.0会议，经常在Web Directions、An Event Apart、SXSW等国际会议上发表演讲，参与一些国际设计奖项的评选，他还是.NET Magazine的咨询委员会成员。 Cameron Moll 设计过大量优秀网站，常在有关用户界面设计的各种国内和国际会议上发言。其作品和理念曾被HOW期刊、Print杂志、Communication Arts杂志以及美国国家公共电台等知名媒体引用和推荐。他创办了Authentic Jobs公司。 Simon Collison创办了著名的Erskine Design公司，拥有八支卓越而富创造力的Web设计团队。曾任Agenzia的首席设计师，为许多全球知名的唱片公司、乐队、艺术家开发过大量Web项目。除本书外，他还撰写过畅销书《CSS基础教程》。</p>
<p>目录:<br>第1章 基础知识<br>第2章 为样式找到应用目标<br>第3章 可视化格式模型<br>第4章 背景图像效果<br>第5章 对链接应用样式<br>第6章 对列表应用样式和创建导航条<br>第7章 对表单和数据表格应用样式<br>第8章 布局<br>第9章 bug和修复bug<br>第10章 实例研究: Roma Italia<br>第11章 实例研究: Climb the Mountains</p>
<h2 id="《HTML5布局之路》"><a href="#《HTML5布局之路》" class="headerlink" title="《HTML5布局之路》"></a>《HTML5布局之路》</h2><p>本书从开发实战的视角，介绍了网站制作知识和开发流程。首章当中，针对HTML5的基本知识及本书所涉及的所有内容进行整体概括。主要内容包括： HTML5入门知识，网页整体布局，盒模型，浮动布局，定位布局，代码语义性，扩展性，文本样式的处理，表格表单，PC端网站开发实战与复习 方法，移动端开发方法，HTML5新增结构标签，CSS3新增样式，响应式布局等。</p>
<p>《HTML5布局之路》中的技术，主要涉及如下内容：</p>
<p>PC端静态网站开发知识与技术（HTML、CSS）</p>
<p>移动端网站开发知识与技术（HTML5、CSS3）</p>
<p>基础知识自评习题集</p>
<p>章节性代码习题集</p>
<p>涉及多章节知识的网页案例实战</p>
<p>各类软件、工具、辅助学习类文件</p>
<p>注：本书不涉及JavaScript。</p>
<p>《HTML5布局之路》的最佳适用对象为：</p>
<p>希望自学HTML5的学习者；</p>
<p>希望能够制作PC端网站、移动端网页的网站制作爱好者；</p>
<p>希望夯实基础的HTML5&#x2F;WEB前端开发工程师；</p>
<p>希望了解前端代码的UI设计师或产品经理。</p>
<p>书籍第一版第一次印刷勘误表：</p>
<ol>
<li><p>第4页（P4），1.3.3 HTML5的基本组成。由于作者手误，其中的“HTML是一种脚本语言”表述有误，应修改为“HTML是一种超文本标记语言”</p>
</li>
<li><p>第361页（P361），由于印刷错误，图14.6和图14.7中的marqin应当为margin</p>
</li>
</ol>
<p>作者简介:<br>刘国利 ● 大学大一开始自学WEB前端 ● 6年+课程设计经验，专门研究在线教育、各类的教学方法和教学模式 ● 5年+WEB前端（HTML5）教学经验，复杂抽象的知识也能变得通俗易懂 ● 负责HTML5所有课程的体系化建设，曾任 HTML5教学主管 ● HTML5学堂主创始人</p>
<p>目录:<br>第1章“旅途之前”，介绍了本书的学习方法与流程，HTML5 的基本概念，HTML5行业的前景，在HTML5开发当中切图的相关工作，Photoshop工具的具体用法，Sublime编辑器的使用方法以及浏览器的调试方法。<br>第2章“HTML5入门”，讲解了网站开发的基本流程，并探讨了前端开发工程师在流程中的位置和作用。认识并创建HTML文件，包含HTML结构中的文档声明、标题、元信息、注释、常见的HTML标签等。<br>第3章“整体布局（上） —— 标签尺寸处理”，介绍了CSS技术，并借助代码实例探讨不同引入方式的优劣势，介绍了ID、类名、标签名等三种基本选择器以及使用情景，CSS编码规范，浏览器默认样式与样式重置，盒模型各个属性。<br>第4章“整体布局（下） —— 浮动布局”，讲解了各类标签在布局时存在的不足，引出浮动的基本知识和概念，并探讨了浮动对元素布局的影响，如何清除浮动，各个清浮动方法的优劣势。<br>第5章“模块布局（上） —— 选择标签”，首先介绍在模块布局当中会使用到的各类标签，之后探讨了为何选取标签，在选取标签时需要考虑的具体因素，包含标签的默认样式、嵌套规则、标签的语义性、样式的可控性等。<br>第6章“模块布局（下） —— 可用性与扩展性”，讨论了在模块布局的标签选择时，要考虑的扩展性和可用性，包括超链接a标签、鼠标样式的处理、img标签的选用与处理、超出隐藏设置等。<br>第7章“文本等细节类样式处理”，讲解了关于具体文本的各类样式，包括背景样式、字体样式、段落样式，此外涉及到背景图合并技术以及网络字体设置的相关知识。<br>第8章“特殊布局情况 —— 定位布局”，介绍了定位布局这种比较特殊的布局方式，讨论了元素针对哪个元素进行定位，多个定位元素之间的层叠关系等。<br>第9章“特殊布局情况 —— 界限控制与伪元素的妙用”，探讨了网页开发中的一些“界限”问题，对于存在界限的布局应当如何实现和处理，此外还介绍了伪元素的知识及应用。<br>第10章“table表格”，介绍了表格布局的兴衰，当前开发中表格布局的具体用法，表格包含的各类标签，表格标签专有的属性和样式。<br>第11章“表单”，讲解了表单主要功能，基本用法，表单包含的各类常用元素，表单元素的特殊状态和属性，此外还介绍了属性选择器，讨论了表单元素的实际应用。<br>第12章“停下来回头看路”，探讨了复习的方式方法，介绍了网状复习法与归纳整理法的基本概念，并以实例的方式针对HTML与CSS的PC端开发知识，进行了整理和归纳。此外，对hack技术以及网页开发之后的优化方法进行了介绍。<br>第13章“HTML5新标签与CSS3基础”，讲解了HTML5新增结构元素，浏览器内核以及浏览器内核前缀，CSS3的新增选择器，CSS3圆角边框，CSS3文本阴影，CSS3盒阴影，CSS3背景类样式等。<br>第14章“转战移动端（上） —— 百分比与rem”，探讨了移动端的发展历程，并依据移动端的发展，讲解了设备调试的基本方法，视口viewport，盒模型、行高等属性设置百分比时存在的问题，CSS3新增的度量单位（rem等），盒阴影背景尺寸等技术在移动端的应用等。<br>第15章“转战移动端（下） —— 响应式&amp;移动端的探索”，介绍了响应式布局，媒体查询的基本知识，讨论了优化移动端开发的方法与框架，包括flexible、Metahandler，此外，还介绍了移动端较为常见的兼容问题。<br>第16章“CSS3变形与动画”，讲解了CSS3二维变形、CSS3三维变形、CSS3过渡与CSS3动画，探讨了二维变形与三维变形在属性上的区别，过渡与动画在用法与含义上的区别。<br>第17章“各章节自评习题集”，针对第一章到第十六章，出于加强理论知识基础的考虑，设置了相对应的习题集，主要用于考查理论类知识和比较基础的小型实战类知识。<br>第18章“各章节代码实战”，针对第一章到第十六章的大部分章节，设置了与之相对应的代码实战题。<br>第19章“网页案例实战”，针对第一章到第十六章，设置了两个较大型的网页案例，分别是PC端网页和移动端网页的实战开发。<br>第20章为“附录”，介绍了HTML5的发展史，手机端操作系统发展史，HTML的各类布局，编辑器插件安装与使用方法，开发需要使用的基本软件，HTML5学习平台与网站，学习HTML5技术涉及到的部分单词，CSS样式重置代码解析，开发备忘录，iconfont等。</p>
<h2 id="《CSS选择器世界》"><a href="#《CSS选择器世界》" class="headerlink" title="《CSS选择器世界》"></a>《CSS选择器世界》</h2><p>CSS选择器是CSS世界的支柱，撑起了整个精彩纷呈的CSS世界。本书专门介绍CSS选择器的相关知识。在本书中，作者结合多年从业经验，在CSS基础知识之上，充分考虑前端开发人员的开发需求，以CSS选择器的基本概念、优先级、命名、*佳实践以及各伪类选择器的概述和适用场景为技术主线，为CSS开发人员介绍有竞争力的知识和技能。此外，本书配有专门的网站，用以进行实例展示和问题答疑。</p>
<p>作为一本CSS进阶书，本书非常适合有一定CSS基础的前端开发人员学习和参考。</p>
<p>作者简介:<br>张鑫旭，前端开发工程师，国内知名前端博客“鑫空间-鑫生活”博主，目前就职于阅文集团用户体验设计部（YUX），担任技术经理。2007年开始接触前端，10年来一直工作在前端开发一线，在HTML&#x2F;CSS等与交互体验关系密切的领域花了大量的时间学习和研究，有比较多的心得体会。</p>
<p>目录:<br>第 1章 概述 1<br>第 2章 CSS选择器的优先级 7<br>第3章 CSS选择器的命名 13<br>第4章 精通CSS选择符 37<br>第5章 元素选择器 55<br>第6章 属性选择器 59<br>第7章 用户行为伪类 75<br>第8章 URL定位伪类 95<br>第9章 输入伪类 109<br>第 10章 树结构伪类 147<br>第 11章 逻辑组合伪类 173<br>第 12章 其他伪类选择器 181</p>
<h2 id="《CSS设计指南》"><a href="#《CSS设计指南》" class="headerlink" title="《CSS设计指南》"></a>《CSS设计指南》</h2><p>《图灵程序设计丛书:CSS设计指南(第3版)》是一本面向初中级读者的经典设计指南。全书共分8章，前4章分别介绍了HTML标记和文档结构、CSS工作原理、定位元素、字体和文本，对规则、声明、层叠、特指度、选择符等基本概念进行了详细解读。随后4章介绍了页面布局、界面组件，CSS3圆角、阴影、渐变、多背景等视觉设计技巧，最后还对如何实现最前沿的响应式设计进行了通俗易懂的演示。</p>
<p>作者简介： Charles Wyke-Smith 一直从事媒体相关工作。20世纪80年代中期，他与人在旧金山共同创办了PRINTZ Electronic Design，当时这可是一家全部工作都使用计算机处理的设计工作室。另外，他曾在富国银行、ESPN电子游戏担任领导和顾问，在Benefitfocus公司担任过用户体验总监。2009年，他与人合办了PeopleMatter公司，提供人力资源服务。目前，他是一家新的创业公司Bublish的CEO，这家公司提供图书策划等方面的服务。 Charles是一位乐手和多本Web开发图书的作者，除了本书，他还著有Codin’ for the Web: A Designer’s Guide to Developing Dynamic Web Sites、Scriptin’ with JavaScript and AJAX: A Designer’s Guide和Visual Stylin’ with CSS3。他和妻子，还有两个女儿住在美国南卡罗来纳州查尔斯顿市。 译者简介： 李松峰 图灵QA部主任。2006年起投身翻译，译有20余部图书。2008年进入出版业，从事技术图书编辑和审稿工作。 2007年创立知识分享网站“为之漫笔”（cn-cuckoo.com），翻译了大量国外经典技术文章。2012年下半年创立“A List Apart中文版”站点（alistapart.cn），旨在向中文读者译介这一国际顶级Web设计与开发杂志。他经常参加技术社区活动，曾在w3ctech 2012 Mobile上分享“Dive into Responsive Web Design”。2013年1月应邀在金山网络分享“响应式Web设计”，2013年3月应邀在奇虎360分享“JS的国”。 目前正在翻译Unix奠基人Brian Kernighan的新书D is for Digital。</p>
<p>目录:<br>第1章 　HTML标记与文档结构　　1<br>第2章 　CSS工作原理　　23<br>第3章 　定位元素　　63<br>第4章 　字体和文本　　111<br>第5章 　页面布局　　155<br>第6章 　界面组件　　185<br>第7章 　CSS3实战　　227<br>第8章 　响应式设计　　261</p>
<h2 id="《CSS3专业网页开发指南》"><a href="#《CSS3专业网页开发指南》" class="headerlink" title="《CSS3专业网页开发指南》"></a>《CSS3专业网页开发指南》</h2><p>《CSS3专业网页开发指南》是英国著名Web前端开发工程师Peter Gasston对CSS3高级技术的全面介绍。书中既有CSS3的发展历史、基本语法等入门知识介绍，也涵盖了媒体查询、选择器、伪类与伪元素、网页字体、文本排版、图形处理、动画、布局等CSS3前端开发必不可少的知识，还介绍了CSS3的未来发展方向。全书共分为17章，作者在每一章的讲解中都结合了大量的实例，同时也不忘介绍每一项技术的发展背景和适用场景，让读者对CSS3技术的应用真正做到融会贯通。</p>
<p>目录:<br>第1章　CSS3简介　1<br>第2章　媒体查询　9<br>第3章　选择器　21<br>第4章　伪类与伪元素　30<br>第5章　网页字体　45<br>第6章　文本效果和字体排版样式　61<br>第7章　多列　75<br>第8章　背景图片和其他装饰属性　86<br>第9章　边框与方框效果　99<br>第10章　颜色与不透明度　109<br>第11章　渐变　120<br>第12章　2D变换　135<br>第13章　过渡与动画　149<br>第14章　3D变换　164<br>第15章　弹性方框布局　179<br>第16章　模板布局　197<br>第17章　CSS的未来　210<br>媒体查询第2章　230<br>选择器第3章　230<br>伪类与伪元素第4章　230<br>网页字体第5章　230<br>文本效果和字体排版样式第6章　231<br>多列第7章　231<br>背景图片和其他装饰属性第8章　231<br>边框和方框效果第9章　232<br>颜色与不透明度第10章　232<br>渐变第11章　232<br>2D变换第12章　232<br>过渡与动画第13章　233<br>3D变换第14章　233<br>弹性方框布局第15章　233<br>模板布局第16章　233<br>未来的CSS第17章　233</p>
<h2 id="《CSS重构：样式表性能调优》"><a href="#《CSS重构：样式表性能调优》" class="headerlink" title="《CSS重构：样式表性能调优》"></a>《CSS重构：样式表性能调优》</h2><p>本书作为CSS重构指南，不仅展示了如何编写结构合理的CSS，以构建响应式、易于使用的网站，还介绍了如何用重构方法创建可读性更强和更易于维护的CSS代码。</p>
<p>作者简介:<br>Steve Lindstrom 早在 1999 年出于个人爱好开发了自己的第一个网站，那时他还在中学读书。后来他赴佛罗里达州墨尔本市求学，从佛罗里达理工学院获得了计算机科学学士学位。Steve 曾在国防、旅游科技领域从事软件开发工作，最近开始涉足电子商务领域。工作之余，他喜欢学习烹饪和喝咖啡。</p>
<p>目录:<br>第1章　重构和架构　　1<br>第2章　级联　　19<br>第3章　编写更优质的CSS　　25<br>第4章　为样式分类　　39<br>第5章　测试　　69<br>第6章　代码的组织和重构策略　　95</p>
<h2 id="《SVG精髓（第2版）》"><a href="#《SVG精髓（第2版）》" class="headerlink" title="《SVG精髓（第2版）》"></a>《SVG精髓（第2版）》</h2><p>《SVG精髓（第2版）》通过实例透彻讲解了SVG（可缩放矢量图形）这种标记语言的规范及应用。作者从简单的SVG应用开始，带领读者逐步探索了SVG的复杂功能，包括滤镜、变换、渐变和模式。从应用层面看，本书涵盖了动画、交互图形和动态SVG编程等技术，不仅能为有经验的开发人员提供重要参考，同时通过讲解基本的XML和CSS技术，为没有Web开发经验的读者提供了入门捷径。</p>
<p>作者简介:<br>J. David Eisenberg 一名程序员和教师。他开发了CSS、JavaScript、CGI、XML和Perl等多门编程课程，并在加州圣何塞常青谷学院教授计算机信息技术课程。他还著有Études for Erlang、Let’s Read Hiragana以及本书第1版。 Amelia Bellamy-Royds 一位专门从事科学和技术交流的自由撰稿人。她通过参与Web Platform Docs、Stack Exchange和Codepen等在线社区，帮助推动Web标准和设计。</p>
<p>目录:<br>第1章　入门指南　　　　1<br>第2章　在网页中使用SVG　　　　12<br>第3章　坐标系统　　　　21<br>第4章　基本形状　　　　32<br>第5章　文档结构　　　　47<br>第6章　坐标系统变换　　　　58<br>第7章　路径　　　　72<br>第8章　图案和渐变　　　　90<br>第9章　文本　　　　105<br>第10章　裁剪和蒙版　　　　122<br>第11章　滤镜　　　　131<br>第12章　SVG动画　　　　161<br>第13章　添加交互　　　　177<br>第14章　使用SVG DOM　　　　198<br>第15章　生成SVG　　　　222</p>
<h1 id="Bootstrap"><a href="#Bootstrap" class="headerlink" title="Bootstrap"></a>Bootstrap</h1><h2 id="《基于Bootstrap和Knockout-js的ASP-NET-MVC开发实战》"><a href="#《基于Bootstrap和Knockout-js的ASP-NET-MVC开发实战》" class="headerlink" title="《基于Bootstrap和Knockout.js的ASP.NET MVC开发实战》"></a>《基于Bootstrap和Knockout.js的ASP.NET MVC开发实战》</h2><p>利用动态服务端Web内容和响应Web设计共同构建的网站，在任何分辨率、桌面或移动设备下都可以进行良好的显示。通过本书的实践应用，你将可以学习对ASP.NET MVC服务端语言、Bootstrap前端框架和Knockoutjs——Model-View-ViewModel模式的JavaScript实现的组合使用。</p>
<p>作者Jamie Munro介绍了这些用于构建复杂表单的技术以及其他一些相关技术。在本书结尾，有经验和有抱负的Web开发人员都将学习如何构建一个完整的购物车，该购物车演示了这些技术在一个相互影响的、动态的和响应式Web应用程序中是如何进行交互的。</p>
<p>■ 通过ASP.NET MVC5、Bootstrap及Knockout.js的组合，构建组织良好、且易于维护的Web应用程序。</p>
<p>■ 利用ASP.NET MVC 5构建服务端Web应用程序，与数据库进行交互，并动态渲染HTML。</p>
<p>■ 利用Bootstrap创建在各种现代设备上都可以渲染的响应式视图，我们可能再也不需要CSS编码了。</p>
<p>■ 添加Knockout.js，通过流行的客户端交互（由服务端Web程序进行驱动）可以增强响应式Web设计。</p>
<p>作者简介:<br>Jamie Munro，有15年以上的网站开发和Web应用开发的经验。在过去的几年里，他积极指导年轻的开发人员来增强他们的web开发技能。Jamie的网站（http:&#x2F;&#x2F; <a target="_blank" rel="noopener" href="http://www.endyourif.com)旨在通过网上示例帮助web开发人员进一步提升他们的经验./">www.endyourif.com）旨在通过网上示例帮助Web开发人员进一步提升他们的经验。</a></p>
<p>目录:<br>第1章MVC介绍<br>第2章Bootstrap介绍<br>第3章Knockout.js介绍<br>第4章数据库应用<br>第5章表的查询、排序、分页<br>第6章表单处理<br>第7章服务器端ViewModel<br>第8章Web API介绍<br>第9章创建全局过滤器<br>第10章添加验证与授权<br>第11章使用Attribute定义URL路由<br>第12章胖模型、瘦控制器<br>第13章构建购物车<br>第14章构建数据模型<br>第15章布局实现<br>第16章图书列表<br>第17章添加购物车<br>第18章更新或删除购物车</p>
<h2 id="《Bootstrap开发精解：原理、技术、工具及最佳实践》"><a href="#《Bootstrap开发精解：原理、技术、工具及最佳实践》" class="headerlink" title="《Bootstrap开发精解：原理、技术、工具及最佳实践》"></a>《Bootstrap开发精解：原理、技术、工具及最佳实践》</h2><h2 id="《Bootstrap用户手册：设计响应式网站》"><a href="#《Bootstrap用户手册：设计响应式网站》" class="headerlink" title="《Bootstrap用户手册：设计响应式网站》"></a>《Bootstrap用户手册：设计响应式网站》</h2><p>这本书教你怎么用Bootstrap框架轻松设计出“杀手级”界面及响应式网站。从怎么用Bootstrap的HTML&#x2F;CSS工具和现成模板构建页面开始，逐步深入地掌握它内置的交互组件和jQuery插件，常常是一行代码都不用写。</p>
<p>作为源自Twitter的一个开源框架，而且可以从GitHub上自由下载，Bootstrap推崇“移动优先”（Mobile First）的设计理念，还支持动态调整网页布局、创建响应式网站。只要稍微懂一些HTML、CSS和JavaScript，就可以创建出在桌面显示器、智能手机和平板电脑中看起来同样完美的网站或应用。这本书会告诉你怎么做。</p>
<p>熟悉Bootstrap的文件结构、网格系统和容器布局；</p>
<p>学习HTML中用于排版、代码、表格、表单、按钮、图片以及图标的元素；</p>
<p>设计界面及其他网页元素，比如导航、面包屑，以及自定义模态窗口等；</p>
<p>使用jQuery插件实现渐进的幻灯片、标签页式界面和下拉菜单；</p>
<p>在LESS文件中修改布局栏数和字体颜色。</p>
<p>作者简介:<br>Jake Spurlock 是MakerMedia的开发者，MAKE杂志的制作人，他发起了全球各地的“制汇节”活动，该活动旨在教会人们动手制作，让世界变得更美好。Jake是犹他州人，一年半前搬到了加州葡萄酒之乡。</p>
<p>目录:<br>第1章　Bootstrap提供的网站框架　　1<br>第2章　Bootstrap预定义的CSS样式　　11<br>第3章　Bootstrap内置的布局组件　　45<br>第4章　Bootstrap支持的JavaScript插件　　81<br>第5章　实际使用Bootstrap　　111</p>
<h2 id="《Bootstrap-基础教程》"><a href="#《Bootstrap-基础教程》" class="headerlink" title="《Bootstrap 基础教程》"></a>《Bootstrap 基础教程》</h2><p>Bootstrap 是一个基于HTML 5 和CSS 3 的前端开发框架，它提供了较为丰富的Web 组件，能够快速制作一个漂亮的Web 页面。</p>
<p>《Bootstrap 基础教程》主要围绕Bootstrap 框架，讲述了Bootstrap 布局、Bootstrap 表单元素、Bootstrap 导航、Bootstrap内置组件、Bootstrap 对JavaScript 的支持，以及HTML 5 和CSS 3 的一些基础知识等。《Bootstrap 基础教程》是为从未接触过Bootstrap 但又想了解学习Bootstrap 技术的读者而编写的，适合以下人群阅读：</p>
<p>熟悉JSP、PHP、ASP.NET 等后端Web 技术的开发人员；</p>
<p>对HTML 和CSS 有一定了解的UI 设计师；</p>
<p>对移动Web 开发有浓厚兴趣的开发者；</p>
<p>有一定JavaScript（jQuery）开发经验的前端开发人员。</p>
<h2 id="《Bootstrap实战从入门到精通》"><a href="#《Bootstrap实战从入门到精通》" class="headerlink" title="《Bootstrap实战从入门到精通》"></a>《Bootstrap实战从入门到精通》</h2><p>(《Bootstrap 实战从入门到精通》一书系统讲解了 Bootstrap 技术的体系结构、基础知识、组件、插件以及各种深度实战应用。全书分为 大部分 19 章。第 部分</p>
<p>（第 章〉 Bootstrap 础知识， 主要介绍 Bootstrap，如何使用 Bootstrap ，以 Bootstrap 的技术特性：第 部分（第 13 章）为 Bootstrap 基本应用，主要介绍</p>
<p>Bootstrap 各种组件和插件的使用 ，如何扩展 Bootstrap 应用 Bootstrap 第三方插件等 部分（第 14 19 章）为实战案例，介绍了企业网站、 WA 网站、网络相册</p>
<p>等 个利用 Bootstrap 实现的项目 可以让读者了解使用 Bootstrap进行前端开发的全过程。</p>
<h2 id="《Bootstrap实战-第2版-》"><a href="#《Bootstrap实战-第2版-》" class="headerlink" title="《Bootstrap实战(第2版)》"></a>《Bootstrap实战(第2版)》</h2><p>Boostrap 是Twitter 公司内部的一个工具，开源之后迅速得到了各方的认可。本书基于最新Bootstrap 4撰写，在简单介绍了安装与配置之后就直奔主题，分别讨论了构建流程、博客站点、WordPress 主题、个人作品展示站点、企业网站、电子商务网站、单页面营销网站和Angular 应用等几个最具代表性的应用案例，结合这些案例细致地剖析了Bootstrap 的使用方式和技巧。</p>
<p>作者简介:<br>巴斯·乔布森（Bass Jobsen） 拥有20多年软件开发经验，Bootstrap布道者，2016年为Bootstrap 4发布了CLI。 戴维·科克伦（David Cochran） 卫斯理大学副教授，纽曼大学副教授，BitBrilliant公司创始人。重视最佳实践，不喜欢走捷径，推崇Web标准。2012年开始在媒体上开设Bootstrap专栏，影响了很多Web开发者。 伊恩·惠特利（Ian Whitley） Bootstrap深度用户，拥有丰富的相关开发经验。目前任BitBrilliant公司开发主管。</p>
<p>目录:<br>第1章　初识Bootstrap　　1<br>第2章　用Gulp打造自己的构建流程　　24<br>第3章　用Bootstrap和Sass定制博客站点　　54<br>第4章　WordPress主题　　87<br>第5章　作品展示站点　　123<br>第6章　企业网站　　158<br>第7章　电子商务网站　　202<br>第8章　单页面营销网站　　235<br>第9章　用Bootstrap搭建Angular应用　　271</p>
<h2 id="《深入理解Bootstrap》"><a href="#《深入理解Bootstrap》" class="headerlink" title="《深入理解Bootstrap》"></a>《深入理解Bootstrap》</h2><p>Bootstrap是目前全球最流行、最火爆的Web前端开发框架之一。它的强大之处在于它将常见的CSS布局小组件和JavaScript插件进行了完整并完善的封装，能让没有经验的前端工程师和后端开发工程师都迅速掌握和使用，大大提高开发效率。此外，它还能在某种程度上规范前端团队编写CSS和JavaScript的规范。</p>
<p>Bootstrap更新比较快，目前国内仅有的两本书也都过时了，《Web开发技术丛书：深入理解Bootstrap》是根据Bootstrap的最新版本来撰写的。它同时面向两类读者：没有Bootstrap经验的初级前端开发工程师，书中对Bootstrap功能组件的详细讲解以及大量案例的展示能让他们迅速晋级到中高端水平；有一定Bootstrap经验的专业前端开发工程师，书中对Bootstrap架构思想的阐述、实现原理的分析、扩展和插件的二次开发能让他们自如解决开发中遇到的各种疑难问题。</p>
<p>作者简介:<br>徐涛，资深Web开发工程师，精通JavaScript、CSS、HTML5等Web开发技术，以及Bootstrap等各种主流Web开发框架。擅长Web系统的架构、设计与开发，参与过全球最大婚恋网站Match、全球最大在线旅游网站Expedia、波音公司、GE医疗和万达集团等多个国际知名企业的Web项目的架构与设计。他还是一位资深的微软技术专家，曾获得MCP、MCTS、MCDBA等近十项认证。翻译了《Java Script编程精解》等多本Java Script方面的著作。</p>
<p>目录:<br>第1章 入门准备 1<br>第2章 整体架构 14<br>第3章 CSS布局 43<br>第4章 CSS组件 88<br>第5章 JavaScript插件 186<br>第6章 实战：扩展现有组件 289<br>第7章 实战：Win8磁贴组件开发 311<br>第8章 实战：组合应用开发 330<br>第9章 第三方扩展 345</p>
<h2 id="《Bootstrap入门经典》"><a href="#《Bootstrap入门经典》" class="headerlink" title="《Bootstrap入门经典》"></a>《Bootstrap入门经典》</h2><p>Bootstrap是Twitter推出的开源的前端开发工具包，可以帮助用户轻松创建响应式网站，目前在前端开发中具有广泛的应用。</p>
<p>《Bootstrap入门经典》是Bootstrap的入门类图书，主要分为4个部分。第1部分为Bootstrap的入门知识，讲解了Bootstrap的安装方法以及使用Bootstrap构建网站的方法；第2部分讲解了使用Bootstrap CSS样式和组件创建网站的方法；第3部分侧重的是使用Bootstrap JavaScript插件为网站增加功能的方法；第4部分涵盖了Bootstrap的自定义方法，介绍了Bootstrap Web开发的高级功能，以及如何创建不同于Bootstrap默认外观的复杂设计。</p>
<p>《Bootstrap入门经典》内容系统，讲解简明实用，代码示例利于理解，是前端开发人员入门Bootstrap的**读物，适合所有前端开发人员阅读，有志于了解Bootstrap的读者也可以从中获益。</p>
<p>作者简介:<br>Jenifer Kyrnin从1997年开始进行HTML、XML和Web设计的网上教学。她曾经构建和维护各种规模的网站，从单页面的手册型网站到由数百万个页面组成的数据库驱动型网站，不一而足。她当前的研究重点是使用Bootstrap和WordPress进行响应式设计。</p>
<p>目录:<br>第1章 什么是Bootstrap，为什么要使用它 1<br>第2章　下载安装Bootstrap　11<br>第3章　用基本模板构建第一个<br>第4章　理解Normalize．CSS和<br>第5章　网格及其用法　40<br>第6章　标签、徽章、面板、Well和超大屏幕　56<br>第7章　Bootstrap排版　68<br>第8章　设置表格样式　86<br>第9章　设置表单样式　97<br>第10章　图像、媒体对象和<br>第11章　按钮和按钮组样式设置及<br>第12章　用Bootstrap创建导航系统　144<br>第13章　Bootstrap实用工具　168<br>第14章　使用Bootstrap JavaScript<br>第15章　模态窗口　191<br>第16章　附加导航、选项卡和滚动<br>第17章　弹出框和工具提示　222<br>第18章　过渡、按钮、警告框和<br>第19章　折叠插件和折叠面板　254<br>第20章　轮播　270<br>第21章　自定义Bootsrap和Bootstrap<br>第22章　提高Bootstrap的可访问性　299<br>第23章　使用Less和Sass与Bootstrap<br>第24章　进一步应用Bootstrap　319</p>
<h1 id="预处理"><a href="#预处理" class="headerlink" title="预处理"></a>预处理</h1><h2 id="Saas"><a href="#Saas" class="headerlink" title="Saas"></a>Saas</h2><h3 id="《Sass与Compass实战》"><a href="#《Sass与Compass实战》" class="headerlink" title="《Sass与Compass实战》"></a>《Sass与Compass实战》</h3><p>本书是使用这两种革命性工具创作样式表的权威指南，内容循序渐进，示例结合实战。四位作者都是Sass和Compass的核心团队成员（及创建者），向读者展示了高效使用这两种框架的精髓。</p>
<p>适合所有Web设计师、前端开发人员、Web应用产品经理及相关人员阅读。</p>
<p>作者简介:</p>
<p>作者简介： Wynn Netherland 有近20年的Web从业经历。他主笔和参与撰写过许多Web开发方面的图书。他喜欢在GitHub上工作，经常在行业会议上演讲，并“出没”于开发者聚会，有时候还会在屋后的门廊里弹吉他。 Nathan Weizenbaum 毕业于华盛顿大学，专业是计算机科学和哲学，他从Sass诞生之初就是首席开发者。目前，他是谷歌的软件工程师，负责Gmail开发。 Chris Eppstein Compass框架的创建者，Sass核心团队成员。毕业于加州理工学院，软件工程师，有10年以上为硅谷创业公司创建网站和应用程序的经验。痴迷于前端开发，目前在LinkedIn从事前端架构和开发者关系相关的工作。 Brandon Mathis Compass核心团队成员，基于Jekyll的可扩展博客框架Octopress的作者。他目前是MongoHQ的一名设计师。 译者简介： 刘炬光 腾讯Web前端工程师，AlloyTeam核心成员。热爱HTML5 WebApp开发，在客户端结合WebApp的开发上有非常丰富的经验。注重开发流程自动化，主导所在团队的Web开发自动化工作。他是国内最早接触Sass和Compass的程序员，曾在w3ctech等大会上向大家介绍Sass和Compass。新浪微博：@materliu。 赵锦江 山西太原人士。2007年本科毕业于西北工业大学软件工程专业，并从事前端开发工作至今，现任淘宝（中国）软件有限公司前端开发专家，花名“勾股”。爱好翻译，长期参与W3C HTML IG（中文兴趣组）的技术规范翻译工作。新浪微博：@勾三股四。 张浩然 本科专业为计算数学，现在南开大学攻读计算数学硕士。目前专注于前端开发，持续关注最新的前端技术。爱前端，爱翻译，曾在“前端乱炖”网站翻译过70余篇文章，网站ID“张小俊128”。新浪微博：@张小俊128。</p>
<p>目录:<br>第1章　Sass和Compass让样式表重焕青春　　2<br>第2章　Sass基础语法　　24<br>第3章　无需计算玩转CSS网格布局　　44<br>第4章　有Compass就不再枯燥　　66<br>第5章　通过Compass使用CSS3　　80<br>第6章　精灵　　96<br>第7章　从原型到产品　　113<br>第8章　高性能式样表　　126<br>第9章　用Sass编写脚本　　138<br>第10章　创建并分享一个Compass扩展　　153</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://mindcons.cn/2022/10/14/web/CSS/Books/CSS%E4%B9%A6%E7%B1%8D/" data-id="cldol83fa002n3cx6a2y9d2qf" data-title="CSS书籍" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E4%B9%A6%E7%B1%8D/" rel="tag">书籍</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-web/HTML/Books/HTML5书籍" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2022/10/14/web/HTML/Books/HTML5%E4%B9%A6%E7%B1%8D/" class="article-date">
  <time class="dt-published" datetime="2022-10-14T01:03:02.000Z" itemprop="datePublished">2022-10-14</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E4%B9%A6%E7%B1%8D/">书籍</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2022/10/14/web/HTML/Books/HTML5%E4%B9%A6%E7%B1%8D/">HTML书籍</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>[TOC]</p>
<h1 id="Html基础"><a href="#Html基础" class="headerlink" title="Html基础"></a>Html基础</h1><h2 id="《Head-First-HTML与CSS（第2版）》"><a href="#《Head-First-HTML与CSS（第2版）》" class="headerlink" title="《Head First HTML与CSS（第2版）》"></a>《Head First HTML与CSS（第2版）》</h2><p>是不是已经厌倦了那些深奥的HTML书？你可能在抱怨，只有成为专家之后才能读懂那些书。那么，找一本新修订的《Head First HTML与CSS（第2版）》吧，来真正学习HTML。你可能希望学会HTML和CSS来创建你想要的Web页面，从而能与朋友、家人、粉丝和狂热的顾客更有效地交流。你还希望使用最新的HTML5标准，能够保证随时间维护和扩展你的Web页面，使它们在所有浏览器和移动设备中都能正常工作。</p>
<p>作者简介:<br>Eric Freeman，是一名计算机科学家，热衷于软件架构和媒体。他目前住在圣达菲附近的沙漠中，当他不写书或代码时，他总是花更多时间摆弄他的家庭影院，而不是观看影片。</p>
<p>目录:1 Web语言：认识HTML<br>2 认识HTML中的“HT”：深入了解超文本<br>3 Web页面建设：构建模块<br>4 Web镇之旅：连接起来<br>5 认识媒体：为你的页面增加图像<br>6 严肃的HTML：标准及其他<br>7 加一点样式：CSS入门<br>8 扩大你的词汇量：增加字体和颜色样式<br>9 与元素亲密接触：盒模型<br>10 高级Web建设：div与span<br>11 摆放元素：布局与定位<br>12 现代HTML：HTML5标记<br>13 建立表格：表格与更多列表<br>14 实现交互：HTML 表单<br>附录：其他十大主题（我们没有谈到的）</p>
<h2 id="《HTML5与CSS3基础教程（第8版）》"><a href="#《HTML5与CSS3基础教程（第8版）》" class="headerlink" title="《HTML5与CSS3基础教程（第8版）》"></a>《HTML5与CSS3基础教程（第8版）》</h2><p>本书是风靡全球的HTML和CSS入门教程的最新版，至第6版累积销量已超过100万册，被翻译为十多种语言，长期雄踞亚马逊书店计算机图书排行榜榜首。</p>
<p>第8版秉承作者直观透彻、循序渐进、基础知识与案例实践紧密结合的讲授特色，采用独特的双栏图文并排方式，手把手指导读者从零开始轻松入门。相较第7版，全书2&#x2F;3以上的内容进行了更新，全面反映了HTML5和CSS3的最新特色，细致阐述了响应式Web设计与移动开发等热点问题。书中主要内容包括：如何创建HTML5页面，如何使用HTML5元素，如何用CSS3为网页添加样式，如何向页面添加JavaScript代码，如何测试做好的页面并将其上传到万维网。另外，本书强调渐进增强这种网站设计方法的重要性，并将其贯穿在全书的具体实践中。</p>
<p>作者专为本书设计了内容丰富的配套网站htmlcssvqs.com，提供海量精彩示例、HTML与CSS元素及属性列表以及其他附加材料，方便读者随时参考与引用。</p>
<p>作者简介:<br>作者简介： Elizabeth Castro 享誉世界的计算机畅销书作家，电子出版先行者，2010年就出版了epub电子书制作教程EPUB Straight to the Point。Castro 擅长使用详实的步骤和精美的实例教大家快速实现具体效果，她的HTML与CSS系列教程自出版以来广受读者欢迎，成为学习前端开发的首选参考图书。有关Castro的更多信息，可访问其个人主页ElizabethCastro.com。 Bruce Hyslop 自1997年就开始从事网页开发，重点关注使用HTML、CSS和JavaScript进行网页开发和网站易用性的维护，并倡导最佳实践。Hyslop在加州大学洛杉矶分校进修部教授CSS课程，还著有The HTML Pocket Guide、The Web Design Pocket Guide Boxed Set。 … 作者简介： Elizabeth Castro 享誉世界的计算机畅销书作家，电子出版先行者，2010年就出版了epub电子书制作教程EPUB Straight to the Point。Castro 擅长使用详实的步骤和精美的实例教大家快速实现具体效果，她的HTML与CSS系列教程自出版以来广受读者欢迎，成为学习前端开发的首选参考图书。有关Castro的更多信息，可访问其个人主页ElizabethCastro.com。 Bruce Hyslop 自1997年就开始从事网页开发，重点关注使用HTML、CSS和JavaScript进行网页开发和网站易用性的维护，并倡导最佳实践。Hyslop在加州大学洛杉矶分校进修部教授CSS课程，还著有The HTML Pocket Guide、The Web Design Pocket Guide Boxed Set。 译者简介： 望以文 毕业于中国人民大学，曾任百度前端工程师，现为网信金融产品经理。《HTML5与CSS3基础教程（第7版）》译者。热爱产品设计，维护微信公众号projojo，定期向读者推荐新鲜有趣的互联网产品。微博@weakow。</p>
<p>目录:<br>第1章　网页的构造块　　1<br>第2章　处理网页文件　　19<br>第3章　基本HTML结构　　30<br>第4章　文本　　63<br>第5章　图像　　95<br>第6章　链接　　113<br>第7章　CSS 构造块　　123<br>第8章　操作样式表　　139<br>第9章　定义选择器　　150<br>第10章　为文本添加样式　　171<br>第11章　用CSS 进行布局　　202<br>第12章　构建响应式网站　　237<br>第13章　使用Web 字体　　259<br>第14章　使用CSS3 进行增强　　278<br>第15章　列表　　301<br>第16章　表单　　318<br>第17章　视频、音频和其他多媒体　　349<br>第18章　表格　　368<br>第19章　添加JavaScript　　373<br>第20章　测试和调试网页　　380<br>第21章　发布网站　　392</p>
<h2 id="《HTML-CSS网站开发兵书》"><a href="#《HTML-CSS网站开发兵书》" class="headerlink" title="《HTML+CSS网站开发兵书》"></a>《HTML+CSS网站开发兵书》</h2><p>本书是一本与众不同的HTML标记语言读物，它以实际的网页为主，为读者展现了网页的组成部分及各部分的设计。其他类似的书都是以HTML标签来讲解，本书不同的是，在讲解标签举例的时候会将生活中的哲理、常识等都融入其中，让读者感受到这本书的“生命力”，从而让读者对HTML有一个很深刻的认识和理解。</p>
<p>本书共16章，分为3篇，从网页最基础的部分着手，让读者不仅学习HTML，还能认识网页与网站的区别。本书的主要内容有：先和网页打个交道、进一步认识HTML、创建文本样式、创建超链接、添加图像、添加多媒体、创建列表、建立表格、添加表单、框架结构、DIV布局、CSS基础、CSS页面布局、CSS容器、CSS设置和修饰、网页布局与设计技巧等。通过学习本书的内容，读者可以在较短的时间内理解HTML标签如何使用及如何将其应用到网页中，这为下一步做网页打下了良好的基础。</p>
<p>本书适合没有HTML标记语言基础的新手学习；对于有一定基础的读者，可以通过本书进一步了解HTML标签如何使用。</p>
<p>目录:<br>第1章 见龙在田：先和网页打个交道 2<br>第2章 飞龙在天：进一步认识HTML 14<br>第3章 鸿渐于陆：创建文本样式 32<br>第4章 潜龙勿用：创建超链接 55<br>第5章 神龙摆尾：添加图像 77<br>第6章 声东击西：添加多媒体 95<br>第７章 密云不雨：创建列表 111<br>第８章 偷梁换柱：建立表格 126<br>第9章 釜底抽薪：添加表单 171<br>第10章 暗度陈仓：框架结构 193<br>第11章 以逸待劳：DIV布局 222<br>第12章 龙战于野：CSS基础 233<br>第13章 反客为主：CSS页面布局 277<br>第14章 皓腕玉镯：CSS容器 348<br>第15章 帘下梳妆：CSS设置和修饰 399<br>第16章 小园艺菊：网页布局与设计技巧 475</p>
<h2 id="《HTML、XHTML、CSS与JavaScript入门经典》"><a href="#《HTML、XHTML、CSS与JavaScript入门经典》" class="headerlink" title="《HTML、XHTML、CSS与JavaScript入门经典》"></a>《HTML、XHTML、CSS与JavaScript入门经典》</h2><p>《HTML、XHTML、CSS与JavaScript入门经典》内容简介：自从网站诞生以来，用于构建网站的语言就一直在不断地演化。现在一系列最佳实践已经出现，使用HTML或XHTML创建基本的网页，使用CSS控制它们的外观并使它们更加引人注目，使用JavaScript添加交互功能。《HTML、XHTML、CSS与JavaScript入门经典》一书假设您以前没有任何经验，这些宝贵的资源有助于如何使用最新的Web标准。不管您是期待编写第一个网页的初学者，还是急需提升编程技能的资深程序员，都会发现对这些基本语言的实践指导，以及有经验的Web专家使用的重要提示和技术。</p>
<p>点击链接进入英文版：</p>
<p>Beginning HTML, XHTML, CSS, and JavaScript</p>
<p>作者简介:<br>达克特，十多年来一直帮助众多公司实现创新性的Web策略。他亲自动手设计了他所参与的诸多项目，同时也帮助编写代码。在这段时间里，Jon撰著了多本书籍，内容涵盖Web设计、编程、可访问性和可用性。</p>
<p>目录:<br>第1章 为Web结构化文档<br>第2章 链接和导航<br>第3章 图像、音频和视频<br>第4章 表格<br>第5章 表单<br>第6章 框架<br>第7章 层叠样式表<br>第8章 更多层叠样式表<br>第9章 网页布局<br>第10章 设计问题<br>第11章 学习Java Script<br>第12章 使用Java Script<br>第13章 在Web上发布网站<br>第14章 核对清单</p>
<h1 id="网页设计"><a href="#网页设计" class="headerlink" title="网页设计"></a>网页设计</h1><h2 id="《html5-css3网页设计入门必读》"><a href="#《html5-css3网页设计入门必读》" class="headerlink" title="《html5+css3网页设计入门必读》"></a>《html5+css3网页设计入门必读》</h2><p>要构建一个优秀的现代化网页，HTML5 和CSS3是每一位开发人员必须掌握的工具。本书分结构清晰，内容精炼，以最轻松易懂的方式向读者介绍了与HTML5 相关的标记简史、HTML 设计、富媒体、Web Forms2.0、语义、HTML5 应用实践等内容；以及CSS 使用现状、CSS 过渡、鼠标悬浮效果的制作、CSS 旋转、多重背景、表单设计等CSS3 中最为重要的特性及应用方法。</p>
<p>本书出自资深互联网专家之手，深刻探索了HTML和CSS最为关键的核心内容。</p>
<p>对于Web前端开发的相关人士，尤其是新手，极具参考价值。</p>
<p>理论结合案例，易于读者理解、掌握以及举一反三。</p>
<p>作者简介:<br>Jeremy Keith是来自英国的网页开发人员，目前居住于英国布莱顿，并在那里与网络顾问公司Clearleft合作。他曾写过两本书，即《JavaScript DOM编程艺术》（DOM Scripting） 和《Bulletproof Ajax》。 Dan是设计工作室SimpleBits的创始人。作为标准网页设计领域公认的专家，丹与YouTube、MTV、Google、Yahoo、ESPN、 Fast Company、Blogger以及其他网站进行过合作。此外，他还是Dribbble的联合创始人兼设计师</p>
<p>目录:<br>第1章 标记简史<br>第2章 HTML5的设计<br>第3章 富媒体<br>第4章 Web Forms 2.0<br>第5章 语义<br>第6章 开始使用HTML5<br>第1章 CSS3应用现状<br>第2章 理解CSS过渡<br>第3章 CSS悬停效果<br>第4章 CSS变形<br>第5章 多重背景<br>第6章 丰富表单<br>第7章 总结</p>
<h2 id="《响应式Web设计：HTML5和CSS3实战》"><a href="#《响应式Web设计：HTML5和CSS3实战》" class="headerlink" title="《响应式Web设计：HTML5和CSS3实战》"></a>《响应式Web设计：HTML5和CSS3实战》</h2><p>随着iPad mini的发布，又一个新的屏幕尺寸诞生了。用不着全面统计，你就会发现移动互联网时代众多的屏幕规格，从智能手机的3、4、5英寸，到平板电脑的7、8、9、10英寸，再到笔记本和台式机的13至30英寸，绝非目前单一的固定或流式布局所能应付。于是，响应式设计应运而生，而且它也将成为移动互联网时代前端设计与开发人员的一门必修课。</p>
<p>本书堪称学习响应式Web设计的难得佳作。它不仅全面、细致、图文并茂地介绍了响应式设计相关的技术，比如媒体查询、流式布局、弹性媒体和弹性字体等，还把近几年来Web设计领域公认的最佳设计理念有机地融入到了实例当中，比如移动先行（Mobile First）、渐进增强、平稳退化、无障碍设计等。更加难得的是，本书以设计跨屏幕的网页（响应式设计）为出发点，以点带面，把如今Web设计领域两大标准的最新版本HTML5和CSS3也纳入其中，读者在掌握先进设计方法的同时也能掌握最新的设计技术（比如使用新的HTML5结构化语义标记、嵌入媒体、响应式视频，以及CSS3的新选择器、特效、过渡、变形和动画等），从而可以免除重复学习新标准之苦，让自己一步跨入Web设计领域的最前沿。无论你想学习响应式Web设计，还是学习HTML5和CSS3的实际应用，本书都能满足你的需要，是毋庸置疑的明智之选。</p>
<p>说到底，响应式Web设计并非一门独立的技术，而只是现有技术的一个组合应用。只要有一点HTML和CSS基础的读者都能顺利地掌握它。对于中、高级的前端设计和开发人员，翻阅本书也有助于理清自己的知识脉络，对这个新的设计理念获得更全面、深入的理解和把握。</p>
<p>作者简介:<br>Ben Frain是一名具有十多年经验的网页设计师和前端工程师，直接与世界各地的客户和设计机构并肩工作。同时他还是一名技术记者，定期为一些关注Mac平台、前沿科技、网页设计和航空技术的刊物撰稿。 在此之前，他曾是一名怀才不遇的（而且谦虚谨慎的）电视演员，毕业于索尔福德大学的媒体与表演专业。他写了四部（自认为）同样被低估的剧本，而且始终心怀能卖出一部的信念（尽管不像最初那么强烈了）。 工作之余，在身体（和妻子）允许的情况下，他喜欢玩室内足球。 他的个人网站是<a target="_blank" rel="noopener" href="http://www.benfrain.com,twitter地址是twitter.com/benfrain%E3%80%82">www.benfrain.com，Twitter地址是twitter.com/benfrain。</a></p>
<p>目录:<br>第1章 　HTML5、CSS3及响应式设计入门　　1<br>第2章 　媒体查询：支持不同的视口　　23<br>第3章 　拥抱流式布局　　43<br>第4章 　响应式设计中的HTML5　　73<br>第5章 　CSS3：选择器、字体和颜色模式　　104<br>第6章 　用CSS3创造令人惊艳的美　　135<br>第7章 　CSS3过渡、变形和动画　　164<br>第8章 　用HTML5和CSS3征服表单　　186<br>第9章 　解决跨浏览器问题　　211</p>
<h2 id="《响应式Web设计：HTML5和CSS3实战（第2版）》"><a href="#《响应式Web设计：HTML5和CSS3实战（第2版）》" class="headerlink" title="《响应式Web设计：HTML5和CSS3实战（第2版）》"></a>《响应式Web设计：HTML5和CSS3实战（第2版）》</h2><p>本书将当前Web 设计中热门的响应式设计技术与HTML5 和CSS3 结合起来，为读者全面深入地讲解了针对各种屏幕大小设计和开发现代网站的各种技术。书中不仅讨论了媒体查询、弹性布局、响应式图片，更将最新和最有用的HTML5 和CSS3 技术一并讲解，是学习最新Web 设计技术不可多得的佳作。</p>
<p>作者简介： Ben Frain Web开发者、图书作者、演讲者。从1996年开始从事Web设计与开发，目前是Bet365的高级前端工程师。另著有《Sass和Compass设计师指南》。 在从事Web开发之前，他曾是一名怀才不遇的（而且谦虚的）电视演员和科技记者，毕业于索尔福德大学媒体与表演专业。他写过四部（自认为）均被低估的剧本，且至今仍觉得有望卖出其中一部（尽管不像最初那么有信心了）。 工作之余，在身体和妻子都允许的情况下，他会玩一玩室内足球，或者跟两个儿子练练摔跤。个人网站<a target="_blank" rel="noopener" href="http://www.benfrain.com%EF%BC%8CTwitter%E8%B4%A6%E5%8F%B7@benfrain./">www.benfrain.com，Twitter账号@benfrain。</a> 译者简介： 本书译者均来自由月影领衔的奇虎360最大前端团队——奇舞团（75team）。 李松峰 资深技术翻译，译有《JavaScript高级程序设计》《简约至上：交互式设计四策略》等数十部技术和设计书籍，现为“奇舞团”高级开发工程师、《奇舞周刊》总编。 钟恒 360奇舞团前端工程师。</p>
<p>目录:<br>第1章　响应式Web设计基础　　1<br>第2章　媒体查询　　16<br>第3章　弹性布局与响应式图片　　32<br>第4章　HTML5与响应式Web设计　　62<br>第5章　CSS3新特性　　82<br>第6章　CSS3高级技术　　113<br>第7章　SVG与响应式Web设计　　135<br>第8章　CSS3过渡、变形和动画　　162<br>第9章　表单　　184<br>第10章　实现响应式Web设计　　206</p>
<h2 id="《无懈可击的Web设计：使用HTML-5和CSS-3提高网站的灵活性与适应性-第3版-》"><a href="#《无懈可击的Web设计：使用HTML-5和CSS-3提高网站的灵活性与适应性-第3版-》" class="headerlink" title="《无懈可击的Web设计：使用HTML 5和CSS 3提高网站的灵活性与适应性(第3版)》"></a>《无懈可击的Web设计：使用HTML 5和CSS 3提高网站的灵活性与适应性(第3版)》</h2><p>本书将指导您采用标准设计策略来满足以各种方式浏览网页的各类用户的需要。每章首先列举一个沿用传统HTML技术的实例，然后指出该实例的局限性，并利用XHTML和CSS对其进行重构。从中您将学会如何用简洁高效的HTML标记和CSS来取代臃肿的代码，从而创建加载速度极快、能供所有用户使用的网站。本书最后将前面各章讨论的所有页面组件珠联璧合地结合在一起，制作了一个页面模板。这一版全面润色和更新了上一版本，介绍了CSS 3和HTML 5方法，并重新设计了“新响应设计”等多个案例。</p>
<p>作者简介:<br>Dan Cederholm是一位蜚声业界的Web设计师、作家和技术演讲人，在基于标准的Web设计领域享有盛誉。Dan自己开办了SimpleBits LLC设计公司，并曾帮助YouTube、Microsoft、Google、MTV、ESPN、Electronic Arts、Blogger、Magazine和Fast Company, Inc.等知名公司设计网页和重构网站。Dan参与创建和设计的Dribbble社区鼓励设计师们分享“手头工作”，在业界引起了极大反响，好评如潮。Dan此前曾撰写畅销书CSS3 For Web Designers and Handcrafted CSS: More Bulletproof Web Design。Dan现与妻儿居住在美国马萨诸塞州，在业余时间，他喜欢弹奏班卓琴，也喜欢打棒球。</p>
<p>目录:<br>第1章　灵活的文字1<br>第2章　可伸缩的导航栏23<br>第3章　可扩展的行47<br>第4章　巧妙的浮动效果73<br>第5章　牢固的方框109<br>第6章　页面在缺失图片或CSS的情况下仍然易读139<br>第7章　可转换的表格 163<br>第8章　流动布局和弹性布局 189<br>第9章　构成一个整体 233</p>
<h2 id="《大巧不工：Web前端设计修炼之道》"><a href="#《大巧不工：Web前端设计修炼之道》" class="headerlink" title="《大巧不工：Web前端设计修炼之道》"></a>《大巧不工：Web前端设计修炼之道》</h2><p>本书以Web前端设计的流程为主线，以前端设计的方法和原则为基础，围绕原型设计、模型设计、可用性设计、一致性设计和以用户为中心的设计等关键技术探讨了前端设计的规范、技巧与最佳实践。同时对Web前端设计领域的经典设计思维进行了剖析，为读者提供了极具指导价值的思想和极具操作性的实践方法。此外，本书还讲解了前端性能的测试和度量方法，总结了大量前端性能优化技巧。</p>
<p>本书适合于经验还不够丰富的前端工作者（前端设计师、前端开发工程师、前端架构师和用户体验设计师），希望它能帮助大家从复杂、繁琐、无序的前端设计、开发和维护工作中解放出来，以良好的设计思维与架构方法为前端开发和设计保驾护航。</p>
<p>前端开发工程师、前端设计师、前端架构师和用户体验设计师等新兴职业的出现，为前端设计和开发领域注入了新的生命和活力。随着用户对应用的体验的要求越来越高，前端领域面临的挑战越来越大，问题也越来越突出。其中最突出的问题便是缺少复合型的前端人才。</p>
<p>从知识体系上讲，复合型的前端人才需要掌握和了解的知识非常之多，甚至可以用“庞杂”二字来形容。这导致一名出色的前端开发人才需要很长的时间来成长，因此行业对此类人才的需求极其迫切，从业前景看好。作为一个没有太多Web前端开发和设计经验的程序员，我们如何才能投身于这个充满美好前景和想象空间的领域？如何修炼自己的内功才能让自己从不会到会，从合格到优秀，从优秀到卓越？本书能在你修炼的过程中提供良好的指导与参考。</p>
<p>如果你在思考下面这些问题，也许本书就是你想要的！</p>
<p>作为一名合格的Web前端开发工程师，究竟需要具备哪些技能和素质？为什么说如果要精通Web前端开发这一行，必须先精通十行？</p>
<p>前端设计者如何才能正确地理解自己的用户？如何理解并实践以用户为中心的设计原则？</p>
<p>原型设计应该注意哪些问题？如何更好地利用工具快速地进行原型设计？</p>
<p>可用性设计的关键要素是什么？如何设计高可用性的页面元素（导航、表单、链接等）？</p>
<p>“可用性”的首要原则是“别让我思考”，你的网站如何才能做到不让用户思考呢？</p>
<p>可用性测试的5项目标是什么？如何通过可用性测试发现问题现象背后的本质？</p>
<p>如何保持设计的一致性？一致性设计的三项原则是什么？</p>
<p>如何理解“样式就是设计”这句话？有哪些样式技术是前端开发者和设计者必须掌握的？样式究竟有哪些功能？</p>
<p>如何编写易于管理、维护和复用的JavaScript代码？JavaScript有哪些最佳实践？</p>
<p>如何理解HTML文件、CSS文件和JavaScript文件之间的关系？如何良好地组织这些文件从而让它们更易于管理、复用和维护？</p>
<p>如何平衡网站的色彩？如何让你的网站设计简洁而美观？页面排版的艺术你知多少？</p>
<p>Web前端设计领域有哪些经典的设计思维？如何才能掌握这些设计思维的本质？</p>
<p>如何测试前端的性能？前端性能优化的基本原则是什么？如何进行页面内容的优化和服务器端的优化？如何利用SEO技术让你的网站更容易被发现？</p>
<p>CSS 3与HTML 5将带来哪些全新的设计方式？</p>
<p>Web 3.0真的来了吗？Web 3.0的先驱者们有哪些杰出的表现？Web前端开发与设计的未来会怎样？</p>
<p>作者简介:<br>赖定清 英文名asone，从事Web前端工作近10年，实战经验非常丰富。是资深的Web前端开发工程师、架构师和项目经理，先后还担任过UI设计师、交互设计师和平面设计师。精通HTML、CSS、JavaScript、RIA和ROR等前端开发技术，对前端设计和用户交互体验都有着非常独到的理解，擅于总结归纳，能将各种技术融会贯通并付诸实践。是本书读者交流网站fedonline.cn的创始人，常年活跃于各种前端开发和设计相关的社区。此外，他还致力于Java企业级应用开发多年，曾经领导并参与了重庆交通征费系统和兴业银行网上银行项目的架构、设计与开发。 林坚 英文名lotin，资深Web前端开发工程师、UI设计师和项目经理，对原型设计、可用性分析和用户体验等前端设计关键技术有着独到的理解，实战经验非常丰富。擅长Java 企业级应用开发，谙熟各种流行开发框架，尤其对MVC框架有深刻认识，曾参与和负责重庆交通征费系统和兴业银行网上银行项目等多个大型项目的开发，积累了大量的经验。长期关注国内外互联网应用的发展，对互联网的发展趋势有前瞻性的认识和了解。关注敏捷开发，有着丰富的敏捷团队实施经验。擅于写作，曾担任网站和刊物的业余撰稿人，能够将所学和所悟用文字系统性地表达出来。</p>
<p>目录:<br>第1章 Web前端开发ABC&#x2F;1<br>第2章 打造前端设计的基石—交出你的原型稿&#x2F;34<br>第3章 从过去到未来—前端设计演变之路&#x2F;72<br>第4章 让你的设计深入人心—可用性设计&#x2F;122<br>第5章 原型模型化&#x2F;174<br>第6章 探索、品味、总结—经典设计思维&#x2F;239<br>第7章 让你的设计更加完美—优化技巧和最佳实践&#x2F;283<br>第8章 思考与展望—浅谈Web发展的未来&#x2F;315</p>
<h2 id="《H5匠人手册：霸屏H5实战解密》"><a href="#《H5匠人手册：霸屏H5实战解密》" class="headerlink" title="《H5匠人手册：霸屏H5实战解密》"></a>《H5匠人手册：霸屏H5实战解密》</h2><p>这是一本关于H5设计方法和设计流程的书，作者为近年来佳作频出的网易传媒设计中心，其代表作品有《娱乐圈画传》《里约小人大冒险》《我是一只快乐的羊驼》《滑向童年》等。《H5匠人手册：霸屏H5实战解密》通过交互、视觉和动效三部分内容，从产品策划、用户心理、交互手段、视觉渲染、动效运用、移动界面设计常识等方面进行论述，通过理论讲解和案例分析，详细介绍了提升 H5 设计质量的方法和一些实用性强的手段，帮助读者建立起一个更加完整的 H5 设计思维体系。本书适合从事 H5 相关工作的交互设计师、视觉设计师、动效设计师阅读，也可供致力于 H5 设计的初学者和爱好者参考。</p>
<h2 id="《HTML5触摸界面设计与开发》"><a href="#《HTML5触摸界面设计与开发》" class="headerlink" title="《HTML5触摸界面设计与开发》"></a>《HTML5触摸界面设计与开发》</h2><p>《高性能html5》为读者讲解了如何用html5 从一开始就设计一个高性能的网站，以及如何对已有网站进行改良，使得它们具备优越的性能。《高性能html5》中总结了许多实践经验、关键技巧，并提供了丰富的示例，作者有意无意地将软件工程以及前端开发技术之道隐藏于朴实的描述中。</p>
<p>通过学习《高性能html5》，读者能够掌握如何创建自己的高性能网站。《高性能html5》适合于想创建自己网站的初学者，同样也适用于资深网站开发者用于优化已有网站。</p>
<p>作者简介:</p>
<p>jay bryant:横跨两个不同的领域：写作和编程。在过去的20 年中，他一直致力于帮助ge（通用电气）、motorola（摩托罗拉）、dell（戴尔）和其他一些公司的程序员能够更好地用写作来表达他们的工作。同时，他又帮助像new york times group（纽约时报）、morningstar（晨星），以及其他的企业和国家机构编写程序。 如果对他的职业很好奇，去linkedin 搜索他。 michael garrett jones:拥有超过15 年的web 开发经验。他曾经在microsoft（微软）、dell（戴尔）、johnson &amp; johnson（强生）、citi（花旗银行）等公司作为技术领导。他还创造了一种独特的模式来实现高性能、直观的前端api。他坚持自己的设计，并且用它完美地实现了仅次于亚马逊的电子商务网站。 在他的自由职业中，他创建过不少于60 个站点。他的工作从设计公司logo 到整个公司网站的建立。 因为自己的平面设计背景，michael 不愿意为了适应早期笨重的网页布局，而调整自己的设计。他做了很多工作和花了很多个人时间来学习如何让web 工程能够完美地呈现他的设计思想。 带着web 开发世界的两个方面的视角——编码和设计上路，michael 总是能提供一些高效的模式，让用户和开发者都能有一个很好的体验。</p>
<p>目录:<br>第1 章 概述 2<br>第2 章 开发原则 8<br>第3 章 性能准则 21<br>第4 章 响应式网页设计 37<br>第5 章 理解页面重用机制 51<br>第6 章 页面模板 68<br>第7 章 导航 82<br>第8 章 页头 110<br>第9 章 页脚 117<br>第10 章 分形设计模式 135<br>第11 章 link 控件 146<br>第12 章 sidebox（侧边栏）控件 160<br>第13 章 button 控件 170<br>第14 章 price 控件 186<br>第15 章 product 控件 197<br>第16 章 table 控件 210<br>第17 章 tab 控件 229<br>第18 章 form控件 254</p>
<h2 id="《响应式Web设计实践》"><a href="#《响应式Web设计实践》" class="headerlink" title="《响应式Web设计实践》"></a>《响应式Web设计实践》</h2><p>随着各种各样的移动设备不断地涌现到使用者面前，Web设计的适应性已经成为设计师们所面临的最为艰巨的挑战。你设计出的网站不仅要在桌面计算机的大尺寸屏幕上可以为用户提供友好的UI和用户体验，同时在小尺寸屏幕上也应该可以提供一致的用户体验，并可以让用户能够在桌面大屏幕上和移动小屏幕上平滑切换，同时没有任何的不适应感觉。</p>
<p>本书作者是一位出色的开发者，在本书中，他将诸多技术和设计理念杂糅在一起，再辅以大量详细的配图、注释、引用等加以说明，从理论到实践，对响应式设计进行了详尽的解读。</p>
<p>本书适合从事Web设计的前端工程师和开发人员阅读参考。</p>
<p>作者简介:<br>Tim Kadlec，是一位资深的Web开发者，也是Breaking Development联合创始人。Tim通过应用各类Web技术，满足了出版业、制造业、金融业等不同行业诸多用户对于跨设备完成各种规模任务的需求。 侯鸿儒，本科期间自学了HTML、CSS、JavaScript和PHP，在清华大学计算机系完成了有关HTML5应用的硕士毕业设计。之后又顺其自然地接触到了UI&#x2F;UX，对响应式设计有着浓厚兴趣，并做过“Responsive Web Design &amp; Workflow”的演讲。</p>
<p>目录:<br>第1章 无处不在的Web<br>第2章 流动布局<br>第3章 媒介查询<br>第4章 响应式多媒体<br>第5章 计划<br>第6章 设计流程<br>第7章 响应式内容<br>第8章 RESS<br>第9章 响应式体验</p>
<h2 id="《Web应变之道》"><a href="#《Web应变之道》" class="headerlink" title="《Web应变之道》"></a>《Web应变之道》</h2><p>《Web应变之道》基于Web 实战经验、规范组织及社区论坛，分析Web 现状、问题和挑战，紧扣Web 的变化性与不确定性，提供方法论的指导，倡导用开放的思维来应对Web 世界；随后结合当今Web 最热门的话题：特征检测、响应式、多设备输入、图片、视频等新特性主题，提供解决方案或指导意见；《Web应变之道》的核心读者是专职或专业的Web 前端开发人员，另外，对Web 规范制订者和那些渴望更好地适应现代互联网的设计师、后台工程师及全栈工程师也是非常不错的选择。</p>
<p>作者简介:<br>Rob Larsen花了13年的时间为世界级的大公司和知名品牌构建Web站点和应用程序，他将这些经验应用于教学，开启了Web用户在HTML与CSS领域的旅程。</p>
<p>目录:<br>001 第1章 拥抱不确定性<br>029 第2章掌控Web 的不确定性<br>057 第3 章新特性的开发<br>081 第4 章响应式设计与移动端体验设计<br>113 第5章处理用户输入<br>139 第6章 出奇复杂的Web图片<br>165 第7章 极其复杂的Web视频<br>187 第8章 理想的Web</p>
<h2 id="《响应式Web设计性能优化》"><a href="#《响应式Web设计性能优化》" class="headerlink" title="《响应式Web设计性能优化》"></a>《响应式Web设计性能优化》</h2><p>《响应式Web设计性能优化》展示了如何在你的项目计划中将响应性和性能很好地结合起来，在服务器端，使用Node.js提供设备专有功能， 并且将自动测试整合到持续集成环境中。而且你将学习到很多非常有用的工具和响应式框架。随着时间的推移，你将从Tom Barker宝贵的经验中领悟到响应式设计的真谛。对于前端Web开发工程师来说，本书非常值得阅读。</p>
<p>目录:<br>第1章　响应式设计现状　1<br>第2章　初识Web应用性能　17<br>第3章　千里之行始于计划　41<br>第4章　响应式服务端实现　51<br>第5章　响应式前端实现　75<br>第6章　持续测试Web性能 　93<br>第7章　响应式设计框架　115</p>
<h2 id="《学习响应式设计》"><a href="#《学习响应式设计》" class="headerlink" title="《学习响应式设计》"></a>《学习响应式设计》</h2><p>想要为平板、手机、笔记本、大屏幕设备，甚至可穿戴设备提供最优的用户体验？那就学习响应式设计吧。这是一本内容特别全面、讲解非常透彻的入门书。特别地，通过这本书不仅能迅速掌握响应式Web设计的基本原理，还能够从头到尾了解响应式设计的工作流程：从项目启动开始，到项目最终上线为止。</p>
<p>只要你的工作与创建、改造或者升级网站有关系，都应该看看这本书。换句话说，不仅是前端开发人员，设计师、产品经理、项目经理，甚至后端开发人员也可以通过本书掌握响应式设计的精髓所在。这本书基于响应式设计的前沿技术和社区经验写成，汇集了前人的智慧和最佳实践。希望读者能够“站在巨人的肩膀上”，把这本书的内容应用到未来的项目中，造福更多用户。</p>
<p>内容策略的制定应先于视觉设计</p>
<p>默认设计应针对最窄屏幕宽度进行</p>
<p>响应式Web设计的关键：HTML元素和CSS属性</p>
<p>基于设备视口宽度，通过媒体查询显示不同的CSS样式</p>
<p>处理图像、文字排版和导航</p>
<p>采用性能优化技术建立更轻量级、更快的网站</p>
<p>目录:</p>
<p>第1章　什么是响应式设计 　　3<br>第2章　响应式内容 　　16<br>第3章　响应式网站之HTML 　　31<br>第4章　响应式网站之CSS 　　51<br>第5章　媒体查询 　　85<br>第6章　图像 　　111<br>第7章　响应式设计工作流程　　149<br>第8章　岂止手机 　　178<br>第9章　文字排版 　　211<br>第10章　导航及页眉布局 　　237<br>第11章　性能 　　279</p>
<h2 id="《响应式Web设计全流程解析》"><a href="#《响应式Web设计全流程解析》" class="headerlink" title="《响应式Web设计全流程解析》"></a>《响应式Web设计全流程解析》</h2><p>固定宽度的Photoshop图层、不断膨胀的客户需求、无休止的线框图……抛弃它们吧！陈旧的Web设计交付流程不再适用于移动时代的响应式方案。设计的工作流本质上并没有发生改变，是最佳实践变了。</p>
<p>《响应式Web设计全流程解析》为你展示了如何拥抱新的设计范式，创造微信时代的网站。你会学到的策略包括：如何更好地管理客户的开发需求和预期；在浏览器中进行设计的方法；超越静态的Photoshop图层的文档化方法；将响应式设计断点可视化的方法。 　学习并掌握《响应式Web设计全流程解析》引人入胜的内容之后，你就可以完全抛弃老旧的瀑布流交付模型，转而使用一种全新的方式来设计移动时代的网站。</p>
<p>作者简介:<br>Stephen Hay 出生于加利福利亚，1992年时迁往荷兰生活和工作，从1 9 9 5 年开始设计Web站点。他现在的工作是在Zero Interface公司担任Web设计和开发顾问，在那之前他做过企业形象设计、包装设计、广告设计，这些设计经验为其现在的工作奠定了扎实的基础。除了经常在行业会议上发表演讲，Stephen还会发表一些关于CSS、Web可用性、开放网络标准以及设计方面的文章。</p>
<p>目录:<br>第1章　拥抱变化　1<br>第2章　从内容开始　13<br>第3章　内容参考线框图　23<br>第4章　基于文本而设计　49<br>第5章　线性设计　67<br>第6章　断点图　87<br>第7章　为断点而设计　103<br>第8章　创建Web设计模型　121<br>第9章　截屏　151<br>第10章　成果展示：浏览器体验　167<br>第11章　创建设计手册　185</p>
<h2 id="《响应式Web图形设计》"><a href="#《响应式Web图形设计》" class="headerlink" title="《响应式Web图形设计》"></a>《响应式Web图形设计》</h2><p>网页中的图形设计是在线内容用户体验的关键，尤其是现在的用户会使用多种设备访问网页，如智能手机、平板电脑、笔记本电脑、桌面电脑，甚至是智能电视。《响应式Web图形设计》以创建响应式Web的角度，介绍了基础的HTML和CSS语法，并深入研究了响应式Web设计中色彩、布局、图像、排版、动画、视频和音频等方面的内容。</p>
<p>《响应式Web图形设计》结构整、轻松易懂，能够帮助Web设计新手快速入门，并打下坚实的基础。</p>
<p>目录:<br>第1章　了解HTML　1<br>第2章　使用CSS设置样式　17<br>第3章　网页排版　35<br>第4章　网页设计中的挑战　55<br>第5章　网页中的颜色　73<br>第6章　网站图像　93<br>第7章　为网页创建图像　109<br>第8章　透明度和阴影　125<br>第9章　收藏夹图标和移动书签　137<br>第10章　列表和图标字体　149<br>第11章　图像映射　165<br>第12章　页面布局　173<br>第13章　响应Web设计中的图像　201<br>第14章　对齐图像　219</p>
<h2 id="《响应式Web设计：HTML5和CSS3实践指南》"><a href="#《响应式Web设计：HTML5和CSS3实践指南》" class="headerlink" title="《响应式Web设计：HTML5和CSS3实践指南》"></a>《响应式Web设计：HTML5和CSS3实践指南》</h2><p>《响应式web设计：html5和css3实践指南》由资深web开发工程师撰写，通过大量真实的示例，详细介绍新的开发工具集，深入阐释响应式web设计的各种实用技术和新方法，帮助你快速掌握响应式web设计的精髓。</p>
<p>全书共分为了章，涵盖响应式元素和媒介、响应式字体、响应式布局、媒介查询、响应式框架、响应式内容优化，以及使用javascrip和jquery实现非侵入式交互等主题，从准备工作、实现方式和工作原理三部分全面讲述响应式web设计所涉及的各种技术和方法，并提供具体的实现代码，便于读者参考实践。</p>
<p>作者简介:<br>Benjamin LaGrone是一个工作和生活在得克萨斯州的Web开发工程师。6岁时就在休斯顿自然科学博物馆第一次接触计算机课程，并由此开始编程之旅。他的第一个程序是“选择自己的冒险书籍”，所使用的语言是BASIC。他至今依旧怀念编写程序需要手动添加行号的美好时光。 直到大约30年后，Ben才决定将计算机作为自己的职业。由此开始，Ben的职业生涯中包含了其个人最感兴趣的两件事：艺术和编程，即从代码中创造艺术。他最喜爱的一个项目是使用GMaps API实现病理学与染色体的映射，从而用于癌症研究。 Ben长时间着迷于移动设备，他认为响应式网站设计是Web开发的一个新领域，同时也是最令人兴奋的特性之一，并且会持续很长一段时间。他现在工作在SAAS，并在开发团队中担任移动响应式设计布道者。 除了将时间花费在互联网项目上，Ben还利用业余时间建造机器人、摆弄机器、喝咖啡、冲浪，以及指导韩国国术(Kuk Sool)。</p>
<p>目录:<br>第1章　响应式元素及媒介 &#x2F; 1<br>第2章　响应式字体 &#x2F; 25<br>第3章　响应式布局 &#x2F; 51<br>第4章　使用响应式框架 &#x2F; 84<br>第5章　设计移动设备优先的web应用 &#x2F; 115<br>第6章　优化响应式内容 &#x2F; 155<br>第7章　非侵入式javascript &#x2F; 178</p>
<h2 id="《界面设计模式-第2版》"><a href="#《界面设计模式-第2版》" class="headerlink" title="《界面设计模式 第2版》"></a>《界面设计模式 第2版》</h2><p>模式意味着重用。</p>
<p>好的模式建立在对人与事物的深刻认知之上。</p>
<p>本书开篇即总结了“与人有关”的各类问题，为读者提供了界面设计总体思路上的指引，帮助读者举一反三。</p>
<p>接下来，本书收集并分析了很多常用的界面设计模式，帮助读者理解在实现级别的各种常用解决方案，将它们灵活地运用到自己的设计中。</p>
<p>同时，随着网络和技术的不断发展，本书在第1 版的基础上，更新了几乎所有的模式示例和说明，并新增了两章全新的移动应用和社交媒体设计模式，帮助读者在这两个新的领域从更高的起点开始设计。</p>
<p>有效的界面设计，从本书开始。</p>
<p>作者简介:<br>Jenifer Tidwell是一位交互设计、信息架构和设计前期分析方面的咨询师和作家。她曾经为很多著名的公司（如Google和MathWorks）设计和建立用户界面。</p>
<p>目录:<br>第1章 用户做些什么 ……………………………………………………………….1<br>第2章 组织内容：信息架构和应用结构 ……………………………………23<br>第3章 到处走走：导航、路标和找路 ……………………………………….75<br>第4章 组织页面：页面元素的布局 ………………………………………..127<br>第5章 列表 ……………………………………………………………………….187<br>第6章 完成任务：动作与命令 ………………………………………………234<br>第7章 显示复杂数据：树、表格及其他信息图形 ……………………..275<br>第8章 获取用户输入：表单与控件 ………………………………………..335<br>第9章 利用社交媒体 ……………………………………………………………384<br>第10章 迈向移动设计 ………………………………………………………….431<br>第11章 修饰外观：视觉风格和美感 ……………………………………..467</p>
<h2 id="《HTML5与CSS3设计模式》"><a href="#《HTML5与CSS3设计模式》" class="headerlink" title="《HTML5与CSS3设计模式》"></a>《HTML5与CSS3设计模式》</h2><h1 id="H5"><a href="#H5" class="headerlink" title="H5"></a>H5</h1><h2 id="《HTML5与CSS3实例教程-第2版-》"><a href="#《HTML5与CSS3实例教程-第2版-》" class="headerlink" title="《HTML5与CSS3实例教程(第2版)》"></a>《HTML5与CSS3实例教程(第2版)》</h2><p>HTML5 和CSS3 技术是目前整个网页的基础。本书共分3 部分，集中讨论了HTML5 和CSS3 规范及其技术的使用方法。这一版全面讲解了最新的HTML5 和CSS3 技术，所有实例均使用最新特性实现，针对的是最新版本的浏览器。</p>
<p>本书适合所有使用HTML 和CSS 的Web 开发人员学习参考。</p>
<p>作者简介:<br>作者简介： Brian P. Hogan 1995年起便开始以自由职业者的身份开发专业网站并提供咨询服务，目前常使用Ruby、jQuery、HTML5和CSS3构建Web应用。他乐于讲述并撰写与Web设计和开发有关的内容，倡导为残障人士（特别是视觉障碍者）研发辅助功能，另著有《Web开发秘方》。 译者简介： 卢俊祥 书迷；关注Web技术趋势，热衷App开发、Web开发、数据分析、架构设计以及各类编程语言；陈氏太极拳五十六式爱好者；佛禅人生，缘散缘聚。</p>
<p>目录:<br>第1章　HTML5和CSS3概述　　1<br>第2章　新的结构化标签和属性　　10<br>第3章　创建友好的Web表单　　30<br>第4章　设置内容及界面的样式　　57<br>第5章　构建可访问性界面　　76<br>第6章　在浏览器中画图　　92<br>第7章　嵌入音频和视频　　109<br>第8章　视觉特效　　125<br>第9章　客户端数据储存　　152<br>第10章　创建交互式Web应用　　174<br>第11章　未来之路　　202</p>
<h2 id="《HTML5精粹》"><a href="#《HTML5精粹》" class="headerlink" title="《HTML5精粹》"></a>《HTML5精粹》</h2><p>《HTML5精粹:利用HTML5开发令人惊奇的Web站点和革命性应用》详尽地讲解和分析了HTML5中的所有新特性和核心技术，能为有一定HTML基础的读者迅速提升HTML5开发技能提供绝佳指导。全书包含297个代码示例和16个快速参考索引，极具实战性和实用性。</p>
<p>《HTML5精粹:利用HTML5开发令人惊奇的Web站点和革命性应用》共16章：第1章介绍了HTML5文档的基本组成、全局结构、主体，以及新旧元素对比；第2章和第3章讲解了CSS的样式设置、框模型，以及CSS3的核心属性和新规则；第4章重点介绍了JavaScript的核心知识；第5章详细介绍了HTML5中的音频和视频特性，以及如何在HTML5中创建视频和音频；第6章讲解了HTML5中的各种表单（包含新增表达元素）及其新属性，以及表单API；第7章介绍了Canvas的特性及其使用，以及Canvas的API；第8章探讨了HTML5中的拖放操作及其API；第9章介绍了HTML5中的地理位置信息及其API；第10章讲解了HTML5中的各种Web存储技术，以及Web存储API；第11章阐述了索引数据库的具体操作、实现原理，以及它的API；第12章讲解了HTML5中的文件操作和文件系统，以及文件API；第13章介绍了HTML5中的Ajax、跨文档消息传递、Web套接字等通信技术的原理，以及它们的API；第14章讲解了HTML5中Web Workers的使用方法和实现原理，以及它的API；第15章和第16章介绍了HTML5中的历史接口和脱机功能，以及它们的API。</p>
<p>海报：</p>
<p>作者简介:<br>J.D. Gauchat，资深Web技术专家，对HTML5、CSS3、JavaScript和PHP等Web开发技术有非常深入的认识和理解，在该领域工作了10余年，经验十分丰富。他的这本著作被翻译成西班牙语等多种文字，而且他还在Web开发领域发表了大量有影响力的技术文章。此外，他还是一位企业家，致力于在世界范围内的市场中发现机遇。</p>
<p>目录:<br>第1章　HTML5文档1<br>第2章　CSS样式设置与框模型24<br>第3章　CSS3属性63<br>第4章　JavaScript81<br>第5章　视频与音频94<br>第6章　表单与表单API108<br>第7章　Canvas API125<br>第8章　拖放API152<br>第9章　地理位置API163<br>第10章　Web存储API171<br>第11章　IndexedDB API180<br>第12章　文件199<br>第13章　通信API229<br>第14章　Web Workers API253<br>第15章　历史API265<br>第16章　脱机API273</p>
<h2 id="《疯狂HTML-5-CSS-3-JavaScript讲义》"><a href="#《疯狂HTML-5-CSS-3-JavaScript讲义》" class="headerlink" title="《疯狂HTML 5+CSS 3+JavaScript讲义》"></a>《疯狂HTML 5+CSS 3+JavaScript讲义》</h2><p>W3C于2016年11月1日正式发布了HTML 5.1规范，该规范已经得到广大浏览器厂商的支持，主流的最新版本的浏览器几乎都支持该规范。与此同时，前端开发的持续火爆，使得HTML 5成为目前的热门领域。</p>
<p>《疯狂HTML 5+CSS 3+JavaScript讲义（第2版）》是一本全面介绍HTML 5、CSS 3和JavaScript前端开发技术的图书，系统地介绍了HTML 5常用的元素和属性、HTML 5的表单元素和属性、HTML 5的绘图支持、HTML 5的多媒体支持、CSS 3的功能和用法、最前沿的变形与动画功能等。除此之外，《疯狂HTML 5+CSS 3+JavaScript讲义（第2版）》还系统地介绍了JavaScript编程知识，包括JavaScript基本语法、DOM编程，以及HTML 5新增的本地存储、Indexed数据库、离线应用、JavaScript多线程、客户端通信支持、WebSocket编程等。</p>
<p>《疯狂HTML 5+CSS 3+JavaScript讲义（第2版）》的定位是一本前端开发的“实战性”图书，因此在介绍各知识点时并不是简单地停留在知识点层面阐述，而是结合了大量实例来让读者对照练习、学以致用。《疯狂HTML 5+CSS 3+JavaScript讲义（第2版）》最后还提供了一个基于HTML 5技术的小游戏：疯狂俄罗斯方块。该游戏综合运用了HTML 5的绘图支持、客户端存储等技术，具有较高的参考价值。《疯狂HTML 5+CSS 3+JavaScript讲义（第2版）》提供了配套的答疑网站，如果读者在阅读过程中遇到了技术问题，可以登录疯狂Java联盟（<a target="_blank" rel="noopener" href="http://www.crazyit.org)发帖,笔者将会及时予以解答./">http://www.crazyit.org）发帖，笔者将会及时予以解答。</a></p>
<p>《疯狂HTML 5+CSS 3+JavaScript讲义（第2版）》对HTML 5、CSS 3、JavaScript的介绍是“从零开始”的，因此阅读《疯狂HTML 5+CSS 3+JavaScript讲义（第2版）》并不需要额外的基础。对于刚刚从事前端开发的新人，《疯狂HTML 5+CSS 3+JavaScript讲义（第2版）》具有很好的学习价值；对于有一定工作经验的前端工程师，《疯狂HTML 5+CSS 3+JavaScript讲义（第2版）》具有很高的参考价值。《疯狂HTML 5+CSS 3+JavaScript讲义（第2版）》也可作为高校、培训机构的教材使用。</p>
<p>目录:<br>第1章　HTML 5简介 1<br>第2章　HTML 5的常用元素与属性 14<br>第3章　HTML 5表单相关的元素和属性 72<br>第4章　HTML 5的绘图支持 101<br>第5章　HTML 5的多媒体支持 137<br>第6章　级联样式单与CSS选择器 150<br>第7章　字体与文本相关属性 198<br>第8章　背景、边框和边距相关属性 216<br>第9章　大小、定位、轮廓相关属性 250<br>第10章　盒模型与布局相关属性 264<br>第11章　表格、列表相关属性及media query 307<br>第12章　变形与动画相关属性 324<br>第13章　JavaScript语法详解 350<br>第14章　DOM编程详解 444<br>第15章　事件处理机制 497<br>第16章　本地存储与离线应用 535<br>第17章　文件支持与二进制数据 572<br>第18章　Web Worker多线程API 588<br>第19章　客户端通信 612<br>第20章　HTML 5的疯狂俄罗斯方块 637</p>
<h2 id="《HTML5权威指南》"><a href="#《HTML5权威指南》" class="headerlink" title="《HTML5权威指南》"></a>《HTML5权威指南》</h2><p>《HTML5 权威指南》是系统学习网页设计的权威参考图书。本书分为五部分：第一部分介绍学习本书的预备知识和HTML、CSS 和JavaScript 的最新进展；第二部分讨论HTML 元素，并详细说明了HTML5中新增和修改的元素；第三部分阐述CSS，涵盖了所有控制内容样式的CSS 选择器和属性，并辅以大量代码示例和图示；第四部分介绍DOM，剖析如何用JavaScript 操纵HTML 内容；第五部分讲解Ajax、多媒体和canvas 元素等HTML5 高级特性。</p>
<p>本书面向初学者和中等水平Web 开发人员，是牢固掌握HTML5、CSS3 和JavaScript 的必读之作。</p>
<p>作者简介:<br>Adam Freeman 曾在多家名企担任高级职务，现为畅销技术图书作家，著有多部C#、.NET和Java方面的大部头作品。其中《ASP.NET 4高级程序设计（第4版）》、《精通ASP.NET MVC 3框架（第3版）》销量均在同品种中名列前茅，备受读者推崇。《HTML5权威指南》是Freeman专门为网页开发新手和网页设计师打造的经典参考书，这本书秉承作者的一贯风格，幽默风趣、简约凝练、逻辑性强，是广大Web开发人员的必读经典。</p>
<p>目录:<br>第1章　HTML5背景知识　　1<br>第2章　准备工作　　8<br>第3章　初探HTML　　11<br>第4章　初探CSS　　33<br>第5章　初探JavaScript　　60<br>第6章　HTML5元素背景知识　　90<br>第7章　创建HTML文档　　98<br>第8章　标记文字　　126<br>第9章　组织内容　　158<br>第10章　文档分节　　179<br>第11章　表格元素　　206<br>第12章　表单　　231<br>第13章　定制input元素　　255<br>第14章　其他表单元素及输入验证　　289<br>第15章　嵌入内容　　306<br>第16章　理解CSS　　326<br>第17章　使用CSS选择器（第Ⅰ部分）　　335<br>第18章　使用CSS选择器（第Ⅱ部分）　　357<br>第19章　使用边框和背景　　380<br>第20章　使用盒模型　　406<br>第21章　创建布局　　434<br>第22章　设置文本样式　　454<br>第23章　过渡、动画和变换　　476<br>第24章　其他CSS属性和特性　　502<br>第25章　理解DOM　　520<br>第26章　使用Document对象　　533<br>第27章　使用Window对象　　555<br>第28章　使用DOM元素　　577<br>第29章　为DOM元素设置样式　　602<br>第30章　使用事件　　626<br>第31章　使用元素专属对象　　650<br>第32章　使用Ajax（第Ⅰ部分）　　670<br>第33章　使用Ajax（第Ⅱ部分）　　694<br>第34章　使用多媒体　　716<br>第35章　使用canvas元素（第Ⅰ部分）　　734<br>第36章　使用canvas元素（第Ⅱ部分）　　762<br>第37章　使用拖放　　787<br>第38章　使用地理定位　　802<br>第39章　使用Web存储　　811<br>第40章　创建离线Web应用程序　　820</p>
<h2 id="《深入HTML5应用开发》"><a href="#《深入HTML5应用开发》" class="headerlink" title="《深入HTML5应用开发》"></a>《深入HTML5应用开发》</h2><p>本书合并了O’Reilly出版的《HTML5 Geolocation》与《HTML5:等轴实时游戏开发》两本书的内容。第一部分介绍了HTML5 Geolocation API。使用这种API，开发人员不必针对特定设备编程，就能够在浏览器中直接编写地理定位应用。这部分共6章，介绍了Geolocation API在浏览器代码中的使用，并通过大量示例向读者展示其“一次编写，随处部署”的特点。具体内容包括地理定位的基础知识简介，这套API的浏览器支持情况，以及如何利用它和其他常用地图工具在网页中实现类似Google地图的嵌入式地图。</p>
<p>这一部分的主要内容还有：</p>
<p>根据设备的不同，从各种来源收集地理信息</p>
<p>探索地理坐标系统，包括大地测量系统和基准点</p>
<p>使用Geolocation API，以JavaScript代码从用户的浏览器中取得位置信息</p>
<p>使用Google地图或基于JavaScript 的ArcGIS API将位置信息显示在地图上</p>
<p>使用数据库、KML文件和Shapefile保存地理信息</p>
<p>熟悉地理数据的实际用途，包括地理营销、地理社交、地理标签和地理应用</p>
<p>第二部分介绍了用HTML5、CSS3和JavaScript开发等轴实时游戏。任何沉迷过Zynga的《开心农场》的玩家都享受过这类游戏的乐趣，本书展示了如何设计并开发这类游戏，涵盖了只使用开源工具来实现项目的全过程。你将通过详细的示例和代码，学会绘制图形、使用精灵、添加声音和验证数据以防作弊。</p>
<p>我们最后会用这部分介绍的所有技术完成一个《旅游胜地》游戏，并将它连接到社交网络上。如果你会用HTML5、CSS3和JavaScript，那就可以准备开始了！</p>
<p>这一部分的主要内容如下：</p>
<p>使用HTML5的画布（canvas）元素和精灵创建流畅的动画</p>
<p>创建高性能的等轴网格区块</p>
<p>设计同时适用于桌面设备和移动设备的游戏界面</p>
<p>使用HTML的音频（audio）元素为游戏添加声音</p>
<p>用Web Workers实现游戏中的路径查找功能</p>
<p>用PHP和MySQL实现客户端数据模型</p>
<p>使用动态CSS3对象让游戏更有活力</p>
<p>作者简介:<br>本书作者Anthony T. Holdener III具有十几年的Web开发经验，现在使用Esri ArcGIS JavaScript API、Google Maps JavaScript API和Bing Maps API构建GIS Web应用。自从圣路易斯大学计算机科学专业毕业后，他一直从事Web架构师、开发人员、经理或者辅助老师等工作。</p>
<p>目录:<br>第1章　 路在何方　　9<br>第2章　 地理定位：不仅是经纬度　　27<br>第3章　 地理定位API编程　　39<br>第4章　 地理定位和地图API　　57<br>第5章　 保存地理信息　　81<br>第6章　 基于地理定位开发应用　　93<br>第1章　 图形基础：画布与精灵　　119<br>第2章　 理解等轴游戏　　163<br>第3章　 游戏界面设计　　181<br>第4章　 HTML5声音及处理优化　　201<br>第5章　 推向市场　　227</p>
<h2 id="《HTML5基础知识、核心技术与前沿案例》"><a href="#《HTML5基础知识、核心技术与前沿案例》" class="headerlink" title="《HTML5基础知识、核心技术与前沿案例》"></a>《HTML5基础知识、核心技术与前沿案例》</h2><p>《HTML5基础知识、核心技术与前沿案例 》是一本引导初、中级学习者深入了解并有效掌握HTML5核心技巧的技术实战书籍，全书采用“基础知识+案例驱动”的双轨模式，精心安排了大量经典的HTML5设计实战案例，包括页面元素与布局、动画与动效、图形与图像、交互操作、页面组件、音频与视频、响应式设计等，并精选了微信小游戏、创意网站等综合性的前沿交互应用。实例基本涵盖了初、中级学习者在实战中几乎可能遇到的所有问题，展示了各种流行的互动设计理念，让读者能够轻松地学习基础知识，有效掌握各种核心技巧，快速上手前沿应用开发，并通过HTML5发现交互设计的乐趣。</p>
<p>目录:</p>
<p>第1章 初探HTML5：制作一份邀请函 010<br>第2章 HTML5新手详解 028<br>第3章 CSS3新手详解 052<br>第4章 JavaScript新手详解 080<br>第5章 移动端HTML5开发详解 103<br>第6章 事半功倍：运用流行开源类库 126<br>第7章 HTML5与周边编程语言、软件 143<br>第8章 HTML5页面元素与布局 153<br>第9章 HTML5动画与动效 182<br>第10章 HTML5图形与图像 217<br>第11章 HTML5交互操作 244<br>第12章 HTML5页面组件 290<br>第13章 HTML5音频与视频 322<br>第14章 HTML5响应式设计 336<br>第15章 HTML5微信游戏 354<br>第16章 HTML5创意网站 379</p>
<h2 id="《HTML-5应用开发实践指南》"><a href="#《HTML-5应用开发实践指南》" class="headerlink" title="《HTML 5应用开发实践指南》"></a>《HTML 5应用开发实践指南》</h2><p>《HTML5应用开发实践指南》主要内容：</p>
<p> 使用本地存储对象在浏览器中存储session数据。</p>
<p> 优化服务器访问：用lrldexedDB存储大型数据。</p>
<p> 通过浏览器读取并上传用户系统中的文件。</p>
<p> 离线访问应用并加快在线访问页面的加载速度。</p>
<p> 使用WebWorker创建多线程应用。</p>
<p> 通过WebSocket高效地在浏览器和服务器之间传输数据。</p>
<p> 学习HTML5中的表单、多媒体、图像和地理位置标记。</p>
<p> 《HTML5应用开发实践指南》由凯西恩编著。</p>
<h2 id="《高性能HTML5》"><a href="#《高性能HTML5》" class="headerlink" title="《高性能HTML5》"></a>《高性能HTML5》</h2><p>《高性能html5》为读者讲解了如何用html5 从一开始就设计一个高性能的网站，以及如何对已有网站进行改良，使得它们具备优越的性能。《高性能html5》中总结了许多实践经验、关键技巧，并提供了丰富的示例，作者有意无意地将软件工程以及前端开发技术之道隐藏于朴实的描述中。</p>
<p>通过学习《高性能html5》，读者能够掌握如何创建自己的高性能网站。《高性能html5》适合于想创建自己网站的初学者，同样也适用于资深网站开发者用于优化已有网站。</p>
<p>作者简介:<br>jay bryant:横跨两个不同的领域：写作和编程。在过去的20 年中，他一直致力于帮助ge（通用电气）、motorola（摩托罗拉）、dell（戴尔）和其他一些公司的程序员能够更好地用写作来表达他们的工作。同时，他又帮助像new york times group（纽约时报）、morningstar（晨星），以及其他的企业和国家机构编写程序。 如果对他的职业很好奇，去linkedin 搜索他。 michael garrett jones:拥有超过15 年的web 开发经验。他曾经在microsoft（微软）、dell（戴尔）、johnson &amp; johnson（强生）、citi（花旗银行）等公司作为技术领导。他还创造了一种独特的模式来实现高性能、直观的前端api。他坚持自己的设计，并且用它完美地实现了仅次于亚马逊的电子商务网站。 在他的自由职业中，… jay bryant:横跨两个不同的领域：写作和编程。在过去的20 年中，他一直致力于帮助ge（通用电气）、motorola（摩托罗拉）、dell（戴尔）和其他一些公司的程序员能够更好地用写作来表达他们的工作。同时，他又帮助像new york times group（纽约时报）、morningstar（晨星），以及其他的企业和国家机构编写程序。 如果对他的职业很好奇，去linkedin 搜索他。 michael garrett jones:拥有超过15 年的web 开发经验。他曾经在microsoft（微软）、dell（戴尔）、johnson &amp; johnson（强生）、citi（花旗银行）等公司作为技术领导。他还创造了一种独特的模式来实现高性能、直观的前端api。他坚持自己的设计，并且用它完美地实现了仅次于亚马逊的电子商务网站。 在他的自由职业中，他创建过不少于60 个站点。他的工作从设计公司logo 到整个公司网站的建立。 因为自己的平面设计背景，michael 不愿意为了适应早期笨重的网页布局，而调整自己的设计。他做了很多工作和花了很多个人时间来学习如何让web 工程能够完美地呈现他的设计思想。 带着web 开发世界的两个方面的视角——编码和设计上路，michael 总是能提供一些高效的模式，让用户和开发者都能有一个很好的体验。</p>
<p>目录:<br>第1 章 概述 2<br>第2 章 开发原则 8<br>第3 章 性能准则 21<br>第4 章 响应式网页设计 37<br>第5 章 理解页面重用机制 51<br>第6 章 页面模板 68<br>第7 章 导航 82<br>第8 章 页头 110<br>第9 章 页脚 117<br>第10 章 分形设计模式 135<br>第11 章 link 控件 146<br>第12 章 sidebox（侧边栏）控件 160<br>第13 章 button 控件 170<br>第14 章 price 控件 186<br>第15 章 product 控件 197<br>第16 章 table 控件 210<br>第17 章 tab 控件 229<br>第18 章 form控件 254</p>
<h2 id="《超实用的HTML代码段》"><a href="#《超实用的HTML代码段》" class="headerlink" title="《超实用的HTML代码段》"></a>《超实用的HTML代码段》</h2><p>《超实用的HTML代码段》精选300余段HTML代码，覆盖了几乎所有的HTML元素，是网站建设和网页设计人员在设计HTML结构代码时不可或缺的设计方案、技巧和参照。本书的代码从基础的HTML元素讲起，每一个讲解都附有实践，涵盖了从HTML 4到HTML 5的新元素，这些网页跨平台、跨设备、跨浏览器，充分向读者演示了如何使用HTML的各个元素和使用技巧。</p>
<p>《超实用的HTML代码段》从创建HTML文档开始介绍，分别按章节介绍了HTML各元素的作用和使用方法，并对常用的HTML代码段进行了介绍和演示。《超实用的HTML代码段》分为17章，包含HTML文档、头部meta元素、文字、图像、链接、页面布局、文档结构划分、多媒体、表格、表单、框架、Canvas、地理位置、本地存储、应用缓存及其他常用代码等网页结构设计技术。这些结构代码所阐述的HTML元素的常用方法对于快速设计简洁、通用的HTML网页结构的开发人员和设计人员具有重要的指导作用。</p>
<p>《超实用的HTML代码段》内容简洁明了、代码精练、重点突出、实例丰富、语言通俗易懂、原理清晰明白，是广大网页设计入门者和提高者的良好选择，同时也非常适合大中专院校学生学习阅读，也可作为高等院校非计算机专业，以及计算机非网络工程及相关专业的辅助读物。</p>
<p>作者简介:<br>赵荣娇，毕业于中国传媒大学，工学硕士。目前就职于淘宝网航旅事业部，担任前端开发工程师，曾参与旅游特卖首页、1688订单等项目开发。热爱技术，喜欢分享。中国传媒大学新媒体研究院主办《信息科技周刊》总编辑、《新媒体技术动态》发起人。著有《超实用的CSS代码段》一书。</p>
<p>目录:<br>第1章　创建HTML文档 1<br>第2章　头部 meta元素 28<br>第3章标记文字 44<br>第4章显示图像 75<br>第5章生成超链接 86<br>第6章组织文字内容 94<br>第7章划分文档结构 112<br>第8章多媒体文件 126<br>第9章表格 138<br>第10章表单与文件 166<br>第11章网页中的框架 180<br>第12章 HTML 5 Canvas 187<br>第13章 HTML 5地理定位 210<br>第14章 HTML 5本地存储 216<br>第15章 HTML 5应用缓存 234<br>第16章移动开发 245<br>第17章其他常用代码 255</p>
<h2 id="《HTML5数据推送应用开发》"><a href="#《HTML5数据推送应用开发》" class="headerlink" title="《HTML5数据推送应用开发》"></a>《HTML5数据推送应用开发》</h2><p>比较SSE、WebSocket或者数据拉取方案的区别，以便你在解决手头的问题时自如选择</p>
<p>开发一个包含后端和前端解决方案的实际SSE应用</p>
<p>解决错误处理、系统恢复和其他问题，使应用达到产品水准</p>
<p>分析不支持SSE的浏览器的两种向后兼容解决方案</p>
<p>处理安全问题，包括认证授权和不允许的域</p>
<p>开发在测试驱动SSE设计中有用的实际、可重用的数据</p>
<p>学习示例应用中不包含的SSE协议元素</p>
<p>作者简介:<br>作者简介： Darren Cook Darren Cook 精通多种计算机语言，包括JavaScript、PHP以及C++，拥有20多年软件开发及项目管理经验，涉及金融交易系统、数据可视化工具、世界级公司的网站乃至电子游戏。他开发过类似Twitter的HTTP流数据网络服务系统，还为许多应用写过底层的套接字服务端&#x2F;客户端协议，构建过使用SSE和WebSocket的应用。 译者简介： 刘帅 刘帅 百度前端高级研发工程师，毕业于哈尔滨工程大学，获得计算机科学与技术专业学士学位。毕业以来一直从事前端开发工作，先后就职于新浪、阿里巴巴、腾讯、百度，参与开发了基于HTML5技术的腾讯浏览器、QQ for Windows 8、百度打车WebApp版，现参与开发百度地图。</p>
<p>目录:<br>第1章　SSE 及其他　　1<br>第2章　玩转SSE　　13<br>第3章　迷人的真实数据推送应用　　27<br>第4章　别安于现状　　43<br>第5章　走出象牙塔，打造产品级品质　　55<br>第6章　向后兼容：其他数据推送策略　　77<br>第7章　向后兼容：另辟蹊径　　95<br>第8章　关于SSE 的其他标准　　111<br>第9章　认证授权：谁在敲门　　123</p>
<h1 id="Canvas"><a href="#Canvas" class="headerlink" title="Canvas"></a>Canvas</h1><h2 id="《HTML5-Canvas开发详解》"><a href="#《HTML5-Canvas开发详解》" class="headerlink" title="《HTML5 Canvas开发详解》"></a>《HTML5 Canvas开发详解》</h2><p>随着Canvas的持续升温，Flash的光芒迅速消退。本书是Canvas的畅销图书，它在上一版的基础上，通过讲解如何开发可交互式多媒体应用，引导读者学习HTML5 Canvas。通过本书，你将学到如何使用Canvas进行绘图、渲染文字、处理图像、创建动画，而这些是开发交互式Web游戏的必备知识。</p>
<p>本书针对Canvas和HTML5技术的最新变动进行了更新，其中包含了大量清晰、可重用的代码示例，无论你当前使用的是Flash、Silverlight，还是HTML与JavaScript，都可以通过本书中的这些代码示例迅速掌握HTML5 Canvas。</p>
<p>你也会从本书中发现，为什么HTML5代表着创新性Web开发的未来。</p>
<p>· 创建和修改2D绘图、文本和位图图像；</p>
<p>· 使用数学算法来移动对象并模拟物理交互效果；</p>
<p>· 整合、操作视频，并添加音频；</p>
<p>· 构建一个可用于创建多款游戏的基本框架；</p>
<p>· 使用位图和tile表格开发游戏图形动画；</p>
<p>· 针对移动设备：创建Web应用，并针对iOS设备进行修改；</p>
<p>· 使用Canvas开发3D和多人游戏应用的探索。</p>
<p>Steve和Jeff Fulton各自在交互式娱乐开发领域均有16年以上的工作经验。Steve是Matel Toys公司数字游戏软件开发部的高级经理。Jeff是Producto工作室的CTO。他们俩人还在8bitrocket.com上培养了一大批忠实粉丝，这些粉丝通过该网站了解有关Flash、Sliverlight以及HTML5 Canvas的新闻、故事、博客和教程。</p>
<p>作者简介:<br>Steve Fulton steve fulton 是一位ria和网页游戏开发者，在过去的3年半中，他在他的网站<a target="_blank" rel="noopener" href="http://www.8bitrocket.com上培养了很多关于他的新闻,故事,博客,关于flash,silverlight教程,以及现在的html5.canvas的读者.在flash游戏开发者中,steve在alexa网站的排名中名列前茅.steve在过去的十四年中担任mattel/">http://www.8bitrocket.com上培养了很多关于他的新闻，故事，博客，关于flash，silverlight教程，以及现在的html5.canvas的读者。在flash游戏开发者中，steve在alexa网站的排名中名列前茅。steve在过去的十四年中担任mattel</a> toys公司的网页开发经理，帮助公司创建了广泛的的在线用户。 查看Steve Fulton更多信息 Jeff Fulton jeff fulton 在过去的17年中一直致力于ria（丰富性网络应用服务）并且只做了很多游戏。他目前是zynga的高级游戏工程师。之前他在mattel toys做贸易，并且为自己的8bitrocket工作室做自由撰稿人。jeff还与他的哥哥steve合著了一本关于高级flash游戏开发的书。现在他经营者一个成功且很受欢迎的博客网站–<a target="_blank" rel="noopener" href="http://www.8bitrocket.com.这是一个致力于flash,html5,silverlight和复古游戏的网站./">http://www.8bitrocket.com。这是一个致力于flash，html5，silverlight和复古游戏的网站。</a></p>
<p>目录:<br>第1章　html5 canvas简介<br>第2章　在canvas上绘图<br>第3章　html5 canvas的文本api<br>第4章　canvas图像<br>第5章　数学、物理与动画<br>第6章　在画布中融合html5视频<br>第7章　使用音频<br>第8章　canvas游戏上<br>第9章　canvas游戏下<br>第10章　在移动设备上开发<br>第11章　进一步探索</p>
<h2 id="《HTML5-CANVAS基础教程》"><a href="#《HTML5-CANVAS基础教程》" class="headerlink" title="《HTML5 CANVAS基础教程》"></a>《HTML5 CANVAS基础教程》</h2><p>《HTML 5 Canvas基础教程》从HTML5和JavaScript（以及jQuery）的基础知识讲起，全面介绍了HTML5Canvas的各种特性，包括渲染上下文、坐标系统、绘制图形、保存和恢复画布状态，以及变形、合成、处理图像和视频等，让读者对Canvas建立起完整的认识。随后讨论了动画循环、记忆形状、模拟运动、碰撞检测等基本而又重要的概念，带领读者温习了必要的数学和物理知识。通过带领读者动手开发“太空保龄球”和“躲避小行星”这两款小游戏，让读者掌握开发游戏的基本流程，学会响应用户操作、创造虚拟环境、循环利用对象、设计计分系统等游戏开发必备的知识。《HTML 5 Canvas基础教程》适合各层次Web设计及开发人员阅读。</p>
<p>目录 </p>
<p>第1 章 HTML5 简介　　1<br>1.1 HTML 简史　　1<br>1.2 为什么需要HTML5 　　2<br>1.2.1 问题　　2<br>1.2.2 解决问题　　2<br>1.3 HTML5 的新特性　　3<br>1.3.1 结构和内容元素　　3<br>1.3.2 表单　　6<br>1.3.3 媒体元素　　7<br>1.4 剖析HTML5 页面的结构　　11<br>1.5 对HTML5 的误解　　16<br>1.5.1 CSS3 误解　　16<br>1.5.2 Web Fonts 误解　　17<br>1.5.3 Geolocation 误解　　17<br>1.5.4 SVG 误解　　17<br>1.5.5 Web Storage 误解　　18<br>1.5.6 Web Workers 误解　　18<br>1.5.7 WebSocket 误解　　18<br>1.6 小结　　19<br>第2 章 JavaScript 基础　　20<br>2.1 JavaScript 概述　　20<br>2.2 jQuery 　　21<br>2.2.1 jQuery 是什么　　21<br>2.2.2 为什么要使用它　　21<br>2.2.3 这是在误导你吗　　22<br>2.2.4 是否不需要理解纯JavaScript　　22<br>2.2.5 如何使用jQuery 　22<br>2.3 在HTML 页面上添加JavaScript 　23<br>2.4 在页面加载之后运行JavaScript 　25<br>2.4.1 错误的方法（window.onload 事件） 　26<br>2.4.2 冗长的方法（DOM） 　26<br>2.4.3 简单的方法（jQuery 方法） 　27<br>2.5 变量与数据类型　　28<br>2.5.1 变量　　28<br>2.5.2 数据类型　　32<br>2.6 条件语句　　33<br>2.6.1 if 语句　　33<br>2.6.2 比较运算符　　34<br>2.6.3 在if 语句中进行多重布尔值检查　　35<br>2.6.4 else 和else if 语句　　35<br>2.7 函数　　36<br>2.7.1 创建函数　　36<br>2.7.2 调用函数　　37<br>2.8 对象　　38<br>2.8.1 什么是对象　　38<br>2.8.2 创建和使用对象　　38<br>2.9 数组　　40<br>2.9.1 创建数组　　40<br>2.9.2 访问和修改数组　　41<br>2.10 循环　　41<br>2.11 定时器　　43<br>2.11.1 设置一次性定时器　　43<br>2.11.2 取消一次性定时器　　43<br>2.11.3 设置重复定时器　　43<br>2.11.4 取消重复定时器　　44<br>2.12 DOM　　44<br>2.12.1 HTML 网页示例　　44<br>2.12.2 使用纯JavaScript 访问DOM 　　45<br>2.12.3 使用jQuery 访问DOM　　46<br>2.12.4 操作DOM　　46<br>2.13 小结　　47<br>第3 章 Canvas 基础知识　　48<br>3.1 认识canvas 元素　　48<br>3.2 2D 渲染上下文　　49<br>3.2.1 坐标系统　　49<br>3.2.2 访问2D 渲染上下文　　50<br>3.3 绘制基本图形和线条　　51<br>3.3.1 线条　　53<br>3.3.2 圆形　　54<br>3.4 样式　　58<br>3.5 绘制文本　　62<br>3.6 擦除Canvas　　65<br>3.7 使Canvas 填满浏览器窗口　　69<br>3.8 小结　　71<br>第4 章 Canvas 高级功能　　72<br>4.1 保存和恢复绘图状态　　72<br>4.1.1 画布绘图状态是什么　　72<br>4.1.2 保存绘图状态　　73<br>4.1.3 恢复绘图状态　　73<br>4.1.4 保存和恢复多个绘图状态　　75<br>4.2 变形　　76<br>4.2.1 平移　　76<br>4.2.2 缩放　　78<br>4.2.3 旋转　　80<br>4.2.4 变换矩阵　　82<br>4.3 合成　　85<br>4.3.1 全局阿尔法值　　86<br>4.3.2 合成操作　　87<br>4.4 阴影　　91<br>4.5 渐变　　93<br>4.6 复杂路径　　96<br>4.7 将画布导出为图像　　100<br>4.8 小结　　102<br>第5 章 处理图像和视频　　103<br>5.1 加载图像　　103<br>5.2 调整和裁剪图像　　105<br>5.2.1 调整图像大小　　105<br>5.2.2 裁剪图像　　106<br>5.2.3 阴影　　108<br>5.3 图像变形　　110<br>5.3.1 平移　　110<br>5.3.2 旋转　　111<br>5.3.3 缩放与翻转　　111<br>5.4 访问像素值　　 113<br>5.5 从零绘制图像　　117<br>5.5.1 随机绘制像素　　119<br>5.5.2 创建马赛克效果　　119<br>5.6 基本图像效果　　123<br>5.6.1 反转颜色　　123<br>5.6.2 灰度　　124<br>5.6.3 像素化　　125<br>5.7 视频处理　　127<br>5.7.1 创建HTML5 video 元素　　 127<br>5.7.2 使用HTML5 video API　　128<br>5.7.3 设置画布　　129<br>5.8 小结　　133<br>第6 章 制作动画　　134<br>6.1 画布中的动画　　134<br>6.2 创建动画循环　　135<br>6.2.1 循环　　135<br>6.2.2 更新、清除、绘制　　137<br>6.3 记忆要绘制的形状　　138<br>6.3.1 错误的方法　　138<br>6.3.2 正确的方法　　139<br>6.3.3 随机产生形状　　142<br>6.4 改变方向　　143<br>6.5 圆周运动　　144<br>6.5.1 三角函数　　145<br>6.5.2 综合运用　　148<br>6.6 反弹　　150<br>6.7 小结　　154<br>第7 章 实现高级动画　　155<br>7.1 物理常识　　155<br>7.1.1 什么是物理学　　155<br>7.1.2 物理学对创建动画有何作用　　156<br>7.1.3 基本概念　　156<br>7.1.4 牛顿运动定律　　157<br>7.2 运用物理知识创建动画　　158<br>7.2.1 准备工作　　158<br>7.2.2 速度　　161<br>7.2.3 添加边界　　163<br>7.2.4 加速度　　163<br>7.2.5 摩擦力　　165<br>7.3 碰撞检测　　166<br>7.3.1 碰撞检测　　167<br>7.3.2 弹开物体　　170<br>7.3.3 动量守恒　　173<br>7.4 小结　　175<br>第8 章 太空保龄球游戏　　176<br>8.1 游戏概述　　176<br>8.2 核心功能　　177<br>8.2.1 构建HTML 代码　　177<br>8.2.2 美化界面　　180<br>8.2.3 编写JavaScript 代码　　182<br>8.3 激活用户界面　　183<br>8.4 创建游戏对象　　185<br>8.4.1 创建平台　　185<br>8.4.2 创建小行星　　187<br>8.4.3 创建玩家使用的小行星　　190<br>8.4.4 更新UI 　　191<br>8.5 让对象运动起来　　191<br>8.6 检测用户交互　　195<br>8.6.1 建立事件监听器　　195<br>8.6.2 选中玩家使用的小行星　　196<br>8.6.3 增加力度　　197<br>8.6.4 让玩家使用的小行星动起来　　198<br>8.6.5 可视化用户输入　　199<br>8.7 重置player 　　200<br>8.8 玩家获胜　　201<br>8.8.1 更新分数　　201<br>8.8.2 从平台上删除小行星　　202<br>8.9 小结　　205<br>第9 章 躲避小行星游戏　　206<br>9.1 游戏概述　　206<br>9.2 核心功能　　207<br>9.2.1 创建HTML 代码　　207<br>9.2.2 美化界面　　209<br>9.2.3 编写JavaScript 代码　　211<br>9.3 创建游戏对象　　213<br>9.3.1 创建小行星　　213<br>9.3.2 创建玩家使用的火箭　　215<br>9.4 检测键盘输入　　216<br>9.4.1 键值　　216<br>9.4.2 键盘事件　　216<br>9.5 让对象运动起来　　218<br>9.6 假造横向卷轴效果　　223<br>9.6.1 循环利用小行星　　223<br>9.6.2 添加边界　　223<br>9.6.3 让玩家保持连续移动　　224<br>9.7 添加声音　　224<br>9.8 结束游戏　　226<br>9.8.1 计分系统　　226<br>9.8.2 杀死玩家　　228<br>9.9 增加游戏难度　　230<br>9.10 小结　　231<br>第10 章 未来的Canvas　　232<br>10.1 Canvas 与SVG 　　232<br>10.1.1 可访问性　　233<br>10.1.2 位图与矢量图　　233<br>10.2 Canvas 与Flash 　　234<br>10.2.1 JavaScript 开发人员可以借鉴Flash 　　234<br>10.2.2 Canvas 没有像Flash 那样用户友好的编辑器<br>235<br>10.3 Canvas 与性能　　 236<br>10.4 Canvas 游戏和动画库　　236<br>10.5 三维图形　　238<br>10.6 与外围设备交互　　 239<br>10.7 用WebSocket 技术构建多人游戏　　240<br>10.8 灵感　　241<br>10.8.1 Sketch Out 游戏　　241<br>10.8.2 Z-Type 游戏　　242<br>10.8.3 Sinuous 游戏　　242<br>10.9 小结和结束语　　243</p>
<h2 id="《HTML5-Canvas核心技术-图形、动画与游戏开发》"><a href="#《HTML5-Canvas核心技术-图形、动画与游戏开发》" class="headerlink" title="《HTML5 Canvas核心技术 图形、动画与游戏开发》"></a>《HTML5 Canvas核心技术 图形、动画与游戏开发》</h2><p>这是我的第一本canvas书籍，读的很过瘾，里面对一些细节化的知识点提的很好，让人不会错过重要的东西。另外，书中的文字很直白易懂，而且作者也说了，就算看图也能有不少收获。译者的翻译也不错，文字还算流畅。书中介绍的知识点，是按照例子一步步展开的，而且讲的都挺有深度，让人读者很过瘾。比如，实际上在第二章就已经开始讲到动画了，画出一个贝赛尔曲线，然后再用鼠标绘制该曲线，这本身就是动画。作者不仅仅局限于一点，而是视野非常广阔，思索也并不是浅尝辄止，一步一步，每步都是恰到好处，这点我很喜欢。喜欢这本书</p>
<p>目录</p>
<p>《html5 canvas核心技术：图形、动画与游戏开发》<br>译者序<br>前言<br>第1章　基础知识 1<br>1.1　canvas元素 1<br>1.2　canvas的绘图环境 6<br>1.3　本书程序清单的规范格式 9<br>1.4　开始学习html5 10<br>1.5　基本的绘制操作 15<br>1.6　事件处理 18<br>1.7　绘制表面的保存与恢复 23<br>1.8　在canvas中使用html元素 25<br>1.9　打印canvas的内容 32<br>1.10　离屏canvas 35<br>1.11　基础数学知识简介 37<br>1.12　总结 44<br>第2章　绘制 45<br>2.1　坐标系统 46<br>2.2　canvas的绘制模型 47<br>2.3　矩形的绘制 48<br>2.4　颜色与透明度 50<br>2.5　渐变色与图案 52<br>2.6　阴影 57<br>2.7　路径、描边与填充 60<br>2.8　线段 69<br>2.9　圆弧与圆形的绘制 83<br>2.10　贝塞尔曲线 93<br>2.11　多边形的绘制 97<br>2.12　高级路径操作 102<br>2.13　坐标变换 116<br>2.14　图像合成 123<br>2.15　剪辑区域 128<br>2.16　总结 135<br>第3章　文本 137<br>3.1　文本的描边与填充 137<br>3.2　设置字型属性 141<br>3.3　文本的定位 144<br>3.4　实现文本编辑控件 154<br>3.5　总结 174<br>第4章　图像与视频 175<br>4.1　图像的绘制 176<br>4.2　图像的缩放 179<br>4.3　将一个canvas绘制到另一个canvas之中 183<br>4.4　离屏canvas 186<br>4.5　操作图像的像素 189<br>4.6　结合剪辑区域来绘制图像 208<br>4.7　以图像制作动画 211<br>4.8　图像绘制的安全问题 216<br>4.9　性能 216<br>4.10　放大镜 222<br>4.11　视频处理 227<br>4.12　总结 234<br>第5章　动画 235<br>5.1　动画循环 235<br>5.2　帧速率的计算 248<br>5.3　以不同的帧速率来执行各种任务 249<br>5.4　恢复动画背景 250<br>5.5　利用双缓冲技术绘制动画 253<br>5.6　基于时间的运动 254<br>5.7　背景的滚动 257<br>5.8　视差动画 261<br>5.9　用户手势 264<br>5.10　定时动画 266<br>5.11　动画制作的最佳指导原则 270<br>5.12　总结 271<br>第6章　精灵 272<br>6.1　精灵概述 273<br>6.2　精灵绘制器 275<br>6.3　精灵对象的行为 284<br>6.4　精灵动画制作器 289<br>6.5　基于精灵的动画循环 293<br>6.6　总结 294<br>第7章　物理效果 295<br>7.1　重力 295<br>7.2　时间轴扭曲 311<br>7.3　时间轴扭曲函数 315<br>7.4　时间轴扭曲运动 317<br>7.5　以扭曲后的帧速率播放动画 326<br>7.6　总结 332<br>第8章　碰撞检测 333<br>8.1　外接图形判别法 333<br>8.2　碰到墙壁即被弹回的小球 336<br>8.3　光线投射法 337<br>8.4　分离轴定理（sat）与最小平移向量（mtv） 340<br>8.5　总结 373<br>第9章　游戏开发 374<br>9.1　游戏引擎 374<br>9.2　游戏原型 395<br>9.3　弹珠台游戏 407<br>9.4　总结 425<br>第10章　自定义控件 426<br>10.1　圆角矩形控件 427<br>10.2　进度条控件 433<br>10.3　滑动条控件 437<br>10.4　图像查看器控件 446<br>10.5　总结 454<br>第11章　移动平台开发 455<br>11.1　移动设备的视窗 456<br>11.2　媒体特征查询技术 461<br>11.3　触摸事件 464<br>11.4　ios5 469<br>11.5　虚拟键盘 472<br>11.6　总结 485</p>
<h1 id="H5游戏"><a href="#H5游戏" class="headerlink" title="H5游戏"></a>H5游戏</h1><h2 id="《HTML5游戏开发技术：Egret-Engine》"><a href="#《HTML5游戏开发技术：Egret-Engine》" class="headerlink" title="《HTML5游戏开发技术：Egret Engine》"></a>《HTML5游戏开发技术：Egret Engine》</h2><p>本书针对的是对HTML5游戏开发或应用开发感兴趣的初学者，书中有意弱化了对概念、定义的精确描述和堆叠，避免了很多初学者面对陌生的技术名词时产生恐惧和障碍心理。不论是手机页游、微信游戏还是APP游戏，也不论你是没有任何编程开发经验的新手还是跨领域的开发学习者，这本书都会为你学习HTML5、Egret Engine和游戏开发带来帮助，并为进一步实践和提升指出了方向。</p>
<p>本书以案例教学的方式，讲解了如何使用白鹭引擎（Egret Engine）及配套工具开发HTML5游戏。案例由简至繁，选取了当前应用领域常见的摇奖游戏、卡牌游戏、平台游戏、塔防游戏以及在线聊天应用，讲解了白鹭引擎支持图形图像、多媒体、交互与事件、粒子特效、EUI、物理引擎、人工智能及网络通信等方面的功能，讨论了程序开发时的调试、面向对象设计、设计模式及应用程序框架等应用方法。本书最后介绍了实际项目开发中的一些应用技巧。</p>
<p>本书适合从事HTML5开发的初级技术人员，也可供HTML5开发培训机构参考。</p>
<p>本书提供所有案例的完整源代码，读者可以从中国水利水电出版社网站以及万水书苑上免费下载，网址为：<a target="_blank" rel="noopener" href="http://www.waterpub.com.cn/softdown/%E5%92%8Chttp://www.wsbookshow.com/%E3%80%82">http://www.waterpub.com.cn/softdown/和http://www.wsbookshow.com/。</a></p>
<p>作者简介:<br>辛子俊，现北京智慧谷文化传媒有限公司总经理，中国传媒大学外聘教师，致力于新媒体教育及游戏人才培养工作，曾作为Adobe开发者社区版主，负责引入国外相关技术类文章及其翻译工作，主持过的项目包括《长征课堂VR》《情商加油站》《职场演兵》《脑健操》《养生厨房》《漆艺·再造物》《雕栏砌筑》等。 林雪莹，中国传媒大学计算机应用专业硕士研究生，专攻游戏设计，曾任腾讯游戏和乐元素实习策划，作品《昔：Yesterday》获“中国优秀游戏制作人大赛”非专业组*佳游戏创意奖、“中国大学生原创动漫大赛”一等奖、“中国学院奖”三等奖，获苹果App Store在全球市场推荐。</p>
<p>目录:<br>第1章认识当代互联网核心技术—HTML5 1<br>第2章就这么简单—10分钟开发<br>第3章互动与特效—摇奖游戏制作 47<br>第4章多样的交互界面—卡牌游戏制作 69<br>第5章模拟物理—动作类平台游戏制作 123<br>第6章人工智能—经典塔防游戏制作 156<br>第7章建立通信—网络多人聊天 180<br>第8章高级技巧 195</p>
<h2 id="《Egret-HTML5游戏开发指南》"><a href="#《Egret-HTML5游戏开发指南》" class="headerlink" title="《Egret HTML5游戏开发指南》"></a>《Egret HTML5游戏开发指南》</h2><p>《Egret——HTML5游戏开发指南》由浅入深，在讲解游戏开发基础的同时提供众多实战案例供读者学习。《Egret——HTML5游戏开发指南》章节内容包含Egret基础概念及基础图形图像处理方法、网络相关操作、移动设备适配、性能优化、文本动画相关知识、调试技巧、DragonBones骨骼动画系统和P2物理引擎等。通过《Egret——HTML5游戏开发指南》，读者可以了解并掌握HTML5游戏开发技能，并通过Egret开发复杂又好玩的HTML5游戏。</p>
<p>《Egret——HTML5游戏开发指南》适合喜欢游戏且有志于成为HTML5游戏开发者的人阅读，也适合具备其他平台游戏开发经验的人以及前端开发工程师了解和掌握HTML5开发技巧，并进入HTML5游戏开发领域</p>
<p>目录:<br>第1章 欢迎来到HTML5的世界<br>第2章 奇妙的前端之旅<br>第3章 Hello Egret<br>第4章 游戏的基础知识<br>第5章 事件与用户交互<br>第6章 游戏资源管理<br>第7章 位图操作<br>第8章 文本<br>第9章 动画与粒子特效<br>第10章 音乐与音效<br>第11章 数据操作<br>第12章 网络通信<br>第13章 计时器与心跳控制器<br>第14章 反射机制与依赖注入<br>第15章 屏幕适配与环境交互<br>第16章 调试与性能检测<br>第17章 打包发布到原生平台<br>第18章 DragonBones骨骼动画系统<br>第19章 P2物理引擎</p>
<h2 id="《HTML5-移动游戏开发高级编程》"><a href="#《HTML5-移动游戏开发高级编程》" class="headerlink" title="《HTML5 移动游戏开发高级编程》"></a>《HTML5 移动游戏开发高级编程》</h2><p>热切期望进入如火如荼的移动游戏世界？ HTML5移动游戏开发高级编程 将助你实现梦想。这本精品书籍面向有兴趣为所有移动和触摸屏设备创建游戏的开发人员，以你现有的HTML5和JavaScript知识为基础，分步讲解如何使用HTML5构建单玩家和多玩家移动游戏。本书涵盖构建HTML5游戏的标准模式、构建方法的选择(CSS3、SVG或画布)以及流行的游戏引擎和框架等主题。最重要的是，你可修改和扩展本书提供的6个基础游戏的代码，最终开发出自己的游戏。</p>
<p>主要内容</p>
<p>◆ 阐释如何择机选用三种主要方法(CSS3、SVG或画布)之一来构建HTML游戏</p>
<p>◆ 介绍使用HTML5构建实时多玩家游戏的标准模式</p>
<p>◆ 讲述JavaScript游戏开发基础知识</p>
<p>◆ 分步讲解如何创建2D平台动作游戏以及构建非传统多人游戏界面</p>
<p>◆ 介绍各种移动增强功能，如地理定位、设备方向、加速和声音等</p>
<p>◆ 提供将HTML5游戏打包以便将其发布到应用商店的建议</p>
<p>作者简介:<br>Pascal Rettig经营着网络咨询公司Cykod；Cykod成立于2006年，总部设在波士顿，主营业务是在线交互应用。Pascal也是GamesForLanguage的CTO，他组织成立了波士顿HTML5游戏开发研讨会，同时担任UX Magazine游戏版块的特约编辑。</p>
<p>目录:<br>第1章 先飞后走，先难后易 3<br>第2章 从玩具到游戏 25<br>第3章 试飞结束，向移动进发 51<br>第4章 移动设备上的HTML5 69<br>第5章 了解一些有用的库 83<br>第6章 成为一个良好的移动市民 97<br>第7章 了解HTML5游戏开发环境 117<br>第8章 在命令行上运行JavaScript 133<br>第9章 自建Quintus引擎1 151<br>第10章 自建Quintus引擎2 173<br>第11章 自建Quintus引擎3 199<br>第12章 使用CSS3构建游戏 223<br>第13章 制作一个CSS3 RPG游戏 237<br>第14章 使用SVG和物理引擎<br>第15章 了解HTML5的杰出画布 301<br>第16章 实现动画 323<br>第17章 运用像素 337<br>第18章 创建一个2D平台动作游戏 355<br>第19章 构建一个画布编辑器 377<br>第20章 构建在线社交游戏 393<br>第21章 实现实时交互 413<br>第22章 构建非传统风格的游戏 433<br>第23章 通过地理位置定位 447<br>第24章 查询设备的方向和加速 455<br>第25章 播放音效：移动设备的罩门 463<br>第26章 使用HTML5游戏引擎 477<br>第27章 瞄准应用商店 489<br>第28章 挖掘下一个热点 503</p>
<h2 id="《HTML5游戏开发进阶指南》"><a href="#《HTML5游戏开发进阶指南》" class="headerlink" title="《HTML5游戏开发进阶指南》"></a>《HTML5游戏开发进阶指南》</h2><p>本书介绍了HTML5 游戏开发的一般过程和技巧。全书共分12 章，第1 章介绍了本书相关的HTML5的诸多新特性，包括在canvas 上绘图、播放声音等，另外还引入了子画面页的概念；第2<del>4 章利用Box2D物理引擎开发了一款非常类似于《愤怒的小鸟》的游戏，全面介绍了物理引擎的概念，以及在游戏中使用物理引擎的方法，这一部分还引入了视差滚动技巧，以实现某种伪3D 效果；第5</del>10 章开发了一款简化版的《红色警戒》游戏，这一部分涉及了相当多的内容，包括地图的制作，建筑与单位的设定、绘制，玩家与单位的互动，触发器与剧情的编写，路径规划算法等；第11、12 章利用nodeJS 和WebSocket 开发了《红色警戒》游戏的多人对战模式，这一部分的主要问题是保持游戏在多个玩家的浏览器中的状态一致。</p>
<p>对于熟悉前端开发，想用前端技术做一些更酷的事情，却又不知如何下手的人，这是一本可多得的好书。</p>
<p>作者简介:<br>Aditya Ravi Shankar是在1993年第一次接触计算机之后开始学习编程的。当时还没有互联网和在线教程，他在当地图书馆找到一本编程书籍，并通过艰苦地重写书中的代码，编写了他的第一个GW-BASIC游戏。 2001年，他从印度理工学院毕业之后，做了近10年的软件顾问，为投资银行和大型企业开发交易与分析系统。最后，他离开了这个行业，这样他可以专注于从事自己所热爱的游戏开发。 从此，作为一个自信的极客，他使用各种新的语言和技术来进行自己的项目和实验，包括HTML5。在这期间，他独立在HTML5平台上重建了著名的命令与征服RTS游戏，他也因此而著名。 除了编程，Aditya还喜欢桌球、萨尔萨舞，以及学习发挥潜意识。他在其个人站点（<a target="_blank" rel="noopener" href="http://www.adityaravishankar.com)中有一些关于游戏编程、个人发展和桌球的文章./">www.adityaravishankar.com）中有一些关于游戏编程、个人发展和桌球的文章。</a> 当他不忙于写作，或者… Aditya Ravi Shankar是在1993年第一次接触计算机之后开始学习编程的。当时还没有互联网和在线教程，他在当地图书馆找到一本编程书籍，并通过艰苦地重写书中的代码，编写了他的第一个GW-BASIC游戏。 2001年，他从印度理工学院毕业之后，做了近10年的软件顾问，为投资银行和大型企业开发交易与分析系统。最后，他离开了这个行业，这样他可以专注于从事自己所热爱的游戏开发。 从此，作为一个自信的极客，他使用各种新的语言和技术来进行自己的项目和实验，包括HTML5。在这期间，他独立在HTML5平台上重建了著名的命令与征服RTS游戏，他也因此而著名。 除了编程，Aditya还喜欢桌球、萨尔萨舞，以及学习发挥潜意识。他在其个人站点（<a target="_blank" rel="noopener" href="http://www.adityaravishankar.com)中有一些关于游戏编程、个人发展和桌球的文章./">www.adityaravishankar.com）中有一些关于游戏编程、个人发展和桌球的文章。</a> 当他不忙于写作，或者不用专注于自己的项目时，他也会做一些咨询工作，以帮助企业来使用新的软件产品。 译者简介 谢光磊，中科院某所硕士研究生在读。热爱生活，热爱Web前端开发，热爱WebGL技术。理想是成为一流的游戏设计师。个人站点:<a target="_blank" rel="noopener" href="http://www.xieguanglei.com./">www.xieguanglei.com。</a> 技术审核者简介 Shane Hudson是一位自由的Web站点开发者，专注于最前沿的Web技术和Web标准。他曾经参与过大量交互式Web站点的工作并辅助项目的开发，具有丰富的使用JavaScript的经验。他对人工智能和计算机视觉具有浓厚的兴趣，他的E-mail地址是shane@shanehud son.net。 Shane说：“Shankar撰写的这本书正是业界所需要的：关于如何有效并熟练地编写JavaScript（和Node.js）。这本书教你如何编写游戏，但它并不仅仅是一本关于游戏开发的书，还是一本教你如何编写高质量JavaScript代码的书。” Josh Robinson是一位专注于前沿技术的编程专家和自由开发者。他对编程的热爱最初来自一台二手的Commodore 64计算机屏幕上的蓝色荧光，后来他选择现代Web开发作为自己的职业。2006年，他供职于一家网络电话供应商之时，发现了Ruby和Ruby on Rails的优雅之处，并开发了若干个gem，其中包括流行的countries gem。你可以通过JoshRobinson.com或者Twitter: @JoshRobinson联系到他。 Josh Robinson说：“有了这本书，你就能像一个Boss一样写代码了。” Syd Lawrence经营并管理着We Make Awesome Sh，他是Twilio的开发者和传播者。他获得过很多赞誉。Geek.com曾经将他形容为现代的超级英雄，而The Next Web曾经说他是社交网络的领袖。</p>
<p>目录:<br>第1章 HTML5与JavaScript概要 1<br>第2章 创建基本的游戏世界 21<br>第3章 物理引擎基础 43<br>第4章 物理引擎集成 72<br>第5章 创建即时战略游戏世界 111<br>第6章 加入单位 138<br>第7章 单位智能移动 184<br>第8章 添加更多的游戏元素 220<br>第9章 添加武器和战斗 261<br>第10章 完成单人战役 296<br>第11章 WebSocket与多人对战模式 331<br>第12章 多人对战游戏操作 360</p>
<h1 id="H5-Websocket"><a href="#H5-Websocket" class="headerlink" title="H5 Websocket"></a>H5 Websocket</h1><h2 id="《HTML5-WebSocket权威指南》"><a href="#《HTML5-WebSocket权威指南》" class="headerlink" title="《HTML5 WebSocket权威指南》"></a>《HTML5 WebSocket权威指南》</h2><p>《HTML5 WebSocket权威指南》是HTML5 WebSocket领域最权威的著作之一，它系统、全面地讲解了HTML5 WebSocket的各个方面，是Web开发人员和架构师学习WebSocket的最佳选择。书中讨论了基于WebSocket的架构师如何减少不必要的网络开销和延迟层，如何通过WebSocket对广泛使用的协议（如XMPP和STOMP）进行分层，如何保护WebSocket连接和在企业部署基于 WebSocket的应用程序。主要内容包括： WebSocket API和协议、WebSocket协议通信的例子、WebSocket的安全性和企业部署、内置即时通信和聊天应用程序的WebSocket与XMPP、通过WebSocket的STOMP实现发布&#x2F;订阅消息传递协议，以及用远程帧缓冲协议实现VNC。</p>
<p>作者简介:<br>peter moskovi… vanessa wang，html5领域的布道者和实践者，热衷于html5和websocket的研究，是旧金山html5用户组的联合组织者，负责组织html5和相关技术的社区活动．vanessa目前是kaazing公司的技术出版经理，15年来一直坚持撰写技术文章。kaazing是一家软件公司，旨在使用新的websocket标准改进企业和客户通过web通信的方式。写作之余，她喜欢打跆拳道、骑自行车和拉大提琴。 frank salim，google公司资深软件工程师，拥有pomona学院的计算机科学学位。曾经是kaazing公司最早的工程师之一，协助建立了websocket网关和客户端策略。2010年，frank与人合著了《pro html5 programming》(apress)一书。编程之余，他喜欢阅读、绘画和单排轮滑。 peter moskovits，kaazing公司实时解决方案负责人。peter与架构师和开发人员社区紧密协作，构建和部署最好的web解决方案。在加入kaazing之前，peter担任过多种产品的管理工作，并曾经负责oracie的门户产品策略．peter经常在会议和业界活动上发表演讲，包括goto、yow!、javaone、oracle openworld、html5deconf、devcon5和各种用户组会议。他还是《oracle webcenter 11g handbook》的合著者。</p>
<p>目录:<br>第1章　html5 websocket简介 &#x2F; 1<br>第2章　websocket api &#x2F; 16<br>第3章　websocket协议 &#x2F; 38<br>第4章　用xmpp构建websocket上的即时消息和聊天 &#x2F; 66<br>第5章　用stomp通过websocket传递消息 &#x2F; 90<br>第6章　用远程帧缓冲协议实现vnc &#x2F; 115<br>第7章　websocket安全性 &#x2F; 138<br>第8章　部署的考虑 &#x2F; 159</p>
<h1 id="《HTML5与WebGL编程》"><a href="#《HTML5与WebGL编程》" class="headerlink" title="《HTML5与WebGL编程》"></a>《HTML5与WebGL编程》</h1><p>本书介绍如何使用HTML5相关技术，如CSS3和新兴的Web图形标准WebGL，来创建具有高性能、震撼视觉效果的3D Web应用。书中内容分为两部分——基础知识和应用开发技术，不但提供了全面的理论介绍，还包括从简单3D产品可视化到沉浸式游戏及交互训练系统的实践，适合转向3D开发的Web开发人员阅读。</p>
<p>作者简介:<br>作者简介： Tony Parisi Web 3D标准的先驱、企业家、CTO、架构师。VRML和X3D语言的联合作者，这两者已经成为Web 3D图形的ISO标准。另著有《WebGL入门指南》。 译者简介： 潘征 网名此方，目前就职于百度FEX前端研发团队，专注前端复杂应用研发，<a target="_blank" rel="noopener" href="http://h5.baidu.com平台研发团队核心成员之一./">http://h5.baidu.com平台研发团队核心成员之一。</a></p>
<p>目录:<br>第1章　绪论　　2<br>第2章　WebGL：实时3D渲染　　13<br>第3章　Three.js——一款JavaScript 3D引擎　　35<br>第4章　Three.js中的图形和渲染　　49<br>第5章　3D动画　　81<br>第6章　CSS3：高级页面效果　　110<br>第7章　Canvas：通用2D绘图　　137<br>第8章　3D内容制作流程　　156<br>第9章　3D引擎和框架　　190<br>第10章　开发一个简单的3D应用　　209<br>第11章　开发一个3D环境　　233<br>第12章　开发移动3D应用　　278</p>
<h1 id="《PWA实战：面向下一代的Progressive-Web-APP》"><a href="#《PWA实战：面向下一代的Progressive-Web-APP》" class="headerlink" title="《PWA实战：面向下一代的Progressive Web APP》"></a>《PWA实战：面向下一代的Progressive Web APP》</h1><p>Progressive Web App（PWA）是由谷歌提出的一整套技术解决方案，它致力于为 Web 提供出色的用户体验，并完美体现了渐进增强原则。作为为数不多的实战入门用书，《PWA 实战：面向下一代的Progressive Web App》旨在通过大量清晰示例来介绍 PWA 的主要特性。全书一共由五个部分组成：第一部分介绍 PWA 的概念及解锁 PWA 应用的关键—Service Worker，第二部分介绍如何构建响应速度更快的 Web 应用，第三部分介绍如何构建更吸引人的 Web 应用，第四部分介绍如何构建应对各种复杂网络的 Web 应用，第五部分介绍 PWA 的发展前景。</p>
<p>《PWA实战：面向下一代的Progressive Web APP》适合Web 开发人员及前端技术爱好者阅读，稍有 HTML、CSS 和JavaScript 基础学习效果更佳。</p>
<p>作者简介:<br>Dean Alan Hume 是一名作者、博主、软件开发者，同时也是谷歌开发专家。他写过很多文章，并发表过几十篇演讲，同时还是Fast ASP.NET Websites（Manning, 2013）和Building Great Startup Teams（Blurb, 2017） 的作者。他还为A Career On The Web: On the Road to Success（Smashing Magazine, 2015）一书做出了贡献。作为一名软件开发人员，他对Web 性能调优充满热情，并且经常在他的博客 deanhume.com 上撰写软件开发相关的文章。他的爱好广泛，包括冲浪、滑雪、拳击和参加三项全能运动。目前，他正在学习啤酒酿造。</p>
<p>目录:<br>第1章 理解PWA 3<br>第2章 构建PWA的第一步 16<br>第3章 缓存 31<br>第4章 拦截网络请求 52<br>第5章 观感 69<br>第6章 推送通知 84<br>第7章 离线浏览 103<br>第8章 构建更富弹性的应用 116<br>第9章 保持数据同步 126<br>第10章 流式数据 141<br>第11章 PWA故障排除 153<br>第12章 前程似锦 164</p>
<h1 id="《WebAssembly原理与核心技术》"><a href="#《WebAssembly原理与核心技术》" class="headerlink" title="《WebAssembly原理与核心技术》"></a>《WebAssembly原理与核心技术》</h1><p>WebAssembly是栈式虚拟机和字节码技术的*新应用，在Web开发、后端开发、区块链等领域大显身手，越来越受欢迎。</p>
<p>本书是WebAssembly入门和进阶的必读书，它不仅对WebAssembly的工作原理、核心技术和规范进行了全面的剖析和解读，而且给出了实现WebAssembly解释器和AOT编译器的思路和代码。</p>
<p>本书共14章，分为四个部分：</p>
<p>第壹部分 WebAssembly概述（第1章）</p>
<p>主要介绍了WebAssembly的概念、发展历史以及阅读本书需要做的准备工作。</p>
<p>第二部分 二进制和文本格式（第2~4章）</p>
<p>详细讲解了WebAssembly的二进制格式、文本格式以及指令集。</p>
<p>第三部分 虚拟机和解释器（第5~11章）</p>
<p>详细讲解了WebAssembly的解释器和虚拟机的工作原理以及实现思路，包括操作数栈、内存、函数调用、控制指令、链接和实例化、错误处理和验证等。</p>
<p>第四部分 WebAssembly进阶（第12~14章）</p>
<p>深入地讲解了AOT编译器的实现思路和WebAssembly的提案等内容。</p>
<p>通过阅读本书，读者不仅可以理解WebAssembly核心原理，还可以学习如何实现WebAssembly解释器和AOT编译器。即收获了“鱼”，又学会了“渔”。</p>
<p>作者简介:<br>张秀宏 服务器开发工程师，在游戏服务器、区块链等领域有多年的开发和架构经验。曾在EA、乐元素、比特大陆等公司担任高级服务器工程师，对Java、Go、Lua等语言以及高级语言虚拟机有非常深入的研究。 曾独立撰写畅销书《自己动手写Java虚拟机》和《自己动手实现Lua：虚拟机、编译器、标准库》，广受读者好评。</p>
<p>目录:<br>第1章　 Wasm介绍3<br>第2章　二进制格式17<br>第3章　指令集51<br>第4章　文本格式71<br>第5章　操作数栈85<br>第6章　内存107<br>第7章　函数调用（上）119<br>第8章　控制指令137<br>第9章　函数调用（下）155<br>第10章　链接和实例化171<br>第11章　错误处理和验证185<br>第12章　编译为Wasm203<br>第13章　AOT编译器217<br>第14章　提案和前景235</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://mindcons.cn/2022/10/14/web/HTML/Books/HTML5%E4%B9%A6%E7%B1%8D/" data-id="cldol83fk00383cx6edp13luh" data-title="HTML书籍" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E4%B9%A6%E7%B1%8D/" rel="tag">书籍</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-web/案例实战/页面效果" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2022/10/08/web/%E6%A1%88%E4%BE%8B%E5%AE%9E%E6%88%98/%E9%A1%B5%E9%9D%A2%E6%95%88%E6%9E%9C/" class="article-date">
  <time class="dt-published" datetime="2022-10-07T23:15:24.000Z" itemprop="datePublished">2022-10-08</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2022/10/08/web/%E6%A1%88%E4%BE%8B%E5%AE%9E%E6%88%98/%E9%A1%B5%E9%9D%A2%E6%95%88%E6%9E%9C/">页面效果</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="实现业务需求"><a href="#实现业务需求" class="headerlink" title="实现业务需求"></a>实现业务需求</h1><h2 id="传统基于操作DOM的方式"><a href="#传统基于操作DOM的方式" class="headerlink" title="传统基于操作DOM的方式"></a>传统基于操作DOM的方式</h2><p>1.想操作谁就先获取谁</p>
<p>2.给某元素绑定某事件</p>
<p>3.做该做的事情</p>
<ul>
<li>在事件触发的时候修改元素的样式</li>
<li>动态创建一些结构</li>
<li>增加一些判断，判断在什么情况下，要做上面的这些事</li>
<li>增加一些循环，重复做点事情</li>
<li>…</li>
</ul>
<h2 id="数据驱动"><a href="#数据驱动" class="headerlink" title="数据驱动"></a>数据驱动</h2><ul>
<li>Vue&#x2F;React</li>
</ul>
<h1 id="手风琴效果"><a href="#手风琴效果" class="headerlink" title="手风琴效果"></a>手风琴效果</h1><h1 id="点击显示与隐藏"><a href="#点击显示与隐藏" class="headerlink" title="点击显示与隐藏"></a>点击显示与隐藏</h1><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> cart = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.box&#x27;</span>)</span><br><span class="line"><span class="keyword">let</span> detail = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.detail&#x27;</span>)</span><br><span class="line"></span><br><span class="line">cart.<span class="property">onclick</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> show = detail.<span class="property">style</span>.<span class="property">display</span></span><br><span class="line">    <span class="keyword">if</span> (show === <span class="string">&#x27;none&#x27;</span>) &#123;</span><br><span class="line">        detail.<span class="property">style</span>.<span class="property">display</span> = <span class="string">&#x27;block&#x27;</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        detail.<span class="property">style</span>.<span class="property">display</span> = <span class="string">&#x27;none&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;./style.css&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box&quot;</span> <span class="attr">id</span>=<span class="string">&quot;box&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;cart&quot;</span>&gt;</span>购物车<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;detail&quot;</span> <span class="attr">id</span>=<span class="string">&quot;detail&quot;</span> <span class="attr">style</span>=<span class="string">&quot;display: none&quot;</span>&gt;</span>购物车的相关信息<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;./index.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>



<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">* &#123;</span><br><span class="line">    <span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">flex-direction</span>: column;</span><br><span class="line">    <span class="attribute">align-items</span>: center;</span><br><span class="line">    <span class="attribute">justify-content</span>: center;</span><br><span class="line"></span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100vh</span>;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">overflow</span>: hidden;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">300px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">1px</span> solid rebeccapurple;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.box</span> <span class="selector-tag">span</span> &#123;</span><br><span class="line">    <span class="attribute">cursor</span>: pointer;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.box</span> <span class="selector-tag">span</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">    <span class="attribute">background-color</span>: antiquewhite;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.detail</span> &#123;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: blueviolet;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


      
    </div>
    <footer class="article-footer">
      <a data-url="https://mindcons.cn/2022/10/08/web/%E6%A1%88%E4%BE%8B%E5%AE%9E%E6%88%98/%E9%A1%B5%E9%9D%A2%E6%95%88%E6%9E%9C/" data-id="cldol83f5002h3cx64w1r8ihu" data-title="页面效果" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-web/JavaScript/js从基础到进阶" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2022/09/16/web/JavaScript/js%E4%BB%8E%E5%9F%BA%E7%A1%80%E5%88%B0%E8%BF%9B%E9%98%B6/" class="article-date">
  <time class="dt-published" datetime="2022-09-16T01:58:44.000Z" itemprop="datePublished">2022-09-16</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/javascript/">javascript</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2022/09/16/web/JavaScript/js%E4%BB%8E%E5%9F%BA%E7%A1%80%E5%88%B0%E8%BF%9B%E9%98%B6/">JavaScript从基础到进阶</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="了解前端与准备"><a href="#了解前端与准备" class="headerlink" title="了解前端与准备"></a>了解前端与准备</h1><h2 id="前端发展史：全面拥抱大前端时代"><a href="#前端发展史：全面拥抱大前端时代" class="headerlink" title="前端发展史：全面拥抱大前端时代"></a>前端发展史：全面拥抱大前端时代</h2><h3 id="web1-0时代：静态网页"><a href="#web1-0时代：静态网页" class="headerlink" title="web1.0时代：静态网页"></a><code>web1.0</code>时代：静态网页</h3><ul>
<li>1989年，在欧洲粒子物理实验室<code>Tim Berners—Lee</code>（伯纳斯·李）提出：个人计算机上访问大量的科研文献，并建议在文档中链接其他文档&#x3D;&gt;“<strong>WEB原型</strong>”</li>
<li>1994年，万维网(<code>W3C</code>) 成立，网景推出了第一版<code>Navigator</code>浏览器, <code>HTML</code>也发布了第二代版本，<code>TIM</code>的好基友也设计了<code>CSS</code>…所以我们把1994年称为“<strong>前端历史的起点</strong>”<ul>
<li><code>H5C3</code>去官网看：<a target="_blank" rel="noopener" href="https://www.w3.org/2002/03/tutorials.html">Tutorials and Courses - W3C</a></li>
</ul>
</li>
<li>1995年，网景工程师<code>Brendan Eich</code>花 了10天时间设计了<code>JavaScript</code>语言, 1996年微软发布了<code>JScript</code> (和<code>JS</code>有一些差异)，同时拉开了<code>Navigator和Internet Explorer</code> 浏览器大战的序幕(到2002年<code>IE</code>完胜，占据全世界96%的市场份额)。<ul>
<li>后期浏览器兼容性问题的起源</li>
</ul>
</li>
<li>为了让各大浏览器统一编程规范，1997年6月<code>ECMA</code> (欧洲计算机制造联合会)以<code>JavaScript</code>语言为基础制定了<code>ECMAScript</code>标准规范<code>ECMA-262</code>，从此浏览器厂商都是按照这个规范来开发自己的浏览器产品。</li>
<li>1999年12月<code>ES3</code>发布，到2011年6月<code>ES5</code>发 布(2007年 的<code>ES4</code>夭折:改动太大)，<code>ES3</code>占据了10年历程， 也是<code>JS</code>语言的基础。2015年6月<code>ES6</code>发布 (但是由于之后规定每年发布一个新的版本，所以后改名<code>ES2015</code>: <code>let、 const、 Arrow function、 Class、 Module、Promise、Iterator、 Generator、 Set、 Map、 async、 Symbol、 Proxy</code>…. )，2016年6月对2015版本增强的2016版本发布，此后相继有<code>ES2017</code>、<code>ES2018</code>…</li>
<li>同样<code>HTML</code>也在2014年10月发布了第五代版本，2011年<code>CSS</code>也发布了第三代版本，此时前端基础的技术栈就稳固下来。</li>
</ul>
<h3 id="web2-0时代：动态网页的崛起"><a href="#web2-0时代：动态网页的崛起" class="headerlink" title="web2.0时代：动态网页的崛起"></a><code>web2.0</code>时代：动态网页的崛起</h3><p>1995年之前，<code>JS</code>只用来做一些简单的<code>DOM</code>修改，<code>WEB</code> 页面都是静态的(显示静态文本和图片)，为了让<code>WEB</code>页面更具备活力(例如:动态展示数据)，1995年<code>PHP</code>诞生， 1996年<code>JSP</code>诞生，1996 年<code>ASP</code>诞生，2002年<code>ASP.NET</code>诞生…这些服务器端页面技术实现了<code>WEB</code>页面的动态化，从此<code>WEB2.0</code>时代到来。</p>
<h4 id="服务端渲染"><a href="#服务端渲染" class="headerlink" title="服务端渲染"></a>服务端渲染</h4><ul>
<li><p>服务器接收到请求后</p>
<ul>
<li>1.找到需要访问的资源文件</li>
<li>2.从数据库中基于<code>SQL</code>语句，查询出需要的数据</li>
</ul>
</li>
<li><p>数据库存放的是数据</p>
</li>
<li><p>服务器渲染:把页面代码和数据结合在一起，生成有结构样式和数据的页面，把渲染完成的页面返回给客户端浏览器</p>
</li>
<li><p>前端开发：(网页制作)</p>
<ul>
<li>写页面和样式</li>
</ul>
</li>
<li><p>后台开发:</p>
<ul>
<li>1.会写数据绑定的代码</li>
<li>2.操作数据库</li>
<li>3.操作服务器</li>
<li>4.数据结构和算法</li>
<li>5.服务器分布式(缓存和并发)</li>
<li>..</li>
</ul>
</li>
<li><p>弊端</p>
<ul>
<li>1.服务器承受压力过大</li>
<li>2.同步非异步刷新<ul>
<li>页面中某一个数据想要更改，只能重新刷新整个页面(全局刷新)</li>
</ul>
</li>
<li>3.不利于团队协作开发<ul>
<li>后台开发的任务量过大(网页制作任务量少) ，代码过于臃肿，两种角色很难实现同时任务开发</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="AJAX时代"><a href="#AJAX时代" class="headerlink" title="AJAX时代"></a><code>AJAX</code>时代</h3><blockquote>
<p>详见《Ajax&amp;Axios》</p>
</blockquote>
<p>[ <code>AJAX</code>时代: 前后端分离的雏形，异步渲染大显神通]</p>
<p>在Web最初发展的阶段，前端页面要想获取后台信息需要刷新整个页面，这是很糟糕的用户体验。<code>Google</code>分 别在<code>2004</code>年和<code>2005</code>年先后发布了两款重量级的Web产品: <code>Gmail</code>和<code>Google Map</code>。<br>这两款<code>Web</code>产品都大量使用了<code>AJAX</code>技术，不需要刷新页面就可以使得前端与服务器进行网络通信，所以<code>AJAX</code>是一项革命性的技术，颠覆了用户体验。</p>
<p>到2013年&#x2F;2014年，随着移动端<code>H5</code>的崛起，高性能的WEB体验是重中之重，国内大部分项目都已经改为“前后端分离”模式，这也奠定了前端开发二分天下的局面。导致到后期，跨域策略请求方案(<code>JSONP、 IFRAME、 CORS、DOMAIN、POXY、SCOKET</code>… )以及FETCH等 新通信方案不断的崛起。</p>
<h4 id="客户端渲染"><a href="#客户端渲染" class="headerlink" title="客户端渲染"></a>客户端渲染</h4><ul>
<li>服务器一般有多个<ul>
<li><code>WEB</code>服务器：<ul>
<li>接受客户端请求，把找到的静态资源文件返回给客户端</li>
</ul>
</li>
<li>数据服务器：<ul>
<li>客户端基于<code>AJAX ( JSONP、CROSS、 WEBPACK PROXY... )</code>或者<code>FETCH</code>，向数据服务器发送请求</li>
<li>数据服务器操作数据库并向客户端返回数据</li>
<li>客户端获取数据后，基于模板字符串等手段，把数据拼成需要展示的结构，放到容器中</li>
</ul>
</li>
<li>资源服务器<ul>
<li>一般放图片资源</li>
</ul>
</li>
</ul>
</li>
<li>前端工程师<ul>
<li>1.写页面<code>H5/CSS3</code></li>
<li>2.写人机交互<code>js</code>及框架插件</li>
<li>3.数据请求和绑定<code>ajax</code>….</li>
<li>4.操作系统<code>linux</code></li>
</ul>
</li>
<li>后台<ul>
<li>1.业务逻辑处理</li>
<li>2.数据处理(数据库)</li>
<li>3.数据结构和算法(服务器负载均衡)</li>
<li>4.操作系统</li>
</ul>
</li>
</ul>
<h3 id="App"><a href="#App" class="headerlink" title="App"></a><code>App</code></h3><h4 id="原生APP-Native-App"><a href="#原生APP-Native-App" class="headerlink" title="原生APP ( Native App )"></a>原生<code>APP</code> ( <code>Native App</code> )</h4><p><code>object-c / java-native /swift</code></p>
<p>优势:</p>
<ul>
<li>1.性能好</li>
<li>2.功能强大(可以调用手机软件硬件)</li>
</ul>
<p>弊端:</p>
<ul>
<li>1.不能跨平台，成本大</li>
<li>2.不能同步</li>
</ul>
<h4 id="Web-App-H5页面"><a href="#Web-App-H5页面" class="headerlink" title="Web App ( H5页面)"></a>Web App ( H5页面)</h4><p>响应式布局开发</p>
<blockquote>
<p>浏览器</p>
<blockquote>
<p>网址</p>
<blockquote>
<p><code>HTML5</code>页面</p>
<ul>
<li>优势<ul>
<li>1.跨平台</li>
<li>2.及时更新</li>
</ul>
</li>
<li>弊端:<ul>
<li>1.性能相对不好</li>
<li>2.功能没有那么强大</li>
</ul>
</li>
</ul>
</blockquote>
</blockquote>
</blockquote>
<h4 id="Hybrid混合APP开发（99-99999-）"><a href="#Hybrid混合APP开发（99-99999-）" class="headerlink" title="Hybrid混合APP开发（99.99999%）"></a><code>Hybrid</code>混合<code>APP</code>开发（99.99999%）</h4><blockquote>
<p><code>Native App</code>壳子（安卓&#x2F;<code>IOS</code>写壳子）</p>
<blockquote>
<p><code>webview</code> (<code>webkit</code>内核)</p>
<p>通过<code>JSBridge</code>，可以调用壳子的方法</p>
<blockquote>
<p><code>H5</code></p>
<p>壳子都不用原生（安卓&#x2F;<code>IOS</code>）写了</p>
<ul>
<li><code>React-Native</code></li>
<li><code>Flutter</code><ul>
<li><code>Dart</code>语言</li>
</ul>
</li>
<li><code>uni-app</code><ul>
<li>一套代码，啥平台都有</li>
</ul>
</li>
</ul>
</blockquote>
</blockquote>
</blockquote>
<h4 id="NODE崛起"><a href="#NODE崛起" class="headerlink" title="NODE崛起"></a><code>NODE</code>崛起</h4><p>[ <code>NODE</code>崛起:<code> JS</code>成为最热门全栈开发技术] I</p>
<p>2009年，<code>Ryan</code>利 用<code>Chrome</code>的<code>V8</code>引擎打造了基于事件循环的异步I&#x2F;0框架-<code>Node.js</code>诞生。</p>
<p><code>NODE</code>特点：基于事件循环的异步I&#x2F;0框架，能够提高1&#x2F;0吞吐量;单线程运行，能够避免了多线程变量同步的问题；使得<code>JS</code>可以编写后台代码，前后端编程语言统一。<br>2010年1月，<code>NPM</code>作为<code>Node. js</code>的包管理系统首次发布。前<code>NPM</code> 具有40万左右的模块，是世界上最大的包模块管理系统。</p>
<h4 id="前端未来发展预估"><a href="#前端未来发展预估" class="headerlink" title="前端未来发展预估"></a>前端未来发展预估</h4><ul>
<li>A：小程序是企业产品的重要组成部分</li>
<li>B： <code>IOS</code>和安卓开发逐步被淘汰</li>
<li>C： <code>VR/AI</code>最终转为B端(<code>JS</code>，尤其是<code>webGL</code>、<code>canvas</code>、<code>three. js</code>等是<code>3D</code>虚拟交互的主要实现技术)</li>
<li>D：<code>H5</code>游戏&#x2F;小游戏的热度会提高(白鹭<code>JS</code>引擎)</li>
<li>E：<code>NODE.JS</code>还会迎来下一个高潮</li>
<li>…</li>
</ul>
<p>大前端时代已经到来!</p>
<h3 id="当下前端开发的技术体系"><a href="#当下前端开发的技术体系" class="headerlink" title="当下前端开发的技术体系"></a>当下前端开发的技术体系</h3><h4 id="第一阶段-HTML-5-CSS-3"><a href="#第一阶段-HTML-5-CSS-3" class="headerlink" title="第一阶段: HTML (5) + CSS (3) "></a>第一阶段: <code>HTML (5) + CSS (3) </code></h4><p>技术要点：<code>HTML5</code>、<code>CSS3</code>、响应式布局(<code>rem/flex/@media</code>等)、<code>Hybrid</code>混合<code>APP</code>开发、微信二次开发、小程序开发、<code>ReactNative</code>开发、<code>Flutter</code>、<code>uni-app</code>…<br>特殊说明:	</p>
<ul>
<li><code>Hybrid</code>、微信开发、小程序开发、<code>React Native</code>开发等，这些都需要有<code>JS</code>和框架编程的基础;	</li>
<li><code>H5</code>不仅仅是标签，还需要掌握常用的<code>API</code>以及<code>video</code>和<code>audio</code>等,例如：<code>locaIstorage</code>、<code>webscoket</code>、<code>getCurrentPosition</code>等;</li>
</ul>
<p>书籍：</p>
<ul>
<li><p>《<code>HTML5</code>》秘籍</p>
</li>
<li><p>《<code>CSS</code>权威指南》</p>
</li>
<li><p>《图解<code>CSS3</code>》</p>
</li>
<li><p>《<code>React Native</code>》入门与实战</p>
</li>
<li><p>…</p>
</li>
</ul>
<h4 id="第二阶段-JS包括ES6核心原理"><a href="#第二阶段-JS包括ES6核心原理" class="headerlink" title="第二阶段: JS包括ES6核心原理"></a>第二阶段: JS包括ES6核心原理</h4><p>JS堆栈内存、闭包作用域、浏览器词法解析(v8渲染机制原理)、面向对象和THIS处理(主要是独立封装组件和插件，研究常用类库的源码) ;</p>
<p>ES6基础语法(包括class 类的继承封装和多态)、ES6中 的Promise (及Promise A+规范)、Generator生 成器函数等深入用法;</p>
<p>同步异步编程(包括运行机制和微任务、宏任务，以及实战应用)</p>
<p>常用的编程思想和设计模式:函数的防抖和节流、柯理化函数、惰性函数、单例设计模式、发布订阅模式、Promise设计模式等</p>
<p>DOM性能优化(重排和重绘的优化)、DOM事件</p>
<p>前端编程常规算法:去重、冒泡排序、插入排序、快速排序、递归等</p>
<p>书籍：</p>
<ul>
<li>《JavaScript权威指南》</li>
<li>《你不知道的JavaScript》</li>
<li>《JavaScript高级程序设计》</li>
<li>《ES6标准入门》</li>
</ul>
<h4 id="第三阶段-AJAX和HTTP"><a href="#第三阶段-AJAX和HTTP" class="headerlink" title="第三阶段: AJAX和HTTP"></a>第三阶段: AJAX和HTTP</h4><p>技术要点: ajax原理、ajax异步解决方案(promise)、axios; (包括自己封装promise版ajax库)、fetch及封装处理、jquery中的ajax操作和库的封装等</p>
<p>跨域解决方案及实现原理: jsonp、 cors、 webpack proxy (scoket.io)、document. domain、window. name+ iframe、postMessage 等</p>
<p>HTTP报文(常用的响应请求头实战应用技巧)、HTTP (TCP) 传输流程(包括三次握手四次挥手及TCP底层协议)、HTTP1和HTTP2的 区别、HTTP和HTTPS的区别等</p>
<p>特殊说明: HTTP是目前优秀公司重点考察的知识点，因为传统前端代码优化，性能上提高较小，HTTP相关优化手段是性能提高的重要方法(例如: 304缓 存、DNS缓存、减少HTTP传输次数和大小、HTTPS的加密等)，这块是一个重点!</p>
<p>书籍：</p>
<ul>
<li>《图解HTTP》</li>
<li>…</li>
</ul>
<h4 id="第四阶段-框架开发"><a href="#第四阶段-框架开发" class="headerlink" title="第四阶段:框架开发"></a>第四阶段:框架开发</h4><p>技术要点:目前市场上的项目大部分都是框架开发的，所以框架学习非常的重要，目前主流框架是vue、react、 angular， angular现在 用的越来越少（国内），一般都是老项目使用这个技术在维护(angular1. 0版本居多)</p>
<p>vue全家桶: vue (MWVM实 现的原理以及一些语法实现的原理)、vue- router (HASH路由实现的原理)、vuex (掌握原理)、axios、 vue-cli (需要能够修改脚手架的webpack配置项)、iview&#x2F;vux&#x2F;vue element等常用框架的使用等</p>
<p>react全家桶: create-react-app (能够修改webpack的配置项)、react (掌握虚拟DOM渲染原理，掌握DOM-DIFF原理，掌握INDEX索引对比机制，掌握MVC实现的原理)、react-dom&#x2F;react-native、 react-router、 react-redux&#x2F;dva&#x2F;mobx (掌握原理， 自己可以基于原生JS写一套类似的插件、发现里面的一些不足点)、antd (最好可以自己封装一些基础的组件)等</p>
<p>书籍：</p>
<ul>
<li>《React学习手册》</li>
<li>《深入浅出React Redux》</li>
<li>…</li>
</ul>
<h4 id="第五阶段-辅助技能"><a href="#第五阶段-辅助技能" class="headerlink" title="第五阶段:辅助技能"></a>第五阶段:辅助技能</h4><p>技术要点</p>
<p>Webpack:掌握常用的脚手架使用和修改，会一些基础的webpack搭建</p>
<p>Git: 熟练掌握团队协作开发中代码版本管控技项，熟悉常用的操作命令</p>
<p>Node:掌握基础的API、掌握express&#x2F;koa&#x2F;egg等框架、可以编写伪API,可以基于node做跨域处理等，有精力的同学可以研究一下数据库操作等（使用Sequelize ORM框架）</p>
<p>Canvas:一些公司要求会可视化，需要掌握canvas&#x2F;webGI&#x2F;d3等,这个对于数学结构、算法等有一定的要求;这方面不好的，可以先掌握一些基础的操作,掌握echarts的用法等;</p>
<p>书籍：</p>
<ul>
<li>《了不起的Node.js》</li>
<li>《HTML5游戏开发案例教程》</li>
<li>《精通Git》</li>
<li>《Linux基础学习篇》</li>
</ul>
<h2 id="推荐的学习方式"><a href="#推荐的学习方式" class="headerlink" title="推荐的学习方式"></a>推荐的学习方式</h2><ul>
<li>温故而知新,可以为师矣:笔记+复习</li>
<li>知其然而知其所以然:深挖底层原理</li>
<li>学而不思则罔 ,思而不学则殆</li>
<li>实战很重要:薪资和你敲过的代码成正比</li>
<li>多读书:致其知、 诚其意、正其心、修其身，然后家齐 ,国治,而后天下平</li>
<li>学习，学前端，什么比较重要呢？是编程（思想）比较重要？基础知识比较重要？还是原理比较重要？还是实战比较重要？都重要。确实也是都重要，但是自己不要把它们区分开，因为都是相辅相成的。只有你的基础知识扎实，你才能够玩得懂源码（原理）；只有基础知识扎实，原理玩透了，你慢慢才能养成编程思想；编程思想再不断去练习，你才能够去做出案例。这是一个相辅相成的过程，只有案例做多了，你才有组件、插件封装的思想，才能够有写底层、写核心，给别人用的这样一个能力；在练习这个能力的时候，又是不断的在巩固基础知识和深入理解的过程。</li>
<li>那么什么样才是基础知识扎实呢？<ul>
<li>笔记+复习，每天抽出两到三小时</li>
<li>随便给两个点，都可以在三句话之内，不牵强的 说出它们之间的关联（要有整个知识脉络的体系）</li>
</ul>
</li>
</ul>
<h2 id="前端开发需要掌握的IDE"><a href="#前端开发需要掌握的IDE" class="headerlink" title="前端开发需要掌握的IDE"></a>前端开发需要掌握的IDE</h2><p>VSCODE</p>
<p>常用插件</p>
<ul>
<li>汉化（看个人）</li>
<li>代码格式化：Beautify（shift + alt + F）</li>
<li>Live Server</li>
</ul>
<p>常见设置</p>
<ul>
<li>File &gt; preference &gt; Settigngs<ul>
<li>Word Wrap</li>
</ul>
</li>
</ul>
<p>常用快捷键</p>
<ul>
<li>感叹号!，生成HTML骨架</li>
<li>EMMET语法</li>
<li>格式化代码：shift + alt + F</li>
</ul>
<h2 id="笔记工具"><a href="#笔记工具" class="headerlink" title="笔记工具"></a>笔记工具</h2><p>markdown格式，使用typora免费版</p>
<h2 id="浏览器内核和控制台"><a href="#浏览器内核和控制台" class="headerlink" title="浏览器内核和控制台"></a>浏览器内核和控制台</h2><h3 id="常用浏览器"><a href="#常用浏览器" class="headerlink" title="常用浏览器"></a>常用浏览器</h3><ul>
<li><p>webkit内核(V8引擎)</p>
<ul>
<li>谷歌Chrome</li>
</ul>
<ul>
<li>Safari</li>
<li>Opera &gt;&#x3D;V14</li>
<li>国产浏览器</li>
<li>手机浏览器</li>
<li>…</li>
</ul>
</li>
<li><p>Gecko</p>
<ul>
<li>火狐Firefpx</li>
</ul>
</li>
<li><p>Presto</p>
<ul>
<li>Opera &lt;V14</li>
</ul>
</li>
<li><p>Trident</p>
<ul>
<li><p>IE</p>
</li>
<li><p>IE EDGE开始采用双内核(其中包含chrome迷你)</p>
</li>
</ul>
</li>
</ul>
<h2 id="谷歌浏览器的控制台-F12-x2F-Fn-F12"><a href="#谷歌浏览器的控制台-F12-x2F-Fn-F12" class="headerlink" title="谷歌浏览器的控制台(F12&#x2F;Fn+F12)"></a>谷歌浏览器的控制台(F12&#x2F;Fn+F12)</h2><ul>
<li>Elements:查看结构样式，可以修改这些内容</li>
<li>Console:查看输出结果和报错信息，是JS调试的利器</li>
<li>Sources:查看项目源码</li>
<li>Network:查看当前网站所有资源的请求信息(包括和服务器传输的HTTP报文信息)、加载时间等(根据加载时间进行项目优化)</li>
<li>Application: 查看当前网站的数据存储和资源文件(可以盗图)</li>
</ul>
<h1 id="JS概览"><a href="#JS概览" class="headerlink" title="JS概览"></a>JS概览</h1><p>按照相关的JS语法，去操作页面中的元素，有时还要操作浏览器里面的一些功能</p>
<ul>
<li>ECMAScript3&#x2F;5&#x2F;6…: JS的语法规范(变量、数据类型、操作语句等等)</li>
<li>DOM (document object model) :文档对象模型，提供- -些JS的属性和方法，用来操作页面中的DOM元素</li>
<li>BOM (browser object model) !浏览器对象模型，提供一些JS的属性和方法，用来操作浏览器的</li>
</ul>
<p>书籍推荐：<a target="_blank" rel="noopener" href="https://www.aliyundrive.com/s/f8JS7ExEh7o">https://www.aliyundrive.com/s/f8JS7ExEh7o</a></p>
<ul>
<li>《JavaScript高级程序设计》（第四版）</li>
<li>《你不知道的JavaScript》（三卷）</li>
<li>《JavaScript权威指南》</li>
<li>《ES6标准入门》</li>
</ul>
<h2 id="变量和命名规范"><a href="#变量和命名规范" class="headerlink" title="变量和命名规范"></a>变量和命名规范</h2><blockquote>
<ul>
<li>多种定义方式：var &#x2F; let &#x2F; const &#x2F; function &#x2F; import &#x2F; class &#x2F; Symbol()</li>
<li>严谨的命名规范:区分大小写 &#x2F; 驼峰命名 &#x2F; 关键字保留字</li>
</ul>
</blockquote>
<h3 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h3><p>变量：可变的量，在编程语言中，变量其实就是 一个名字，用来存储和代表不同值的东西</p>
<p>变量本身是没有意义的，<strong>有意义的是变量对应的那个值</strong></p>
<p>ECMAScript 变量是松散类型的，意思是变量可以用于保存任何类型的数据。每个变量只不过是一个用于保存任意值的命名占位符。有 3 个关键字可以声明变量：var、const 和 let。其中，var 在ECMAScript 的所有版本中都可以使用，而 const 和 let 只能在 ECMAScript 6 及更晚的版本中使用。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ES3</span></span><br><span class="line"><span class="keyword">var</span> a = <span class="number">12</span></span><br><span class="line">a = <span class="number">13</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a)</span><br><span class="line"></span><br><span class="line"><span class="comment">// ES6</span></span><br><span class="line"><span class="keyword">let</span> b = <span class="number">100</span></span><br><span class="line">b = <span class="number">200</span> <span class="comment">// 这两种声明方式有啥区别呢  后面讲完变量提升后，再说</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> c = <span class="number">1000</span></span><br><span class="line">c = <span class="number">2000</span> <span class="comment">// 报错，const创建的变量存储的值，是不允许被修改的（可以理解为const创建的是常量）</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建函数，也相当于在创建变量</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">fn</span>(<span class="params"></span>) &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建类，也相当于创建变量</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">A</span> &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ES6的模块导入也可以创建变量</span></span><br><span class="line"><span class="keyword">import</span> B <span class="keyword">from</span> <span class="string">&#x27;./B.js&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Symbol创建唯一值</span></span><br><span class="line"><span class="keyword">let</span> n = <span class="title class_">Symbol</span>(<span class="number">100</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="var"><a href="#var" class="headerlink" title="var"></a><code>var</code></h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 初始化，默认值为undefined</span></span><br><span class="line"><span class="keyword">var</span> message;</span><br></pre></td></tr></table></figure>

<p><strong>声明作用域</strong>：使用 var 操作符定义的变量会成为包含它的函数的局部变量。比如，使用 var在一个函数内部定义一个变量，就意味着该变量将在函数退出时被销毁：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">test</span>(<span class="params"></span>) &#123; </span><br><span class="line"> <span class="keyword">var</span> message = <span class="string">&quot;hi&quot;</span>; <span class="comment">// 局部变量</span></span><br><span class="line">&#125; </span><br><span class="line"><span class="title function_">test</span>(); </span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(message); <span class="comment">// 出错！</span></span><br></pre></td></tr></table></figure>

<p>不过，在函数内定义变量时省略 var 操作符，可以创建一个全局变量：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">test</span>(<span class="params"></span>) &#123; </span><br><span class="line"> message = <span class="string">&quot;hi&quot;</span>; <span class="comment">// 全局变量</span></span><br><span class="line">&#125; </span><br><span class="line"><span class="title function_">test</span>(); </span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(message); <span class="comment">// &quot;hi&quot;</span></span><br></pre></td></tr></table></figure>

<p>虽然可以通过省略 var 操作符定义全局变量，但不推荐这么做。在局部作用域中定义的全局变量很难维护，也会造成困惑。</p>
<p><strong>var 声明提升</strong></p>
<p>使用 var 时，下面的代码不会报错。这是因为使用这个关键字声明的变量会自动提升到函数作用域顶部：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">foo</span>(<span class="params"></span>) &#123; </span><br><span class="line"> <span class="variable language_">console</span>.<span class="title function_">log</span>(age); </span><br><span class="line"> <span class="keyword">var</span> age = <span class="number">26</span>; </span><br><span class="line">&#125; </span><br><span class="line"><span class="title function_">foo</span>(); <span class="comment">// undefined</span></span><br></pre></td></tr></table></figure>

<p>之所以不会报错，是因为 ECMAScript 运行时把它看成等价于如下代码：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">foo</span>(<span class="params"></span>) &#123; </span><br><span class="line"> <span class="keyword">var</span> age; </span><br><span class="line"> <span class="variable language_">console</span>.<span class="title function_">log</span>(age); </span><br><span class="line"> age = <span class="number">26</span>; </span><br><span class="line">&#125; </span><br><span class="line"><span class="title function_">foo</span>(); <span class="comment">// undefined</span></span><br></pre></td></tr></table></figure>

<p>这就是所谓的“提升”（hoist），也就是把所有变量声明都拉到函数作用域的顶部。此外，反复多次</p>
<p>使用 var 声明同一个变量也没有问题：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">foo</span>(<span class="params"></span>) &#123; </span><br><span class="line"> <span class="keyword">var</span> age = <span class="number">16</span>; </span><br><span class="line"> <span class="keyword">var</span> age = <span class="number">26</span>; </span><br><span class="line"> <span class="keyword">var</span> age = <span class="number">36</span>; </span><br><span class="line"> <span class="variable language_">console</span>.<span class="title function_">log</span>(age); </span><br><span class="line">&#125; </span><br><span class="line"><span class="title function_">foo</span>(); <span class="comment">// 36</span></span><br></pre></td></tr></table></figure>

<h4 id="let"><a href="#let" class="headerlink" title="let"></a><code>let</code></h4><p>let 跟 var 的作用差不多，但有着非常重要的区别。最明显的区别是，let 声明的范围是块作用域，而 var 声明的范围是函数作用域。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// var关键字没有块级作用域，只有函数作用域</span></span><br><span class="line"> <span class="keyword">if</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">   <span class="keyword">var</span> name = <span class="string">&quot;Matt&quot;</span>;</span><br><span class="line">   <span class="keyword">debugger</span>;</span><br><span class="line">   <span class="variable language_">console</span>.<span class="title function_">log</span>(name); <span class="comment">// Matt</span></span><br><span class="line">   </span><br><span class="line"> &#125;</span><br><span class="line"> <span class="variable language_">console</span>.<span class="title function_">log</span>(name); <span class="comment">// Matt，在方括号外面仍可以访问</span></span><br></pre></td></tr></table></figure>

<p><img src="/2022/09/16/web/JavaScript/js%E4%BB%8E%E5%9F%BA%E7%A1%80%E5%88%B0%E8%BF%9B%E9%98%B6/image-20221216092309932.png" alt="image-20221216092309932"></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> age = <span class="number">26</span>;</span><br><span class="line">  <span class="keyword">debugger</span>;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(age); <span class="comment">// 26</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// console.log(age); // Uncaught ReferenceError: age is not defined</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><code>age</code>之所以不能在if块外部被引用,看下图就知道了</p>
<ul>
<li>let声明在变量在在Block里，额外开辟了一块堆内存</li>
<li>而if块外部只能访问Local和Global</li>
</ul>
<p><img src="/2022/09/16/web/JavaScript/js%E4%BB%8E%E5%9F%BA%E7%A1%80%E5%88%B0%E8%BF%9B%E9%98%B6/image-20221215192214871.png" alt="image-20221215192214871"></p>
<p>执行上下文中，一直的作用域对象有</p>
<ul>
<li>Block<ul>
<li><code>let</code>可创建</li>
</ul>
</li>
<li><code>Local</code></li>
<li><code>Global</code></li>
</ul>
<p><img src="/2022/09/16/web/JavaScript/js%E4%BB%8E%E5%9F%BA%E7%A1%80%E5%88%B0%E8%BF%9B%E9%98%B6/image-20221215192510220.png" alt="image-20221215192510220"></p>
<p>let 不允许同一个块作用域中出现冗余声明。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> repeat;</span><br><span class="line"><span class="comment">// let repeat; // Uncaught SyntaxError: Identifier &#x27;repeat&#x27; has already been declared</span></span><br></pre></td></tr></table></figure>



<h5 id="暂时性死区"><a href="#暂时性死区" class="headerlink" title="暂时性死区"></a>暂时性死区</h5><p>let 与 var 的另一个重要的区别，就是 let 声明的变量不会在作用域中被提升。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// name 会被提升</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(name); <span class="comment">// undefined </span></span><br><span class="line"><span class="keyword">var</span> name = <span class="string">&#x27;Matt&#x27;</span>;</span><br></pre></td></tr></table></figure>

<p>相当于</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// name 会被提升</span></span><br><span class="line"><span class="keyword">var</span> name;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(name); <span class="comment">// undefined </span></span><br><span class="line">name = <span class="string">&#x27;Matt&#x27;</span>;</span><br></pre></td></tr></table></figure>

<p>从《你不知道的JavaScript》中，可以知道JS代码执行前存在编译阶段，而var关键字声明的标识符，会在代码执行前，被先处理一下，定义到作用域上。</p>
<p>所谓的变量提升，是js代码存在编译阶段做了一些处理的表现形式</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// age 不会被提升</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(age); <span class="comment">// ReferenceError：age 没有定义</span></span><br><span class="line"><span class="keyword">let</span> age = <span class="number">26</span>;</span><br></pre></td></tr></table></figure>

<p>《JS高程第4版中文版》：在解析代码时，JavaScript 引擎也会注意出现在块后面的 let 声明，只不过在此之前不能以任何方式来引用未声明的变量。在 let 声明之前的执行瞬间被称为“暂时性死区”（temporal dead zone），在此阶段引用任何后面才声明的变量都会抛出ReferenceError。</p>
<p>When parsing the code, JavaScript engines will still be aware of the let declarations that appear later in a block, but these variables will be unable to be referenced in any way before the actual declaration occurs. The segment of execution that occurs before the declaration is referred to as the “temporal dead zone,” and any attempted references to these variables will throw a ReferenceError.</p>
<p>简单理解就是JS引擎在编译的时候，对let关键字不做处理，编译完代码执行的时候，作用域里没有age这个变量，自然是报<code>age没有定义</code></p>
<p>上面的理解正确吗？我们调试下不同情况的声明</p>
<blockquote>
<p>新建index.html，js代码通过scirpt标签写在html内部</p>
</blockquote>
<ul>
<li><p>情况一，使用<code>var</code>声明关键字并赋值，注意：断点是在前面</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">debugger</span>;</span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">var</span> age2 = <span class="number">13</span>;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>执行到断点时：<code>Scope</code>是空的，<code>age2</code>已经经过编译被挂到<code>Global</code>上了，默认值为<code>undefined</code>，符合之前的认知</p>
<p><img src="/2022/09/16/web/JavaScript/js%E4%BB%8E%E5%9F%BA%E7%A1%80%E5%88%B0%E8%BF%9B%E9%98%B6/image-20221216100722267.png" alt="image-20221216100722267"></p>
<p>断点继续往下走，是赋值操作，值变为13；<code>Scope</code>无新增作用域</p>
</li>
<li><p>情况二，使用<code>let</code>关键字声明并赋值</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">debugger</span>;</span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">let</span> age = <span class="number">60</span>;</span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// var age2 = 13;</span></span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>执行到断点时：新增了<code>Script</code>作用域，里面有一个属性age，值为<code>undefined</code></p>
<p><img src="/2022/09/16/web/JavaScript/js%E4%BB%8E%E5%9F%BA%E7%A1%80%E5%88%B0%E8%BF%9B%E9%98%B6/image-20221216102233760.png" alt="image-20221216102233760"></p>
<p>断点继续往下走：<code>Script</code>中的age值变成了60，<code>Global</code>无新增属性（age没被挂载到<code>Global</code>上）</p>
</li>
<li><p>情况三，在函数里面使用<code>var</code>关键字</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">function</span> <span class="title function_">test</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">debugger</span>;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> age2 = <span class="number">13</span>;</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript">  <span class="title function_">test</span>()</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>执行到断点时：在test函数执行栈中，对应的函数作用域里，发生了同情况一一样的事情，只不过对于此时的<code>age2</code>而言，它是挂载到当前执行栈的<code>Local</code>上的</p>
<p><img src="/2022/09/16/web/JavaScript/js%E4%BB%8E%E5%9F%BA%E7%A1%80%E5%88%B0%E8%BF%9B%E9%98%B6/image-20221216105651340.png" alt="image-20221216105651340"></p>
</li>
<li><p>情况四：在函数里面使用<code>let</code>关键字</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  </span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">function</span> <span class="title function_">test</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">debugger</span>;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">let</span> age = <span class="number">60</span>;</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// var age2 = 13;</span></span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript">  <span class="title function_">test</span>()</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>执行到断点时，情况好像和var一样，断点继续往下走，值变为<code>60</code></p>
<p><img src="/2022/09/16/web/JavaScript/js%E4%BB%8E%E5%9F%BA%E7%A1%80%E5%88%B0%E8%BF%9B%E9%98%B6/image-20221216103256948.png" alt="image-20221216103256948"></p>
</li>
<li><p>区别呢？？区别在于我们在非函数的方括号中使用的时候</p>
<ul>
<li><p>var</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">if</span> (<span class="literal">true</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">debugger</span>;</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// var age = 60;</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> age2 = <span class="number">13</span>;</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(age);</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><img src="/2022/09/16/web/JavaScript/js%E4%BB%8E%E5%9F%BA%E7%A1%80%E5%88%B0%E8%BF%9B%E9%98%B6/image-20221216104655000.png" alt="image-20221216104655000"></p>
</li>
<li><p>let</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">if</span> (<span class="literal">true</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">debugger</span>;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">let</span> age = <span class="number">60</span>;</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// var age2 = 13;</span></span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(age);</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><img src="/2022/09/16/web/JavaScript/js%E4%BB%8E%E5%9F%BA%E7%A1%80%E5%88%B0%E8%BF%9B%E9%98%B6/image-20221216104748889.png" alt="image-20221216104748889"></p>
<p>可以看到，<code>let</code>关键字如果被声明在了非函数的语句块中，编译器会新建个<code>Block</code>作用域，把对应的变量放在里面</p>
</li>
</ul>
</li>
</ul>
<p><strong>var和let比较</strong></p>
<ul>
<li>var关键字定义的变量，存储在作用<code>Scope</code>对象中的<code>Global</code>对象或<code>Local</code>变量对象中（距离最近的父级作用域），并且会被编译器先挂载；而<code>let</code>也是这样，但额外一点是，如果<code>let</code>被声明在了非函数语句块中，编译器在对应的当前<code>Scope</code>上新开启一个<code>Block</code>对象用来存储变量。</li>
<li>对于<code>var</code>，变量提升其实就是编译器会把对应的标识符，挂载到最近的父级作用域上（对应情况一和情况三），并且非函数语句块没有作用域；而对于<code>let</code>是不会有挂载最近的父级作用域上这个操作的，并且<code>let</code>遇到非函数语句块时，反而会新增一个<code>Block</code>作用域</li>
<li>作用域是分块的，已知的作用域有<ul>
<li><code>Scope</code><ul>
<li><code>Global</code><ul>
<li>全局作用域，一般写代码的最外层，js代码执行时产生</li>
</ul>
</li>
<li><code>Local</code><ul>
<li>函数执行，入栈时产生</li>
<li>直接访问不到<code>Global</code>，但是函数里有一个<code>this</code>属性，指向<code>Global</code></li>
<li>非函数语句块里的同一个执行栈中，<code>Local</code>变量对象在方括号内外都是可以访问的，表现为<code>var</code>没有块级作用域（对应上文的if的例子）；</li>
</ul>
</li>
<li><code>Block</code><ul>
<li>执行<code>let</code>关键字在非函数语句块中声明变量时产生</li>
</ul>
</li>
<li><code>Script</code><ul>
<li><code>html</code>中引入<code>script</code>时产生</li>
</ul>
</li>
<li>……</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>再来看看对于暂时性死区的理解</p>
<blockquote>
<p>简单理解就是JS引擎在编译的时候，对let关键字不做处理（不会向var关键字那样，把变量挂载到最近的父级作用域上），编译完代码执行的时候，当前作用域对象里没有age这个变量，自然是报<code>age没有定义</code></p>
</blockquote>
<p>对应情况一</p>
<p><img src="/2022/09/16/web/JavaScript/js%E4%BB%8E%E5%9F%BA%E7%A1%80%E5%88%B0%E8%BF%9B%E9%98%B6/image-20221216100722267.png" alt="image-20221216100722267"></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">debugger</span>; <span class="comment">// 编译阶段结束，age2已经被挂载到最近的父级作用域Global上，值默认为undefined</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(age2) <span class="comment">// undefined</span></span><br><span class="line"><span class="keyword">var</span> age2 = <span class="number">13</span>;</span><br></pre></td></tr></table></figure>

<p>对应情况二</p>
<p><img src="/2022/09/16/web/JavaScript/js%E4%BB%8E%E5%9F%BA%E7%A1%80%E5%88%B0%E8%BF%9B%E9%98%B6/image-20221216102233760.png" alt="image-20221216102233760"></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">      <span class="keyword">debugger</span>;</span><br><span class="line"> <span class="comment">// 虽然编译阶段age仍像var那样被提升了，但注意，人家var是被提到了距离最近的父级作用域上`Global`</span></span><br><span class="line"><span class="comment">// 但是let声明的关键字是提升到了`Script`作用域里，与`Global`作用域平级</span></span><br><span class="line"><span class="comment">// console.log(age)语句，查找age时，是在Global的作用域链里查找的，自然是找不到的</span></span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(age) <span class="comment">// Uncaught ReferenceError: Cannot access &#x27;age&#x27; before initialization</span></span><br><span class="line">	</span><br><span class="line">      <span class="keyword">let</span> age = <span class="number">60</span>;</span><br></pre></td></tr></table></figure>

<p>对应情况三</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">test</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">debugger</span>;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(age2) <span class="comment">// undefined</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> age2 = <span class="number">13</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">test</span>()</span><br></pre></td></tr></table></figure>

<p><img src="/2022/09/16/web/JavaScript/js%E4%BB%8E%E5%9F%BA%E7%A1%80%E5%88%B0%E8%BF%9B%E9%98%B6/image-20221216113306051.png" alt="image-20221216113306051"></p>
<p>对应情况四</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">test</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">debugger</span>;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(age) <span class="comment">// Uncaught ReferenceError: Cannot access &#x27;age&#x27; before initialization</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> age = <span class="number">60</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">test</span>()</span><br></pre></td></tr></table></figure>

<p><img src="/2022/09/16/web/JavaScript/js%E4%BB%8E%E5%9F%BA%E7%A1%80%E5%88%B0%E8%BF%9B%E9%98%B6/image-20221216113533900.png" alt="image-20221216113533900"></p>
<p>这里可能会问了，情况二访问不到，是因为变量放在了<code>Script</code>作用域里，但这里<code>Local</code>作用域里，命名就有age，为啥还会访问不到呢？</p>
<p>应该这样说，是可以访问的，但js引擎检测到你要访问的变量，是通过<code>let</code>关键字声明的，强制不让你访问，给你报个错<code>Cannot access &#39;age&#39; before initialization</code>，这就是所谓的暂时性死区</p>
<p>那么js引擎咋知道这个变量时<code>let</code>关键字声明的呢？因为代码执行前先执行了编译阶段呀</p>
<h5 id="全局声明"><a href="#全局声明" class="headerlink" title="全局声明"></a>全局声明</h5><h4 id="const"><a href="#const" class="headerlink" title="const"></a><code>const</code></h4><p>小结：</p>
<ul>
<li>不使用<code>var</code><ul>
<li>限制自己只使用 let 和 const，有助于提升代码质量，因为变量有了明确的作用域、声明位置，以及不变的值。</li>
</ul>
</li>
<li><code>const</code>优先、<code>let</code>次之<ul>
<li>使用 const 声明可以让浏览器运行时强制保持变量不变，也可以让静态代码分析工具提前发现不合法的赋值操作。因此，很多开发者认为应该优先使用 const 来声明变量，只在提前知道未来会有修改时，再使用 let。这样可以让开发者更有信心地推断某些变量的值永远不会变，同时也能迅速发现因意外赋值导致的非预期行为。</li>
</ul>
</li>
</ul>
<h3 id="命名规范"><a href="#命名规范" class="headerlink" title="命名规范"></a>命名规范</h3><ul>
<li><p>严格区分大小写</p>
</li>
<li><p>使用数字、字母、下划线、$，数字不能作为开头</p>
</li>
<li><p>使用驼峰命名法:首字母小写，其余每-一个有意义单词的首字母都要大写(命名尽可能语义化明显，使用英文单词)</p>
</li>
<li><p>不能使用关键字和保留字，当下有特殊含义的是关键字，未来可能会成为关键字的叫做保留字</p>
</li>
<li><p><a target="_blank" rel="noopener" href="https://juejin.cn/post/6844903714164047879">代码规范参考</a></p>
</li>
<li><p>免测产品的第一步，是良好的编码习惯</p>
</li>
</ul>
<h2 id="数据类型"><a href="#数据类型" class="headerlink" title="数据类型"></a>数据类型</h2><h3 id="基本数据类型"><a href="#基本数据类型" class="headerlink" title="基本数据类型"></a>基本数据类型</h3><blockquote>
<ul>
<li><p>基本数据类型(值类型) ：数字number、字符串string、 布尔boolean、null、 undefined</p>
</li>
<li><p>引用数据类型：object (数组、对象、正则… )、function</p>
</li>
<li><p>Symbol：唯一值</p>
</li>
</ul>
</blockquote>
<p><strong>基本数据类型</strong></p>
<ul>
<li>数字number<ul>
<li>常规数字</li>
<li>NaN</li>
</ul>
</li>
<li>字符串string</li>
<li>所有用单引号、双引号、反引号包起来的，都是字符串</li>
<li>布尔boolean<ul>
<li>true</li>
<li>false</li>
</ul>
</li>
<li>空对象指针null</li>
<li>未定义undef ined</li>
</ul>
<p><strong>引用数据类型</strong></p>
<ul>
<li><p>对象数据类型object</p>
<ul>
<li><p>{} 普通对象</p>
</li>
<li><p>[] 数组对象.</p>
</li>
<li><p><code>/^[+-]?(\d|([1-9]\d+))(\.\d+)?$/</code> 正则对象</p>
</li>
<li><p>Math 数学函数对象</p>
</li>
<li><p>日期对象</p>
</li>
<li><p>…</p>
</li>
</ul>
</li>
<li><p>函数数据类型function</p>
</li>
</ul>
<h4 id="数字number"><a href="#数字number" class="headerlink" title="数字number"></a>数字number</h4><ul>
<li><p>常规数字</p>
</li>
<li></li>
<li><p>NaN：not a number，不是一个数，但它属于数字类型</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// isNaN([val])</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="built_in">isNaN</span>(<span class="number">10</span>)) <span class="comment">// false</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="built_in">isNaN</span>(<span class="string">&#x27;AA&#x27;</span>)) <span class="comment">// true, 1.Number(&#x27;AA&#x27;) =&gt; NaN, 2.isNaN(NaN) =&gt; true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="built_in">isNaN</span>(<span class="string">&#x27;10&#x27;</span>)) <span class="comment">// false, 1.Number(&#x27;10&#x27;) =&gt; 10, 2.isNaN(10) =&gt; false</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="built_in">isNaN</span>(<span class="title class_">NaN</span>)) <span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<ul>
<li>NaN和任何值(包括自己)都不相等: <code>NaN!=NaN</code>，所以我们不能用相等的方式判断是否是有效数字</li>
<li>isNaN：检测一个值是否为非有效数字，如果不是有效数字返回TRUE，反之是有效数字返回FALSE</li>
<li>在使用isNaN进行检测的时候，首先会验证检测的值是否为数字类型，如果不是，**先基于Number()**这个方法，把值转换为数字类型，然后再检测</li>
</ul>
</li>
<li><p>把其它类型值转换为数字类型</p>
<blockquote>
<p>Number( [val] )</p>
<p>parseInt([val]) &#x2F; parseFloat([val],[进制])</p>
<p>&#x3D;&#x3D;进行比较时比较时，可能要出现把其他类型值转换成数字</p>
</blockquote>
</li>
<li><p>浏览器内置的V8引擎底层转换规则</p>
<ul>
<li><p>把字符串转换为数字，只要字符串中包含任意一个非有效数字字符(第一个点除外)结果都是NaN，空字符串会变为数字零</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Number</span>(<span class="string">&#x27;12.5&#x27;</span>)) <span class="comment">// 12.5</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Number</span>(<span class="string">&#x27;12.5px&#x27;</span>)) <span class="comment">// NaN</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Number</span>(<span class="string">&#x27;12.4.5&#x27;</span>)) <span class="comment">// NaN</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Number</span>(<span class="number">011</span>)) <span class="comment">// 11</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Number</span>(<span class="string">&#x27;&#x27;</span>)) <span class="comment">// 0</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>把布尔转换成数字</p>
<p>true 转换为 1，false 转换为 0</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Number</span>(<span class="literal">true</span>)) <span class="comment">// 1</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Number</span>(<span class="literal">false</span>)) <span class="comment">// 0</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="built_in">isNaN</span>(<span class="literal">true</span>)) <span class="comment">// false</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="built_in">isNaN</span>(<span class="literal">false</span>)) <span class="comment">// false</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>null和undefined转为数字</p>
<p>null返回 0，undefined返回 NaN</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Number</span>(<span class="literal">null</span>)) <span class="comment">// 0</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Number</span>(<span class="literal">undefined</span>)) <span class="comment">// NaN</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="built_in">isNaN</span>(<span class="literal">null</span>)) <span class="comment">// false</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="built_in">isNaN</span>(<span class="literal">undefined</span>)) <span class="comment">// true</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>把引用数据类型转为数字</p>
<ul>
<li>是先把它基于toString方法转换为字符串，然后再将字符串转为数字</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>((&#123;<span class="attr">name</span>: <span class="string">&#x27;sai&#x27;</span>&#125;).<span class="title function_">toString</span>()) <span class="comment">// [object Object]</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Number</span>(&#123;<span class="attr">name</span>: <span class="string">&#x27;sai&#x27;</span>&#125;)) <span class="comment">// NaN</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Number</span>(&#123;&#125;)) <span class="comment">// NaN</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>([].<span class="title function_">toString</span>()) <span class="comment">// &#x27;&#x27;, 空字符串</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Number</span>([])) <span class="comment">// 0</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>([<span class="number">12</span>].<span class="title function_">toString</span>()) <span class="comment">// &#x27;12&#x27;,</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Number</span>([<span class="number">12</span>])) <span class="comment">// 12</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>([<span class="number">12</span>, <span class="number">34</span>].<span class="title function_">toString</span>()) <span class="comment">// &#x27;12,34&#x27;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Number</span>([<span class="number">12</span>, <span class="number">34</span>])) <span class="comment">// NaN</span></span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>parseInt和parseFloat是额外提供的，不同于V8引擎的转换规则</p>
<ul>
<li><p>字符串：对于字符串<code>12.5px</code>，如果仍然想获得其中的数字，可以使用parseInt和parseFloat方法，它是从左到右依次查找有效数字字符，直到遇到非有效数字字符，停止查找(不管后面是否还有数字，都不在找了)，把找到的当做数字返回</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Number</span>(<span class="string">&#x27;12.5px&#x27;</span>)) <span class="comment">// NaN</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="built_in">parseInt</span>(<span class="string">&#x27;12.5px&#x27;</span>)) <span class="comment">// 12</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="built_in">parseFloat</span>(<span class="string">&#x27;12.5px&#x27;</span>)) <span class="comment">// 12.5</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="built_in">parseFloat</span>(<span class="string">&#x27;width:12.5px&#x27;</span>)) <span class="comment">// NaN，一开始就是非有效数字字符，停止查找</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>布尔</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="built_in">parseInt</span>(<span class="literal">true</span>)) <span class="comment">// NaN，会先转为字符串&#x27;true&#x27;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="built_in">parseInt</span>(<span class="literal">false</span>)) <span class="comment">// NaN</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="built_in">parseFloat</span>(<span class="literal">false</span>)) <span class="comment">// NaN</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="built_in">parseFloat</span>(<span class="literal">false</span>)) <span class="comment">// NaN</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>null和undefined</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="built_in">parseInt</span>(<span class="literal">null</span>)) <span class="comment">// NaN</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="built_in">parseFloat</span>(<span class="literal">null</span>)) <span class="comment">// NaN</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="built_in">parseInt</span>(<span class="literal">undefined</span>)) <span class="comment">// NaN</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="built_in">parseFloat</span>(<span class="literal">undefined</span>)) <span class="comment">// NaN</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>引用数据类型</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="built_in">parseInt</span>(&#123;&#125;)) <span class="comment">// NaN</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="built_in">parseInt</span>(&#123;<span class="attr">name</span>: <span class="string">&#x27;sai&#x27;</span>&#125;)) <span class="comment">// NaN</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="built_in">parseInt</span>([])) <span class="comment">// NaN</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="built_in">parseInt</span>([<span class="number">12</span>])) <span class="comment">// 12</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="built_in">parseInt</span>([<span class="number">12</span>,<span class="number">34</span>])) <span class="comment">// 12</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="built_in">parseFloat</span>(&#123;&#125;)) <span class="comment">// NaN</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="built_in">parseFloat</span>(&#123;<span class="attr">name</span>: <span class="string">&#x27;sai&#x27;</span>&#125;)) <span class="comment">// NaN</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="built_in">parseFloat</span>([])) <span class="comment">// NaN</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="built_in">parseFloat</span>([<span class="number">12</span>])) <span class="comment">// 12</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="built_in">parseFloat</span>([<span class="number">12</span>,<span class="number">34</span>])) <span class="comment">// 12</span></span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<h4 id="字符串string"><a href="#字符串string" class="headerlink" title="字符串string"></a>字符串string</h4><p>所有用单引号、双引号、反引号(撇 ES6模板字符串)包起来的都是字符串</p>
<ul>
<li><p>把其它类型值转换为字符串类型</p>
<blockquote>
<p>[val].toString()</p>
<p>字符串拼接</p>
</blockquote>
</li>
<li><p>toString()</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// console.log(12.toString()) // An identifier or keyword cannot immediately follow a numeric literal.</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> a = <span class="number">12</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a.<span class="title function_">toString</span>()) <span class="comment">// &#x27;12&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>((<span class="title class_">NaN</span>).<span class="title function_">toString</span>()) <span class="comment">// &#x27;NaN&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>((<span class="literal">true</span>).<span class="title function_">toString</span>()) <span class="comment">// &#x27;true&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// console.log((null).torString()) // 有toString方法，但是禁止使用   Uncaught TypeError: Cannot read properties of null (reading &#x27;torString&#x27;)</span></span><br><span class="line"><span class="comment">// console.log((undefined).toString()) // 同上</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>([].<span class="title function_">toString</span>()) <span class="comment">// &#x27;&#x27;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>([<span class="number">12</span>, <span class="number">34</span>].<span class="title function_">toString</span>()) <span class="comment">// &#x27;12,34&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="regexp">/^$/</span>.<span class="title function_">toString</span>()) <span class="comment">// &#x27;/^$/&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>((&#123; <span class="attr">name</span>: <span class="string">&#x27;sai&#x27;</span> &#125;).<span class="title function_">toString</span>()) <span class="comment">// &#x27;[object Object]&#x27; 因为Object.prototype.toString方法不是用来转换字符串的，而是用来转换数据类型的</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
</li>
<li><p>字符串拼接</p>
<p>四则运算法则中，除加法之外，其余都是数学计算，只有加法可能存在字符串拼接（一旦遇到字符串， 则不是数学运算，而是字符串拼接）</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;10&#x27;</span> + <span class="number">10</span>) <span class="comment">// 1010</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;10&#x27;</span> - <span class="number">10</span>) <span class="comment">// Number(&#x27;10&#x27;) - 10 = 0</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;10px&#x27;</span> - <span class="number">10</span>) <span class="comment">// Number(&#x27;10px&#x27;) - 10 = NaN</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>面试题</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a = <span class="number">10</span> + <span class="literal">null</span> + <span class="literal">true</span> + [] + <span class="literal">undefined</span> + <span class="string">&#x27;sai&#x27;</span> + <span class="literal">null</span> + [] + <span class="number">10</span> + <span class="literal">false</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a) <span class="comment">// 11undefinedsainull10false</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">10 + null = 10 + Number(null) = 10 + 0 = 10</span></span><br><span class="line"><span class="comment">10 + true = 10 + Number(true) = 10 + 1 = 11</span></span><br><span class="line"><span class="comment">11 + [] = 11 + &#x27;&#x27; = &#x27;11&#x27; // 空数组变为数字，先要经历变为空字符串，遇到字符串，啥都别想了，直接变为字符串拼接</span></span><br><span class="line"><span class="comment">&#x27;11&#x27; + undefined = &#x27;11undefined&#x27;</span></span><br><span class="line"><span class="comment">&#x27;11undefined&#x27; + &#x27;sai&#x27; = &#x27;11undefinedsai&#x27;</span></span><br><span class="line"><span class="comment">&#x27;11undefinedsai&#x27; + null = &#x27;11undefinedsainull&#x27;</span></span><br><span class="line"><span class="comment">&#x27;11undefinedsainull + [] = &#x27;11undefinedsainull&#x27;</span></span><br><span class="line"><span class="comment">&#x27;11undefinedsainull&#x27; + 10 = &#x27;11undefinedsainull10&#x27;</span></span><br><span class="line"><span class="comment">&#x27;11undefinedsainull10&#x27; + false = &#x27;11undefinedsainull10false&#x27;</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="布尔boolean"><a href="#布尔boolean" class="headerlink" title="布尔boolean"></a>布尔boolean</h4><p>只有两个值：true &#x2F; false</p>
<ul>
<li><p>把其它类型值转换为布尔类型：只有0、NaN、’’、null、undefined 五个值转换为FALSE，其余都转换为TRUE（而且没有任何的特殊情况，空对象转换成布尔值也是true）</p>
<blockquote>
<p>Boolean([val])</p>
<p>! &#x2F; !!</p>
<p>条件判断</p>
</blockquote>
</li>
<li><p>Boolean([val])</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Boolean</span>(<span class="number">0</span>)) <span class="comment">// false</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Boolean</span>(<span class="title class_">NaN</span>)) <span class="comment">// false</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Boolean</span>(<span class="literal">null</span>)) <span class="comment">// false</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Boolean</span>(<span class="literal">undefined</span>)) <span class="comment">// false</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Boolean</span>(<span class="string">&#x27;&#x27;</span>)) <span class="comment">// false</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Boolean</span>(<span class="string">&#x27;sai&#x27;</span>)) <span class="comment">// true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Boolean</span>(-<span class="number">1</span>)) <span class="comment">// true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Boolean</span>([]))  <span class="comment">// true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Boolean</span>([<span class="number">12</span>])) <span class="comment">// true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Boolean</span>([<span class="number">12</span>, <span class="number">34</span>])) <span class="comment">// true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Boolean</span>(&#123;&#125;)) <span class="comment">// true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Boolean</span>(&#123; <span class="attr">name</span>: <span class="string">&#x27;sai&#x27;</span> &#125;)) <span class="comment">// true</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>!：取反(先转为布尔，然后取反)<br>!!： 取反再取反，只相当于转换为布尔&lt;&#x3D;&gt; Boolean</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(!<span class="number">1</span>) <span class="comment">// false</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(!!<span class="number">1</span>) <span class="comment">// true</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>如果条件只是一个值，不是&#x3D;&#x3D; &#x2F; &#x3D;&#x3D;&#x3D; &#x2F;!&#x3D; &#x2F; &gt;&#x3D; 等这些比较，是要把这个值先转换为布尔类型，然后验证真假</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="number">1</span>) &#123; <span class="comment">// Boolean(1)</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;true&#x27;</span>) <span class="comment">// true</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (<span class="string">&#x27;3px&#x27;</span> + <span class="number">3</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;true&#x27;</span>) <span class="comment">// true</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (<span class="string">&#x27;3px&#x27;</span> - <span class="number">3</span>) &#123; <span class="comment">// NaN</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;false&#x27;</span>) <span class="comment">// 不会输出</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="null-amp-undefined"><a href="#null-amp-undefined" class="headerlink" title="null &amp; undefined"></a>null &amp; undefined</h4><p>null和undefined都代表的是没有</p>
<ul>
<li><p>null: 意料之中(一般都是开始不知道值，我们手动先设置为null, 后期再给予赋值操作)</p>
<ul>
<li><p>一 般最好用null 作为初始的空值，因为零不是空值，他在栈内存中有自己的存储空间(占了位置)</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> num = <span class="literal">null</span> <span class="comment">// null是不占据空间的</span></span><br><span class="line"><span class="comment">// let num = 0 // 0是占据空间的</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ...</span></span><br><span class="line">num = <span class="number">12</span></span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>undefined: 意料之外(不是我能决定的)</p>
<ul>
<li><p>创建一一个变量没有赋值，默认值是undefined</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> num</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<h4 id="symbol-唯一值"><a href="#symbol-唯一值" class="headerlink" title="symbol 唯一值"></a><code>symbol</code> 唯一值</h4><ul>
<li><p>目的为了创建唯一值，不能被<code>new</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a1 = <span class="title class_">Symbol</span>(<span class="string">&#x27;AA&#x27;</span>)</span><br><span class="line"><span class="keyword">let</span> a2 = <span class="title class_">Symbol</span>(<span class="string">&#x27;AA&#x27;</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a1 === a2) <span class="comment">// false</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>常见的3种应用场景：</p>
<ul>
<li><p>给对象设置唯一值的属性名</p>
<ul>
<li>字符串</li>
<li><code>Symbol</code>类型</li>
<li><code>Map</code>新的数据结构，可以允许属性名是对象</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">let</span> obj = &#123;</span><br><span class="line">    <span class="attr">n</span>: <span class="number">10</span>,</span><br><span class="line">    <span class="number">10</span>: <span class="number">100</span>,</span><br><span class="line">    <span class="attr">true</span>: <span class="number">200</span>,</span><br><span class="line">    [<span class="title class_">Symbol</span>(<span class="string">&#x27;AA&#x27;</span>)]: <span class="number">300</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(obj[<span class="title class_">Symbol</span>(<span class="string">&#x27;AA&#x27;</span>)]) <span class="comment">// undefined, 两次创建的Symbol不一样</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> key = <span class="title class_">Symbol</span>(<span class="string">&#x27;BB&#x27;</span>)</span><br><span class="line"><span class="keyword">let</span> obj2 = &#123;</span><br><span class="line">    <span class="attr">n</span>: <span class="number">10</span>,</span><br><span class="line">    <span class="number">10</span>: <span class="number">100</span>,</span><br><span class="line">    <span class="attr">true</span>: <span class="number">200</span>,</span><br><span class="line">    [key]: <span class="number">300</span> </span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(obj2[key]) <span class="comment">// 300</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> obj3 = &#123;</span><br><span class="line">    <span class="attr">n</span>: <span class="number">10</span>,</span><br><span class="line">    <span class="number">10</span>: <span class="number">100</span>,</span><br><span class="line">    <span class="attr">true</span>: <span class="number">200</span>,</span><br><span class="line">    [<span class="title class_">Symbol</span>(<span class="string">&#x27;AA&#x27;</span>)]: <span class="number">300</span>,</span><br><span class="line">    [<span class="title class_">Symbol</span>(<span class="string">&#x27;AA&#x27;</span>)]: <span class="number">600</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(obj3) <span class="comment">// &#123; &#x27;10&#x27;: 100, n: 10, true: 200, [Symbol(AA)]: 300, [Symbol(AA)]: 600 &#125; 重写call方法时，会使用这种用法</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><code>Symbol</code>身上的一些方法，如<code>Symbol.asyncIterator/iterator/hasInstance/toPrimitive/toStringTag...</code>是某些<code>JS</code>底层实现的机制，了解这些机制对我们应用<code>JS</code>有很大帮助。</p>
<p><img src="/2022/09/16/web/JavaScript/js%E4%BB%8E%E5%9F%BA%E7%A1%80%E5%88%B0%E8%BF%9B%E9%98%B6/image-20220828124447129.png" alt="image-20220828124447129"></p>
</li>
<li><p><code>Redux</code>做公共状态管理的时候，会对派发的行为标识做管理，可以基于<code>Symbol</code>类型的值，保证行为的唯一性</p>
</li>
</ul>
</li>
</ul>
<h4 id="bigint-大数"><a href="#bigint-大数" class="headerlink" title="bigint 大数"></a><code>bigint</code> 大数</h4><ul>
<li><p>前端发展过程中，用来弥补<code>JS</code>已有的数据类型缺陷</p>
<ul>
<li><p><code>JS</code>中最大安全数</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Number</span>.<span class="property">MAX_SAFE_INTEGER</span>) <span class="comment">// 9007 1992 5474 0991</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><code>JS</code>中最小安全数</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Number</span>.<span class="property">MIN_SAFE_INTEGER</span>) <span class="comment">// -9007 1992 5474 0991</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>值超过安全数后，进行运算或者访问时，结果会不准确</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Number</span>.<span class="property">MAX_SAFE_INTEGER</span> + <span class="number">2</span>) <span class="comment">// 9007 1992 5474 0992</span></span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>应用场景：客户端如果拿到这样的数，再进行计算，肯定是不行的了</p>
<ul>
<li><p>解决方案</p>
<ul>
<li><p>1.服务器返回给客户端的大数，按字符串的格式返回</p>
</li>
<li><p>2.客户端将其变为<code>bigint</code>类型，然后按照<code>bigint</code>进行运算</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">BigInt</span>(<span class="string">&#x27;90071992547409912434234&#x27;</span>) + <span class="title class_">BigInt</span>(<span class="number">12345</span>)) <span class="comment">// 90071992547409912446579n</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>3.最后把运算过的结果变为字符串，再传递给服务器即可</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>((<span class="number">90071992547409912446579n</span>).<span class="title function_">toString</span>()) <span class="comment">// 90071992547409912446579</span></span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="对象数据类型"><a href="#对象数据类型" class="headerlink" title="对象数据类型"></a>对象数据类型</h3><h4 id="普通对象"><a href="#普通对象" class="headerlink" title="普通对象"></a>普通对象</h4><blockquote>
<p>{[key]: [value], …} 任何一个对象都是由零到多组键值对(属性名:属性值)组成的(并且属性名不能重复)</p>
</blockquote>
<ul>
<li><p>定义对象</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> person = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;sai&#x27;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="number">18</span>,</span><br><span class="line">    <span class="attr">height</span>: <span class="string">&#x27;185CM&#x27;</span>,</span><br><span class="line">    <span class="attr">weight</span>: <span class="string">&#x27;80KG&#x27;</span>,</span><br><span class="line">    <span class="number">1</span>: <span class="number">100</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>获取属性名对应的属性值</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 获取属性名对应的属性值</span></span><br><span class="line"><span class="comment">// 对象.属性名</span></span><br><span class="line"><span class="comment">// 对象[属性名] 属性名是数字或者字符串格式的</span></span><br><span class="line"><span class="comment">// 如果当前属性名不存在，默认的属性值是undefined</span></span><br><span class="line"><span class="comment">// 如果属性名是数字，则不能使用点的方式获取属性值</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(person.<span class="property">name</span>) <span class="comment">// sai</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(person[<span class="string">&#x27;age&#x27;</span>]) <span class="comment">// 18</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(person.<span class="property">sex</span>) <span class="comment">// undefined</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(person[<span class="number">1</span>]) <span class="comment">// 100</span></span><br><span class="line"><span class="comment">// console.log(person.1) // Uncaught SyntaxError: missing ) after argument list </span></span><br></pre></td></tr></table></figure>

<ul>
<li>变量和属性名的区别</li>
</ul>
</li>
<li><p>设置属性名属性值</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 设置属性名属性值</span></span><br><span class="line"><span class="comment">// 属性名不能重复，如果属性名已经存在，不属于新增属于修改属性值</span></span><br><span class="line"></span><br><span class="line">person.<span class="property">GF</span> = <span class="string">&#x27;igo&#x27;</span></span><br><span class="line">person.<span class="property">name</span> = <span class="string">&#x27;akira&#x27;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(person[<span class="string">&#x27;GF&#x27;</span>]) <span class="comment">// igo</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(person[<span class="string">&#x27;name&#x27;</span>]) <span class="comment">// akira</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>删除属性</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(person) <span class="comment">// &#123;1: 100, name: &#x27;akira&#x27;, age: 18, height: &#x27;185CM&#x27;, weight: &#x27;80KG&#x27;, GF: &#x27;igo&#x27;&#125;</span></span><br><span class="line"><span class="comment">// 删除属性</span></span><br><span class="line"><span class="comment">// 真删除：把属性彻底干掉</span></span><br><span class="line"><span class="keyword">delete</span> person[<span class="number">1</span>]</span><br><span class="line"><span class="comment">// 假删除：属性还在，值为空</span></span><br><span class="line">person.<span class="property">weight</span> = <span class="literal">null</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(person) <span class="comment">// &#123;name: &#x27;akira&#x27;, age: 18, height: &#x27;185CM&#x27;, weight: null, GF: &#x27;igo&#x27;&#125;</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h5 id="变量名和属性名区别"><a href="#变量名和属性名区别" class="headerlink" title="变量名和属性名区别"></a>变量名和属性名区别</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> name = <span class="number">10</span>;</span><br><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;sai&#x27;</span>,</span><br><span class="line">    [<span class="number">12</span>]: <span class="number">120</span>,</span><br><span class="line">    <span class="attr">true</span>: <span class="string">&#x27;true123&#x27;</span>,</span><br><span class="line">    <span class="attr">null</span>: <span class="string">&#x27;null123&#x27;</span>,</span><br><span class="line">    <span class="attr">undefined</span>: <span class="string">&#x27;undefined123&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取obj这个对象的name属性对应的值</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(obj.<span class="property">name</span>) <span class="comment">// sai</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 一个对象的属性名只有两种格式：数字或者字符串</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(obj[<span class="string">&#x27;name&#x27;</span>]) <span class="comment">// sai</span></span><br><span class="line"><span class="comment">// console.log(obj.12) // 报错</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(obj[<span class="number">12</span>], obj.<span class="property">true</span>, obj.<span class="property">null</span>, obj[<span class="string">&#x27;undefined&#x27;</span>]) <span class="comment">// 12 &#x27;true123&#x27; &#x27;null123&#x27; &#x27;undefined123&#x27;，就当做是数字或者字符串就可以了</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(obj[name]) <span class="comment">// 等价于obj[10]，结果为undefined</span></span><br></pre></td></tr></table></figure>

<p>值与变量</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;age&#x27;</span> 值，代表本身</span><br><span class="line">age 变量，代表它存储的值</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(obj[name]) <span class="comment">// 输出name变量存储的值，等价于obj[10]，结果为undefined</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">fn</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> a = <span class="number">100</span></span><br><span class="line">    <span class="keyword">return</span> a <span class="comment">// 把变量a存储的值返回，return 100</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 通过点获取时，只能是ojb.属性名，obj.name</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(obj.<span class="property">name</span>)</span><br><span class="line"><span class="comment">// 通过中括号获取时，中括号里的内容加上引号才代表属性名，否则是变量</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(obj[<span class="string">&#x27;name&#x27;</span>], obj[name])</span><br><span class="line">    </span><br></pre></td></tr></table></figure>

<p>要理解的一个事实是，操作一个对象只有两种方式（不考虑使用方法操作）</p>
<ul>
<li>使用点的形式、使用中括号的形式</li>
<li>这两种操作符只能跟属性名<ul>
<li>对于点，不加引号的就是属性名，纯数字的属性名无法操作</li>
<li>对于中括号，加引号的就是属性名，同时可以操作数字；不加引号，获取的则是变量存储的值（需要做一步转化）</li>
<li>obj.key相当于obj[‘key’]</li>
</ul>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;sai&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> name2 = <span class="string">&#x27;sai2&#x27;</span></span><br><span class="line"><span class="keyword">var</span> obj2 = &#123;</span><br><span class="line">    <span class="comment">// 属性名：属性值（属性值是变量，也是把变量存储的值拿过来，做属性值）</span></span><br><span class="line">    <span class="attr">name2</span>: name2,</span><br><span class="line">    <span class="comment">//name2, // ES6的语法糖（合并属性和属性值的写法）</span></span><br><span class="line">    <span class="attr">age</span>: <span class="number">1</span> === <span class="number">1</span> ? <span class="number">100</span> : <span class="number">20</span> <span class="comment">// 属性值只能放值，这里最终放的也是这个表达式的值</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h5 id="for-in-循环"><a href="#for-in-循环" class="headerlink" title="for in 循环"></a>for in 循环</h5><p>用来循环遍历对象的键值对的（continue和break同样适用）</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;sai&#x27;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="number">18</span>,</span><br><span class="line">    <span class="attr">friends</span>: <span class="string">&#x27;hikaru, akira&#x27;</span>,</span><br><span class="line">    <span class="number">1</span>: <span class="number">20</span>,</span><br><span class="line">    <span class="attr">null</span>: <span class="number">30</span>,</span><br><span class="line">    [<span class="number">3</span>]: <span class="number">40</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// for(var 变量 in 对象)</span></span><br><span class="line"><span class="comment">// 对象中有多少组键值对，循环就执行几次（除非break）结束</span></span><br><span class="line"><span class="keyword">for</span>( <span class="keyword">var</span> key <span class="keyword">in</span> obj) &#123;</span><br><span class="line">    <span class="comment">// 每一次循环时，key变量存储的值是当前对象的属性名</span></span><br><span class="line">    <span class="comment">// 获取属性值：obj[属性名] =&gt; obj[key]</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(key) <span class="comment">// 打印对象所有的属性名</span></span><br><span class="line">    <span class="comment">// 不能通过obj.key的形式获取，获取的结果是undefined</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`属性名是<span class="subst">$&#123;key&#125;</span>，属性值是<span class="subst">$&#123;obj[key]&#125;</span>`</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// for in 循环遍历时，会有一个优先级，优先遍历数字类型的属性名，并按照从小到大的顺序</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="特殊对象"><a href="#特殊对象" class="headerlink" title="特殊对象"></a>特殊对象</h4><h5 id="数组"><a href="#数组" class="headerlink" title="数组"></a>数组</h5><p>数组是特殊的对象数据类型</p>
<ul>
<li>属性名是数字，从0开始逐级递增（索引）</li>
<li>多了一个length属性</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">12</span>, <span class="string">&#x27;haha&#x27;</span>, <span class="literal">true</span>, <span class="number">13</span>]</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arr)</span><br></pre></td></tr></table></figure>

<p><img src="/2022/09/16/web/JavaScript/js%E4%BB%8E%E5%9F%BA%E7%A1%80%E5%88%B0%E8%BF%9B%E9%98%B6/image-20220922053400732.png" alt="image-20220922053400732"></p>
<ul>
<li><p>我们中括号中设置的是属性值，它的属性名是默认生成的数字，从零开始递增，而且这个数字代表每一项的位置，我们把其成为“索引”&#x3D;&gt;从零开始，连续递<br>增，代表每一-项位置的数字属性名</p>
</li>
<li><p>天生默认-一个属性名length ，存储数组的长度</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">12</span>, <span class="string">&#x27;haha&#x27;</span>, <span class="literal">true</span>, <span class="number">13</span>]</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arr)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arr.<span class="property">length</span>) <span class="comment">// 4</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arr[<span class="string">&#x27;length&#x27;</span>]) <span class="comment">// 4</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arr[<span class="number">1</span>]) <span class="comment">// haha</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arr[arr.<span class="property">length</span> - <span class="number">1</span>]) <span class="comment">// 13</span></span><br><span class="line"><span class="comment">// 向数组末尾追加内容</span></span><br><span class="line">arr[arr.<span class="property">length</span>] = <span class="number">100</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arr) <span class="comment">// [12, &#x27;haha&#x27;, true, 13, 100]</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="元素对象"><a href="#元素对象" class="headerlink" title="元素对象"></a>元素对象</h4><p><code>let box = document. getElementById(&#39;box&#39;);</code><br>通过方法获取的元素是对象数据类型的值<br><code>console.log(typeof box); //=&gt;&quot;object&quot;</code><br>基于<code>.dir</code>可以看到一个对象的详细信息</p>
<ul>
<li>id:操作元素的ID值</li>
<li>className:获取或者操作元素的CLASS样式类的值</li>
<li>innerHTML:获取或者操作的元素的内容(可以识别标签)</li>
<li>innerText:和innerHTML 的区别是不能识别标签</li>
<li>style:操作元素的<strong>行内样式</strong>，属性值也是一个对象（CSSStyleDeclaration）</li>
<li>tagName:获取元素的标签名(一般大写)</li>
</ul>
<p>实际学习的时候，每次都打印输出一下，对比每个元素（h1、div）都有什么属性及有哪些不同的地方，不断的夯实基础；这部分没有什么系统的理论，每次用到的时候，打印输出一下，然后对比已经掌握的进行学习</p>
<p><img src="/2022/09/16/web/JavaScript/js%E4%BB%8E%E5%9F%BA%E7%A1%80%E5%88%B0%E8%BF%9B%E9%98%B6/image-20221008222740822.png" alt="image-20221008222740822"></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">box.<span class="property">style</span>.<span class="property">backgroundColor</span> = <span class="string">&#x27;red&#x27;</span></span><br><span class="line"><span class="comment">// 修改的是堆内存中的值(只要堆内存中的值被修改,浏览器会基于DOM映射机制把页面中的元素进行重新渲染)</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="variable constant_">AA</span> = box.<span class="property">style</span>;</span><br><span class="line"><span class="variable constant_">AA</span>.<span class="property">backgroundColor</span> = <span class="string">&#x27;blue&#x27;</span>; <span class="comment">// 修改堆中的信息,有效果</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="variable constant_">BB</span> = box.<span class="property">style</span>.<span class="property">backgroundColor</span>;</span><br><span class="line"><span class="variable constant_">BB</span> = <span class="string">&#x27;green&#x27;</span>; <span class="comment">// 修改不是堆中信息,不起作用</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>基础知识没什么好说的，背下来记熟了，脑子里面有东西了，慢慢的自己就能悟透了</p>
<h4 id="对象的自定义属性"><a href="#对象的自定义属性" class="headerlink" title="对象的自定义属性"></a>对象的自定义属性</h4><p>可以通过<code>ojb.property = value</code>把需要保存的数据，存储在全局对象上，并通过<code>this</code>或其他方式获取到（视具体实现）</p>
<p>在写多行表格数据展开显示时，尤其有用</p>
<h2 id="数据类型堆栈底层机制"><a href="#数据类型堆栈底层机制" class="headerlink" title="数据类型堆栈底层机制"></a>数据类型堆栈底层机制</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">let</span> a = <span class="number">12</span>;</span><br><span class="line"><span class="keyword">let</span> b = a;</span><br><span class="line">b = <span class="number">13</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a); <span class="comment">// 12</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> n = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;sai&#x27;</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">let</span> m = n;</span><br><span class="line">m.<span class="property">name</span> = <span class="string">&#x27;sai2&#x27;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(n.<span class="property">name</span>); <span class="comment">// sai2</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>浏览器想要执行JS代码:</p>
<p>1.从电脑内存中分配出一块内存，用来执行代码(栈内存&#x3D;&gt;Stack)</p>
<ul>
<li>执行代码、存储变量和基本类型值</li>
<li>js中的赋值，是关联引用模式，而不是拷贝模式</li>
</ul>
<p>2.分配一个主线程用来自上而下执行js代码</p>
<p><code>let a = 12;</code></p>
<ol>
<li><p>创建变量a，放到当前栈内存变量存储区域中</p>
</li>
<li><p>创建一个值12 ,把它存储到当前栈内存值区域中（简单的基本类型值是这样存储的,复杂的引用类型值不是这样做的）</p>
<p>复杂值(引用类型值)的存储,又分成了三个步骤:	</p>
<ol>
<li>在内存中分配出一块新内存,用来存储引用类型值(堆内存&#x3D;&gt;heap) &#x3D;&gt;内存有一个16进制地址</li>
<li>把对象中的键值对(属性名:属性值)依次存储到堆内存中</li>
<li>把堆内存地址和变量关联起来</li>
</ol>
</li>
<li><p>&#x3D;为赋值，其实赋值是让变量和值相互关联的过程</p>
</li>
</ol>
<p>基本类型：按值操作(直接操作的是值) ,所以也叫作值类型</p>
<p>引用类型：操作的是堆内存的地址(按引用地址操作的)</p>
<p>练习：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> n = [<span class="number">10</span>, <span class="number">20</span>]; <span class="comment">// 0x100</span></span><br><span class="line"><span class="keyword">let</span> m = n; <span class="comment">// 0x100</span></span><br><span class="line"><span class="keyword">let</span> x = m; <span class="comment">// 0x100</span></span><br><span class="line">m[<span class="number">0</span>] = <span class="number">100</span>; <span class="comment">// [100, 20] 0x100</span></span><br><span class="line">x = [<span class="number">30</span>, <span class="number">40</span>]; <span class="comment">// 0x200</span></span><br><span class="line">x[<span class="number">0</span>] = <span class="number">200</span>; <span class="comment">// [200, 40] 0x200</span></span><br><span class="line">m = x; <span class="comment">// 0x200</span></span><br><span class="line">m[<span class="number">1</span>] = <span class="number">300</span>; <span class="comment">// [200, 300] 0x200</span></span><br><span class="line">n[<span class="number">2</span>] = <span class="number">400</span>; <span class="comment">// [100, 20, 400]</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(n, m, x) <span class="comment">// [100, 20, 400], [200, 300], [200, 300]</span></span><br></pre></td></tr></table></figure>

<h2 id="数据类型检测"><a href="#数据类型检测" class="headerlink" title="数据类型检测"></a>数据类型检测</h2><blockquote>
<ul>
<li>typeof [val]: 用来检测数据类型的运算符 </li>
<li>instanceof :用来检测当前实例是否率属于某个类</li>
<li>constructor :基于构造函数检测数据类型(也是基于类的方式)</li>
<li>object.prototype.toString.call() :检测数据类型最好的办法</li>
</ul>
</blockquote>
<h3 id="typeof"><a href="#typeof" class="headerlink" title="typeof"></a><code>typeof</code></h3><p>在浏览器（计算机）底层，基于数据类型的二进制值进行检测</p>
<p>基于typeof检测出来的结果：</p>
<p>1.首先是一个字符串</p>
<p>2.字符串中包含对应的类型</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="keyword">typeof</span> <span class="number">1</span>) <span class="comment">// &#x27;number&#x27;</span></span><br><span class="line"><span class="keyword">let</span> a = <span class="title class_">NaN</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="keyword">typeof</span> a) <span class="comment">// 检测值，&#x27;number&#x27;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="keyword">typeof</span> <span class="string">&#x27;a&#x27;</span>) <span class="comment">// &#x27;string&#x27;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="keyword">typeof</span> <span class="literal">undefined</span>) <span class="comment">// &#x27;undefined&#x27;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="keyword">typeof</span> <span class="keyword">function</span> (<span class="params"></span>) &#123; &#125;) <span class="comment">// &#x27;function&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="keyword">typeof</span> <span class="literal">null</span>) <span class="comment">// &#x27;object&#x27;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="keyword">typeof</span> []) <span class="comment">// &#x27;object&#x27;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="keyword">typeof</span> &#123;&#125;) <span class="comment">// &#x27;object&#x27;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="keyword">typeof</span> /^<span class="regexp">/) /</span><span class="regexp">/ &#x27;object&#x27;</span></span><br></pre></td></tr></table></figure>

<p>局限性</p>
<p>1.<code>typeof null =&gt; &quot;object&quot;</code>，但是null并不是对象</p>
<p>2.基于typeof无法细分出当前值是普通对象还是数组对象等，因为只要是对象数据类型，返回的结果都是”object”</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="keyword">typeof</span> <span class="keyword">typeof</span> <span class="keyword">typeof</span> []) <span class="comment">// &#x27;string&#x27;，注意用引号区分出字符串</span></span><br></pre></td></tr></table></figure>

<p>因为typeof检测的结果都是字符串，所以只要两个及以上同时检测，最后结果必然是”string”</p>
<h3 id="instanceof"><a href="#instanceof" class="headerlink" title="instanceof"></a><code>instanceof</code></h3><p>一开始并不是用来检测数据类型的，而是用来检测当前实例是否属于某个类的</p>
<h3 id="constructor-NaN"><a href="#constructor-NaN" class="headerlink" title="constructor"></a><code>constructor</code></h3><h3 id="Object-prototype-toString-call"><a href="#Object-prototype-toString-call" class="headerlink" title="Object.prototype.toString.call"></a><code>Object.prototype.toString.call</code></h3><h2 id="流程控制"><a href="#流程控制" class="headerlink" title="流程控制"></a>流程控制</h2><h3 id="判断"><a href="#判断" class="headerlink" title="判断"></a>判断</h3><blockquote>
<p>条件成立做什么?不成立做什么?</p>
<ul>
<li>if&#x2F;else if&#x2F;else</li>
<li>三元运算符</li>
<li>switch case</li>
</ul>
</blockquote>
<h4 id="三元运算符"><a href="#三元运算符" class="headerlink" title="三元运算符"></a>三元运算符</h4><p>三元运算符:简单IF&#x2F;ELSE的特殊处理方式</p>
<p>条件?条件成立处理的事情:不成立处理的事情;</p>
<p>1.如果处理的事情比较多，我们用括号包起来，每一-件事情用逗号分隔</p>
<p>2.如果不需要处理事情，可以使用null&#x2F;undefined占位</p>
<h4 id="switch-case"><a href="#switch-case" class="headerlink" title="switch case"></a>switch case</h4><blockquote>
<p>1.每一-种CASE情况结束后最好都加上break</p>
<p>2.default等价于else，以上都不成立干的事情</p>
<p>3.每一种case情况的比较用的都是&#x3D;&#x3D;&#x3D;绝对相等</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a = <span class="number">10</span></span><br><span class="line"><span class="keyword">switch</span> (a) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">10</span>:</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">10</span>) <span class="comment">// 10</span></span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">case</span> <span class="number">11</span>:</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">11</span>)</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    <span class="attr">default</span>:</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">12</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>没加break的影响：不管后面的条件成不成立，都会被执行，直到遇到break为止</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a = <span class="number">10</span></span><br><span class="line"><span class="keyword">switch</span> (a) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">10</span>:</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">10</span>) <span class="comment">// 10</span></span><br><span class="line">    <span class="keyword">case</span> <span class="number">11</span>:</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">11</span>) <span class="comment">// 11</span></span><br><span class="line">    <span class="attr">default</span>:</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">12</span>) <span class="comment">// 12</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>应用场景，不加break可以实现变量在某些值的情况下做相同的事情：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a = <span class="number">10</span></span><br><span class="line"><span class="keyword">switch</span> (a) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">10</span>:</span><br><span class="line">    <span class="keyword">case</span> <span class="number">11</span>:</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;10, 11&#x27;</span>) <span class="comment">// 不加break可以实现变量在某些值的情况下做相同的事情</span></span><br><span class="line">    <span class="attr">default</span>:</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">12</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="x3D-x3D-VS-x3D-x3D-x3D"><a href="#x3D-x3D-VS-x3D-x3D-x3D" class="headerlink" title="&#x3D;&#x3D; VS &#x3D;&#x3D;&#x3D;"></a>&#x3D;&#x3D; VS &#x3D;&#x3D;&#x3D;</h4><p>&#x3D;&#x3D;:相等(如果左右两边数据值类型不同，是默认先转换为相同的类型，然后比较)<br>‘5’&#x3D;&#x3D;5 &#x3D;&gt;TRUE<br>&#x3D;&#x3D;&#x3D;:绝对相等(如果类型不一一样，肯定不相等)<br>‘5’&#x3D;&#x3D;&#x3D;5 &#x3D;&gt;FALSE</p>
<p>项目中为了保证业务的严谨，推荐使用&#x3D;&#x3D;&#x3D;</p>
<h3 id="循环"><a href="#循环" class="headerlink" title="循环"></a>循环</h3><blockquote>
<p>重复做某些事情就是循环</p>
<ul>
<li>for循环</li>
<li>for in循环</li>
<li>for of循环( ES6新增)</li>
<li>while循环</li>
<li>do while循环</li>
</ul>
</blockquote>
<p>1.创建循环初始值</p>
<p>2.设置(验证)循环执行的条件</p>
<p>3.条件成立执行循环体中的内容</p>
<p>4.当前循环结束执行步长累计操作</p>
<p>循环体中的两个关键词</p>
<ul>
<li>continue: 结束当前这轮循环(continue后面的代码不再执行)，继续执行下一轮循环</li>
<li>break: 强制结束整个循环( break后面代码也不再执行)，而且整个循环啥也不干直接结束</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">    <span class="keyword">if</span> (i &gt; <span class="number">2</span>) &#123;</span><br><span class="line">        i += <span class="number">2</span></span><br><span class="line">        <span class="keyword">continue</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (i &gt;= <span class="number">6</span>) &#123;</span><br><span class="line">        i--</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    &#125;</span><br><span class="line">    i++</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(i) <span class="comment">// 1 3</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(i) <span class="comment">// 10</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="函数的基础概念"><a href="#函数的基础概念" class="headerlink" title="函数的基础概念"></a>函数的基础概念</h2><blockquote>
<p>函数就是一个方法或者一个功能体，函数就是把实现某个功能的代码放到一-起进行封装，以后想要操作实现这个功能，只需要把函数执行即可&#x3D;&gt;“封装”: 减少页面中的冗余代码，提高代码重复使用率(低耦合高内聚)</p>
</blockquote>
<h3 id="函数的创建"><a href="#函数的创建" class="headerlink" title="函数的创建"></a>函数的创建</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//=&gt;ES5老方式</span></span><br><span class="line"><span class="keyword">function</span> [函数名]([形参变量<span class="number">1</span>]...)&#123;</span><br><span class="line">    <span class="comment">//函数体:基于JS完成需要实现的功能，</span></span><br><span class="line">    <span class="keyword">return</span> [处理后的结果];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">[函数名]([实参<span class="number">1</span>]....);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="函数参数"><a href="#函数参数" class="headerlink" title="函数参数"></a>函数参数</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 求两个数的和， 算完和后乘以10，然后在除以2...</span></span><br><span class="line"><span class="comment">// =&gt;sum是函数名，代表这个函数，</span></span><br><span class="line"><span class="comment">// =&gt;n/m是形参，是变量，用来存储执行函数时传递的实参</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">sum</span>(<span class="params">n, m</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> result=n+m;</span><br><span class="line">    result *= <span class="number">10</span>;</span><br><span class="line">    result /= <span class="number">2</span>;</span><br><span class="line">    <span class="variable language_">console</span>. <span class="title function_">log</span>(result);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>. <span class="title function_">log</span>(sum);</span><br><span class="line"><span class="title function_">sum</span>(<span class="number">10</span>, <span class="number">20</span>);|</span><br><span class="line"></span><br><span class="line"><span class="comment">//形参的细节</span></span><br><span class="line"><span class="comment">//创建函数的时候我们设置了形参变量，但如果执行的时候并没有给传递对应的实参值，那么形参变量默认的值是: undefined</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="函数返回值"><a href="#函数返回值" class="headerlink" title="函数返回值"></a>函数返回值</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 函数执行的时候，函数体内部创建的变量我们是无法获取和操作的，如果要想获取内部的信息，我们需要基于RETURN返回值机制，把信息返回才可以</span></span><br><span class="line"><span class="comment">// RETURN的一定是值:此处是把RESULT变量存储的值返回给外面</span></span><br><span class="line"><span class="comment">// 没有写RETURN，函数默认返回值是undefined</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="匿名函数"><a href="#匿名函数" class="headerlink" title="匿名函数"></a>匿名函数</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//匿名函数之函数表达式:把一个匿名函数本身作为值赋值给其它东西，这种函数一般不是手动触发执行，而且靠其它程序驱动触发执行(例如:触发某个事件的时候把它执行等)</span></span><br><span class="line"><span class="variable language_">document</span>. body. onclick = <span class="keyword">function</span> (<span class="params"></span>) &#123;&#125;</span><br><span class="line"><span class="built_in">setTimeout</span>( <span class="keyword">function</span>(<span class="params"></span>)&#123;&#125;, <span class="number">1000</span>); <span class="comment">//=&gt;设置定时器，1000MS后执行匿名函数</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//匿名函数之自执行函数:创建完-一个匿名函数，紧接着就把当前函数加小括号执行</span></span><br><span class="line">(<span class="keyword">function</span>(<span class="params">n</span>)&#123;</span><br><span class="line">	<span class="function"><span class="params">n</span>=&gt;</span><span class="number">100</span></span><br><span class="line">&#125;)(<span class="number">100</span>);</span><br></pre></td></tr></table></figure>

<h3 id="函数的底层运行机制"><a href="#函数的底层运行机制" class="headerlink" title="函数的底层运行机制"></a>函数的底层运行机制</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 创建函数</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">fn</span>(<span class="params">n, m</span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> res = <span class="literal">null</span></span><br><span class="line">    res = n + m</span><br><span class="line">    <span class="keyword">return</span> res</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 执行函数</span></span><br><span class="line"><span class="keyword">var</span> <span class="variable constant_">AA</span> = <span class="title function_">fn</span>(<span class="number">10</span>, <span class="number">20</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable constant_">AA</span>)</span><br></pre></td></tr></table></figure>

<p>创建函数，开辟的堆内存中存储的是函数体中的代码，但是是按照字符串存储的</p>
<p>执行函数，先把fn函数执行，再把执行后的返回结果和变量AA关联在一起，函数的返回值只看return，有return，后面是啥返回值就是啥，没有就是undefined</p>
<p>每一次函数执行的目的，都是把函数体中的代码（先从字符串变为代码）执行 &#x3D;&gt; 形成一个全新的私有内存栈（<a target="_blank" rel="noopener" href="https://www.jianshu.com/p/edb2be5866eb">JS编译过程，VO，AO </a>）</p>
<p><strong><code>JS</code>函数运行机制</strong></p>
<p>首先关于整个生命周期，最重要的是要了解它的编译过程。</p>
<ol>
<li>发现有代码调用了一个函数</li>
<li>在执行这个function之前，创建一个执行上下文（execution context），也可以叫执行环境。</li>
<li>进入创建阶段（VO创建）<br> a. 初始化作用域链（scope chain）<br> b. 创建变量函数（variable object &#x2F; VO）<br> c. 创建参数对象（arguments object，传进来的参数）,检查上下文，初始化其名字和值，以及建立引用对象的拷贝。<br> d. 扫描上下文中的函数声明<br> e. 为每一个扫描到的函数声明在VO中创建一个属性，命名为函数的名字，指向了存储空间中的对应函数。<br> f. 如果函数名称已经存在了，这个引用指针将被重写为新的这一个。<br> g. 扫描上下文中的变量声明<br> h. 为每一个扫描到的变量声明在VO中创建一个属性，命名为变量的名字，初始化值为undefined。<br> i. 如果变量名在内存中已经存在了，就跳过。<br> j. 决定上下文中this的指向。</li>
<li>执行阶段（VO &#x3D;&gt; AO）<br> a. 执行&#x2F;解释上下文中的function，为变量赋值<br> b. 代码按行执行</li>
</ol>
<p>就我个人理解，他们的相应概念和包含内容如下。</p>
<p>scope ：变量&#x2F;函数起作用的区域<br> scope chain : 保证对执行环境有权访问的所有变量和函数的有序访问。相当于VO + [scope]<br> 我们可以将作用域定义为一套规则，用来管理引擎如何在当前作用域以及嵌套的子作用域中根据标识符名称进行变量查找，作用域链是这套规则的具体实现。</p>
<p>execution context  &#x3D; {VO, this, [scope]}</p>
<p>函数的每次执行，都会形成一个全新的私有栈内存</p>
<p>每个私有栈内存都会有变量存储、值存储对应的内存空间</p>
<p><strong>案例解析</strong></p>
<p>选项卡</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">value</span>=<span class="string">&quot;按钮1&quot;</span>&gt;</span>按钮1<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">value</span>=<span class="string">&quot;按钮2&quot;</span>&gt;</span>按钮2<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">value</span>=<span class="string">&quot;按钮3&quot;</span>&gt;</span>按钮3<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">value</span>=<span class="string">&quot;按钮4&quot;</span>&gt;</span>按钮4<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">value</span>=<span class="string">&quot;按钮5&quot;</span>&gt;</span>按钮5<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> btnList = <span class="variable language_">document</span>.<span class="title function_">getElementsByTagName</span>(<span class="string">&#x27;button&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; btnList.<span class="property">length</span>; i++) &#123;</span></span><br><span class="line"><span class="language-javascript">        btnList[i].<span class="property">onclick</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">console</span>.<span class="title function_">log</span>(i)</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>点击的回调函数执行时，每个函数对应保存i都是5，因为for循环已经执行完毕了：给每个<code>button</code>对象向，添加点击事件的回调，而当我们真正去点击时，函数开始执行，此时<code>i</code>的值是5</p>
<p>可以每次循环时，自定义一个<code>myIndex</code>属性，记录每次<code>i</code>的值</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> btnList = <span class="variable language_">document</span>.<span class="title function_">getElementsByTagName</span>(<span class="string">&#x27;button&#x27;</span>)</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; btnList.<span class="property">length</span>; i++) &#123;</span><br><span class="line">    btnList[i].<span class="property">myIndex</span> = i</span><br><span class="line">    btnList[i].<span class="property">onclick</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">myIndex</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="函数的arguments"><a href="#函数的arguments" class="headerlink" title="函数的arguments"></a>函数的arguments</h3><p>任意数求和：</p>
<ul>
<li>传递实参的个数不定</li>
<li>传递的值是否为有效数字不定</li>
</ul>
<p>把传递的有效数字进行相加求和</p>
<p>箭头函数</p>
<p>arguments：函数内置的实参集合</p>
<ul>
<li><p>类数组集合，集合中存储所有函数执行时，传递的实参信息</p>
</li>
<li><p>不论是否设置形参，arguments都存在</p>
</li>
<li><p>不论是否传递实参，arguments都存在</p>
</li>
<li><p>arguments.callee：存储的是当前函数本身（一般不用，JS严格模式下禁止使用这些属性）</p>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">sum</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">arguments</span>)</span><br><span class="line">    <span class="keyword">let</span> total = <span class="literal">null</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="variable language_">arguments</span>.<span class="property">length</span>; i++) &#123;</span><br><span class="line">        <span class="comment">// 获取的每一项，都要先转换成数字</span></span><br><span class="line">        <span class="keyword">let</span> item = <span class="title class_">Number</span>(<span class="variable language_">arguments</span>[i])</span><br><span class="line">        <span class="comment">// 非有效数字不加</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">isNaN</span>(item)) &#123;</span><br><span class="line">            <span class="keyword">continue</span></span><br><span class="line">        &#125;</span><br><span class="line">        total += item;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> total</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> total = <span class="title function_">sum</span>(<span class="number">1</span>, <span class="number">3</span>, <span class="string">&#x27;5a&#x27;</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(total)</span><br><span class="line"><span class="comment">// arguements.callee指向函数自身，严格模式下禁止使用</span></span><br></pre></td></tr></table></figure>

<p><img src="/2022/09/16/web/JavaScript/js%E4%BB%8E%E5%9F%BA%E7%A1%80%E5%88%B0%E8%BF%9B%E9%98%B6/image-20221212210134110.png" alt="image-20221212210134110"></p>
<h3 id="箭头函数"><a href="#箭头函数" class="headerlink" title="箭头函数"></a>箭头函数</h3><p>见<code>ES6~11</code>小节</p>
<h1 id="ES6"><a href="#ES6" class="headerlink" title="ES6+"></a>ES6+</h1><p><a target="_blank" rel="noopener" href="https://github.com/lukehoban/es6features">GitHub - lukehoban&#x2F;es6features: Overview of ECMAScript 6 features</a></p>
<p>教程来源：<a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1uK411H7on">https://www.bilibili.com/video/BV1uK411H7on</a></p>
<h2 id="变量及作用域"><a href="#变量及作用域" class="headerlink" title="变量及作用域"></a>变量及作用域</h2><h3 id="let变量声明及其作用域"><a href="#let变量声明及其作用域" class="headerlink" title="let变量声明及其作用域"></a>let变量声明及其作用域</h3><p>1.变量不能重复声明</p>
<p>2.块级作用域 全局，函数，eval</p>
<p>3.不存在变量提升</p>
<p>4.不影响作用域链</p>
<p><strong>let实践练习</strong></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">&quot;text/css&quot;</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.item</span>&#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">height</span>: <span class="number">50px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border</span>: solid <span class="number">1px</span> <span class="number">#0077AA</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">float</span>: left;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin-left</span>: <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span> <span class="attr">class</span>=<span class="string">&quot;page-header&quot;</span>&gt;</span>点击切换颜色<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//获取item对象</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">let</span> items = <span class="variable language_">document</span>.<span class="title function_">getElementsByClassName</span>(<span class="string">&quot;item&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//遍历并绑定事件</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">for</span>(<span class="keyword">let</span> i=<span class="number">0</span>;i&lt;items.<span class="property">length</span>;i++)&#123;</span></span><br><span class="line"><span class="language-javascript">            items[i].<span class="property">onclick</span>=<span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                items[i].<span class="property">style</span>.<span class="property">background</span> = <span class="string">&#x27;pink&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="const常量声明"><a href="#const常量声明" class="headerlink" title="const常量声明"></a>const常量声明</h3><p>1.一定要赋初始值</p>
<p>2.一般常量使用大写（潜规则）</p>
<p>3.常量的值不能修改</p>
<p>4.块级作用域</p>
<p>5.对于数组和对象的元素的修改，不算做对常量的修改，不会报错</p>
<h2 id="解构赋值"><a href="#解构赋值" class="headerlink" title="解构赋值"></a>解构赋值</h2><p><code>ES6</code>允许按照一定的模式从数组或对象中提取值，对变量进行赋值，这被称为解构赋值</p>
<h3 id="数组的解构"><a href="#数组的解构" class="headerlink" title="数组的解构"></a>数组的解构</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="variable constant_">F4</span> = [<span class="string">&#x27;a&#x27;</span>,<span class="string">&#x27;b&#x27;</span>,<span class="string">&#x27;c&#x27;</span>,<span class="string">&#x27;d&#x27;</span>];</span><br><span class="line"><span class="keyword">let</span> [a1,a2,a3,a4] = <span class="variable constant_">F4</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a1,a2,a3,a4) <span class="comment">// a b c d</span></span><br></pre></td></tr></table></figure>

<h3 id="对象的解构"><a href="#对象的解构" class="headerlink" title="对象的解构"></a>对象的解构</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 对象的解构</span></span><br><span class="line"><span class="keyword">const</span> person = &#123;</span><br><span class="line">    name : <span class="string">&#x27;小明&#x27;</span>,</span><br><span class="line">    age : <span class="number">10</span>,</span><br><span class="line">    run : <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">       <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;我可以跑步&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">let</span> &#123;name,age,run&#125; = person;</span><br><span class="line"><span class="title function_">run</span>(); <span class="comment">// 我可以跑步</span></span><br></pre></td></tr></table></figure>

<h4 id="对象解构赋值的连续写法"><a href="#对象解构赋值的连续写法" class="headerlink" title="对象解构赋值的连续写法"></a>对象解构赋值的连续写法</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> obj = &#123;</span><br><span class="line">    <span class="attr">a</span>: &#123;</span><br><span class="line">        <span class="attr">b</span>: &#123;</span><br><span class="line">            <span class="attr">c</span>: <span class="number">1</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> $oute = &#123;</span><br><span class="line">    <span class="attr">query</span>: &#123;</span><br><span class="line">        <span class="attr">id</span>: <span class="number">0001</span>,</span><br><span class="line">        <span class="attr">title</span>: <span class="string">&#x27;hello&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> &#123;a&#125; = obj</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;a&#x27;</span>, a) <span class="comment">// &#123;b: &#123;c: 1&#125;&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> &#123;<span class="attr">a</span>: &#123;b&#125;&#125; = obj</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;b&#x27;</span>, b) <span class="comment">// &#123;c: 1&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> &#123;<span class="attr">a</span>: &#123;<span class="attr">b</span>: &#123;c&#125;&#125;&#125; = obj</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;c&#x27;</span>, c) <span class="comment">// 1</span></span><br></pre></td></tr></table></figure>

<p>连续结构赋值的同时，重命名属性值</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123;<span class="attr">a</span>: &#123;<span class="attr">b</span>: data&#125;&#125; = obj</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;data&#x27;</span>, data) <span class="comment">// &#123;c: 1&#125;</span></span><br></pre></td></tr></table></figure>

<p>通过连续结构赋值的写法，是无法获取到外层属性值的，比如此时a是无法获取到的：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123;<span class="attr">a</span>: &#123;<span class="attr">b</span>: data&#125;&#125; = obj</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;a&#x27;</span>, a)</span><br></pre></td></tr></table></figure>



<h2 id="模板字符串"><a href="#模板字符串" class="headerlink" title="模板字符串"></a>模板字符串</h2><p><code>ES6</code>引入新的声明字符串的方式，类似于占位符</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">` `, &#x27; &#x27;, &quot; &quot;</span><br></pre></td></tr></table></figure>

<p>1.声明</p>
<p>2.内容中可以直接出现换行符</p>
<p>3.变量拼接</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">// $&#123;&#125;</span><br><span class="line">let name = &#x27;xiaoming&#x27;</span><br><span class="line">let result = `$&#123;name&#125; is running`</span><br></pre></td></tr></table></figure>

<h2 id="对象的简化写法"><a href="#对象的简化写法" class="headerlink" title="对象的简化写法"></a>对象的简化写法</h2><p><code>ES6</code>允许在大括号里面，直接写入变量和函数，作为对象的属性和方法。这样的书写更加简洁。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> name = <span class="string">&#x27;xiaoming&#x27;</span>;</span><br><span class="line"><span class="keyword">let</span> change = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;we can change you~&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> school = &#123;</span><br><span class="line">    name,</span><br><span class="line">    change,</span><br><span class="line">    <span class="title function_">improve</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;we can improve you~&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="箭头函数-1"><a href="#箭头函数-1" class="headerlink" title="箭头函数"></a>箭头函数</h2><h3 id="箭头函数以及声明特点"><a href="#箭头函数以及声明特点" class="headerlink" title="箭头函数以及声明特点"></a>箭头函数以及声明特点</h3><p><code>ES6</code>允许使用箭头<code>=&gt;</code>定义函数</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="title function_">fn</span> = (<span class="params">a,b</span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">return</span> a + b;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> result = <span class="title function_">fn</span>(<span class="number">1</span>,<span class="number">2</span>);</span><br></pre></td></tr></table></figure>

<p>1.<code>this</code>是静态的，<code>this</code>始终指向函数声明时所在作用域下的<code>this</code>的值</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">getName</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">name</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> <span class="title function_">getName2</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">name</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//设置window对象的name属性</span></span><br><span class="line"><span class="variable language_">window</span>.<span class="property">name</span> = <span class="string">&#x27;小明&#x27;</span>;</span><br><span class="line"><span class="keyword">const</span> person = &#123;</span><br><span class="line">    <span class="attr">name</span>:<span class="string">&#x27;xiaoming&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//直接调用</span></span><br><span class="line"><span class="title function_">getName</span>();<span class="comment">//小明</span></span><br><span class="line"><span class="title function_">getName2</span>();<span class="comment">//小明</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//call方法调用</span></span><br><span class="line">getName.<span class="title function_">call</span>(person)<span class="comment">//xiaoming</span></span><br><span class="line">getName2.<span class="title function_">call</span>(person)<span class="comment">//小明  this始终指向函数声明时所在作用域下的this的值</span></span><br></pre></td></tr></table></figure>

<p>call方法补充</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> person = &#123;</span><br><span class="line">    <span class="attr">fullName</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">firstName</span> + <span class="string">&quot; &quot;</span> + <span class="variable language_">this</span>.<span class="property">lastName</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> person1 = &#123;</span><br><span class="line">    <span class="attr">firstName</span>:<span class="string">&quot;Bill&quot;</span>,</span><br><span class="line">    <span class="attr">lastName</span>: <span class="string">&quot;Gates&quot;</span>,</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> person2 = &#123;</span><br><span class="line">    <span class="attr">firstName</span>:<span class="string">&quot;Steve&quot;</span>,</span><br><span class="line">    <span class="attr">lastName</span>: <span class="string">&quot;Jobs&quot;</span>,</span><br><span class="line">&#125;</span><br><span class="line">person.<span class="property">fullName</span>.<span class="title function_">call</span>(person1);  <span class="comment">// 将返回 &quot;Bill Gates&quot;</span></span><br></pre></td></tr></table></figure>

<p>2.不能作为构造函数实例化对象</p>
<p>3.不能使用<code>arguments</code>变量</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 没有arguments</span></span><br><span class="line"><span class="keyword">let</span> <span class="title function_">argFunc</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">arguments</span>) <span class="comment">// 可以打印，但并没有值</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">argFunc</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>)</span><br></pre></td></tr></table></figure>

<p>并没有获取到实参</p>
<p><img src="/2022/09/16/web/JavaScript/js%E4%BB%8E%E5%9F%BA%E7%A1%80%E5%88%B0%E8%BF%9B%E9%98%B6/image-20221212214757106.png" alt="image-20221212214757106"></p>
<p>4.箭头函数的简写</p>
<ul>
<li><p>参数</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>省略小括号，当形参有且只有一个的时候</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>


</li>
<li><p>返回值</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 省略花括号，当代码体只有一条语句的时候，此时return可以省略，而且语句的执行结果就是函数的返回值</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 普通函数</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">sum</span>(<span class="params">n, m</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> n + m</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 改写成箭头函数</span></span><br><span class="line"><span class="keyword">let</span> <span class="title function_">sumA</span> = (<span class="params">n, m</span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">return</span> n + m</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 如果函数体中只有一行return，可以省略return和大括号，一行搞定</span></span><br><span class="line"><span class="keyword">let</span> <span class="title function_">sumB</span> = (<span class="params">n, m</span>) =&gt; n + m</span><br><span class="line"></span><br><span class="line"><span class="comment">// 函数中返回函数（柯里化函数）</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">fn</span>(<span class="params">n</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">function</span> (<span class="params">m</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> n + m</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 柯里化函数改写成箭头函数</span></span><br><span class="line"><span class="keyword">let</span> <span class="title function_">fn1</span> = (<span class="params">n</span>) =&gt; <span class="function">(<span class="params">m</span>) =&gt;</span> n + m</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="箭头函数的实践和应用场景"><a href="#箭头函数的实践和应用场景" class="headerlink" title="箭头函数的实践和应用场景"></a>箭头函数的实践和应用场景</h3><p><code>pass</code></p>
<h3 id="函数参数的默认值"><a href="#函数参数的默认值" class="headerlink" title="函数参数的默认值"></a>函数参数的默认值</h3><p><code>ES6</code>允许给函数参数赋值初始值</p>
<p>1.形参初始值 具有默认值的参数，一般要靠后（潜规则）</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 函数形参默认值</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">add</span>(<span class="params">a, b, c = <span class="number">10</span></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> a + b + c;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> result = <span class="title function_">add</span>(<span class="number">1</span>, <span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="title function_">sum</span> = (<span class="params">n = <span class="number">0</span>, m = <span class="number">0</span></span>) =&gt; n + m</span><br></pre></td></tr></table></figure>

<p>2.与解构赋值相结合</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 与解构赋值相结合</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">connect</span>(<span class="params">&#123; host = <span class="string">&quot;127.0.0.1&quot;</span>, username, password, port &#125;</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(host, username, password, port);</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">connect</span>(&#123;</span><br><span class="line">    <span class="attr">username</span>: <span class="string">&#x27;root&#x27;</span>,</span><br><span class="line">    <span class="attr">password</span>: <span class="string">&#x27;root&#x27;</span>,</span><br><span class="line">    <span class="attr">port</span>: <span class="number">3306</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="rest参数"><a href="#rest参数" class="headerlink" title="rest参数"></a><code>rest</code>参数</h3><p><code>ES6</code>引入<code>rest</code>参数（剩余运算符），用户获取函数的实参，用来代替arguments</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ES5获取实参的方式</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">date</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">arguments</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">date</span>(<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>); <span class="comment">// Arguments(3) [&#x27;a&#x27;, &#x27;b&#x27;, &#x27;c&#x27;, callee: ƒ, Symbol(Symbol.iterator): ƒ]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 箭头没有arguments（箭头函数的arguments始终是一个空类数组对象）</span></span><br><span class="line"><span class="keyword">let</span> <span class="title function_">argFunc</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">arguments</span>) <span class="comment">// 可以打印，但并没有值</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">argFunc</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// rest参数</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">date02</span>(<span class="params">...args</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(args); <span class="comment">// 结果是数组，可以使用数组的一些api，filer some every map等</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">date02</span>(<span class="string">&#x27;d&#x27;</span>, <span class="string">&#x27;e&#x27;</span>, <span class="string">&#x27;f&#x27;</span>); <span class="comment">// [ &#x27;d&#x27;, &#x27;e&#x27;, &#x27;f&#x27; ]</span></span><br></pre></td></tr></table></figure>

<p><code>rest</code>参数必须要放到参数的最后</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// `rest`参数必须要放到参数的最后</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">fn</span>(<span class="params">a, b, ...args</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(a, b, args)</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">fn</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>); <span class="comment">//1 2 [ 3, 4, 5 ]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// args参数任意数求和</span></span><br><span class="line"><span class="keyword">let</span> <span class="title function_">sumArgs</span> = (<span class="params">...args</span>) =&gt; <span class="built_in">eval</span>(args.<span class="title function_">join</span>(<span class="string">&#x27;+&#x27;</span>))</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`sumArgs: <span class="subst">$&#123;sumArgs(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>)&#125;</span>`</span>)</span><br></pre></td></tr></table></figure>

<h2 id="扩展运算符"><a href="#扩展运算符" class="headerlink" title="扩展运算符"></a>扩展运算符</h2><p><code>...</code></p>
<ul>
<li><code>扩展运算符能将</code>数组<code>转化为逗号分隔的</code>参数序列</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">//声明一个数组</span></span><br><span class="line"><span class="keyword">const</span> boys = [<span class="string">&#x27;aa&#x27;</span>,<span class="string">&#x27;bb&#x27;</span>,<span class="string">&#x27;cc&#x27;</span>];</span><br><span class="line"><span class="comment">// =&gt; &#x27;aa&#x27;,&#x27;bb&#x27;,&#x27;cc&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//声明一个函数</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">chunwan</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">arguments</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">chunwan</span>(boys);<span class="comment">// Arguments [Array(3), callee: ƒ, Symbol(Symbol.iterator): ƒ]</span></span><br><span class="line"><span class="title function_">chunwan</span>(...boys);<span class="comment">//Arguments(3) [&quot;aa&quot;, &quot;bb&quot;, &quot;cc&quot;, callee: ƒ, Symbol(Symbol.iterator): ƒ]     chunwan(&#x27;aa&#x27;,&#x27;bb&#x27;,&#x27;cc);</span></span><br></pre></td></tr></table></figure>

<h3 id="扩展运算符的运用"><a href="#扩展运算符的运用" class="headerlink" title="扩展运算符的运用"></a>扩展运算符的运用</h3><p>1.数组的合并</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//普通的数组合并</span></span><br><span class="line"><span class="keyword">const</span> array1 = [<span class="string">&#x27;aa&#x27;</span>,<span class="string">&#x27;bb&#x27;</span>];</span><br><span class="line"><span class="keyword">const</span> array2 = [<span class="string">&#x27;cc&#x27;</span>,<span class="string">&#x27;dd&#x27;</span>];</span><br><span class="line"><span class="keyword">const</span> array3 = array1.<span class="title function_">concat</span>(array2);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(array3);<span class="comment">// (4) [&quot;aa&quot;, &quot;bb&quot;, &quot;cc&quot;, &quot;dd&quot;]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> array4 = [...array1,...array2];</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(array4);<span class="comment">//(4) [&quot;aa&quot;, &quot;bb&quot;, &quot;cc&quot;, &quot;dd&quot;]</span></span><br></pre></td></tr></table></figure>

<p>2.数组的克隆</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> testa = [<span class="string">&#x27;A&#x27;</span>,<span class="string">&#x27;B&#x27;</span>,<span class="string">&#x27;C&#x27;</span>];</span><br><span class="line"><span class="keyword">const</span> testCopy = [...testa];</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(testa,testCopy,testa === testCopy); <span class="comment">//(3) [&quot;A&quot;, &quot;B&quot;, &quot;C&quot;] (3) [&quot;A&quot;, &quot;B&quot;, &quot;C&quot;] false</span></span><br></pre></td></tr></table></figure>

<p>3.将伪数组转为真正的数组</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> divs = <span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&quot;div&quot;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(divs);/<span class="title function_">deList</span>(<span class="number">3</span>) [div, div, div]</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> divArr = [...divs];</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(divArr);<span class="comment">//(3) [div, div, div]</span></span><br></pre></td></tr></table></figure>

<h2 id="Symbol的介绍与-应用"><a href="#Symbol的介绍与-应用" class="headerlink" title="Symbol的介绍与 应用"></a>Symbol的介绍与 应用</h2><p>1.Symbol的值是唯一的，用来解决命名冲突的问题</p>
<p>2.Symbol值不能与其他数据进行运算</p>
<p>3.Symbol定义的对象属性不能使用for…in循环遍历，但是可以使用Reflect.ownKeys来获取对象的所键名</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">//创建Symbol</span><br><span class="line">let s = Symbol();</span><br><span class="line">console.log(s, typeof s); //Symbol() &quot;symbol&quot;</span><br><span class="line"></span><br><span class="line">let s2 = Symbol(&#x27;aa&#x27;);</span><br><span class="line">let s3 = Symbol(&#x27;aa&#x27;);</span><br><span class="line">console.log(s2,s3,s2 == s3);//Symbol(aa) Symbol(aa) false</span><br><span class="line"></span><br><span class="line">//Symbole.for创建</span><br><span class="line">let s4 = Symbol.for(&#x27;aa&#x27;);</span><br><span class="line">console.log(s4,typeof s4);//Symbol(aa) &quot;symbol&quot;</span><br><span class="line">let s5 = Symbol.for(&#x27;aa&#x27;);</span><br><span class="line">console.log(s4 == s5);// true</span><br><span class="line"></span><br><span class="line">//不能与其他数据进行运算</span><br><span class="line">let result = s + 100;//test.js:17 Uncaught TypeError: Cannot convert a Symbol value to a number</span><br></pre></td></tr></table></figure>

<p>JS数据类型记忆：USONB</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">U:undefined</span><br><span class="line">S:String Symbol</span><br><span class="line">O:object</span><br><span class="line">N:number null</span><br><span class="line">B:boolean</span><br></pre></td></tr></table></figure>

<h3 id="对象添加Symbol类型的属性¶"><a href="#对象添加Symbol类型的属性¶" class="headerlink" title="对象添加Symbol类型的属性¶"></a>对象添加Symbol类型的属性<a href="#symbol_1">¶</a></h3><p>添加方式一：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">//向对象添加方法 up down</span><br><span class="line">let game = &#123;</span><br><span class="line">    down:function () &#123;</span><br><span class="line">        console.log(&#x27;aa&#x27;);</span><br><span class="line">    &#125;,</span><br><span class="line">    up:function()&#123;</span><br><span class="line">        console.log(&#x27;cc&#x27;);</span><br><span class="line">    &#125;,</span><br><span class="line">    name : &#x27;bb&#x27;</span><br><span class="line">&#125;</span><br><span class="line">//不能直接给对象添加up或down，因为不确定game对象中是否已经存在相同值</span><br><span class="line">// game.up =function () &#123;</span><br><span class="line">//</span><br><span class="line">// &#125;</span><br><span class="line">//声明一个对象</span><br><span class="line">let methods = &#123;</span><br><span class="line">    up:Symbol(),</span><br><span class="line">    down:Symbol()</span><br><span class="line">&#125;;</span><br><span class="line">//给game扩展方法</span><br><span class="line">game[methods.up] = function () &#123;</span><br><span class="line">    console.log(&#x27;我可以改变形状&#x27;);</span><br><span class="line">&#125;</span><br><span class="line">game[methods.down] = function () &#123;</span><br><span class="line">    console.log(&#x27;我可以快速下降&#x27;);</span><br><span class="line">&#125;</span><br><span class="line">console.log(game)</span><br><span class="line">// &#123;</span><br><span class="line">//     down: [Function: down],</span><br><span class="line">//     up: [Function: up],</span><br><span class="line">//     name: &#x27;bb&#x27;,</span><br><span class="line">//     [Symbol()]: [Function],</span><br><span class="line">//     [Symbol()]: [Function]</span><br><span class="line">// &#125;</span><br></pre></td></tr></table></figure>

<p>添加方式二：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">let youxi = &#123;</span><br><span class="line">    name:&#x27;狼人杀&#x27;,</span><br><span class="line">    [Symbol(&#x27;say&#x27;)]:function () &#123;</span><br><span class="line">        console.log(&#x27;我可以发言&#x27;);</span><br><span class="line">    &#125;,</span><br><span class="line">    [Symbol(&#x27;zibao&#x27;)]:function () &#123;</span><br><span class="line">        console.log(&#x27;我可以自爆&#x27;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">console.log(youxi);</span><br><span class="line">//&#123;</span><br><span class="line">//   name: &#x27;狼人杀&#x27;,</span><br><span class="line">//   [Symbol(say)]: [Function: [say]],</span><br><span class="line">//   [Symbol(zibao)]: [Function: [zibao]]</span><br><span class="line">// &#125;</span><br></pre></td></tr></table></figure>

<h3 id="Symbol的内置属性¶"><a href="#Symbol的内置属性¶" class="headerlink" title="Symbol的内置属性¶"></a>Symbol的内置属性<a href="#symbol_2">¶</a></h3><p>除了定义自己使用的Symbol值意外，ES6还提供了11个内置的Symbol值，指向语言内部使用的方法 这些属性都是Symbol的属性，而Symbol又是对象的属性，都是用来控制，对象在<code>特定场景</code>下的表现</p>
<p>Symbol.hasInstance|当其他对象使用instanceof运算符，判断是否为该对象的实例时，会调用这个方法 Symbol.isConcatSpreadable|对象的Symbol.isConcatSpreadable属性等于的是一个布尔值，表示该对象用于Array.prototype.concat(),是否可以展开</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">//hasInstance</span><br><span class="line">class Person&#123;</span><br><span class="line">    static [Symbol.hasInstance](param)&#123;</span><br><span class="line">        console.log(param)//会把参数传递进来</span><br><span class="line">        console.log(&#x27;我被用来检测类型了&#x27;);</span><br><span class="line">        return true;//可以自定义返回值</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">let o =&#123;</span><br><span class="line">    name:&#x27;test&#x27;</span><br><span class="line">&#125;;</span><br><span class="line">console.log(o instanceof Person);</span><br><span class="line">//&#123;name: &quot;test&quot;&#125;name: &quot;test&quot;__proto__: Object</span><br><span class="line">//test.js:4 我被用来检测类型了</span><br><span class="line">//test.js:11 true</span><br><span class="line">const arr = [1,2,3];</span><br><span class="line">const arr2 = [4,5,6];</span><br><span class="line"></span><br><span class="line">console.log(arr.concat(arr2));//(6) [1, 2, 3, 4, 5, 6]</span><br><span class="line"></span><br><span class="line">arr2[Symbol.isConcatSpreadable] = false;</span><br><span class="line">console.log(arr.concat(arr2));(4) [1, 2, 3, Array(3)]</span><br></pre></td></tr></table></figure>

<h3 id="迭代器介绍¶"><a href="#迭代器介绍¶" class="headerlink" title="迭代器介绍¶"></a>迭代器介绍<a href="#_9">¶</a></h3><p>迭代器是一种接口，为各种不同的数据结构提供统一的访问机制。任何数据结构只要部署Iterator接口，就可以完成遍历操作。 （Iterator接口本质就是对象的一个属性，就是Symbol.Iterator)</p>
<ol>
<li><p>ES6创造了一种新的遍历命令for…of循环，Iterator接口主要提供for…of消费</p>
</li>
<li><p>原生具有iterator接口的数据（可用for of遍历）</p>
</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">a) Array</span><br><span class="line"></span><br><span class="line">b) Arguments</span><br><span class="line"></span><br><span class="line">c) Set</span><br><span class="line"></span><br><span class="line">d) Map</span><br><span class="line"></span><br><span class="line">e) String</span><br><span class="line"></span><br><span class="line">f) TypedArray</span><br><span class="line"></span><br><span class="line">g) NodeList</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>工作原理</li>
</ol>
<p>a) 创建一个指针对象，指向当前数据结构的起始位置</p>
<p>b) 第一次调用对象的next方法，指针自动指向数据结构的第一个成员</p>
<p>c) 接下来不断调用next方法，指针一直往后移动，直到指向最后一个成员</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">（Iterator接口本质就是对象的一个属性，就是Symbol.Iterator)</span><br></pre></td></tr></table></figure>

<p><code>注意</code>需要自定义遍历数据的时候，要想到迭代器</p>
<h3 id="自定义迭代器¶"><a href="#自定义迭代器¶" class="headerlink" title="自定义迭代器¶"></a>自定义迭代器<a href="#_10">¶</a></h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">const banji = &#123;</span><br><span class="line">    name:&quot;终极一班&quot;,</span><br><span class="line">    stus:[</span><br><span class="line">        &#x27;xiaoing&#x27;,</span><br><span class="line">        &#x27;xiaoning&#x27;,</span><br><span class="line">        &#x27;xiaotian&#x27;,</span><br><span class="line">        &#x27;knigth&#x27;</span><br><span class="line">    ],</span><br><span class="line">    [Symbol.iterator]()&#123;</span><br><span class="line">        //索引变量</span><br><span class="line">        let index = 0;</span><br><span class="line"></span><br><span class="line">        let _this = this;</span><br><span class="line">        return &#123;</span><br><span class="line">            next:function () &#123;</span><br><span class="line">                if(index &lt; _this.stus.length)&#123;</span><br><span class="line">                    const result = &#123;value:_this.stus[index],done:false&#125;;</span><br><span class="line">                    index++;</span><br><span class="line">                    return result;</span><br><span class="line">                &#125;else&#123;</span><br><span class="line">                    return &#123;value: undefined,done: true&#125;;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">//遍历这个对象</span><br><span class="line">for(let v of banji)&#123;</span><br><span class="line">    console.log(v);</span><br><span class="line">&#125;</span><br><span class="line">// xiaoing</span><br><span class="line">// xiaoning</span><br><span class="line">// xiaotian</span><br><span class="line">// knigth</span><br></pre></td></tr></table></figure>

<h3 id="生成器函数声明与调用¶"><a href="#生成器函数声明与调用¶" class="headerlink" title="生成器函数声明与调用¶"></a>生成器函数声明与调用<a href="#_11">¶</a></h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">//定义生成器函数</span><br><span class="line">function * gen() &#123;</span><br><span class="line">    // console.log(111);</span><br><span class="line">    yield &#x27;aaa&#x27;;</span><br><span class="line">    // console.log(222);</span><br><span class="line">    yield &#x27;bbb&#x27;;</span><br><span class="line">    // console.log(333);</span><br><span class="line">    yield &#x27;ccc&#x27;;</span><br><span class="line">    // console.log(444);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">let iterator = gen();</span><br><span class="line">//生成器函数通过next()调用</span><br><span class="line">console.log(iterator.next());</span><br><span class="line">console.log(iterator.next());</span><br><span class="line">console.log(iterator.next());</span><br><span class="line">console.log(iterator.next());</span><br><span class="line"></span><br><span class="line">// &#123; value: &#x27;aaa&#x27;, done: false &#125;</span><br><span class="line">// &#123; value: &#x27;bbb&#x27;, done: false &#125;</span><br><span class="line">// &#123; value: &#x27;ccc&#x27;, done: false &#125;</span><br><span class="line">// &#123; value: undefined, done: true &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">//遍历</span><br><span class="line">for(let v of gen())&#123;</span><br><span class="line">    console.log(v);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="生成器函数的参数传递¶"><a href="#生成器函数的参数传递¶" class="headerlink" title="生成器函数的参数传递¶"></a>生成器函数的参数传递<a href="#_12">¶</a></h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">function * gen(arg) &#123;</span><br><span class="line">    console.log(arg);</span><br><span class="line">    let one = yield 111;</span><br><span class="line">    console.log(one);</span><br><span class="line">    let two = yield 222;</span><br><span class="line">    console.log(two);</span><br><span class="line">    let three = yield 333;</span><br><span class="line">    console.log(three);</span><br><span class="line">&#125;</span><br><span class="line">//执行获取迭代器对象</span><br><span class="line">let iterator = gen(&#x27;AAA&#x27;);</span><br><span class="line">console.log(iterator.next())</span><br><span class="line">//next()方法可以传入实参</span><br><span class="line">console.log(iterator.next(&#x27;BBB&#x27;));</span><br><span class="line">console.log(iterator.next(&#x27;CCC&#x27;));</span><br><span class="line">console.log(iterator.next(&#x27;DDD&#x27;));</span><br></pre></td></tr></table></figure>

<h3 id="生成器函数实例¶"><a href="#生成器函数实例¶" class="headerlink" title="生成器函数实例¶"></a>生成器函数实例<a href="#_13">¶</a></h3><p>常见的异步操作有：</p>
<p>异步编程 文件操作 网络操作（ajax,request） 数据库操作</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">//1s后控制台输出111,2s后控制台输出222,3s后控制台输出333</span><br><span class="line">//回调地狱</span><br><span class="line">setTimeout(() =&gt;&#123;</span><br><span class="line">    console.log(111);</span><br><span class="line">    setTimeout(() =&gt; &#123;</span><br><span class="line">        console.log(222);</span><br><span class="line">        setTimeout(() =&gt; &#123;</span><br><span class="line">            console.log(333);</span><br><span class="line">        &#125;,3000)</span><br><span class="line">    &#125;,2000)</span><br><span class="line">&#125;,1000)</span><br></pre></td></tr></table></figure>

<p>使用生成器函数解决</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">// 异步编程  文件操作  网络操作（ajax,request）  数据库操作</span><br><span class="line"></span><br><span class="line">//1s后控制台输出111,2s后控制台输出222,3s后控制台输出333</span><br><span class="line">//回调地狱</span><br><span class="line">// setTimeout(() =&gt;&#123;</span><br><span class="line">//     console.log(111);</span><br><span class="line">//     setTimeout(() =&gt; &#123;</span><br><span class="line">//         console.log(222);</span><br><span class="line">//         setTimeout(() =&gt; &#123;</span><br><span class="line">//             console.log(333);</span><br><span class="line">//         &#125;,3000)</span><br><span class="line">//     &#125;,2000)</span><br><span class="line">// &#125;,1000)</span><br><span class="line"></span><br><span class="line">function one() &#123;</span><br><span class="line">    setTimeout(() =&gt;&#123;</span><br><span class="line">        console.log(111);</span><br><span class="line">        iterator.next();</span><br><span class="line">    &#125;,1000)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function two() &#123;</span><br><span class="line">    setTimeout(() =&gt; &#123;</span><br><span class="line">        console.log(222);</span><br><span class="line">        iterator.next();</span><br><span class="line">    &#125;,2000)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function three() &#123;</span><br><span class="line">    setTimeout(() =&gt; &#123;</span><br><span class="line">        console.log(333);</span><br><span class="line">        iterator.next();</span><br><span class="line">    &#125;,3000)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function * gen() &#123;</span><br><span class="line">    yield one();</span><br><span class="line">    yield two();</span><br><span class="line">    yield three();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//调用生成器函数</span><br><span class="line">let iterator = gen();</span><br><span class="line">iterator.next();</span><br></pre></td></tr></table></figure>

<h3 id="生成器函数实例2¶"><a href="#生成器函数实例2¶" class="headerlink" title="生成器函数实例2¶"></a>生成器函数实例2<a href="#2">¶</a></h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">//模拟获取  用户数据  订单数据  商品数据</span><br><span class="line">function getUsers()&#123;</span><br><span class="line">    setTimeout(() =&gt; &#123;</span><br><span class="line">        let data = &#x27;用户数据&#x27;;</span><br><span class="line">        iterator.next(data);</span><br><span class="line">    &#125;,1000)</span><br><span class="line">&#125;</span><br><span class="line">function getOrders() &#123;</span><br><span class="line">    setTimeout(() =&gt; &#123;</span><br><span class="line">        let data = &#x27;订单数据&#x27;;</span><br><span class="line">        iterator.next(data);</span><br><span class="line"></span><br><span class="line">    &#125;,1000)</span><br><span class="line">&#125;</span><br><span class="line">function getGoods() &#123;</span><br><span class="line">    setTimeout(() =&gt; &#123;</span><br><span class="line">        let data = &#x27;商品数据&#x27;;</span><br><span class="line">        iterator.next(data);</span><br><span class="line">    &#125;,1000)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function * gen() &#123;</span><br><span class="line">    let users = yield getUsers();</span><br><span class="line">    console.log(users);</span><br><span class="line"></span><br><span class="line">    let orders = yield getOrders();</span><br><span class="line">    console.log(orders);</span><br><span class="line"></span><br><span class="line">    let goods = yield getGoods();</span><br><span class="line">    console.log(goods);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">let iterator = gen();</span><br><span class="line">iterator.next();</span><br></pre></td></tr></table></figure>

<h2 id="Promise"><a href="#Promise" class="headerlink" title="Promise"></a>Promise</h2><blockquote>
<p>手写Promise见《Promise》篇</p>
</blockquote>
<h3 id="Promise介绍与基本使用"><a href="#Promise介绍与基本使用" class="headerlink" title="Promise介绍与基本使用"></a>Promise介绍与基本使用</h3><p>Promise是ES6引入的异步编程的新解决方案。</p>
<p>语法上Promise是一个构造函数，用来封装异步操作并且可以获取其成功或者失败的结果</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">//实例化Promise对象</span><br><span class="line">const p = new Promise(function (resolve,reject) &#123;</span><br><span class="line">    setTimeout(() =&gt;&#123;</span><br><span class="line">        // let data = &#x27;数据库中的用户数据&#x27;;</span><br><span class="line">        // resolve(data);</span><br><span class="line"></span><br><span class="line">        let err = &#x27;数据读取失败&#x27;;</span><br><span class="line">        reject(err);</span><br><span class="line">    &#125;,1000);</span><br><span class="line">&#125;)</span><br><span class="line">//调用Promise对象的then方法</span><br><span class="line">p.then(function (value) &#123;</span><br><span class="line">    console.log(value);</span><br><span class="line">&#125;,function (reason) &#123;</span><br><span class="line">    console.log(reason);//数据读取失败</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="Promise封装读取文件"><a href="#Promise封装读取文件" class="headerlink" title="Promise封装读取文件"></a>Promise封装读取文件</h3><p>普通方法调用</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">//引入fs模块</span><br><span class="line">const fs = require(&#x27;fs&#x27;);</span><br><span class="line"></span><br><span class="line">//调用方法读取文件</span><br><span class="line">fs.readFile(&#x27;为学.md&#x27;,(err,data) =&gt; &#123;</span><br><span class="line">    if(err) throw err;</span><br><span class="line">    console.log(data.toString())</span><br><span class="line">&#125;);</span><br><span class="line">// 为学</span><br><span class="line">// 天下事有难易乎？</span><br><span class="line">// 为之，则难者亦易矣，</span><br><span class="line">// 不为，则易者亦难矣</span><br></pre></td></tr></table></figure>

<p>使用Promise封装调用</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">const p = new Promise(function (resolve,reject) &#123;</span><br><span class="line">    fs.readFile(&#x27;为学.mdaa&#x27;,(err,data) =&gt; &#123;</span><br><span class="line">        if(err) reject(err);</span><br><span class="line">        resolve(data);</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">p.then(function (value) &#123;</span><br><span class="line">    console.log(value.toString());</span><br><span class="line">&#125;,function (reason) &#123;</span><br><span class="line">    console.log(&#x27;读取失败&#x27;);</span><br><span class="line">&#125;)</span><br><span class="line">//读取失败</span><br></pre></td></tr></table></figure>

<h3 id="使用Promise封装ajax请求"><a href="#使用Promise封装ajax请求" class="headerlink" title="使用Promise封装ajax请求"></a>使用Promise封装ajax请求</h3><p>需要放在html里面</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">    const p = new Promise(function (resolve,reject) &#123;</span><br><span class="line">        //1.创建对象</span><br><span class="line">        const xhr = new XMLHttpRequest();</span><br><span class="line">        //2.初始化</span><br><span class="line">        xhr.open(&#x27;GET&#x27;,&#x27;https://api.apiopen.top/getJoke&#x27;);</span><br><span class="line">        //3.发送</span><br><span class="line">        xhr.send();</span><br><span class="line">        //4.绑定事件，处理响应结果</span><br><span class="line">        xhr.onreadystatechange = function () &#123;</span><br><span class="line">            //判断</span><br><span class="line">            if(xhr.readyState === 4)&#123;</span><br><span class="line">                //判断响应状态码 200 ~ 299</span><br><span class="line">                if(xhr.status &gt;= 200 &amp;&amp; xhr.status &lt; 300)&#123;</span><br><span class="line">                    //表示成功</span><br><span class="line">                    resolve(xhr.response);</span><br><span class="line">                &#125;else &#123;</span><br><span class="line">                    //如果失败</span><br><span class="line">                    reject(xhr.status);</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">    p.then(function (value) &#123;</span><br><span class="line">        console.log(value);</span><br><span class="line">    &#125;,function (reason) &#123;</span><br><span class="line">        console.error(reason);</span><br><span class="line">    &#125;)</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<h3 id="Promise-prototype-then方法"><a href="#Promise-prototype-then方法" class="headerlink" title="Promise.prototype.then方法"></a>Promise.prototype.then方法</h3><p>then方法的返回值</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">//创建Proise对象</span><br><span class="line">const p = new Promise((resolve, reject) =&gt; &#123;</span><br><span class="line">    setTimeout(() =&gt; &#123;</span><br><span class="line">        resolve(&#x27;用户数据&#x27;)</span><br><span class="line">        // reject(&#x27;出错啦&#x27;);</span><br><span class="line">    &#125;,1000);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">//调用then方法 then方法  then方法的返回结果是Promise对象，对象状态是由回调函数的执行结果决定的</span><br><span class="line">//1.如果回调函数中，返回的结果是非Promise类型的属性，状态为成功，返回值为对象的成功的值（undefined）</span><br><span class="line">const result = p.then((value)=&gt; &#123;</span><br><span class="line">    console.log(value);</span><br><span class="line">    //1.非promise类型的属性</span><br><span class="line">    // return &#x27;iloveyou&#x27;;</span><br><span class="line">    //2.是Promise对象</span><br><span class="line">    // return new Promise((resolve,reject) =&gt; &#123;</span><br><span class="line">    //     // resolve(&#x27;ok&#x27;);</span><br><span class="line">    //     reject(&#x27;error&#x27;);</span><br><span class="line">    // &#125;);</span><br><span class="line">    //3.抛出错误</span><br><span class="line">    // throw &#x27;出错啦&#x27;;</span><br><span class="line">&#125;,(reason)=&gt;&#123;</span><br><span class="line">    console.warn(reason);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">console.log(result)</span><br></pre></td></tr></table></figure>

<p>链式调用</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">p.then(value =&gt; &#123;</span><br><span class="line"></span><br><span class="line">&#125;).then(value =&gt; &#123;</span><br><span class="line"></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="Promise实践练习"><a href="#Promise实践练习" class="headerlink" title="Promise实践练习"></a>Promise实践练习</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line">//引入fs模块</span><br><span class="line">const fs = require(&#x27;fs&#x27;);</span><br><span class="line"></span><br><span class="line">fs.readFile(&#x27;为学.md&#x27;,(err,data1 )=&gt; &#123;</span><br><span class="line">    fs.readFile(&#x27;插秧诗.md&#x27;,(err,data2) =&gt; &#123;</span><br><span class="line">        fs.readFile(&#x27;观书有感.md&#x27;,(err,data3) =&gt; &#123;</span><br><span class="line">            let result = data1 + &#x27;\r\n&#x27; + data2 + &#x27;\r\n&#x27; + data3 + &#x27;\r\n&#x27;;</span><br><span class="line">            // console.log(result);</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">//使用Promise实现</span><br><span class="line">const p = new Promise((resolve,reject) =&gt; &#123;</span><br><span class="line">    fs.readFile(&#x27;为学.md&#x27;,(err,data) =&gt; &#123;</span><br><span class="line">        resolve(data);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">p.then(value =&gt; &#123;</span><br><span class="line">    // console.log(value.toString())</span><br><span class="line">    return new Promise((resolve,reject) =&gt; &#123;</span><br><span class="line">        fs.readFile(&#x27;插秧诗.md&#x27;,(err,data) =&gt; &#123;</span><br><span class="line">            resolve([value,data]);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;).then(value =&gt; &#123;</span><br><span class="line">    return new Promise((resolve,reject) =&gt; &#123;</span><br><span class="line">        fs.readFile(&#x27;观书有感.md&#x27;,(err,data) =&gt; &#123;</span><br><span class="line">            //压入</span><br><span class="line">            value.push(data);</span><br><span class="line">            resolve(value.join(&#x27;\r\n&#x27;));</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;).then(value =&gt; &#123;</span><br><span class="line">    console.log(value);</span><br><span class="line">&#125;)</span><br><span class="line">/*</span><br><span class="line">为学</span><br><span class="line">天下事有难易乎？</span><br><span class="line">为之，则难者亦易矣，</span><br><span class="line">不为，则易者亦难矣</span><br><span class="line">插秧诗</span><br><span class="line">手把青秧插满田，低头便见水中天。</span><br><span class="line">六清净方为道，退步原来是向前。</span><br><span class="line">观书有感二首</span><br><span class="line">其一</span><br><span class="line">半亩方塘一鉴开，天光云影共徘徊。</span><br><span class="line">问渠那得清如许？为有源头活水来。</span><br><span class="line">其二</span><br><span class="line">昨夜江边春水生，艨艟巨舰一毛轻。</span><br><span class="line">向来枉费推移力，此日中流自在行。*/</span><br></pre></td></tr></table></figure>

<h3 id="Promise对象catch方法"><a href="#Promise对象catch方法" class="headerlink" title="Promise对象catch方法"></a>Promise对象catch方法</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">const p = new Promise((resolve,reject) =&gt; &#123;</span><br><span class="line">    setTimeout(() =&gt; &#123;</span><br><span class="line">        //设置p对象的状态为失败</span><br><span class="line">        reject(&#x27;出错啦&#x27;);</span><br><span class="line">    &#125;,1000);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">//p.then((value) =&gt; &#123;</span><br><span class="line">//</span><br><span class="line">//&#125;,(reason) =&gt; &#123;</span><br><span class="line">//    console.error(reason);</span><br><span class="line">//&#125;);</span><br><span class="line"></span><br><span class="line">//相当于是一种语法糖</span><br><span class="line">p.catch((reason) =&gt; &#123;</span><br><span class="line">    console.warn(reason)</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>



<h2 id="await"><a href="#await" class="headerlink" title="await"></a>await</h2><h2 id="集合"><a href="#集合" class="headerlink" title="集合"></a>集合</h2><h3 id="集合介绍与API¶"><a href="#集合介绍与API¶" class="headerlink" title="集合介绍与API¶"></a>集合介绍与API<a href="#api">¶</a></h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">//声明一个集合</span><br><span class="line">let s = new Set();</span><br><span class="line">console.log(s);//Set &#123;&#125;</span><br><span class="line"></span><br><span class="line">let s1 = new Set([&#x27;a&#x27;,&#x27;b&#x27;,&#x27;c&#x27;,&#x27;b&#x27;,&#x27;d&#x27;,&#x27;e&#x27;,&#x27;a&#x27;]);</span><br><span class="line">console.log(s1);//Set &#123;&quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;d&quot;, &quot;e&quot;&#125;</span><br><span class="line"></span><br><span class="line">//元素个数</span><br><span class="line">console.log(s1.size);//5</span><br><span class="line"></span><br><span class="line">//添加新元素</span><br><span class="line">s1.add(&#x27;f&#x27;);</span><br><span class="line">console.log(s1);</span><br><span class="line"></span><br><span class="line">//删除元素</span><br><span class="line">s1.delete(&#x27;a&#x27;);</span><br><span class="line">console.log(s1);//Set &#123;&quot;b&quot;, &quot;c&quot;, &quot;d&quot;, &quot;e&quot;, &quot;f&quot;&#125;</span><br><span class="line"></span><br><span class="line">//检测</span><br><span class="line">console.log(s1.has(&#x27;a&#x27;));//false</span><br><span class="line">console.log(s1.has(&#x27;b&#x27;));//true</span><br><span class="line"></span><br><span class="line">//循环遍历集合元素</span><br><span class="line">for(let v of s1)&#123;</span><br><span class="line">    console.log(v);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="集合实践¶"><a href="#集合实践¶" class="headerlink" title="集合实践¶"></a>集合实践<a href="#_14">¶</a></h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">let arr1 = [1,2,3,4,5,4,3,2,1];</span><br><span class="line"></span><br><span class="line">//1.数组去重</span><br><span class="line">//let result = [...new Set(arr)];</span><br><span class="line">//console.log(result);//[1, 2, 3, 4, 5]</span><br><span class="line"></span><br><span class="line">//2.交集</span><br><span class="line">let arr2 = [4,5,6,5,6];</span><br><span class="line">//let result2 = [...new Set(arr)].filter(item =&gt; &#123;</span><br><span class="line">//    let s2 = new Set(arr2);//4 5 6</span><br><span class="line">//    if(s2.has(item))&#123;</span><br><span class="line">//        return true;//如果为真，表示既在数组一，也在数组二；</span><br><span class="line">//    &#125;else&#123;</span><br><span class="line">//        return false;</span><br><span class="line">//    &#125;</span><br><span class="line">//&#125;);</span><br><span class="line"></span><br><span class="line">//简写</span><br><span class="line">//let result2 = [...new Set(arr)].filter(item =&gt; new Set(arr2).has(item));</span><br><span class="line">//console.log(result2)//4 5</span><br><span class="line"></span><br><span class="line">//3.并集</span><br><span class="line">//let union = [...new Set([...arr,...arr2])];</span><br><span class="line">//console.log(union);//[1, 2, 3, 4, 5, 6]</span><br><span class="line"></span><br><span class="line">//4.差集，谁是主体，求出来的结果是不一样的</span><br><span class="line">let diff = [...new Set(arr1)].filter(item =&gt; !(new Set(arr2).has(item)));</span><br><span class="line">console.log(diff);//[1, 2, 3]  这里是1对2求差集，表示1里面有，而2里面没有的</span><br></pre></td></tr></table></figure>

<h3 id="Map的介绍与API¶"><a href="#Map的介绍与API¶" class="headerlink" title="Map的介绍与API¶"></a>Map的介绍与API<a href="#mapapi">¶</a></h3><p>ES提供了Map数据结构。它类似于对象，也是键值对的集合，但是“键”的范围不限于字符串，各种类型的值（包括对象）都可以当作键。Map也实现了iterator接口，所以可以使用<code>扩展运算符</code>和<code>for of</code>进行遍历。</p>
<p>Map的属性和方法：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">1)size 返回Map的元素的个数</span><br><span class="line"></span><br><span class="line">2)set 增加一个新元素，返回当前Map</span><br><span class="line"></span><br><span class="line">3)get 返回键名对象的键值</span><br><span class="line"></span><br><span class="line">4)has 检测Map中是否包含某个元素，返回boolean值</span><br><span class="line"></span><br><span class="line">5)clear 清空集合，返回undefined</span><br><span class="line">//声明Map</span><br><span class="line">let m = new Map();</span><br><span class="line"></span><br><span class="line">console.log(m);//Map &#123;&#125;</span><br><span class="line"></span><br><span class="line">//添加元素</span><br><span class="line">m.set(&#x27;name&#x27;,&#x27;xiaoming&#x27;);</span><br><span class="line">m.set(&#x27;change&#x27;,function () &#123;</span><br><span class="line">    console.log(&#x27;我可以改变你&#x27;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">console.log(m);//Map &#123; &#x27;name&#x27; =&gt; &#x27;xiaoming&#x27;, &#x27;change&#x27; =&gt; [Function] &#125;</span><br></pre></td></tr></table></figure>

<h3 id="class类¶"><a href="#class类¶" class="headerlink" title="class类¶"></a>class类<a href="#class">¶</a></h3><p>ES6提供了更接近传语言的写法，引入了Class（类）这个概念，作为对象的模板；</p>
<p>通过class关键字，可以定义类。基本上，ES6的class可以看做只是一个语法糖，它的绝大部分功能，ES5都可以做到，新的class写法只是让对象原型的写法更加清晰、更像面向对象编程的语法而已</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">1) class声明类</span><br><span class="line"></span><br><span class="line">2） constructor定义构造函数初始化</span><br><span class="line"></span><br><span class="line">3) extends继承父类</span><br><span class="line"></span><br><span class="line">4) super调用父级构造方法</span><br><span class="line"></span><br><span class="line">5) static定义静态方法和属性</span><br><span class="line"></span><br><span class="line">6)父类方法可以重写</span><br></pre></td></tr></table></figure>

<p>ES5 实例化对象的写法</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">//手机</span><br><span class="line">function Phone(brand, price)&#123;</span><br><span class="line">    this.brand = brand;</span><br><span class="line">    this.price = price;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//添加方法</span><br><span class="line">Phone.prototype.call = function() &#123;</span><br><span class="line">  console.log(&#x27;我可以打电话&#x27;);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">//实例化对象</span><br><span class="line">let HUAWEI = new Phone(&#x27;HUAWEI&#x27;,&#x27;2999&#x27;);</span><br><span class="line">HUAWEI.call();</span><br><span class="line">console.log(HUAWEI);</span><br><span class="line">```1</span><br><span class="line">ES6的写法</span><br><span class="line">```javascript</span><br><span class="line">class Phone&#123;</span><br><span class="line">    //构造方法 名字不能修改</span><br><span class="line">    constructor(brand, price)&#123;</span><br><span class="line">        this.brand = brand;</span><br><span class="line">        this.price = price;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    //方法必须使用该语法，不能使用ES5的对象完整形式</span><br><span class="line">    call()&#123;</span><br><span class="line">        console.log(&#x27;我可以打电话&#x27;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">let onePlus = new Phone(&quot;1+&quot;, 1999);</span><br><span class="line">console.log(onePlus);</span><br></pre></td></tr></table></figure>

<h3 id="class静态成员¶"><a href="#class静态成员¶" class="headerlink" title="class静态成员¶"></a>class静态成员<a href="#class_1">¶</a></h3><p>函数对象的属性，是属于类的，并不属于实例对象的属性，这样的属性称为<code>静态成员</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">function Phone()&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">Phone.name = &#x27;手机&#x27;;</span><br><span class="line">Phone.change = function () &#123;</span><br><span class="line">    console.log(&#x27;我可以改变世界&#x27;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">let nokia = new Phone();</span><br><span class="line">//console.log(nokia.name);//undefined</span><br><span class="line">//nokia.change();//Uncaught TypeError: nokia.change is not a function</span><br><span class="line"></span><br><span class="line">Phone.prototype.size = &#x27;5.5inch&#x27;;</span><br><span class="line">console.log(nokia.size);//5.5inch</span><br><span class="line">class Phone&#123;</span><br><span class="line">    //静态属性</span><br><span class="line">    static name = &#x27;手机&#x27;;</span><br><span class="line">    static change()&#123;</span><br><span class="line">        console.log(&#x27;我可以改变世界&#x27;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">let nokia = new Phone();</span><br><span class="line">console.log(nokia.name);//undefined</span><br><span class="line">console.log(Phone.change);</span><br><span class="line">//ƒ change()&#123;</span><br><span class="line">//        console.log(&#x27;我可以改变世界&#x27;);</span><br><span class="line">//&#125;</span><br></pre></td></tr></table></figure>

<h3 id="ES6-ES5构造函数继承¶"><a href="#ES6-ES5构造函数继承¶" class="headerlink" title="ES6-ES5构造函数继承¶"></a>ES6-ES5构造函数继承<a href="#es6-es5">¶</a></h3><p>ES5构造函数继承</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">//手机</span><br><span class="line">function Phone(brand, price) &#123;</span><br><span class="line">    this.brand = brand;</span><br><span class="line">    this.price = price;</span><br><span class="line">&#125;</span><br><span class="line">Phone.prototype.call = function () &#123;</span><br><span class="line">    console.log(&#x27;我可以打电话&#x27;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//智能手机</span><br><span class="line">function SmartPhone(brand,price,color,size)&#123;</span><br><span class="line">    Phone.call(this,brand,price);</span><br><span class="line">    this.color = color;</span><br><span class="line">    this.size = size;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//设置子级构造函数的原型</span><br><span class="line">SmartPhone.prototype = new Phone;</span><br><span class="line">//做一下校正</span><br><span class="line">SmartPhone.prototype.constructor = SmartPhone;</span><br><span class="line"></span><br><span class="line">//声明子类的方法</span><br><span class="line">SmartPhone.prototype.photo = function () &#123;</span><br><span class="line">    console.log(&#x27;我可以拍照片&#x27;);</span><br><span class="line">&#125;</span><br><span class="line">SmartPhone.prototype.playGame = function () &#123;</span><br><span class="line">    console.log(&#x27;我可以打游戏&#x27;);</span><br><span class="line">&#125;</span><br><span class="line">const chuizi = new SmartPhone(&#x27;锤子&#x27;,2499,&#x27;黑色&#x27;,&#x27;5.5inch&#x27;);</span><br><span class="line">console.log(chuizi)</span><br><span class="line">// SmartPhone</span><br><span class="line">//     brand: &quot;锤子&quot;</span><br><span class="line">//     color: &quot;黑色&quot;</span><br><span class="line">//     price: 2499</span><br><span class="line">//     size: &quot;5.5inch&quot;</span><br><span class="line">//     __proto__: Phone</span><br></pre></td></tr></table></figure>

<h3 id="ES6-class的类继承¶"><a href="#ES6-class的类继承¶" class="headerlink" title="ES6-class的类继承¶"></a>ES6-class的类继承<a href="#es6-class">¶</a></h3><p>ES6继承</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">class Phone&#123;</span><br><span class="line">    //构造方法</span><br><span class="line">    constructor(brand,price) &#123;</span><br><span class="line">        this.brand = brand;</span><br><span class="line">        this.price = price;</span><br><span class="line">    &#125;</span><br><span class="line">    //父类的成员属性</span><br><span class="line">    call()&#123;</span><br><span class="line">        console.log(&#x27;我可以打电话！&#x27;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">class SmartPhone extends Phone&#123;</span><br><span class="line">    //构造方法</span><br><span class="line">    constructor(brand,price,color,size) &#123;</span><br><span class="line">        super(brand,price);//Phone.call(this,brand,price);</span><br><span class="line">        this.color = color;</span><br><span class="line">        this.size = size;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    photo()&#123;</span><br><span class="line">        console.log(&#x27;拍照片&#x27;);</span><br><span class="line">    &#125;</span><br><span class="line">    playGame()&#123;</span><br><span class="line">        console.log(&#x27;玩游戏&#x27;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">const xiaomi = new SmartPhone(&#x27;小米&#x27;,799,&#x27;黑色&#x27;,&#x27;4.7inch&#x27;);</span><br><span class="line">console.log(xiaomi)</span><br><span class="line">// SmartPhone &#123;brand: &quot;小米&quot;, price: 799, color: &quot;黑色&quot;, size: &quot;4.7inch&quot;&#125;</span><br><span class="line">//     brand: &quot;小米&quot;</span><br><span class="line">//     color: &quot;黑色&quot;</span><br><span class="line">//     price: 799</span><br><span class="line">//     size: &quot;4.7inch&quot;</span><br><span class="line">//     __proto__: Phone</span><br></pre></td></tr></table></figure>

<h3 id="子类对父类方法的重写¶"><a href="#子类对父类方法的重写¶" class="headerlink" title="子类对父类方法的重写¶"></a>子类对父类方法的重写<a href="#_15">¶</a></h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">class Phone&#123;</span><br><span class="line">    //构造方法</span><br><span class="line">    constructor(brand,price) &#123;</span><br><span class="line">        this.brand = brand;</span><br><span class="line">        this.price = price;</span><br><span class="line">    &#125;</span><br><span class="line">    //父类的成员属性</span><br><span class="line">    call()&#123;</span><br><span class="line">        console.log(&#x27;我可以打电话！&#x27;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">class SmartPhone extends Phone&#123;</span><br><span class="line">    //构造方法</span><br><span class="line">    constructor(brand,price,color,size) &#123;</span><br><span class="line">        super(brand,price);//Phone.call(this,brand,price);</span><br><span class="line">        this.color = color;</span><br><span class="line">        this.size = size;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    photo()&#123;</span><br><span class="line">        console.log(&#x27;拍照片&#x27;);</span><br><span class="line">    &#125;</span><br><span class="line">    playGame()&#123;</span><br><span class="line">        console.log(&#x27;玩游戏&#x27;)</span><br><span class="line">    &#125;</span><br><span class="line">    call() &#123;</span><br><span class="line">        // super() 子类中不能直接调用父类的同名方法，只能重写</span><br><span class="line">        console.log(&#x27;我可以视频通话&#x27;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">const xiaomi = new SmartPhone(&#x27;小米&#x27;,799,&#x27;黑色&#x27;,&#x27;4.7inch&#x27;);</span><br><span class="line">console.log(xiaomi)</span><br><span class="line">// SmartPhone &#123;brand: &quot;小米&quot;, price: 799, color: &quot;黑色&quot;, size: &quot;4.7inch&quot;&#125;</span><br><span class="line">//     brand: &quot;小米&quot;</span><br><span class="line">//     color: &quot;黑色&quot;</span><br><span class="line">//     price: 799</span><br><span class="line">//     size: &quot;4.7inch&quot;</span><br><span class="line">//     __proto__: Phone</span><br><span class="line">xiaomi.call();//我可以视频通话+</span><br></pre></td></tr></table></figure>

<h3 id="class中getter和setter的设置¶"><a href="#class中getter和setter的设置¶" class="headerlink" title="class中getter和setter的设置¶"></a>class中getter和setter的设置<a href="#classgettersetter">¶</a></h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">//get 和 set</span><br><span class="line">class Phone &#123;</span><br><span class="line"></span><br><span class="line">    //对属性进行读取时，将会调用该方法</span><br><span class="line">    //通常是对动态的属性进行封装</span><br><span class="line">    get price()&#123;</span><br><span class="line">        console.log(&#x27;价格属性被读取了&#x27;);</span><br><span class="line">        return &#x27;iloveyou&#x27;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    //对属性进行设置时，将会调用该方法</span><br><span class="line">    //可以添加更多的控制和判断</span><br><span class="line">    set price(newVal)&#123;</span><br><span class="line">        console.log(&#x27;价格属性被修改了&#x27;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//实例化对象</span><br><span class="line">let s = new Phone();</span><br><span class="line">console.log(s.price);</span><br><span class="line">//价格属性被读取了</span><br><span class="line">//iloveyou  get中的返回值，将会被读取到</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">s.price = &#x27;free&#x27;;//价格属性被修改了</span><br></pre></td></tr></table></figure>

<h3 id="ES6的数值扩展¶"><a href="#ES6的数值扩展¶" class="headerlink" title="ES6的数值扩展¶"></a>ES6的数值扩展<a href="#es6">¶</a></h3><h3 id="ES6的对象方法扩展¶"><a href="#ES6的对象方法扩展¶" class="headerlink" title="ES6的对象方法扩展¶"></a>ES6的对象方法扩展<a href="#es6_1">¶</a></h3><h3 id="模块化介绍、优势及产品¶"><a href="#模块化介绍、优势及产品¶" class="headerlink" title="模块化介绍、优势及产品¶"></a>模块化介绍、优势及产品<a href="#_16">¶</a></h3><p>CommonJs &#x3D;&gt; NodeJs、Browserify</p>
<h3 id="浏览器使用ES6模块化引入模块¶"><a href="#浏览器使用ES6模块化引入模块¶" class="headerlink" title="浏览器使用ES6模块化引入模块¶"></a>浏览器使用ES6模块化引入模块<a href="#es6_2">¶</a></h3><p>m1.js</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">export let school = &#x27;sgg&#x27;;</span><br><span class="line"></span><br><span class="line">export function teach() &#123;</span><br><span class="line">    console.log(&#x27;we can teach you&#x27;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>test.html</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;script type=&quot;module&quot;&gt;</span><br><span class="line">    //引入m1.js</span><br><span class="line">    import * as m1 from &#x27;./m1.js&#x27;;</span><br><span class="line">    console.log(m1)</span><br><span class="line">    // Module</span><br><span class="line">    // school: (...)</span><br><span class="line">    // teach: (...)</span><br><span class="line">    // Symbol(Symbol.toStringTag): &quot;Module&quot;</span><br><span class="line">    // get school: ƒ ()</span><br><span class="line">    // set school: ƒ ()</span><br><span class="line">    // get teach: ƒ ()</span><br><span class="line">    // set teach: ƒ ()</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line"></span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<h3 id="ES6模块暴露数据语法汇总¶"><a href="#ES6模块暴露数据语法汇总¶" class="headerlink" title="ES6模块暴露数据语法汇总¶"></a>ES6模块暴露数据语法汇总<a href="#es6_3">¶</a></h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">//分别暴露</span><br><span class="line">export let school = &#x27;sgg&#x27;;</span><br><span class="line"></span><br><span class="line">export function teach() &#123;</span><br><span class="line">    console.log(&#x27;we can teach you&#x27;);</span><br><span class="line">&#125;</span><br><span class="line">//统一暴露</span><br><span class="line">let school = &#x27;sgg&#x27;;</span><br><span class="line"></span><br><span class="line">function teach() &#123;</span><br><span class="line">    console.log(&#x27;we can teach you&#x27;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">export &#123;school,teach&#125;;</span><br><span class="line">//默认暴露</span><br><span class="line">export default &#123;</span><br><span class="line">    school: &#x27;sgg&#x27;,</span><br><span class="line">    teach: function () &#123;</span><br><span class="line">        console.log(&#x27;we can teach you&#x27;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这种暴露数据的方法，在调用时需要多加一层default</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">m1.default.change();</span><br></pre></td></tr></table></figure>

<h3 id="ES6引入模块数据语法汇总¶"><a href="#ES6引入模块数据语法汇总¶" class="headerlink" title="ES6引入模块数据语法汇总¶"></a>ES6引入模块数据语法汇总<a href="#es6_4">¶</a></h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type=&quot;module&quot;&gt;</span><br><span class="line">    //1.通用的导入方式</span><br><span class="line">    import * as m1 from &#x27;./m1.js&#x27;;</span><br><span class="line"></span><br><span class="line">    //2.解构赋值</span><br><span class="line">    import &#123;school,teach&#125; from &#x27;./m1.js&#x27;;</span><br><span class="line">    import &#123;school as school2,teach as teach2&#125; from &#x27;./m2.js&#x27;;</span><br><span class="line"></span><br><span class="line">    //3.简便形式，针对默认暴露</span><br><span class="line">    import m1 from&#x27;./m1.js&#x27;;</span><br><span class="line">    console.log(m1)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h3 id="浏览器使用ES6模块二¶"><a href="#浏览器使用ES6模块二¶" class="headerlink" title="浏览器使用ES6模块二¶"></a>浏览器使用ES6模块二<a href="#es6_5">¶</a></h3><p>入口文件app.js</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">//入口文件</span><br><span class="line"></span><br><span class="line">//模块引入</span><br><span class="line">import * as m1 from &#x27;./m1.js&#x27;;</span><br><span class="line">import * as m2 from &#x27;./m2.js&#x27;;</span><br><span class="line">import * as m3 from &#x27;./m3.js&#x27;;</span><br></pre></td></tr></table></figure>

<p>引入入口文件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;script src=&quot;app.js&quot; type=&quot;module&quot;&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h1 id="JS常用API"><a href="#JS常用API" class="headerlink" title="JS常用API"></a>JS常用API</h1><h2 id="Math常用方法"><a href="#Math常用方法" class="headerlink" title="Math常用方法"></a>Math常用方法</h2><h3 id="绝对值方法"><a href="#绝对值方法" class="headerlink" title="绝对值方法"></a>绝对值方法</h3><p><code>Math.abs()</code></p>
<blockquote>
<p>获取绝对值，绝对值永远是正数或者零</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Math</span>.<span class="title function_">abs</span>(-<span class="number">12.5</span>)) <span class="comment">// 12.5</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Math</span>.<span class="title function_">abs</span>(<span class="number">12</span>)) <span class="comment">// 12</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Math</span>.<span class="title function_">abs</span>(<span class="number">0</span>)) <span class="comment">// 0</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 传递的不是数字类型的值，先基于Number()转换为数字类型再处理</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Math</span>.<span class="title function_">abs</span>(<span class="string">&#x27;-1&#x27;</span>)) <span class="comment">// 1</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Math</span>.<span class="title function_">abs</span>(<span class="string">&#x27;-1px&#x27;</span>)) <span class="comment">// NaN</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Math</span>.<span class="title function_">abs</span>(<span class="literal">true</span>)) <span class="comment">// 1</span></span><br></pre></td></tr></table></figure>

<h3 id="舍入方法"><a href="#舍入方法" class="headerlink" title="舍入方法"></a>舍入方法</h3><p><code>Math.ceil()</code></p>
<blockquote>
<p>方法始终向上舍入为最接近的整数</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Math</span>.<span class="title function_">ceil</span>(<span class="number">25.1</span>)) <span class="comment">// 26</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Math</span>.<span class="title function_">ceil</span>(<span class="number">25.9</span>)) <span class="comment">// 26</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Math</span>.<span class="title function_">ceil</span>(-<span class="number">25.9</span>)) <span class="comment">// -25</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Math</span>.<span class="title function_">ceil</span>(-<span class="number">25.1</span>)) <span class="comment">// -25</span></span><br></pre></td></tr></table></figure>

<p><code>Math.floor()</code></p>
<blockquote>
<p>方法始终向下舍入为最接近的整数</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Math</span>.<span class="title function_">floor</span>(<span class="number">25.1</span>)) <span class="comment">// 25</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Math</span>.<span class="title function_">floor</span>(<span class="number">25.9</span>)) <span class="comment">// 25</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Math</span>.<span class="title function_">floor</span>(-<span class="number">25.9</span>)) <span class="comment">// -26</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Math</span>.<span class="title function_">floor</span>(-<span class="number">25.1</span>)) <span class="comment">// -26</span></span><br></pre></td></tr></table></figure>

<p><code>Math.round()</code></p>
<blockquote>
<p>方法执行四舍五入</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Math</span>.<span class="title function_">round</span>(<span class="number">25.1</span>)) <span class="comment">// 25</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Math</span>.<span class="title function_">round</span>(<span class="number">25.5</span>)) <span class="comment">// 26，正数里是进一位</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Math</span>.<span class="title function_">round</span>(<span class="number">25.9</span>)) <span class="comment">// 26</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Math</span>.<span class="title function_">round</span>(-<span class="number">25.9</span>)) <span class="comment">// -26</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Math</span>.<span class="title function_">round</span>(-<span class="number">25.5</span>)) <span class="comment">// -25，负数里是舍去的</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Math</span>.<span class="title function_">round</span>(-<span class="number">25.1</span>)) <span class="comment">// -25</span></span><br></pre></td></tr></table></figure>

<p><code>Math.fround()</code></p>
<blockquote>
<p>方法返回数值最接近的单精度（32 位）浮点值表示</p>
</blockquote>
<h3 id="最值方法"><a href="#最值方法" class="headerlink" title="最值方法"></a>最值方法</h3><p>min()和 max()方法用于确定一组数值中的最小值和最大值</p>
<ul>
<li>输入必须是一个个的值的形式</li>
<li>不能直接求数组的最值，可以用扩展操作符展开</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> max = <span class="title class_">Math</span>.<span class="title function_">max</span>(<span class="number">3</span>, <span class="number">54</span>, <span class="number">32</span>, <span class="number">16</span>)</span><br><span class="line"><span class="keyword">let</span> min = <span class="title class_">Math</span>.<span class="title function_">min</span>(<span class="number">3</span>, <span class="number">54</span>, <span class="number">32</span>, <span class="number">16</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(max, min) <span class="comment">// 54, 3</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> arr = [<span class="number">3</span>, <span class="number">54</span>, <span class="number">32</span>, <span class="number">16</span>]</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Math</span>.<span class="title function_">max</span>(arr)) <span class="comment">// NaN</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Math</span>.<span class="title function_">max</span>(...arr)) <span class="comment">// 54</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="随机数方法"><a href="#随机数方法" class="headerlink" title="随机数方法"></a>随机数方法</h3><p><code>Math.random()</code></p>
<blockquote>
<p>方法返回一个 0~1 范围内的随机数，其中包含 0 但不包含</p>
</blockquote>
<p>基于如下公式使用 Math.random()从一组整数中</p>
<p>随机选择一个数：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">number = <span class="title class_">Math</span>.<span class="title function_">floor</span>(<span class="title class_">Math</span>.<span class="title function_">random</span>() * total_number_of_choices + first_possible_value) </span><br></pre></td></tr></table></figure>

<p>如果想从 1~10 范围内随机选择一个数，代码就是这样的：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> num = <span class="title class_">Math</span>.<span class="title function_">floor</span>(<span class="title class_">Math</span>.<span class="title function_">random</span>() * <span class="number">10</span> + <span class="number">1</span>);</span><br></pre></td></tr></table></figure>

<p>如果想选择一个 2~10 范围内的值，则代码就</p>
<p>要写成这样：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> num = <span class="title class_">Math</span>.<span class="title function_">floor</span>(<span class="title class_">Math</span>.<span class="title function_">random</span>() * <span class="number">9</span> + <span class="number">2</span>); </span><br></pre></td></tr></table></figure>

<p>封装成函数</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">selectFrom</span>(<span class="params">lowerValue, upperValue</span>) &#123; </span><br><span class="line"> <span class="keyword">let</span> choices = upperValue - lowerValue + <span class="number">1</span>; </span><br><span class="line"> <span class="keyword">return</span> <span class="title class_">Math</span>.<span class="title function_">floor</span>(<span class="title class_">Math</span>.<span class="title function_">random</span>() * choices + lowerValue); </span><br><span class="line">&#125; </span><br><span class="line"><span class="keyword">let</span> num = <span class="title function_">selectFrom</span>(<span class="number">2</span>,<span class="number">10</span>); </span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(num); <span class="comment">// 2~10 范围内的值，其中包含 2 和 10</span></span><br></pre></td></tr></table></figure>

<p>应用，取数组的随机项</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> colors = [<span class="string">&quot;red&quot;</span>, <span class="string">&quot;green&quot;</span>, <span class="string">&quot;blue&quot;</span>, <span class="string">&quot;yellow&quot;</span>, <span class="string">&quot;black&quot;</span>, <span class="string">&quot;purple&quot;</span>, <span class="string">&quot;brown&quot;</span>]; </span><br><span class="line"><span class="keyword">let</span> color = colors[<span class="title function_">selectFrom</span>(<span class="number">0</span>, colors.<span class="property">length</span>-<span class="number">1</span>)];</span><br></pre></td></tr></table></figure>

<blockquote>
<p><code>Math.random()</code>方法在这里出于演示目的是没有问题的。如果是为了加密而需要生成随机数（传给生成器的输入需要较高的不确定性），那么建议使用 <code>window.crypto. getRandomValues()</code>。</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> array = <span class="keyword">new</span> <span class="title class_">Uint32Array</span>(<span class="number">10</span>);</span><br><span class="line"><span class="variable language_">window</span>.<span class="property">crypto</span>.<span class="title function_">getRandomValues</span>(array);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Your lucky numbers:&quot;</span>);</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; array.<span class="property">length</span>; i++) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(array[i]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h3><p><img src="/2022/09/16/web/JavaScript/js%E4%BB%8E%E5%9F%BA%E7%A1%80%E5%88%B0%E8%BF%9B%E9%98%B6/image-20221114203722124.png" alt="image-20221114203722124"></p>
<h2 id="Array常用方法"><a href="#Array常用方法" class="headerlink" title="Array常用方法"></a>Array常用方法</h2><ul>
<li>方法的作用和含义</li>
<li>方法的实参（类型和含义）</li>
<li>方法的返回值</li>
</ul>
<h3 id="栈方法"><a href="#栈方法" class="headerlink" title="栈方法"></a>栈方法</h3><ul>
<li><p><code>push()</code></p>
<blockquote>
<p><code>push()</code>方法接收任意数量的参数，并将它们添加到数组末尾，返回数组的最新长度</p>
<p><code>@params</code>：多个任意类型</p>
<p><code>@return</code>：新增数组后的长度</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> colors = <span class="keyword">new</span> <span class="title class_">Array</span>(); <span class="comment">// 创建一个数组</span></span><br><span class="line"><span class="keyword">let</span> count = colors.<span class="title function_">push</span>(<span class="string">&quot;red&quot;</span>, <span class="string">&quot;green&quot;</span>); <span class="comment">// 推入两项</span></span><br><span class="line"><span class="title function_">alert</span>(count); <span class="comment">// 2 </span></span><br><span class="line">count = colors.<span class="title function_">push</span>(<span class="string">&quot;black&quot;</span>); <span class="comment">// 再推入一项</span></span><br><span class="line"><span class="title function_">alert</span>(count); <span class="comment">// 3	</span></span><br></pre></td></tr></table></figure>

<p>基于原生JS，也可以向末尾追加内容，但效率不如直接提供的push方法</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">arr[arr.<span class="property">length</span>] = newValue</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>pop()</code></p>
<blockquote>
<p>pop()方法用于删除数组的最后一项，同时减少数组的 length 值，返回被删除的项</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> item = colors.<span class="title function_">pop</span>(); <span class="comment">// 取得最后一项</span></span><br><span class="line"><span class="title function_">alert</span>(item); <span class="comment">// black </span></span><br><span class="line"><span class="title function_">alert</span>(colors.<span class="property">length</span>); <span class="comment">// 2</span></span><br></pre></td></tr></table></figure>

<p><code>arr.length--</code>，也可以实现删除数组最后一项</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">12</span>, <span class="number">34</span>, <span class="number">56</span>, <span class="number">78</span>]</span><br><span class="line">arr.<span class="property">length</span>--</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arr) <span class="comment">// [12, 34, 56]</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="队列方法"><a href="#队列方法" class="headerlink" title="队列方法"></a>队列方法</h3><p>有了在数据末尾添加数据的 <code>push()</code>方法，所以要模拟队列就差一个从数组开头取得数据的方法了</p>
<ul>
<li><p><code>shift()</code></p>
<blockquote>
<p>它会删除数组的第一项并返回它，然后数组长度减 1</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> colors = <span class="keyword">new</span> <span class="title class_">Array</span>(); <span class="comment">// 创建一个数组</span></span><br><span class="line"><span class="keyword">let</span> count = colors.<span class="title function_">push</span>(<span class="string">&quot;red&quot;</span>, <span class="string">&quot;green&quot;</span>); <span class="comment">// 推入两项</span></span><br><span class="line"><span class="title function_">alert</span>(count); <span class="comment">// 2 </span></span><br><span class="line">count = colors.<span class="title function_">push</span>(<span class="string">&quot;black&quot;</span>); <span class="comment">// 再推入一项</span></span><br><span class="line"><span class="title function_">alert</span>(count); <span class="comment">// 3 </span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> item = colors.<span class="title function_">shift</span>(); <span class="comment">// 取得第一项</span></span><br><span class="line"><span class="title function_">alert</span>(item); <span class="comment">// red </span></span><br><span class="line"><span class="title function_">alert</span>(colors.<span class="property">length</span>); <span class="comment">// 2</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><code>unshift()</code></p>
<blockquote>
<p>在数组开头添加任意多个值，然后返回新的数组长度</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> colors = <span class="keyword">new</span> <span class="title class_">Array</span>(); <span class="comment">// 创建一个数组</span></span><br><span class="line"><span class="keyword">let</span> count = colors.<span class="title function_">unshift</span>(<span class="string">&quot;red&quot;</span>, <span class="string">&quot;green&quot;</span>); <span class="comment">// 从数组开头推入两项</span></span><br><span class="line"><span class="title function_">alert</span>(count); <span class="comment">// 2 </span></span><br><span class="line">count = colors.<span class="title function_">unshift</span>(<span class="string">&quot;black&quot;</span>); <span class="comment">// 再推入一项</span></span><br><span class="line"><span class="title function_">alert</span>(count); <span class="comment">// 3 </span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> item = colors.<span class="title function_">pop</span>(); <span class="comment">// 取得最后一项</span></span><br><span class="line"><span class="title function_">alert</span>(item); <span class="comment">// green </span></span><br><span class="line"><span class="title function_">alert</span>(colors.<span class="property">length</span>); <span class="comment">// 2</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="concact-：合并数组"><a href="#concact-：合并数组" class="headerlink" title="concact()：合并数组"></a><code>concact()</code>：合并数组</h3><ul>
<li><p>可以在现有数组全部元素基础上创建一个新数组。</p>
</li>
<li><p>它首先会创建一个当前数组的副本，然后再把它的参数添加到副本末尾，最后返回这个新构建的数组。</p>
<ul>
<li>如果传入一个或多个数组，则 <code>concat()</code>会把这些数组的每一项都添加到结果数组。</li>
<li>如果参数不是数组，则直接把它们添加到结果数组末尾。</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> colors = [<span class="string">&quot;red&quot;</span>, <span class="string">&quot;green&quot;</span>, <span class="string">&quot;blue&quot;</span>]; </span><br><span class="line"><span class="keyword">let</span> colors2 = colors.<span class="title function_">concat</span>(<span class="string">&quot;yellow&quot;</span>, [<span class="string">&quot;black&quot;</span>, <span class="string">&quot;brown&quot;</span>]); </span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(colors); <span class="comment">// [&quot;red&quot;, &quot;green&quot;,&quot;blue&quot;] </span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(colors2); <span class="comment">// [&quot;red&quot;, &quot;green&quot;, &quot;blue&quot;, &quot;yellow&quot;, &quot;black&quot;, &quot;brown&quot;]</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>打平数组</p>
</li>
<li><p>操作不影响原始数组</p>
</li>
</ul>
<h3 id="操作方法"><a href="#操作方法" class="headerlink" title="操作方法"></a>操作方法</h3><ul>
<li><p><code>slice()</code>：截取数组</p>
<ul>
<li><p>创建一个包含原有数组中一个或多个元素的新数组</p>
</li>
<li><p>可以接收一个或两个参数：返回元素的开始索引和结束索引。</p>
<ul>
<li>如果只有一个参数，则 <code>slice()</code>会返回该索引到数组末尾的所有元素。</li>
<li>如果有两个参数，则 <code>slice()</code>返回从开始索引到结束索引对应的所有元素，其中不包含结束索引对应的元素（左闭右开）。</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> colors = [<span class="string">&quot;red&quot;</span>, <span class="string">&quot;green&quot;</span>, <span class="string">&quot;blue&quot;</span>, <span class="string">&quot;yellow&quot;</span>, <span class="string">&quot;purple&quot;</span>]; </span><br><span class="line"><span class="keyword">let</span> colors2 = colors.<span class="title function_">slice</span>(<span class="number">1</span>); </span><br><span class="line"><span class="keyword">let</span> colors3 = colors.<span class="title function_">slice</span>(<span class="number">1</span>, <span class="number">4</span>); </span><br><span class="line"><span class="title function_">alert</span>(colors2); <span class="comment">// green,blue,yellow,purple </span></span><br><span class="line"><span class="title function_">alert</span>(colors3); <span class="comment">// green,blue,yellow</span></span><br></pre></td></tr></table></figure>

</li>
<li><p>如果 <code>slice()</code>的参数有负值，那么就以数值长度加上这个负值的结果确定位置。</p>
<ul>
<li>比如，在包含 5 个元素的数组上调用 <code>slice(-2,-1</code>)，就相当于调用 slice(3,4)。</li>
<li>如果结束位置小于开始位置，则返回空数组。</li>
</ul>
</li>
<li><p>操作不影响原始数组</p>
</li>
</ul>
</li>
<li><p><code>splice()</code>：删除、插入或替换数组元素</p>
<ul>
<li><p>删除：</p>
<ul>
<li><p>需要给 <code>splice()</code><strong>传 2 个参数</strong>：要删除的第一个元素的位置和要删除的元素数量。</p>
</li>
<li><p>可以从数组中删除任意多个元素，比如 <code>splice(0, 2)</code>会删除前两个元素。</p>
</li>
<li><p>清空数组</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">12</span>, <span class="number">34</span>, <span class="number">56</span>, <span class="number">78</span>]</span><br><span class="line"><span class="keyword">let</span> res = arr.<span class="title function_">splice</span>(<span class="number">0</span>) <span class="comment">// 没有第二个参数，默认是数组的长度</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arr, res) <span class="comment">// [], [12, 34, 56, 78]</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>删除第一项和最后一项</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">12</span>, <span class="number">34</span>, <span class="number">56</span>, <span class="number">78</span>]</span><br><span class="line">arr.<span class="title function_">splice</span>(arr.<span class="property">length</span> - <span class="number">1</span>)</span><br><span class="line">arr.<span class="title function_">splice</span>(<span class="number">0</span>, <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arr) <span class="comment">// [34, 56]</span></span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>插入</p>
<blockquote>
<p>需要给 <code>splice()</code>传 3 个参数：开始位置、0（要删除的元素数量）和要插入的元素，可以在数组中指定的位置插入元素。</p>
<p>第三个参数之后还可以传第四个、第五个参数，乃至任意多个要插入的元素。</p>
</blockquote>
<p>比如，<code>splice(2, 0, &quot;red&quot;, &quot;green&quot;)</code>会从数组位置 2 开始插入字符串”<code>red</code>“和”<code>green</code>“。</p>
<p>向数组末尾&#x2F;开头追加</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">12</span>, <span class="number">34</span>, <span class="number">56</span>, <span class="number">78</span>]</span><br><span class="line">arr.<span class="title function_">splice</span>(arr.<span class="property">length</span>, <span class="number">0</span>, <span class="string">&#x27;AA&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arr) <span class="comment">// [12, 34, 56, 78, &#x27;AA&#x27;]</span></span><br><span class="line"></span><br><span class="line">arr.<span class="title function_">splice</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="string">&#x27;BB&#x27;</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arr) <span class="comment">// [&#x27;BB&#x27;, 12, 34, 56, 78, &#x27;AA&#x27;]</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>替换（先删除，再替换）</p>
<blockquote>
<p><code>splice()</code>在删除元素的同时可以在指定位置插入新元素，同样要传入 3 个参数：开始位置、要删除元素的数量和要插入的任意多个元素。</p>
<p>要插入的元素数量不一定跟删除的元素数量一致。</p>
</blockquote>
<p>比如，<code>splice(2, 1, &quot;red&quot;, &quot;green&quot;)</code>会在位置 2 删除一个元素，然后从该位置开始向数组中插入”red”和”green”。</p>
</li>
<li><p>我的思考：</p>
<ul>
<li>只要第二个参数不为0，就是删除元素了</li>
<li>只要有两个以上的参数，就是插入元素了</li>
<li>具体删了谁，插入了谁，在哪个位置插入的，看具体参数的值即可</li>
</ul>
</li>
<li><p>返回值</p>
<blockquote>
<p><code>splice()</code>方法始终返回这样一个数组，它包含从数组中被删除的元素（如果没有删除元素，则返回空数组）。</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> colors = [<span class="string">&quot;red&quot;</span>, <span class="string">&quot;green&quot;</span>, <span class="string">&quot;blue&quot;</span>]; </span><br><span class="line"><span class="keyword">let</span> removed = colors.<span class="title function_">splice</span>(<span class="number">0</span>,<span class="number">1</span>); <span class="comment">// 删除第一项</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(colors); <span class="comment">// green,blue </span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(removed); <span class="comment">// red，只有一个元素的数组</span></span><br><span class="line"></span><br><span class="line">removed = colors.<span class="title function_">splice</span>(<span class="number">1</span>, <span class="number">0</span>, <span class="string">&quot;yellow&quot;</span>, <span class="string">&quot;orange&quot;</span>); <span class="comment">// 在位置 1 插入两个元素，原来在位置1的blue被挤后面去了</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(colors); <span class="comment">// green,yellow,orange,blue </span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(removed); <span class="comment">// 空数组</span></span><br><span class="line"></span><br><span class="line">removed = colors.<span class="title function_">splice</span>(<span class="number">1</span>, <span class="number">1</span>, <span class="string">&quot;red&quot;</span>, <span class="string">&quot;purple&quot;</span>); <span class="comment">// 插入两个值，删除一个元素</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(colors); <span class="comment">// green,red,purple,orange,blue </span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(removed); <span class="comment">// yellow，只有一个元素的数组</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>操作会影响到原数组</p>
</li>
</ul>
</li>
</ul>
<h3 id="delete"><a href="#delete" class="headerlink" title="delete"></a><code>delete</code></h3><p><code>delete</code>方法，把数组当做普通对象，确实可以删除某一项内容，但是不会影响数组本身的数据结构特点（<code>length</code>长度不会跟着改变），真实项目中杜绝使用</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">12</span>, <span class="number">34</span>, <span class="number">56</span>, <span class="number">78</span>]</span><br><span class="line"><span class="keyword">delete</span> arr[<span class="number">0</span>]</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arr)</span><br></pre></td></tr></table></figure>

<p><img src="/2022/09/16/web/JavaScript/js%E4%BB%8E%E5%9F%BA%E7%A1%80%E5%88%B0%E8%BF%9B%E9%98%B6/image-20221115060441857.png" alt="image-20221115060441857"></p>
<h2 id="Object常用方法"><a href="#Object常用方法" class="headerlink" title="Object常用方法"></a>Object常用方法</h2><h3 id="Object-create"><a href="#Object-create" class="headerlink" title="Object.create()"></a><code>Object.create()</code></h3><blockquote>
<p>方法用于创建一个新对象，使用现有的对象来作为新创建对象的原型（prototype）。</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> person = &#123;</span><br><span class="line">  <span class="attr">isHuman</span>: <span class="literal">false</span>,</span><br><span class="line">  <span class="attr">printIntroduction</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`My name is <span class="subst">$&#123;<span class="variable language_">this</span>.name&#125;</span>. Am I human? <span class="subst">$&#123;<span class="variable language_">this</span>.isHuman&#125;</span>`</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> me = <span class="title class_">Object</span>.<span class="title function_">create</span>(person);</span><br><span class="line"></span><br><span class="line">me.<span class="property">name</span> = <span class="string">&#x27;Matthew&#x27;</span>; <span class="comment">// &quot;name&quot; is a property set on &quot;me&quot;, but not on &quot;person&quot;</span></span><br><span class="line">me.<span class="property">isHuman</span> = <span class="literal">true</span>; <span class="comment">// inherited properties can be overwritten</span></span><br><span class="line"></span><br><span class="line">me.<span class="title function_">printIntroduction</span>();</span><br><span class="line"><span class="comment">// expected output: &quot;My name is Matthew. Am I human? true&quot;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>我们可以在新建对象后打印<code>me</code>对象，看一下：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> person = &#123;</span><br><span class="line">  <span class="attr">isHuman</span>: <span class="literal">false</span>,</span><br><span class="line">  <span class="attr">printIntroduction</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`My name is <span class="subst">$&#123;<span class="variable language_">this</span>.name&#125;</span>. Am I human? <span class="subst">$&#123;<span class="variable language_">this</span>.isHuman&#125;</span>`</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> me = <span class="title class_">Object</span>.<span class="title function_">create</span>(person);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">dir</span>(me)</span><br></pre></td></tr></table></figure>

<p>在没有添加属性之前，<code>me</code>对象就是一个以<code>person</code>对象为原型的空对象</p>
<p><img src="/2022/09/16/web/JavaScript/js%E4%BB%8E%E5%9F%BA%E7%A1%80%E5%88%B0%E8%BF%9B%E9%98%B6/image-20220714091058110.png" alt="image-20220714091058110"></p>
<p>也可以在<code>me</code>对象上重写<code>person</code>身上的方法，并不会覆盖原型对象上的方法</p>
<h3 id="Object-entries"><a href="#Object-entries" class="headerlink" title="Object.entries"></a><code>Object.entries</code></h3><blockquote>
<p>遍历对象的，将<code>key-value</code>的形式，转换成二维数组</p>
</blockquote>
<p><img src="/image-20220629110203985.png" alt="image-20220629110203985"></p>
<h3 id="Object-keys"><a href="#Object-keys" class="headerlink" title="Object.keys()"></a><code>Object.keys()</code></h3><h3 id="Object-values"><a href="#Object-values" class="headerlink" title="Object.values"></a><code>Object.values</code></h3><h3 id="Object-assign"><a href="#Object-assign" class="headerlink" title="Object.assign()"></a><code>Object.assign()</code></h3><p><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/assign">https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/assign</a></p>
<h4 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Object</span>.<span class="title function_">assign</span>(target, ...sources) </span><br></pre></td></tr></table></figure>

<ul>
<li><p>参数</p>
<ul>
<li><p><code>target</code></p>
<p>目标对象，接收源对象属性的对象，也是修改后的返回值。</p>
</li>
<li><p><code>sources</code></p>
<p>源对象，包含将被合并的属性。</p>
</li>
</ul>
</li>
<li><p>返回值</p>
<ul>
<li>目标对象，即函数的返回值是合并后的<code>target</code></li>
</ul>
</li>
</ul>
<h4 id="描述"><a href="#描述" class="headerlink" title="描述"></a>描述</h4><p>如果目标对象与源对象具有相同的 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/keys">key</a>，则目标对象中的属性将被源对象中的属性覆盖，后面的源对象的属性将类似地覆盖前面的源对象的属性。</p>
<p><code>Object.assign</code> 方法只会拷贝源对象 <em>可枚举的</em> 和 <em>自身的</em> 属性到目标对象。该方法使用源对象的 <code>[[Get]]</code> 和目标对象的 <code>[[Set]]</code>，它会调用 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Functions/get">getters</a> 和 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Functions/set">setters</a>。故它分配属性，而不仅仅是复制或定义新的属性。如果合并源包含 getters，这可能使其不适合将新属性合并到原型中。</p>
<p>为了将属性定义（包括其可枚举性）复制到原型，应使用 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/getOwnPropertyDescriptor"><code>Object.getOwnPropertyDescriptor()</code></a> 和 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/defineProperty"><code>Object.defineProperty()</code></a>，基本类型 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/String"><code>String</code></a> 和 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Symbol"><code>Symbol</code></a> 的属性会被复制。</p>
<p>如果赋值期间出错，例如如果属性不可写，则会抛出 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/TypeError"><code>TypeError</code></a>；如果在抛出异常之前添加了任何属性，则会修改 <code>target</code> 对象（译者注：换句话说，<code>Object.assign()</code> 没有“回滚”之前赋值的概念，它是一个尽力而为、可能只会完成部分复制的方法）。</p>
<blockquote>
<p><strong>备注：</strong> <code>Object.assign()</code> 不会在 <code>source</code> 对象值为 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/null"><code>null</code></a> 或 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/undefined"><code>undefined</code></a> 时抛出错误。</p>
</blockquote>
<h4 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h4><h5 id="复制对象"><a href="#复制对象" class="headerlink" title="复制对象"></a>复制对象</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = &#123; <span class="attr">a</span>: <span class="number">1</span> &#125;;</span><br><span class="line"><span class="keyword">const</span> copy = <span class="title class_">Object</span>.<span class="title function_">assign</span>(&#123;&#125;, obj);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(copy); <span class="comment">// &#123; a: 1 &#125;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h5 id="深拷贝问题"><a href="#深拷贝问题" class="headerlink" title="深拷贝问题"></a>深拷贝问题</h5><p>针对<a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Glossary/Deep_copy">深拷贝 (en-US)</a>, 需要使用其他办法，因为 <code>Object.assign()</code> 只复制属性值。</p>
<p>假如源对象是一个对象的引用，它仅仅会复制其引用值。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">test</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="string">&#x27;use strict&#x27;</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> obj1 = &#123; <span class="attr">a</span>: <span class="number">0</span> , <span class="attr">b</span>: &#123; <span class="attr">c</span>: <span class="number">0</span>&#125;&#125;;</span><br><span class="line">  <span class="keyword">let</span> obj2 = <span class="title class_">Object</span>.<span class="title function_">assign</span>(&#123;&#125;, obj1);</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(obj2)); <span class="comment">// &#123; &quot;a&quot;: 0, &quot;b&quot;: &#123; &quot;c&quot;: 0&#125;&#125;</span></span><br><span class="line"></span><br><span class="line">  obj1.<span class="property">a</span> = <span class="number">1</span>;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(obj1)); <span class="comment">// &#123; &quot;a&quot;: 1, &quot;b&quot;: &#123; &quot;c&quot;: 0&#125;&#125;</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(obj2)); <span class="comment">// &#123; &quot;a&quot;: 0, &quot;b&quot;: &#123; &quot;c&quot;: 0&#125;&#125;</span></span><br><span class="line"></span><br><span class="line">  obj2.<span class="property">a</span> = <span class="number">2</span>;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(obj1)); <span class="comment">// &#123; &quot;a&quot;: 1, &quot;b&quot;: &#123; &quot;c&quot;: 0&#125;&#125;</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(obj2)); <span class="comment">// &#123; &quot;a&quot;: 2, &quot;b&quot;: &#123; &quot;c&quot;: 0&#125;&#125;</span></span><br><span class="line"></span><br><span class="line">  obj2.<span class="property">b</span>.<span class="property">c</span> = <span class="number">3</span>;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(obj1)); <span class="comment">// &#123; &quot;a&quot;: 1, &quot;b&quot;: &#123; &quot;c&quot;: 3&#125;&#125;</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(obj2)); <span class="comment">// &#123; &quot;a&quot;: 2, &quot;b&quot;: &#123; &quot;c&quot;: 3&#125;&#125;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// Deep Clone</span></span><br><span class="line">  obj1 = &#123; <span class="attr">a</span>: <span class="number">0</span> , <span class="attr">b</span>: &#123; <span class="attr">c</span>: <span class="number">0</span>&#125;&#125;;</span><br><span class="line">  <span class="keyword">let</span> obj3 = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(obj1));</span><br><span class="line">  obj1.<span class="property">a</span> = <span class="number">4</span>;</span><br><span class="line">  obj1.<span class="property">b</span>.<span class="property">c</span> = <span class="number">4</span>;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(obj3)); <span class="comment">// &#123; &quot;a&quot;: 0, &quot;b&quot;: &#123; &quot;c&quot;: 0&#125;&#125;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">test</span>();</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h5 id="合并对象"><a href="#合并对象" class="headerlink" title="合并对象"></a>合并对象</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> o1 = &#123; <span class="attr">a</span>: <span class="number">1</span> &#125;;</span><br><span class="line"><span class="keyword">const</span> o2 = &#123; <span class="attr">b</span>: <span class="number">2</span> &#125;;</span><br><span class="line"><span class="keyword">const</span> o3 = &#123; <span class="attr">c</span>: <span class="number">3</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> obj = <span class="title class_">Object</span>.<span class="title function_">assign</span>(o1, o2, o3);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(obj); <span class="comment">// &#123; a: 1, b: 2, c: 3 &#125;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(o1);  <span class="comment">// &#123; a: 1, b: 2, c: 3 &#125;, target object itself is changed.</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(o1 === obj) <span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<h5 id="合并具有相同属性的对象"><a href="#合并具有相同属性的对象" class="headerlink" title="合并具有相同属性的对象"></a>合并具有相同属性的对象</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> o1 = &#123; <span class="attr">a</span>: <span class="number">1</span>, <span class="attr">b</span>: <span class="number">1</span>, <span class="attr">c</span>: <span class="number">1</span> &#125;;</span><br><span class="line"><span class="keyword">const</span> o2 = &#123; <span class="attr">b</span>: <span class="number">2</span>, <span class="attr">c</span>: <span class="number">2</span> &#125;;</span><br><span class="line"><span class="keyword">const</span> o3 = &#123; <span class="attr">c</span>: <span class="number">3</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> obj = <span class="title class_">Object</span>.<span class="title function_">assign</span>(&#123;&#125;, o1, o2, o3);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(obj); <span class="comment">// &#123; a: 1, b: 2, c: 3 &#125;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>属性会被后续参数中具有相同属性的其他对象覆盖。</p>
<h5 id="拷贝-Symbol-类型属性"><a href="#拷贝-Symbol-类型属性" class="headerlink" title="拷贝 Symbol 类型属性"></a>拷贝 <code>Symbol</code> 类型属性</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> o1 = &#123; <span class="attr">a</span>: <span class="number">1</span> &#125;;</span><br><span class="line"><span class="keyword">const</span> o2 = &#123; [<span class="title class_">Symbol</span>(<span class="string">&#x27;foo&#x27;</span>)]: <span class="number">2</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> obj = <span class="title class_">Object</span>.<span class="title function_">assign</span>(&#123;&#125;, o1, o2);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(obj); <span class="comment">// &#123; a : 1, [Symbol(&quot;foo&quot;)]: 2 &#125; (cf. bug 1207182 on Firefox)</span></span><br><span class="line"><span class="title class_">Object</span>.<span class="title function_">getOwnPropertySymbols</span>(obj); <span class="comment">// [Symbol(foo)]</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h5 id="原型链上的属性和不可枚举属性不能被复制"><a href="#原型链上的属性和不可枚举属性不能被复制" class="headerlink" title="原型链上的属性和不可枚举属性不能被复制"></a>原型链上的属性和不可枚举属性不能被复制</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = <span class="title class_">Object</span>.<span class="title function_">create</span>(&#123; <span class="attr">foo</span>: <span class="number">1</span> &#125;, &#123; <span class="comment">// foo is on obj&#x27;s prototype chain.</span></span><br><span class="line">  <span class="attr">bar</span>: &#123;</span><br><span class="line">    <span class="attr">value</span>: <span class="number">2</span>  <span class="comment">// bar is a non-enumerable property.</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">baz</span>: &#123;</span><br><span class="line">    <span class="attr">value</span>: <span class="number">3</span>,</span><br><span class="line">    <span class="attr">enumerable</span>: <span class="literal">true</span>  <span class="comment">// baz is an own enumerable property.</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(obj) <span class="comment">// &#123;baz: 3, bar: 2&#125; 另外：&#123;foo: 1&#125;在obj的原型链上</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> copy = <span class="title class_">Object</span>.<span class="title function_">assign</span>(&#123;&#125;, obj);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(copy); <span class="comment">// &#123; baz: 3 &#125;</span></span><br></pre></td></tr></table></figure>

<h5 id="基本类型会被包装为对象"><a href="#基本类型会被包装为对象" class="headerlink" title="基本类型会被包装为对象"></a>基本类型会被包装为对象</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> v1 = <span class="string">&#x27;abc&#x27;</span>;</span><br><span class="line"><span class="keyword">const</span> v2 = <span class="literal">true</span>;</span><br><span class="line"><span class="keyword">const</span> v3 = <span class="number">10</span>;</span><br><span class="line"><span class="keyword">const</span> v4 = <span class="title class_">Symbol</span>(<span class="string">&#x27;foo&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> obj = <span class="title class_">Object</span>.<span class="title function_">assign</span>(&#123;&#125;, v1, <span class="literal">null</span>, v2, <span class="literal">undefined</span>, v3, v4);</span><br><span class="line"><span class="comment">// Primitives will be wrapped, null and undefined will be ignored.</span></span><br><span class="line"><span class="comment">// Note, only string wrappers can have own enumerable properties.</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(obj); <span class="comment">// &#123; &quot;0&quot;: &quot;a&quot;, &quot;1&quot;: &quot;b&quot;, &quot;2&quot;: &quot;c&quot; &#125;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h5 id="异常会打断后续拷贝任务"><a href="#异常会打断后续拷贝任务" class="headerlink" title="异常会打断后续拷贝任务"></a>异常会打断后续拷贝任务</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> target = <span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(&#123;&#125;, <span class="string">&#x27;foo&#x27;</span>, &#123;</span><br><span class="line">  <span class="attr">value</span>: <span class="number">1</span>,</span><br><span class="line">  <span class="attr">writable</span>: <span class="literal">false</span></span><br><span class="line">&#125;); <span class="comment">// target.foo is a read-only property</span></span><br><span class="line"></span><br><span class="line"><span class="title class_">Object</span>.<span class="title function_">assign</span>(target, &#123; <span class="attr">bar</span>: <span class="number">2</span> &#125;, &#123; <span class="attr">foo2</span>: <span class="number">3</span>, <span class="attr">foo</span>: <span class="number">3</span>, <span class="attr">foo3</span>: <span class="number">3</span> &#125;, &#123; <span class="attr">baz</span>: <span class="number">4</span> &#125;);</span><br><span class="line"><span class="comment">// TypeError: &quot;foo&quot; is read-only</span></span><br><span class="line"><span class="comment">// The Exception is thrown when assigning target.foo</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(target.<span class="property">bar</span>);  <span class="comment">// 2, the first source was copied successfully.</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(target.<span class="property">foo2</span>); <span class="comment">// 3, the first property of the second source was copied successfully.</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(target.<span class="property">foo</span>);  <span class="comment">// 1, exception is thrown here.</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(target.<span class="property">foo3</span>); <span class="comment">// undefined, assign method has finished, foo3 will not be copied.</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(target.<span class="property">baz</span>);  <span class="comment">// undefined, the third source will not be copied either.</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src="/2022/09/16/web/JavaScript/js%E4%BB%8E%E5%9F%BA%E7%A1%80%E5%88%B0%E8%BF%9B%E9%98%B6/image-20221114205656441.png" alt="image-20221114205656441"></p>
<h5 id="拷贝访问器"><a href="#拷贝访问器" class="headerlink" title="拷贝访问器"></a>拷贝访问器</h5><p>如果源对象里有<code>getter</code>，正常情况下会返回<code>getters</code>的值</p>
<p>现在希望把<code>getters</code>的访问器属性也整到目标对象中，定义了<code>completeAssign</code>方法</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = &#123;</span><br><span class="line">  <span class="attr">foo</span>: <span class="number">1</span>,</span><br><span class="line">  <span class="keyword">get</span> <span class="title function_">bar</span>() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">2</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> copy1 = <span class="title class_">Object</span>.<span class="title function_">assign</span>(&#123;&#125;, obj);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(copy1);</span><br><span class="line"><span class="comment">// &#123; foo: 1, bar: 2 &#125;</span></span><br><span class="line"><span class="comment">// The value of copy.bar is obj.bar&#x27;s getter&#x27;s return value.</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// This is an assign function that copies full descriptors</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">completeAssign</span>(<span class="params">target, ...sources</span>) &#123;</span><br><span class="line">  sources.<span class="title function_">forEach</span>(<span class="function"><span class="params">source</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> descriptors = <span class="title class_">Object</span>.<span class="title function_">keys</span>(source).<span class="title function_">reduce</span>(<span class="function">(<span class="params">descriptors, key</span>) =&gt;</span> &#123;</span><br><span class="line">      descriptors[key] = <span class="title class_">Object</span>.<span class="title function_">getOwnPropertyDescriptor</span>(source, key);</span><br><span class="line">      <span class="keyword">return</span> descriptors;</span><br><span class="line">    &#125;, &#123;&#125;);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// By default, Object.assign copies enumerable Symbols, too</span></span><br><span class="line">    <span class="title class_">Object</span>.<span class="title function_">getOwnPropertySymbols</span>(source).<span class="title function_">forEach</span>(<span class="function"><span class="params">sym</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">let</span> descriptor = <span class="title class_">Object</span>.<span class="title function_">getOwnPropertyDescriptor</span>(source, sym);</span><br><span class="line">      <span class="keyword">if</span> (descriptor.<span class="property">enumerable</span>) &#123;</span><br><span class="line">        descriptors[sym] = descriptor;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="title class_">Object</span>.<span class="title function_">defineProperties</span>(target, descriptors);</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="keyword">return</span> target;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">copy2 = <span class="title function_">completeAssign</span>(&#123;&#125;, obj);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(copy2);</span><br><span class="line"><span class="comment">// &#123; foo:1, get bar() &#123; return 2 &#125; &#125;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="参见"><a href="#参见" class="headerlink" title="参见"></a>参见</h4><ul>
<li><a target="_blank" rel="noopener" href="https://github.com/zloirock/core-js#ecmascript-object">Polyfill of <code>Object.assign</code> in <code>core-js</code></a></li>
<li><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/defineProperties"><code>Object.defineProperties()</code></a></li>
<li><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Enumerability_and_ownership_of_properties">属性的可枚举性和所有权</a></li>
<li><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/Spread_syntax#%E6%9E%84%E9%80%A0%E5%AD%97%E9%9D%A2%E9%87%8F%E5%AF%B9%E8%B1%A1%E6%97%B6%E4%BD%BF%E7%94%A8%E5%B1%95%E5%BC%80%E8%AF%AD%E6%B3%95">构造字面量对象时使用展开语法</a></li>
</ul>
<h2 id="Date常用方法"><a href="#Date常用方法" class="headerlink" title="Date常用方法"></a>Date常用方法</h2><p>Date对象用于处理日期和时间。</p>
<p>创建Date对象的语法：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var myDate=new Date()</span><br></pre></td></tr></table></figure>

<p>注释：Date 对象会自动把当前日期和时间保存为其初始值。</p>
<p>date对象获取时间日期的方法如下：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 获取当前日期时间</span></span><br><span class="line"><span class="keyword">var</span> myDate = <span class="keyword">new</span> <span class="title class_">Date</span>();</span><br><span class="line">myDate.<span class="title function_">toLocaleDateString</span>();                <span class="comment">//获取当前日期</span></span><br><span class="line"><span class="keyword">var</span> mytime=myDate.<span class="title function_">toLocaleTimeString</span>();     <span class="comment">//获取当前时间</span></span><br><span class="line">myDate.<span class="title function_">toLocaleString</span>( );                   <span class="comment">//获取日期与时间</span></span><br><span class="line"> </span><br><span class="line">myDate.<span class="title function_">getYear</span>();                <span class="comment">//获取当前年份(2位)</span></span><br><span class="line">myDate.<span class="title function_">getFullYear</span>();            <span class="comment">//获取完整的年份(4位,1970-????)</span></span><br><span class="line">myDate.<span class="title function_">getMonth</span>();               <span class="comment">//获取当前月份(0-11,0代表1月)</span></span><br><span class="line">myDate.<span class="title function_">getDate</span>();                <span class="comment">//获取当前日(1-31)</span></span><br><span class="line">myDate.<span class="title function_">getDay</span>();                 <span class="comment">//获取当前星期X(0-6,0代表星期天)</span></span><br><span class="line">myDate.<span class="title function_">getTime</span>();                <span class="comment">//获取当前时间(从1970.1.1开始的毫秒数)</span></span><br><span class="line">myDate.<span class="title function_">getHours</span>();               <span class="comment">//获取当前小时数(0-23)</span></span><br><span class="line">myDate.<span class="title function_">getMinutes</span>();             <span class="comment">//获取当前分钟数(0-59)</span></span><br><span class="line">myDate.<span class="title function_">getSeconds</span>();             <span class="comment">//获取当前秒数(0-59)</span></span><br><span class="line">myDate.<span class="title function_">getMilliseconds</span>();        <span class="comment">//获取当前毫秒数(0-999)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取当前日期时间</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">getDatetime</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> now = <span class="keyword">new</span> <span class="title class_">Date</span>();</span><br><span class="line">    <span class="keyword">var</span> year = now.<span class="title function_">getFullYear</span>();       </span><br><span class="line">    <span class="keyword">var</span> month = now.<span class="title function_">getMonth</span>() + <span class="number">1</span>;     </span><br><span class="line">    <span class="keyword">var</span> day = now.<span class="title function_">getDate</span>();            </span><br><span class="line">    <span class="keyword">var</span> hh = now.<span class="title function_">getHours</span>();            </span><br><span class="line">    <span class="keyword">var</span> mm = now.<span class="title function_">getMinutes</span>();          </span><br><span class="line">    <span class="keyword">var</span> ss = now.<span class="title function_">getSeconds</span>();          </span><br><span class="line">    <span class="keyword">var</span> clock = year + <span class="string">&quot;-&quot;</span>;</span><br><span class="line">    <span class="keyword">if</span> (month &lt; <span class="number">10</span>)</span><br><span class="line">        clock += <span class="string">&quot;0&quot;</span>;</span><br><span class="line">    clock += month + <span class="string">&quot;-&quot;</span>;</span><br><span class="line">    <span class="keyword">if</span> (day &lt; <span class="number">10</span>)</span><br><span class="line">        clock += <span class="string">&quot;0&quot;</span>;</span><br><span class="line">    clock += day + <span class="string">&quot; &quot;</span>;</span><br><span class="line">    <span class="keyword">if</span> (hh &lt; <span class="number">10</span>)</span><br><span class="line">        clock += <span class="string">&quot;0&quot;</span>;</span><br><span class="line">    clock += hh + <span class="string">&quot;:&quot;</span>;</span><br><span class="line">    <span class="keyword">if</span> (mm &lt; <span class="number">10</span>) clock += <span class="string">&#x27;0&#x27;</span>;</span><br><span class="line">    clock += mm + <span class="string">&quot;:&quot;</span>;</span><br><span class="line">    <span class="keyword">if</span> (ss &lt; <span class="number">10</span>) clock += <span class="string">&#x27;0&#x27;</span>;</span><br><span class="line">    clock += ss;</span><br><span class="line">    <span class="keyword">return</span> clock;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取当前日期时间</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">timestampToTime</span>(<span class="params">timestamp</span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> date = <span class="keyword">new</span> <span class="title class_">Date</span>(timestamp);</span><br><span class="line">    <span class="keyword">var</span> Y = date.<span class="title function_">getFullYear</span>() + <span class="string">&#x27;-&#x27;</span>;</span><br><span class="line">    <span class="keyword">var</span> M = (date.<span class="title function_">getMonth</span>() + <span class="number">1</span> &lt; <span class="number">10</span> ? <span class="string">&#x27;0&#x27;</span> + (date.<span class="title function_">getMonth</span>() + <span class="number">1</span>) : date.<span class="title function_">getMonth</span>() + <span class="number">1</span>) + <span class="string">&#x27;-&#x27;</span>;</span><br><span class="line">    <span class="keyword">var</span> D = date.<span class="title function_">getDate</span>() &lt; <span class="number">10</span> ? <span class="string">&#x27;0&#x27;</span> + date.<span class="title function_">getDate</span>() : date.<span class="title function_">getDate</span>() + <span class="string">&#x27; &#x27;</span>;</span><br><span class="line">    <span class="keyword">var</span> hh = date.<span class="title function_">getHours</span>() &lt; <span class="number">10</span> ? <span class="string">&#x27;0&#x27;</span> + date.<span class="title function_">getHours</span>() : date.<span class="title function_">getHours</span>() + <span class="string">&#x27;:&#x27;</span>;</span><br><span class="line">    <span class="keyword">var</span> mm = date.<span class="title function_">getMinutes</span>() &lt; <span class="number">10</span> ? <span class="string">&#x27;0&#x27;</span> + date.<span class="title function_">getMinutes</span>() : date.<span class="title function_">getMinutes</span>() + <span class="string">&#x27;:&#x27;</span>;</span><br><span class="line">    <span class="keyword">var</span> ss = date.<span class="title function_">getSeconds</span>() &lt; <span class="number">10</span> ? <span class="string">&#x27;0&#x27;</span> + date.<span class="title function_">getDate</span>() : date.<span class="title function_">getSeconds</span>() ;</span><br><span class="line">    <span class="keyword">return</span> Y + M + D + hh + mm + ss;&#125;</span><br></pre></td></tr></table></figure>



<p>踩过这个坑，还有下一个坑等着你，这一路就是给自己填坑，坑填多了，也就习惯了，直到这一路平坦了，也就无怨无悔了。</p>
<p>转载 ： <a target="_blank" rel="noopener" href="https://www.cnblogs.com/xiaofeilin/p/14468107.html">https://www.cnblogs.com/xiaofeilin/p/14468107.html</a></p>
<p>-————————————————————————</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">onConfirm(date) &#123;</span><br><span class="line">    const date1 = this.timestampToTime(date);</span><br><span class="line">    console.log(date1);</span><br><span class="line">    this.text = ` $&#123;date1&#125; `;</span><br><span class="line">  &#125;,</span><br><span class="line">  onSubmit(values) &#123;</span><br><span class="line">    console.log(&quot;submit&quot;, values);</span><br><span class="line">  &#125;,</span><br><span class="line">  onClickLeft() &#123;</span><br><span class="line">    this.$router.push(&#123;</span><br><span class="line">      path: &quot;/home/index&quot;,</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;,</span><br><span class="line">  // 获取当前日期时间</span><br><span class="line">  timestampToTime(timestamp) &#123;</span><br><span class="line">    var date = new Date(timestamp);</span><br><span class="line">    var Y = date.getFullYear() + &quot;-&quot;;</span><br><span class="line">    var M =</span><br><span class="line">      (date.getMonth() + 1 &lt; 10</span><br><span class="line">        ? &quot;0&quot; + (date.getMonth() + 1)</span><br><span class="line">        : date.getMonth() + 1) + &quot;-&quot;;</span><br><span class="line">    var D = date.getDate() &lt; 10 ? &quot;0&quot; + date.getDate() : date.getDate() + &quot; &quot;;</span><br><span class="line">    var text = &quot; &quot;;</span><br><span class="line">    var hh =</span><br><span class="line">      date.getHours() &lt; 10 ? &quot;0&quot; + date.getHours() : date.getHours() + &quot;:&quot;;</span><br><span class="line">    var mm =</span><br><span class="line">      date.getMinutes() &lt; 10</span><br><span class="line">        ? &quot;0&quot; + date.getMinutes()</span><br><span class="line">        : date.getMinutes() + &quot;:&quot;;</span><br><span class="line">    var ss =</span><br><span class="line">      date.getSeconds() &lt; 10 ? &quot;0&quot; + date.getDate() : date.getSeconds();</span><br><span class="line">    return Y + M + D + text + hh + mm + ss;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<p><img src="/2022/09/16/web/JavaScript/js%E4%BB%8E%E5%9F%BA%E7%A1%80%E5%88%B0%E8%BF%9B%E9%98%B6/image-20221114205956862.png" alt="image-20221114205956862"> </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">onConfirm(date) &#123;</span><br><span class="line">      var now = new Date();</span><br><span class="line">      var Today = now.getDate();</span><br><span class="line"></span><br><span class="line">      const date2 = date.getDate(); //签到的时间</span><br><span class="line">      if (Today != date2) &#123;</span><br><span class="line">        Toast.fail(&quot;请选择今天日期,签到！&quot;);</span><br><span class="line">      &#125; else &#123;</span><br><span class="line">        const date1 = this.timestampToTime(date);</span><br><span class="line">        this.text = ` $&#123;date1&#125; `;</span><br><span class="line">        Toast.success(&quot;签到成功&quot;);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br></pre></td></tr></table></figure>



<h1 id="案例训练"><a href="#案例训练" class="headerlink" title="案例训练"></a>案例训练</h1><h2 id="数据类型-1"><a href="#数据类型-1" class="headerlink" title="数据类型"></a>数据类型</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a = &#123;</span><br><span class="line">    <span class="attr">n</span>: <span class="number">1</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">let</span> b = a;</span><br><span class="line">a.<span class="property">x</span> = a = &#123;</span><br><span class="line">    <span class="attr">n</span>: <span class="number">2</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a.<span class="property">x</span>); <span class="comment">// undefined</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(b) <span class="comment">// &#123;n: 1, x: &#123;n: 2&#125;&#125;</span></span><br></pre></td></tr></table></figure>

<p>操作符的优先级：<a target="_blank" rel="noopener" href="https://www.cnblogs.com/liyongquan/p/9359523.html">js运算符优先级 </a></p>
<p><img src="/2022/09/16/web/JavaScript/js%E4%BB%8E%E5%9F%BA%E7%A1%80%E5%88%B0%E8%BF%9B%E9%98%B6/2022%E5%B9%B49%E6%9C%8824%E6%97%A5.png" alt="堆栈内存图01"></p>
<ul>
<li>成员访问的优先级为18，赋值的优先级为3</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="string">&#x27;abc&#x27;</span> + <span class="number">123</span> + <span class="number">456</span>;</span><br><span class="line"><span class="keyword">var</span> b = <span class="string">&#x27;456&#x27;</span> - <span class="string">&#x27;123&#x27;</span>;</span><br><span class="line"><span class="keyword">var</span> c = <span class="number">100</span> + <span class="literal">true</span> + <span class="number">21.2</span> + <span class="literal">null</span> + <span class="literal">undefined</span> + <span class="string">&quot;Tencent&quot;</span> + [] + <span class="literal">null</span> + <span class="number">9</span> + <span class="literal">false</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a, b, c)</span><br></pre></td></tr></table></figure>

<h2 id="判断逻辑"><a href="#判断逻辑" class="headerlink" title="判断逻辑"></a>判断逻辑</h2><h3 id="判断数字正负"><a href="#判断数字正负" class="headerlink" title="判断数字正负"></a>判断数字正负</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> myinput = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.myinput&#x27;</span>),</span><br><span class="line">    btn = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.calc&#x27;</span>),</span><br><span class="line">    res = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.value&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// const inputValue = Number(myinput.value)</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> validateNumber = <span class="keyword">function</span> <span class="title function_">validateNumber</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> inputValue = myinput.<span class="property">value</span></span><br><span class="line">        <span class="keyword">if</span>(inputValue === <span class="string">&#x27;&#x27;</span>) &#123;</span><br><span class="line">            res.<span class="property">innerHTML</span> = <span class="string">&#x27;请输入&#x27;</span></span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        &#125;</span><br><span class="line">    </span><br><span class="line">        <span class="keyword">const</span> numberValue = <span class="title class_">Number</span>(inputValue)</span><br><span class="line">        <span class="comment">// if(String(numberValue) === &#x27;NaN&#x27;) &#123;</span></span><br><span class="line">        <span class="comment">//     res.innerHTML = `输入为：$&#123;inputValue&#125;，请输入有效数字`</span></span><br><span class="line">    </span><br><span class="line">        <span class="comment">// &#125; else if(numberValue === 0) &#123;</span></span><br><span class="line">        <span class="comment">//     res.innerHTML = `输入为：$&#123;inputValue&#125;`</span></span><br><span class="line">        <span class="comment">// &#125; else &#123;</span></span><br><span class="line">        <span class="comment">//     res.innerHTML = numberValue &gt; 0 ? `结果为：$&#123;numberValue&#125;，正数` : `结果为：$&#123;numberValue&#125;，负数`</span></span><br><span class="line">        <span class="comment">// &#125;</span></span><br><span class="line">        <span class="keyword">if</span>(!<span class="built_in">isNaN</span>(numberValue)) &#123;</span><br><span class="line">            <span class="keyword">if</span>(numberValue === <span class="number">0</span>) &#123;</span><br><span class="line">                    res.<span class="property">innerHTML</span> = <span class="string">`输入为：<span class="subst">$&#123;inputValue&#125;</span>`</span></span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                res.<span class="property">innerHTML</span> = numberValue &gt; <span class="number">0</span> ? <span class="string">`结果为：<span class="subst">$&#123;numberValue&#125;</span>，正数`</span> : <span class="string">`结果为：<span class="subst">$&#123;numberValue&#125;</span>，负数`</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            res.<span class="property">innerHTML</span> = <span class="string">`输入为：<span class="subst">$&#123;inputValue&#125;</span>，请输入有效数字`</span></span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br><span class="line">btn.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, validateNumber)</span><br><span class="line"></span><br><span class="line">myinput.<span class="title function_">addEventListener</span>(<span class="string">&#x27;keydown&#x27;</span>, <span class="keyword">function</span>(<span class="params">event</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span>(event.<span class="property">keyCode</span> === <span class="number">13</span>) &#123;</span><br><span class="line">        <span class="title function_">validateNumber</span>()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>





<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>判断数字输入正负<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;./style.css&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>判断数字输入正负<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">class</span>=<span class="string">&quot;myinput&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">&quot;calc&quot;</span>&gt;</span>点击计算<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;value&quot;</span>&gt;</span>结果为：<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;./index.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>



<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">* &#123;</span><br><span class="line">    <span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">flex-direction</span>: column;</span><br><span class="line">    <span class="attribute">align-items</span>: center;</span><br><span class="line">    <span class="attribute">justify-content</span>: center;</span><br><span class="line"></span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100vh</span>;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">overflow</span>: hidden;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.myinput</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">38px</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">6px</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">6px</span>;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="built_in">rgb</span>(<span class="number">99</span>, <span class="number">99</span>, <span class="number">99</span>);</span><br><span class="line">    <span class="attribute">outline</span>: none;</span><br><span class="line">    <span class="attribute">letter-spacing</span>: <span class="number">1px</span>;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">18px</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">input</span><span class="selector-class">.myinput</span><span class="selector-pseudo">:focus</span> &#123;</span><br><span class="line">    <span class="attribute">outline</span>: <span class="number">1px</span> solid <span class="built_in">rgb</span>(<span class="number">71</span>, <span class="number">197</span>, <span class="number">255</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">button</span><span class="selector-class">.calc</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">80px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">38px</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">10px</span>;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">1px</span> solid grey;</span><br><span class="line">    <span class="attribute">cursor</span>: pointer;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">div</span><span class="selector-class">.value</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">290px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">200px</span>;</span><br><span class="line">    <span class="attribute">margin-top</span>: <span class="number">10px</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="奇偶判定"><a href="#奇偶判定" class="headerlink" title="奇偶判定"></a>奇偶判定</h3><p>判断输入的数字是偶数还是奇数</p>
<p>偶数条件:能被2整除(或者除以2余数为0 &#x3D;&gt; N%2是取余数)</p>
<h3 id="成绩判定"><a href="#成绩判定" class="headerlink" title="成绩判定"></a>成绩判定</h3><p>根据输入的分数,判定成绩等级</p>
<p>说明: 90分及以上“优秀”80分及以 上”中等”70分及以 上”及格”70分以下”不及格”</p>
<h3 id="年终奖发放判定"><a href="#年终奖发放判定" class="headerlink" title="年终奖发放判定"></a>年终奖发放判定</h3><p>某个公司要给员工发年终奖,为了奖励老员工,所以工作时间越长,发的越多,规则如下:</p>
<p>工作满0年，发月薪的1倍月薪年终奖,如果月薪大于8000 ,那么就是发1.2倍<br>工作满1年，发月薪的1.5倍月薪年终奖,如果月薪大于10000 ,那么就是发1.7倍<br>工作满2年甚至更多，发月薪的3倍月薪年终奖,如果月薪大于12000,那么就是发3.2倍<br>编写JS程序,当用户输入自己的工作年限和薪资后,计算并且输出应得的年终奖~~</p>
<h3 id="加油优惠"><a href="#加油优惠" class="headerlink" title="加油优惠"></a>加油优惠</h3><p>一个加油站为了鼓励车主多加油,所以加的多有优惠。</p>
<p>92号汽油，每升6元;如果大于等于20升,那么每升5.9元.<br>97号汽油，每升7元;如果大于等于30升,那么每升6.95元<br>编写JS程序,用户输入自己的汽油编号,然后输入自己加多少升,计算并且输出应付价格~~</p>
<h3 id="奇偶行变色"><a href="#奇偶行变色" class="headerlink" title="奇偶行变色"></a>奇偶行变色</h3><p>同时，鼠标滑过的时候，实现变色</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> ulEle = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.container&#x27;</span>),</span><br><span class="line">    liEle = <span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&#x27;.item&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; liEle.<span class="property">length</span>; i++) &#123;</span><br><span class="line">    <span class="keyword">let</span> liItem = liEle[i]</span><br><span class="line">    liItem.<span class="property">style</span>.<span class="property">backgroundColor</span> = i % <span class="number">2</span> === <span class="number">0</span> ? <span class="string">&#x27;#ddd&#x27;</span> : <span class="string">&#x27;#fff&#x27;</span> <span class="comment">// 初始化背景颜色</span></span><br><span class="line">    <span class="comment">// let currentBgc = liItem.style.backgroundColor // 记录初始背景颜色</span></span><br><span class="line">    <span class="comment">// 使用自定义属性，存储背景颜色</span></span><br><span class="line">    <span class="comment">// 自定义属性编程思想：前期把一些值存储到元素的自定义属性上，后期需要用到的时候，直接从属性上获取到这些值即可</span></span><br><span class="line">    liItem.<span class="property">myOriginBg</span> = liItem.<span class="property">style</span>.<span class="property">backgroundColor</span></span><br><span class="line"></span><br><span class="line">    liItem.<span class="property">onmouseover</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123; <span class="comment">// 鼠标滑过改变背景颜色</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">style</span>.<span class="property">backgroundColor</span> = <span class="string">&#x27;lightblue&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    liItem.<span class="property">onmouseout</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123; <span class="comment">// 鼠标移出恢复背景颜色</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">style</span>.<span class="property">backgroundColor</span> = <span class="variable language_">this</span>.<span class="property">myOriginBg</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>奇偶行变色<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;./style.css&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>奇偶行变色<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span>&gt;</span>我是item001<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span>&gt;</span>我是item002<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span>&gt;</span>我是item003<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span>&gt;</span>我是item004<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span>&gt;</span>我是item005<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;./index.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>



<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">* &#123;</span><br><span class="line">    <span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">flex-direction</span>: column;</span><br><span class="line">    <span class="attribute">align-items</span>: center;</span><br><span class="line">    <span class="attribute">justify-content</span>: center;</span><br><span class="line"></span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100vh</span>;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">overflow</span>: hidden;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">ul</span><span class="selector-class">.container</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">500px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">300px</span>;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">1px</span> solid skyblue;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">li</span><span class="selector-class">.item</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">50px</span>;</span><br><span class="line">    <span class="attribute">list-style</span>: none;</span><br><span class="line">    <span class="attribute">border-bottom</span>: <span class="number">1px</span> dashed grey;</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">50px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">li</span><span class="selector-class">.item</span><span class="selector-pseudo">:first</span>-child &#123;</span><br><span class="line">    <span class="attribute">margin-top</span>: <span class="number">10px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">li</span><span class="selector-class">.item</span><span class="selector-pseudo">:last-child</span> &#123;</span><br><span class="line">    <span class="attribute">border-bottom</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 真实项目css实现更方便一点，为了练习使用js实现 */</span></span><br><span class="line"><span class="comment">/* li.item:nth-child(2n) &#123;</span></span><br><span class="line"><span class="comment">    background-color: rgb(100, 100, 100);</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">li.item:hover &#123;</span></span><br><span class="line"><span class="comment">    background-color: rgb(56, 63, 70);</span></span><br><span class="line"><span class="comment">&#125; */</span></span><br></pre></td></tr></table></figure>



<h2 id="选项卡案例"><a href="#选项卡案例" class="headerlink" title="选项卡案例"></a>选项卡案例</h2><p>拥有active选中样式类的显示</p>
<ul>
<li><p>循环li时，使用var声明i时的解决方案：</p>
<ul>
<li><p>增加自定义属性</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt;navList.<span class="property">length</span>; i++) &#123;</span><br><span class="line">	navList[i].<span class="property">myIndex</span> = i</span><br><span class="line">    navList.<span class="property">onclick</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="title function_">changeTab</span>(<span class="variable language_">this</span>.<span class="property">myIndex</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>使用闭包</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt;navList.<span class="property">length</span>; i++) &#123;</span><br><span class="line">    navList[i].<span class="property">onclick</span> = (<span class="keyword">function</span>(<span class="params">i</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">            <span class="title function_">changeTab</span>(i)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)(i)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>当然了，可以使用let关键字，有自己的块级作用域</p>
</li>
</ul>
<h2 id="扩展题"><a href="#扩展题" class="headerlink" title="扩展题"></a>扩展题</h2><p>1.浏览器常用的输出方式，除了 <code>console.log</code>还有哪些 ?</p>
<p>2.<code>&lt; script &gt;</code>标签放到页面头部和尾部的区别，以及解决办法?</p>
<hr>
<p>title: js底层核心概念<br>date: 2022-10-14 05:58:44<br>cover: false<br>tags:</p>
<ul>
<li>javascript<br>categories: ‘javascript’<br>typora-root-url: js底层核心概念</li>
</ul>
<hr>
<h1 id="JS核心概念"><a href="#JS核心概念" class="headerlink" title="JS核心概念"></a>JS核心概念</h1><h2 id="数据结构"><a href="#数据结构" class="headerlink" title="数据结构"></a>数据结构</h2><h3 id="栈"><a href="#栈" class="headerlink" title="栈"></a>栈</h3><p>一种遵从先进后出（LIFO）原则的有序集合；</p>
<p>新添加的或待删除的都保存在栈的末尾，称作栈顶，另一端为栈底。</p>
<p>在栈里，新元素都靠近栈顶，旧元素都接近栈底。</p>
<p>栈知识对原有数据的一次封装而已。</p>
<p>而封装的结果是：并不关心其内部的元素是什么，只是去操作栈顶元素，这样的话，在编码中会更可控一些。</p>
<p>定义一个栈</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">``</span><span class="string">`</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">### 队列</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">与上相反，一种遵循先进先出（FIFO）原则的一组有序的项；</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">队列在尾部添加新元素，并从头部移除元素。</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">最新添加的元素必须排在队列的末尾。例如日常生活中的购物排队。</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">与栈类比，栈仅能操作其头部，队列则首尾均能操作，但仅能在头部出尾部进</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">定义一个队列</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>js</span><br></pre></td></tr></table></figure>

<h3 id="链表"><a href="#链表" class="headerlink" title="链表"></a>链表</h3><p>存储有序的元素集合，但不同于数组，链表中的元素在内存中并不是连续放置的；</p>
<p>每个元素有一个存储本身的节点和一个指向下一个元素的引用（指针&#x2F;链接）组成</p>
<h3 id="集合-1"><a href="#集合-1" class="headerlink" title="集合"></a>集合</h3><p>由一组无序且唯一（即不能重复）的项组成；</p>
<p>这个数据结构使用了与有限集合相同的数学概念，但引用在计算机科学的数据结构中。</p>
<h3 id="字典"><a href="#字典" class="headerlink" title="字典"></a>字典</h3><p>以[键，值]对为数据形态的数据结构，其中键名用来查询特定元素，类似于JS中的Object</p>
<h3 id="散列"><a href="#散列" class="headerlink" title="散列"></a>散列</h3><p>根据关键码（Key Value）直接进行访问的数据结构；</p>
<p>它通过把关键码值映射到表中的一个位置来访问记录，以加快查找的速度；</p>
<p>这个映射函数叫做散列函数，存放记录的数组叫做散列表</p>
<h3 id="树"><a href="#树" class="headerlink" title="树"></a>树</h3><p>表示一对多关系</p>
<p>由n（n&gt;&#x3D;1）个有限节点组成一个具有层次关系的集合；</p>
<p>把它叫做“树”是因为它看起来像一颗倒挂的树，基本呈一对多关系，树也可以看做是图的特殊形式</p>
<h3 id="图"><a href="#图" class="headerlink" title="图"></a>图</h3><p>表示多对多关系</p>
<p>图是网络结构的抽象模型；</p>
<p>图是一组由边连接的节点（顶点）</p>
<p>任何二元关系都可以用图来表示，常见的比如：道路图、关系图、呈现多对多关系</p>
<h2 id="堆栈内存"><a href="#堆栈内存" class="headerlink" title="堆栈内存"></a>堆栈内存</h2><p>浏览器想要执行JS代码:</p>
<p>1.从电脑内存中分配出一块内存，用来执行代码(栈内存&#x3D;&gt;Stack)</p>
<ul>
<li>执行代码、存储变量和基本类型值</li>
<li>js中的赋值，是关联引用模式，而不是拷贝模式</li>
</ul>
<p>2.分配一个主线程用来自上而下执行js代码</p>
<h3 id="栈内存"><a href="#栈内存" class="headerlink" title="栈内存"></a>栈内存</h3><p>栈（stack）中主要存放一些基本类型的变量和对象的引用，（包含池，池存放常量）；</p>
<p>其优势是存取速度比堆要快，并且栈内的数据可以共享；</p>
<p>但缺点是存在栈中的数据大小与生存期必须是确定的，缺乏灵活性；</p>
<p>先进后出，后进先出原则，所以push优于unshift</p>
<h3 id="堆内存"><a href="#堆内存" class="headerlink" title="堆内存"></a>堆内存</h3><p>堆（heap）用于复杂数据类型（引用类型）分配空间，例如数组对象、object对象;</p>
<p>它是运行时动态分配内存的，因此存取速度较慢</p>
<h2 id="数据类型内存机制"><a href="#数据类型内存机制" class="headerlink" title="数据类型内存机制"></a>数据类型内存机制</h2><p>js的数据类型主要分为两种：基本类型值和引用类型值</p>
<h3 id="基本数据类型-1"><a href="#基本数据类型-1" class="headerlink" title="基本数据类型"></a>基本数据类型</h3><p>基本类型值有6种：undefined、null、boolean、number、string、symbol。</p>
<p>这六种数据类型是按值访问的，是存放在栈内存中的简单数据段，数据大小确定，内存空间大小可以分配。</p>
<p>基本类型值的复制是值的传递，赋值以后二者再无关联，修改其中一个不会影响另一个。</p>
<h3 id="引用数据类型"><a href="#引用数据类型" class="headerlink" title="引用数据类型"></a>引用数据类型</h3><p>引用类型值：6中基本类型值以外的数据类型，都可以看作是引用类型值；</p>
<p>比如array，object等，是保存在堆内存中对象。</p>
<p>js不允许直接访问堆内存中的位置，也就是说不能直接操作对象的内存空间。</p>
<p>在操作对象时，实际是在操作对象的引用而不是实际的对象，是按地址访问的。</p>
<p>直接传递引用类型值的时候，传递的知识引用，二者指向同一块内存，所以修改其中一个，必然会引起另一个变量的变化。</p>
<p>在日常的使用中，我们把对象赋值给一个变量时，通常希望得到的是一个跟原对象无关的的副本，修改新的变量不影响原对象，因此就有了浅拷贝和深拷贝</p>
<h3 id="内存角度分析变量声明及定义"><a href="#内存角度分析变量声明及定义" class="headerlink" title="内存角度分析变量声明及定义"></a>内存角度分析变量声明及定义</h3><p><code>let a = 12;</code></p>
<ol>
<li><p>创建变量a，放到当前栈内存变量存储区域中</p>
</li>
<li><p>创建一个值12 ,把它存储到当前栈内存值区域中（简单的基本类型值是这样存储的,复杂的引用类型值不是这样做的）</p>
<p>复杂值(引用类型值)的存储,又分成了三个步骤，<code>let obj = &#123;name: &#39;sai&#39;&#125;</code>:	</p>
<ol>
<li>在内存中分配出一块新内存,用来存储引用类型值(堆内存&#x3D;&gt;heap) &#x3D;&gt;内存有一个16进制地址</li>
<li>把对象中的键值对(属性名:属性值)依次存储到堆内存中</li>
<li>把堆内存地址和变量关联起来</li>
</ol>
</li>
<li><p>&#x3D;为赋值，其实赋值是让变量和值相互关联的过程</p>
</li>
</ol>
<h2 id="作用域与作用域链"><a href="#作用域与作用域链" class="headerlink" title="作用域与作用域链"></a>作用域与作用域链</h2><p>对于几乎所有的编程语言来说，最基本的功能之一，就是储存变量当中的值并且能在之后对这个值进行访问和修改。这种能力的引入，是程序的状态存在的基础。</p>
<p>但是，能力的引入需要我们解决几个问题，例如：变量存储在哪里？以何种形式存储？需要读取和修改变量的时候，以什么方式获取到这个变量？</p>
<p>很明显，为了解决这些问题，我们需要一套设计良好的规则来存储变量，并且之后可以方便的找到这些变量。与此同时，整套完整规则的设计就会衍生出额外规则概念。而作用域，就是这套规则下衍生出来的概念。</p>
<h3 id="作用域"><a href="#作用域" class="headerlink" title="作用域"></a>作用域</h3><p>链接：<a target="_blank" rel="noopener" href="https://juejin.cn/post/7152863269353422855">https://juejin.cn/post/7152863269353422855</a></p>
<p>我们可以把作用域理解为上面讲到的这套规则下的限定范围。作用域的职责是，在这段限定范围中根据这套设计好的规则存储所声明的变量，并且提供修改该变量的支持。在变量的访问权限安全上，作用域还承担着保护当前作用域内的变量不被外部作用域访问的权限保护作用。</p>
<p>通过类比，我们可以把作用域想象成一个气泡。在这个气泡里所声明的变量成员被包含在其中。每个气泡都配备有一位有原则的管家，将所有的成员管理起来，并针对他们声明的位置和要求对它们提供保护。当气泡中代码语句想要访问和修改变量成员时，管家会结合变量成员的要求关联对应访问和修改操作。</p>
<p>随着ECMAScript标准的不断发展和完善，JavaScript目前存在着四种作用域类型：</p>
<ul>
<li>全局作用域（Global Scope）: JavaScript语言环境的最顶级作用域，在语言环境初始化时创建。</li>
<li>模块作用域（Module Scope）: 由ECMAScript模块标准（ES Module）引入，在解析ECMAScript模块时创建。</li>
<li>函数作用域（Function Scope）: 在函数声明<code>function() &#123;&#125;</code>或者<code>() =&gt; &#123;&#125;</code>时创建。<ul>
<li>可人为创建</li>
</ul>
</li>
<li>块级作用域（Block Scope）: 由ECMAScript2015的变量声明标识符<code>let</code>和<code>const</code>引入，在使用这两者进行变量声明时，根据最近的一对花括号<code>&#123;&#125;</code>创建。<ul>
<li>可人为创建</li>
</ul>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 全局作用域 start，JavaScript语言环境初始化时就被创建 */</span></span><br><span class="line"><span class="comment">/* 模块作用域 start，作为ES Module解析和执行时被创建 */</span></span><br><span class="line"><span class="keyword">let</span> name = <span class="string">&#x27;Wu&#x27;</span>;</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">  <span class="comment">/* 块级作用域 start，const进行变量声明在最近的花括号&#123;&#125;内创建 */</span></span><br><span class="line">  <span class="keyword">const</span> prefix = <span class="title class_">Hardy</span>;</span><br><span class="line">  name = prefix + name;</span><br><span class="line">  <span class="comment">/* 块级作用域 end */</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">sayMyName</span>(<span class="params">myName</span>) &#123;</span><br><span class="line">  <span class="comment">/* 函数作用域 start，函数声明时自动创建，初始化默认包含函数的形参变量 */</span></span><br><span class="line">  <span class="keyword">if</span> (!myName) &#123;</span><br><span class="line">    <span class="comment">/* 块级作用域 start */</span></span><br><span class="line">    <span class="keyword">const</span> noNameAnswer = <span class="string">&#x27;Sorry!&#x27;</span>;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(noNameAnswer);</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">    <span class="comment">/* 块级作用域 end */</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">const</span> wordPrifix = <span class="string">&#x27;Hi! My Name is &#x27;</span>;</span><br><span class="line">  <span class="keyword">const</span> answer = wordPrifix + myName + <span class="string">&#x27;.&#x27;</span>;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(answer);</span><br><span class="line">  <span class="comment">/* 函数作用域 end */</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 模块作用域 end */</span></span><br><span class="line"><span class="comment">/* 全局作用域 end */</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="作用域的嵌套"><a href="#作用域的嵌套" class="headerlink" title="作用域的嵌套"></a>作用域的嵌套</h3><p>作用域在使用上具有嵌套特征。一个作用域能够在自身内部创建一个新作用域从而形成内部和外部作用域的嵌套关系。</p>
<p>全局作用域作为JavaScript的初始作用域，是所有其他作用域最外层的作用域。另外，每一个ES Module都具有模块自己的顶级作用域（top-level scope），模块中的顶级作用域变量和函数都包含在这个模块顶级作用域中，而模块作用域的外部作用域是全局作用域。而函数作用域和块级作用域则相对比较灵活，可以相互嵌套。</p>
<h3 id="作用域的一些实现细节"><a href="#作用域的一些实现细节" class="headerlink" title="作用域的一些实现细节"></a>作用域的一些实现细节</h3><p>在JavaScript中，每一个函数、代码块<code>&#123;...&#125;</code>以及<code>script</code>脚本被运行前，都会有一个相对应的称为<strong>词法环境（Lexical Environment）</strong> 的内部关联对象被创建。</p>
<p>词法环境由两部分组成：</p>
<ul>
<li><strong>环境记录（Environment Record）</strong>：一个存储所有局部变量作为其属性（包括一些执行上下文信息，例如<code>this</code>的值）的对象。</li>
<li><strong>外部词法环境引用（Outer）</strong>：对外部词法环境的引用，以此关联外部词法环境。</li>
</ul>
<p>代码执行的过程中，每一个局部变量和局部函数的声明，都会作为一个属性字段被添加到环境记录中，后续对变量和函数的读取则通过对应标识符在环境记录中进行查找。	</p>
<p>根据上面的概念，我们可以通过下面的对象结构理解词法环境：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">lexicalEnvironment = &#123;</span><br><span class="line">  <span class="attr">environmentRecord</span>: &#123;</span><br><span class="line">    &lt;identifier&gt;: &lt;value&gt;,</span><br><span class="line">    &lt;identifier&gt;: &lt;value&gt;,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">outer</span>: <span class="language-xml"><span class="tag">&lt;<span class="name">Reference</span> <span class="attr">to</span> <span class="attr">the</span> <span class="attr">parent</span> <span class="attr">lexical</span> <span class="attr">environment</span>&gt;</span>,</span></span><br><span class="line"><span class="language-xml">&#125;</span></span><br><span class="line"><span class="language-xml"></span></span><br></pre></td></tr></table></figure>

<p>再来通过下面的代码例子来理解词法环境：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*  当前模块运行时，模块的词法环境被创建，  </span></span><br><span class="line"><span class="comment">moduleLexicalEnvironment = &#123;    </span></span><br><span class="line"><span class="comment">	environmentRecord: &#123;      </span></span><br><span class="line"><span class="comment">		name: &lt;uninitialized&gt;,      </span></span><br><span class="line"><span class="comment">		sayName: &lt;reference to function object&gt;,    </span></span><br><span class="line"><span class="comment">	&#125;,    </span></span><br><span class="line"><span class="comment">	outer: &lt;globalLexicalEnvironment&gt;,  </span></span><br><span class="line"><span class="comment">	&#125;</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> name = <span class="string">&#x27;Hardy&#x27;</span>;</span><br><span class="line"><span class="comment">/*  变量声明和赋值，修改环境记录的字段属性值，  </span></span><br><span class="line"><span class="comment">moduleLexicalEnvironment = &#123;    </span></span><br><span class="line"><span class="comment">	environmentRecord: &#123;      </span></span><br><span class="line"><span class="comment">        name: &#x27;Hardy&#x27;,      </span></span><br><span class="line"><span class="comment">        sayName: &lt;reference to function object&gt;,    </span></span><br><span class="line"><span class="comment">	&#125;,    </span></span><br><span class="line"><span class="comment">	outer: &lt;globalLexicalEnvironment&gt;,  </span></span><br><span class="line"><span class="comment">    &#125;</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">sayName</span>(<span class="params">myName</span>) &#123;</span><br><span class="line">  <span class="comment">/*    执行函数时，函数的词法环境被创建，    </span></span><br><span class="line"><span class="comment">  functionLexicalEnvironment = &#123;      </span></span><br><span class="line"><span class="comment">  	environmentRecord = &#123;        </span></span><br><span class="line"><span class="comment">  		myName: &#x27;Hardy&#x27;,      </span></span><br><span class="line"><span class="comment">    &#125;,      </span></span><br><span class="line"><span class="comment">    outer: &lt;moduleLexicalEnvironment&gt;,    </span></span><br><span class="line"><span class="comment">    &#125;  </span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">  <span class="comment">/* 通过读取环境记录的对应标识符字段属性值获取myName的变量值 */</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(myName);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">sayName</span>(); <span class="comment">// Hardy</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>我们来分析下上面的代码例子。</p>
<p>根据声明提前的特性，变量<code>name</code>和函数<code>sayName</code>都会在模块的词法环境创建时被添加在环境记录中。但是，由于<code>let</code>的暂时性死区特性，变量<code>name</code>在自身声明和初始化赋值之前处于不可引用和未初始化状态。函数的声明则不同，除了声明提前外还会初始化函数的引用。这就是我们可以在函数执行声明语句前调用函数的原因。另外，函数的词法环境在被创建时，对应函数的参数会被初始化在环境记录中，并且会被赋值上调用函数时的所传值或者函数参数的默认值。</p>
<p>在<code>outer</code>引用方面，模块词法环境<code>moduleLexicalEnvironment</code>的<code>outer</code>引用指向JavaScript最外部的全局词法环境<code>globalLexicalEnvironment</code>，而函数词法环境<code>functionLexicalEnvironment</code>的<code>outer</code>引用指向外部的模块词法环境<code>moduleLexicalEnvironment</code>。</p>
<p>我们可以看出，词法环境是JavaScript对作用域概念的内部技术实现。它是JavaScript引擎创建一个执行上下文时，创建用来存储变量和函数声明的环境。代码执行过程中，通过它访问到存储在其内部的变量和函数。在代码执行完毕后，执行上下文会从堆栈中被销毁回收，而词法环境也会根据情况的被销毁（如果词法环境被其他外部的词法环境所引用，则不会被销毁回收，例如闭包）。</p>
<h3 id="作用域链"><a href="#作用域链" class="headerlink" title="作用域链"></a>作用域链</h3><p>作用域可以嵌套，嵌套在内部的作用域可以访问外部的作用域所声明的变量和函数。通过上面词法环境的介绍，我们大概清楚，作用域的这种嵌套关系是通过词法环境的外部词法环境引用<code>outer</code>来关联实现的。这种词法环境的外部引用的关联关系，构建了一条单向的词法环境的链条。这就是我们常说的作用域链。</p>
<p>本质上，作用域链是JavaScript引擎给所执行代码维护的一条词法环境链条。代码执行中对外部作用域的变量的引用，通过这一条链条进行变量的查找、读取、修改。</p>
<p>代码执行中对某个变量的访问大致如下：</p>
<ul>
<li>当代码要访问一个变量时，首先会搜索当前内部词法环境。如果搜索成功，就返回对一个变量值或变量引用，结束搜索。如果搜索不到，则通过<code>outer</code>引用继续搜索外部词法环境，以此类推，直到全局词法环境。</li>
<li>如果在任何地方都找不到这个变量，那么在严格模式下就会报错。</li>
</ul>
<p>根据上面的概念，我们来看看下面的例子：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> phrase = <span class="string">&#x27;Hello&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">sayHello</span>(<span class="params">name</span>) &#123;</span><br><span class="line">  <span class="comment">/*    函数的作用域链,    functionLexicalEnvironment&#123; name: &#x27;Hardy&#x27; &#125; ==outer==&gt;    moduleLexicalEnvironment&#123; phrase: &#x27;Hello&#x27; &#125; ==outer==&gt;    globalLexicalEnvironment        变量name从当前functionLexicalEnvironment中查找到并获取，    变量phrase沿作用域链查找，从moduleLexicalEnvironment中查找到并获取  */</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`<span class="subst">$&#123;phrase&#125;</span>, <span class="subst">$&#123;name&#125;</span>!`</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">sayHello</span>(<span class="string">&#x27;Hardy&#x27;</span>); <span class="comment">// Hello, Hardy!</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>上面例子中，函数<code>sayHello</code>在内部引用了<code>name</code>和<code>phrase</code>两个变量，函数被调用的执行时会创建<code>functionLexicalEnvironment &gt; moduleLexicalEnvironment &gt; globalLexicalEnvironment</code>的作用域链。</p>
<p>其中，变量<code>name</code>作为函数参数属于当前函数作用域的局部变量，变量可以直接从当前函数的词法环境<code>functionLexicalEnvironment</code>中查找到并返回相关信息。而变量<code>phrase</code>属于外部作用域中声明的变量，存储在外部的模块词法环境<code>moduleLexicalEnvironment</code>中。函数<code>sayHello</code>引用变量<code>phrase</code>，会首先从在自身函数词法环境<code>functionLexicalEnvironment</code>中进行查找，查找不到后，会沿外部词法环境引用<code>outer</code>找到模块词法环境<code>moduleLexicalEnvironment</code>，并从中继续进行变量的查找，查找到了并返回变量的相关信息。</p>
<p>值得注意的是<code>console.log()</code>是全局内置对象<code>console</code>上的方法，对该方法的调用需要引用<code>console</code>。这个变量的引用会沿作用域链一直查找到全局词法环境<code>globalLexicalEnvironment</code>中，从中查找到并返回相关变量信息。</p>
<p>变量标识符解析和引用的过程就是沿作用域链迭代查找变量是否在作用域链节点中并返回变量相关信息的过程。</p>
<h3 id="相关优化"><a href="#相关优化" class="headerlink" title="相关优化"></a>相关优化</h3><p>综合上面的标识符的解析过程和作用域以及作用域链的关系，我们可以了解到，变量标识符解析的性能是和变量标识符所处在作用域链中的位置是息息相关的。变量标识符所出的作用域节点越靠近整个作用域链的前端，则需要沿作用域链迭代查找的次数就越少，变量标识符解析的速度就会越快，性能就越好。</p>
<p>这种标识符解析性能的规律，让我们可以得出以下使用变量的优化点：</p>
<ul>
<li>对于频繁引用的外部作用域的变量，可以根据情况在当前作用域内声明赋值为局部变量后使用。</li>
<li>减少作用域增强<code>with</code>语句的使用。</li>
</ul>
<p>外部作用域变量标识符的多次引用，会造成执行过程中的标识符解析沿作用域链查找的频繁执行，这种查找在第一次解析引用时是必须的，但是后续解析引用却是重复的。将外部作用域变量通过在当前作用域内声明赋值为局部变量，可以优化后续查找的需要经过的作用域链节点个数，得到一定的性能提升。</p>
<p><code>with</code>语句可以在当前作用域链前端临时添加一个词法环境，从而在位置构建和使用新的作用域链。但是这方式问题也很显而易见：作用域链被加长了，除了被添加到前端的词法环境中的存储的变量外，其他变量的标识符解析性能都会变差。因此，我们应该减少<code>with</code>语句的使用。</p>
<h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p>随着JavaScript语言的发展，语言中的作用域的种类也变得丰富起来，不再局限于函数作用域作为最小变量声明范围来使用，而是可以基于更小范围的跨级作用域来管理我们的变量引用范围。变量的管理变得更加的灵活、安全。</p>
<p>作用域链是作用域链嵌套的结构产物，所有变量标识符的解析和引用会沿着作用域链进行查找。而词法环境，是JavaScript对于作用域的内部技术实现。深入了解词法环境后，也让我们更清楚代码在解析变量标识符时的内部执行过程。也根据这个过程，我们大概总结出了两点关于作用域和变量使用的性能优化点。</p>
<p>作用域的使用作为每一位JavaScript开发人员的必修课，了解得深入才能在使用它的时候不再迷茫。它就像空气，存在于JavaScript的许多地方，值得我们去好好了解。</p>
<h2 id="变量生命周期"><a href="#变量生命周期" class="headerlink" title="变量生命周期"></a>变量生命周期</h2><p>定义一个变量到这个变量被回收发生了什么<br>变量和内存之间的关系，是由三个部分组成：变量名、内存绑定和内存地址</p>
<h2 id="上下文"><a href="#上下文" class="headerlink" title="上下文"></a>上下文</h2><p>执行上下文</p>
<ul>
<li>代码执行时，创建上下文</li>
<li>所有代码执行完成后，销毁上下文	</li>
<li>每一个上下文，都有一个相关联的变量对象（VO：Variable Object）</li>
<li>当前上下文中，定义的变量和对象都存储在VO上</li>
</ul>
<p>全局上下文</p>
<ul>
<li><p>GO(Global Object)，浏览器环境下，就是window对象，GO是特殊的VO</p>
</li>
<li><p>var关键字声明变量，存储在GO上（给GO对象添加属性），即</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">window</span>.<span class="property">a</span>) <span class="comment">// undefined</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>function关键字声明函数，存储在GO上</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">window</span>.<span class="property">a</span>)</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">aFunc</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(a)</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">aFunc</span>()	</span><br></pre></td></tr></table></figure>
</li>
<li><p>js代码执行之前，浏览器首先会默认把所有带var和function关键字的变量，进行提前声明或定义(存储在GO上)</p>
</li>
<li><p>关联this到GO(window)</p>
</li>
<li><p>JS线程全局上下文维护着当前一次执行过程（宏任务）中，产生的微任务队列，在宏任务执行完后，会执行所有的微任务，之后GUI渲染线程才会进行渲染</p>
</li>
</ul>
<p>函数上下文</p>
<ul>
<li>见函数底层执行机制 &gt; 函数的执行</li>
</ul>
<h2 id="变量提升，函数提升、浏览器解析变量的机制"><a href="#变量提升，函数提升、浏览器解析变量的机制" class="headerlink" title="变量提升，函数提升、浏览器解析变量的机制"></a>变量提升，函数提升、浏览器解析变量的机制</h2><h2 id="JS预解析"><a href="#JS预解析" class="headerlink" title="JS预解析"></a>JS预解析</h2><p>1.当浏览器加载html页面的时候，浏览器tab页的renderer进程下，开启JS线程，JS线程会先提供一个全局JS代码执行的环境</p>
<ul>
<li>JS线程开启栈空间，栈空间中开辟全局执行上下文（全局上下文开始执行一次宏任务，并维护着微任务队列）</li>
</ul>
<p>2.预解析（变量提升，浏览器的加载机制）</p>
<p>在当前的作用域（上下文）中，js代码执行之前，JS线程首先会默认把所有带var和function关键字的变量，进行提前声明或定义</p>
<ul>
<li><p>对于变量只是进行了变量的提前声明</p>
  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> num = <span class="number">1</span>;</span><br><span class="line"><span class="comment">// 理解声明和定义</span></span><br><span class="line"><span class="comment">// 声明（declare）： var num ==&gt; 告诉浏览器，在全局作用域中有一个num的变量了（在GO上，新增属性num，默认属性值为undefined），声明：对于变量，就是把变量添加到当前上下文的变量对象上</span></span><br><span class="line"><span class="comment">// 定义（defined）：num = 1; ==&gt;给变量赋值（进行值关联），定义：定于变量，就是把当前上下文的变量对象对应的属性，关联值或者内存地址</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// console.log(number) // Uncaught ReferenceError: number is not defined</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(num) <span class="comment">// undefined，这里打断点，会看到全局window对象上，已经有num属性了，值为undefined</span></span><br><span class="line"><span class="keyword">var</span> num = <span class="number">1</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(num) <span class="comment">// 1</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>对于函数是提前声明并且定义（将函数代码以字段串的形式存储起来）</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(fn) <span class="comment">// 打印出函数体，由于函数提升机制，此时GO（window)对象上，已经有fn属性了，值为代码块字符串</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">fn</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;fn&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(fn) <span class="comment">// 打印出函数体（实际打印的就是window.fn，值为代码块字符串）</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>变量和函数重名时</p>
<ul>
<li>提升阶段：变量只是提前声明了，函数是声明并且定义了</li>
<li>执行阶段：变量开始定义赋值，函数不进行赋值</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(afn) <span class="comment">// afn()&#123;console.log(4)&#125;</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">afn</span>(<span class="params"></span>) &#123;</span><br><span class="line">	<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">2</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(afn) <span class="comment">// afn()&#123;console.log(4)&#125;  </span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> afn;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(afn) <span class="comment">// afn()&#123;console.log(4)&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> afn = <span class="number">3</span> </span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(afn) <span class="comment">// 3</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">afn</span>(<span class="params"></span>) &#123;</span><br><span class="line">	<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">4</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(afn) <span class="comment">// 3</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>函数表达式的调用，必须写到函数表达式的下面</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">fun</span>() <span class="comment">// 声明定义函数之前调用， Uncaught TypeError: fun is not a function</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> fun = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">	<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">22</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>相当于</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fun;</span><br><span class="line"><span class="title function_">fun</span>(); <span class="comment">// Uncaught TypeError: fun is not a function</span></span><br><span class="line">fun = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">	<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">22</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>预解析（变量提升和函数提升）只会发生在当前上下文中。</p>
<p>例如：开始只会对全局上下文中的变量和函数进行预解析，因为一开始就创建了全局上下文；只有函数执行的时候，才会创建函数上下文，才会对函数上下文中的变量和函数进行预解析</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">10</span>;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">afn</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(a) <span class="comment">// undefined</span></span><br><span class="line">    <span class="keyword">var</span> a = <span class="number">11</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(a) <span class="comment">// 11</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">afn</span>()</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a) <span class="comment">// 10</span></span><br></pre></td></tr></table></figure>

<p>相当于</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">10</span> <span class="comment">// GO全局对象window上的属性</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">fn</span>(<span class="params"></span>) &#123;</span><br><span class="line">	<span class="keyword">var</span> a; <span class="comment">// 私有上下文对象AO上的属性，属性值为undefined</span></span><br><span class="line">	<span class="variable language_">console</span>.<span class="title function_">log</span>(a) <span class="comment">// undefined</span></span><br><span class="line">	<span class="keyword">var</span> a = <span class="number">11</span></span><br><span class="line">	<span class="variable language_">console</span>.<span class="title function_">log</span>(a) <span class="comment">// 11</span></span><br><span class="line">&#125; <span class="comment">// 出栈后，私有上下文销毁</span></span><br><span class="line"><span class="title function_">fn</span>() <span class="comment">// 进栈</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a) <span class="comment">// 10</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="函数底层执行机制"><a href="#函数底层执行机制" class="headerlink" title="函数底层执行机制"></a>函数底层执行机制</h2><blockquote>
<p> 1.函数的创建</p>
</blockquote>
<p>每一个上下文都有一个相关联的<code>VO</code>，当前上下文中，声明的变量和对象存储在<code>VO</code>上</p>
<p>创建对象时，会在堆内存中开辟一块空间来存储对象的值</p>
<p>函数对象被创建时，存储的键值对有</p>
<ul>
<li><code>this</code></li>
<li><code>prototype</code></li>
</ul>
<p>函数对象除了在堆内存中存储键值对，还会存储两部分东西</p>
<ul>
<li><p>创建函数时的声明作用域<code>[[Scopes]]</code>：</p>
<ul>
<li><p>函数在哪个上下文中创建，其<code>[[Scopes]]</code>就关联谁</p>
<ul>
<li><p>函数定义中使用到了哪个变量或对象，[[Scopes]]就会把该变量或者对象所有的<code>VO</code>添加到<code>[[Scopes]]</code>中，这个机制也是let关键字形成块级作用域的根本原因</p>
</li>
<li><p><code>[[Scopes]]</code>中存储的应该是，实际用到的变量所在的上下文对应的变量对象</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">aFunc</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> a = <span class="number">1</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(a)</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">aFunc</span>()</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">dir</span>(aFunc) <span class="comment">// [[Scopes]]有一个值，指向当前上下文的GO，即window对象</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">bFunc</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> b = <span class="number">1</span>, c =<span class="number">2</span>;</span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">bInnnerFunc</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="comment">// return // [[Scopes]]只有一个值，指向window对象</span></span><br><span class="line">        <span class="keyword">return</span> b <span class="comment">// [[Scopes]][0]为bFunc私有上下文的AO对象，&#123;b: 1&#125;，[[Scopes]][1]指向window对象</span></span><br><span class="line">        <span class="comment">// return b + c // [[Scopes]][0]为bFunc私有上下文的AO对象，&#123;b: 1, c: 2&#125;，[[Scopes]][1]指向window对象</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">dir</span>(bInnnerFunc) <span class="comment">// [[Scopes]]有两个值，[[Scopes]][0]指向bFunc执行上下文的VO对象（更准确点，是bFunc私有上下文的AO对象，见下一部分），这是一个闭包;[[Scopes]][1]指向window</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">bFunc</span>()</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
</li>
<li><p>函数字符串：把函数体中的代码，以字符串的形式存储起来</p>
<ul>
<li><p>如果是循环4个标签，for循环是以var声明的i，按照直观上，每次click的回调函数打印的值应该不一样。事实上都是4，代码首先会循环4次，然后每次都讲i加1，for方法体的函数，仅执行了创建的过程，onclick关联的函数，此时是以字符串的形式保存在堆内存中（保存了4份），并且循环结束时，i的值已经变成了4。当我们点击元素时，onclick关联的回调函数，进栈开始执行，沿着[[Scopes]]作用域链找到GO（window）上的i值为4。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> myBtn = <span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&#x27;.myBtn&#x27;</span>)</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; myBtn.<span class="property">length</span>; i++) &#123;</span><br><span class="line">    myBtn[i].<span class="property">onclick</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(i)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(i)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 将回调函数定义成具名函数，方便查看作用域链（设置断点查看）</span></span><br><span class="line"><span class="keyword">var</span> myBtn = <span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&#x27;.myBtn&#x27;</span>)</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> a = <span class="number">0</span>; a &lt; myBtn.<span class="property">length</span>; a++) &#123; <span class="comment">//定义成a，查看是在window属性的第一个</span></span><br><span class="line">    <span class="keyword">let</span> innerFunc = <span class="keyword">function</span> <span class="title function_">innerFunc</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(a, <span class="variable language_">window</span>.<span class="property">a</span>, a === <span class="variable language_">window</span>.<span class="property">a</span>)</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">dir</span>(innerFunc)</span><br><span class="line">    &#125;</span><br><span class="line">    myBtn[a].<span class="property">onclick</span> = innerFunc <span class="comment">// 不能加括号，否则就直接执行了</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<blockquote>
<p>函数的执行</p>
</blockquote>
<pre><code>    2.1.创建私有上下文
        - 进栈：函数一旦执行，就会创建一个全新的私有上下文（函数上下文）
            - 函数的每次执行，都是重新形成一个私有的上下文，和之前产生的上下文没有必然的联系
            - 函数的代码都是在私有上下文中执行的
        - 函数进栈执行时，会创建一个全新私有变量对象（AO: Active Object）
            - 这里区分开VO，AO是VO的一个分支
            - 在私有上下文中创建的变量和对象，都会存储在AO中，例如形参、变量提升和函数中定义的变量
            - 私有变量对象不能被外部访问，但可以通过return语句返回
    2.2.完成初始化操作
    函数进栈后，正式开始执行前，会进行5步的初始化操作
        - 初始化作用域链([[Scopes]])
            - 根据函数代码中实际使用到的变量，关联变量所在上下文的变量对象，作为作用域链中的每一个值
        - 初始化this
            - this的基本概念
                在js中，this是一个关键字，它会被自动定义在js所有函数的作用域中，《JS高程》在函数一章中指出：定义一个函数会获得this和prototype两个属性，而this很特殊在于this可以用作声明指向某个对象？？
            this在运行时绑定的，并不是在编写时绑定的，她的上下文取决于函数调用时的各种条件。this的绑定和函数声明的位置没有任何关系，只取决于函数的调用方式
            - this到底是什么 
                当一个函数被调用时，会创建一个活动记录（私有上下文）。这个记录会包含函数在哪里被调用（调用栈）、函数的调用方式、传入的参数等信息。this就是这个记录的一个属性，会在函数执行的过程中用到
            - 函数绑定方式
                this的绑定规则和函数的调用方式有着重大联系
                - 普通函数调用
                <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">foo</span> () &#123;</span><br><span class="line">	<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">a</span>)</span><br><span class="line">&#125;</span><br><span class="line">	</span><br><span class="line"><span class="keyword">var</span> a = <span class="number">2</span></span><br><span class="line"><span class="title function_">foo</span>() <span class="comment">// 2，相当于window.foo()</span></span><br></pre></td></tr></table></figure>
                - new方式调用
                <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">					</span><br></pre></td></tr></table></figure>
            - 箭头函数没有这一步
            js采用的是词法作用域（静态作用域），也就是说函数的作用域（可以访问到的变量），在函数定义的时候就确定了
            与之相反的是动态作用域，即函数的作用域在函数调用时才确定
            下面的例子，很好的说明JS是一个静态作用域的语言，如果函数的作用域是在运行时确定的，运行aFoo函数是，从aFoo函数内部没有找到局部变量value后，会从调用函数的作用域，也就是aBar函数内部查找value变量，那么应该会打印2
            JS引擎底层的实现为：函数在定义时，会把其所属环境（全局环境）的变量生成一个变量对象，放入函数的scope属性中。调用函数时，会生成执行环境（上下文）并创建一个作用域链，即先把函数scope属性中的变量对象放到作用域链中，再利用函数参数和内部变量，生成一个活动对象，并放入作用域链的前端。
            <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> aValue = <span class="number">1</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">aFoo</span>(<span class="params"></span>) &#123;</span><br><span class="line">	<span class="variable language_">console</span>.<span class="title function_">log</span>(aValue)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">aBar</span>(<span class="params"></span>) &#123;</span><br><span class="line">	<span class="keyword">var</span> aValue = <span class="number">2</span></span><br><span class="line">	<span class="title function_">aFoo</span>()</span><br><span class="line">&#125;</span><br><span class="line">	</span><br><span class="line"><span class="title function_">aBar</span>() <span class="comment">// 1</span></span><br></pre></td></tr></table></figure>
            this关键字是JS中的动态作用域机制，是为了在JS中加入动态作用域而做的努力，因为this指向的对象实在函数调用时绑定的。
            在任何函数中，this的指向都不是静态的。它总是在你调用一个函数，但尚未执行函数内部代码前被指定。即this的指向与函数被调用的方式（语法）有关
            
            <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> o = &#123;</span><br><span class="line">	<span class="attr">a</span>: <span class="number">10</span>,</span><br><span class="line">	<span class="attr">b</span>: &#123;</span><br><span class="line">		<span class="attr">fn</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">			<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>)</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line">	</span><br><span class="line">o.<span class="property">b</span>.<span class="title function_">fn</span>() <span class="comment">// this指向对象b，&#123;fn: f&#125;</span></span><br><span class="line">	</span><br><span class="line"><span class="keyword">var</span> j = o.<span class="property">b</span>.<span class="property">fn</span></span><br><span class="line"><span class="title function_">j</span>() <span class="comment">// this指向window</span></span><br></pre></td></tr></table></figure>
            可以看到，函数内部的this指向，和其调用方式有关，和函数本身的定义方式无关
            绑定规则
            - 1.构造绑定：通过new关键字调用构造函数。此时会生成一个实例对象，并且this指向这个实例对象。这种方式实际上是new的底层实现修改了this指向
            <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> savedThis;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Constr</span>(<span class="params"></span>) &#123;</span><br><span class="line">	savedThis = <span class="variable language_">this</span>;</span><br><span class="line">&#125;</span><br><span class="line">	</span><br><span class="line"><span class="keyword">var</span> inst = <span class="keyword">new</span> <span class="title class_">Constr</span>()</span><br><span class="line">	</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(savedThis === inst) <span class="comment">// true</span></span><br></pre></td></tr></table></figure>
            2.显示绑定：apply()、call()、bind()三个方法改变函数的调用对象（this对象）
            3.隐式绑定：某个上下文对象中调用函数。比如使用obj.foo()这样的语法来调用函数，函数foo中的this绑定到obj对象
            <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> o = &#123;</span><br><span class="line">	<span class="attr">a</span>: <span class="number">10</span>,</span><br><span class="line">	<span class="attr">b</span>: &#123;</span><br><span class="line">		<span class="attr">fn</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">			<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">a</span>) <span class="comment">// undefined，this指向b对象</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line">	</span><br><span class="line">o.<span class="property">b</span>.<span class="title function_">fn</span>()</span><br><span class="line">	</span><br><span class="line"><span class="comment">// 事件处理函数</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">doPrint</span>(<span class="params"></span>) &#123;</span><br><span class="line">	<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">doPrint</span>() <span class="comment">// 全局对象 window</span></span><br><span class="line"><span class="keyword">var</span> myBtn = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.myBtn&#x27;</span>)</span><br><span class="line">myBtn.<span class="property">onclick</span> = doPrint</span><br><span class="line">myBtn.<span class="title function_">onclick</span>() <span class="comment">// 元素对象button</span></span><br></pre></td></tr></table></figure>
            4.默认绑定：不符合上述三种情况，在一个函数中使用了this，但是没有为this绑定对象。这种情况下，严格模式this绑定到undefined，非严格模式下this绑定到全局对象（GO）（Node环境中的global，浏览器环境的window）
            <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> o = &#123;</span><br><span class="line">	<span class="attr">a</span>: <span class="number">10</span>,</span><br><span class="line">	<span class="attr">b</span>: &#123;</span><br><span class="line">		<span class="attr">fn</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">			<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">a</span>) <span class="comment">// undefined</span></span><br><span class="line">			<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>) <span class="comment">// window</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line">	</span><br><span class="line"><span class="keyword">var</span> j = o.<span class="property">b</span>.<span class="property">fn</span></span><br><span class="line"><span class="title function_">j</span>() <span class="comment">// window</span></span><br></pre></td></tr></table></figure>
            对于3、4两点，可以用一个简单的规则去判断：当一个函数被调用时，应该立马看()左边的部分
                - 如果()左边是一个引用，那么函数的this指向这个引用所属的对象（隐式绑定）
                - 否则this指向的就是全局对象或者undefined（默认绑定）
                - 上面的代码中，fn是一个引用，属于b这个对象，所以this指向b；j不是引用，所以this指向window
        - 初始化arguments？？
            - 箭头函数没有这一步
        - 形参赋值
        - 变量提升：var关键字声明的变量会提前声明，function关键字声明的函数会提前
3.代码执行
    将堆内存中存储的代码字符串，从上往下顺序执行
    - 变量按作用域链查找
4.出栈释放或保留
    - 正常情况下，代码执行完成后，私有上下文出栈被回收
    - 特殊情况
        - 如果当前私有上下文执行完成之后的某个东西（变量或对象），被执行上下文以外的东西占用，则当前私有上下文就不会出栈释放，也就是形成了不被销毁的上下文（闭包）
    - 还有一种情况：上下文没被占用，但是要紧接着被用一次，这样没有用完之前是不能释放的，用完再释放。这样就形成了一个临时不被释放的上下文
    - 函数每次执行都是重新形成给全新的私有上下文，正常情况下，函数执行完就会出栈私有上下文被释放，但是如果不能被释放（闭包），就会一直被保存在内存中，当到达栈内存的极限时就会出现栈内存溢出
</code></pre>
<p>理清上述概念的先后顺序</p>
<h2 id="let、const和块级作用域"><a href="#let、const和块级作用域" class="headerlink" title="let、const和块级作用域"></a>let、const和块级作用域</h2><p>块级作用域<br>    - JS中没有块级作用域</p>
<p>let定义变量</p>
<ul>
<li><p>let关键字定义的变量，在代码执行时，会在栈内存再形成一个块级上下文，这个块级上下文也有一个与之关联的VO对象，当代码执行到函数定义时，由于用到了变量a，就会把变量对象{a: 0}，添加到innerFunc的[[Scopes]]</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> amyBtn = <span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&#x27;.myBtn&#x27;</span>)</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> a = <span class="number">0</span>; a &lt; amyBtn.<span class="property">length</span>; a++) &#123;</span><br><span class="line">	<span class="keyword">let</span> innerFunc = <span class="keyword">function</span> <span class="title function_">innerFunc</span>(<span class="params"></span>) &#123;</span><br><span class="line">		<span class="variable language_">console</span>.<span class="title function_">dir</span>(innerFunc)</span><br><span class="line">		<span class="variable language_">console</span>.<span class="title function_">log</span>(a)</span><br><span class="line">	&#125;</span><br><span class="line">	amyBtn[a].<span class="property">onclick</span> = innerFunc <span class="comment">// 不能加括号，否则就直接执行了</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>let关键字声明的变量，在谷歌浏览器断点调试的作用域中，被称为“代码块”<br>const定义常量<br>const关键字声明的变量，在谷歌浏览器断点调试的作用域中，被称为“脚本”<br>const关键字声明的变量，绑定了第一次定义的值的内存地址与该变量的关联关系，当尝试绑定其他内存地址时无法生效<br>对于由若干内存片段组成的非连续内存数据（对象、数组），只有第一处是有变量与内存的强绑定关系，对象内部属性值仍然可以修改<br>Object.freeze()</li>
</ul>
</li>
</ul>
<p>箭头函数</p>
<h2 id="堆栈内存及函数底层处理机制"><a href="#堆栈内存及函数底层处理机制" class="headerlink" title="堆栈内存及函数底层处理机制"></a>堆栈内存及函数底层处理机制</h2><p>链接：<a target="_blank" rel="noopener" href="https://www.jianshu.com/p/edb2be5866eb">https://www.jianshu.com/p/edb2be5866eb</a></p>
<h1 id="JS运行机制"><a href="#JS运行机制" class="headerlink" title="JS运行机制"></a>JS运行机制</h1><p>链接：<a target="_blank" rel="noopener" href="https://juejin.cn/post/6844904050543034376">https://juejin.cn/post/6844904050543034376</a></p>
<p>本文大致分为以下这样的步骤来帮助我们由广入深更加清晰的了解JS运行机制</p>
<ul>
<li>首先我们要了解进程和线程的概念</li>
<li>其次我们要知道浏览器的进程线程常识</li>
<li>再然后通过Event Loop、宏任务(macrotask)微任务(microtask)来看浏览器的几个线程间是怎样配合的</li>
<li>再然后通过例子来印证我们的猜想</li>
<li>最后提下NodeJS的运行机制</li>
</ul>
<h2 id="进程与线程"><a href="#进程与线程" class="headerlink" title="进程与线程"></a>进程与线程</h2><h3 id="什么是进程"><a href="#什么是进程" class="headerlink" title="什么是进程"></a>什么是进程</h3><p>我们都知道，<code>CPU</code>是计算机的核心，承担所有的计算任务</p>
<p>官网说法，<code>进程</code>是<code>CPU</code>资源分配的最小单位</p>
<p>字面意思就是进行中的程序，我将它理解为一个可以独立运行且拥有自己的资源空间的任务程序</p>
<p><code>进程</code>包括运行中的程序和程序所使用到的内存和系统资源</p>
<p><code>CPU</code>可以有很多进程，我们的电脑每打开一个软件就会产生一个或多个<code>进程</code>，为什么电脑运行的软件多就会卡，是因为<code>CPU</code>给每个<code>进程</code>分配资源空间，但是一个<code>CPU</code>一共就那么多资源，分出去越多，越卡，每个<code>进程</code>之间是相互独立的，<code>CPU</code>在运行一个<code>进程</code>时，其他的进程处于非运行状态，<code>CPU</code>使用 <a href="https://link.juejin.cn/?target=">时间片轮转调度算法</a> 来实现同时运行多个<code>进程</code></p>
<h3 id="什么是线程"><a href="#什么是线程" class="headerlink" title="什么是线程"></a>什么是线程</h3><p><code>线程</code>是<code>CPU</code>调度的最小单位</p>
<p><code>线程</code>是建立在<code>进程</code>的基础上的一次程序运行单位，通俗点解释<code>线程</code>就是程序中的一个执行流，一个<code>进程</code>可以有多个<code>线程</code></p>
<p>一个<code>进程</code>中只有一个执行流称作<code>单线程</code>，即程序执行时，所走的程序路径按照连续顺序排下来，前面的必须处理好，后面的才会执行</p>
<p>一个<code>进程</code>中有多个执行流称作<code>多线程</code>，即在一个程序中可以同时运行多个不同的<code>线程</code>来执行不同的任务， 也就是说允许单个程序创建多个并行执行的<code>线程</code>来完成各自的任务</p>
<h3 id="进程和线程的区别"><a href="#进程和线程的区别" class="headerlink" title="进程和线程的区别"></a>进程和线程的区别</h3><p>进程是操作系统分配资源的最小单位，线程是程序执行的最小单位</p>
<p>一个进程由一个或多个线程组成，线程可以理解为是一个进程中代码的不同执行路线</p>
<p>进程之间相互独立，但同一进程下的各个线程间共享程序的内存空间(包括代码段、数据集、堆等)及一些进程级的资源(如打开文件和信号)</p>
<p>调度和切换：线程上下文切换比进程上下文切换要快得多</p>
<h3 id="多进程和多线程"><a href="#多进程和多线程" class="headerlink" title="多进程和多线程"></a>多进程和多线程</h3><p>多进程：多进程指的是在同一个时间里，同一个计算机系统中如果允许两个或两个以上的进程处于运行状态。多进程带来的好处是明显的，比如大家可以在网易云听歌的同时打开编辑器敲代码，编辑器和网易云的进程之间不会相互干扰</p>
<p>多线程：多线程是指程序中包含多个执行流，即在一个程序中可以同时运行多个不同的线程来执行不同的任务，也就是说允许单个程序创建多个并行执行的线程来完成各自的任务</p>
<h2 id="JS为什么是单线程"><a href="#JS为什么是单线程" class="headerlink" title="JS为什么是单线程"></a>JS为什么是单线程</h2><p>JS的单线程，与它的用途有关。作为浏览器脚本语言，JavaScript的主要用途是与用户互动，以及操作DOM。这决定了它只能是单线程，否则会带来很复杂的同步问题。比如，假定JavaScript同时有两个线程，一个线程在某个DOM节点上添加内容，另一个线程删除了这个节点，这时浏览器应该以哪个线程为准？</p>
<p>还有人说js还有Worker线程，对的，为了利用多核CPU的计算能力，HTML5提出Web Worker标准，允许JavaScript脚本创建多个线程，但是子线程是完 全受主线程控制的，而且不得操作DOM</p>
<p>所以，这个标准并没有改变JavaScript是单线程的本质</p>
<p>了解了进程和线程之后，接下来看看浏览器解析，浏览器之间也是有些许差距的，不过大致是差不多的，下文我们皆用市场占有比例最大的Chrome为例</p>
<h2 id="浏览器"><a href="#浏览器" class="headerlink" title="浏览器"></a>浏览器</h2><h3 id="浏览器是多进程的"><a href="#浏览器是多进程的" class="headerlink" title="浏览器是多进程的"></a>浏览器是多进程的</h3><p>作为前端，免不了和浏览器打交道，浏览器是多进程的，拿Chrome来说，我们每打开一个Tab页就会产生一个进程，我们使用Chrome打开很多标签页不关，电脑会越来越卡，不说其他，首先就很耗CPU</p>
<h3 id="浏览器包含哪些进程"><a href="#浏览器包含哪些进程" class="headerlink" title="浏览器包含哪些进程"></a>浏览器包含哪些进程</h3><ul>
<li>Browser进程<ul>
<li>浏览器的主进程(负责协调、主控)，该进程只有一个</li>
<li>负责浏览器界面显示，与用户交互。如前进，后退等</li>
<li>负责各个页面的管理，创建和销毁其他进程</li>
<li>将渲染(Renderer)进程得到的内存中的Bitmap(位图)，绘制到用户界面上</li>
<li>网络资源的管理，下载等</li>
</ul>
</li>
<li>第三方插件进程<ul>
<li>每种类型的插件对应一个进程，当使用该插件时才创建</li>
</ul>
</li>
<li>GPU进程<ul>
<li>该进程也只有一个，用于3D绘制等等</li>
</ul>
</li>
<li>渲染进程(重)<ul>
<li>即通常所说的浏览器内核(Renderer进程，内部是多线程)</li>
<li>每个Tab页面都有一个渲染进程，互不影响</li>
<li>主要作用为页面渲染，脚本执行，事件处理等</li>
</ul>
</li>
</ul>
<h3 id="为什么浏览器要多进程"><a href="#为什么浏览器要多进程" class="headerlink" title="为什么浏览器要多进程"></a>为什么浏览器要多进程</h3><p>我们假设浏览器是单进程，那么某个Tab页崩溃了，就影响了整个浏览器，体验有多差</p>
<p>同理如果插件崩溃了也会影响整个浏览器</p>
<p>当然多进程还有其它的诸多优势，不过多阐述</p>
<p>浏览器进程有很多，每个进程又有很多线程，都会占用内存</p>
<p>这也意味着内存等资源消耗会很大，有点拿空间换时间的意思</p>
<p>到此可不只是为了让我们理解为何Chrome运行时间长了电脑会卡，哈哈，第一个重点来了</p>
<h3 id="简述渲染进程Renderer-重"><a href="#简述渲染进程Renderer-重" class="headerlink" title="简述渲染进程Renderer(重)"></a>简述渲染进程Renderer(重)</h3><p>页面的渲染，JS的执行，事件的循环，都在渲染进程内执行，所以我们要重点了解渲染进程</p>
<p>渲染进程是多线程的，我们来看渲染进程的一些常用较为主要的线程</p>
<h3 id="渲染进程Renderer的主要线程"><a href="#渲染进程Renderer的主要线程" class="headerlink" title="渲染进程Renderer的主要线程"></a>渲染进程Renderer的主要线程</h3><h4 id="GUI渲染线程"><a href="#GUI渲染线程" class="headerlink" title="GUI渲染线程"></a>GUI渲染线程</h4><ul>
<li>负责渲染浏览器界面，解析HTML，CSS，构建DOM树和RenderObject树，布局和绘制等<ul>
<li>解析html代码(HTML代码本质是字符串)转化为浏览器认识的节点，生成DOM树，也就是DOM Tree</li>
<li>解析css，生成CSSOM(CSS规则树)</li>
<li>把DOM Tree 和CSSOM结合，生成Rendering Tree(渲染树)</li>
</ul>
</li>
<li>当我们修改了一些元素的颜色或者背景色，页面就会重绘(Repaint)</li>
<li>当我们修改元素的尺寸，页面就会回流(Reflow)</li>
<li>当页面需要Repaing和Reflow时GUI线程执行，绘制页面</li>
<li>回流(Reflow)比重绘(Repaint)的成本要高，我们要尽量避免Reflow和Repaint</li>
<li>GUI渲染线程与JS引擎线程是互斥的<ul>
<li>当JS引擎执行时GUI线程会被挂起(相当于被冻结了)</li>
<li>GUI更新会被保存在一个队列中等到JS引擎空闲时立即被执行</li>
</ul>
</li>
</ul>
<h4 id="JS引擎线程"><a href="#JS引擎线程" class="headerlink" title="JS引擎线程"></a>JS引擎线程</h4><ul>
<li>JS引擎线程就是JS内核，负责处理Javascript脚本程序(例如V8引擎)</li>
<li>JS引擎线程负责解析Javascript脚本，运行代码</li>
<li>JS引擎一直等待着任务队列中任务的到来，然后加以处理<ul>
<li>浏览器同时只能有一个JS引擎线程在运行JS程序，所以js是单线程运行的</li>
<li>一个Tab页(renderer进程)中无论什么时候都只有一个JS线程在运行JS程序</li>
</ul>
</li>
<li>GUI渲染线程与JS引擎线程是互斥的，js引擎线程会阻塞GUI渲染线程<ul>
<li>就是我们常遇到的JS执行时间过长，造成页面的渲染不连贯，导致页面渲染加载阻塞(就是加载慢)</li>
<li>例如浏览器渲染的时候遇到<code>&lt;script&gt;</code>标签，就会停止GUI的渲染，然后js引擎线程开始工作，执行里面的js代码，等js执行完毕，js引擎线程停止工作，GUI继续渲染下面的内容。所以如果js执行时间太长就会造成页面卡顿的情况</li>
</ul>
</li>
</ul>
<h4 id="事件触发线程"><a href="#事件触发线程" class="headerlink" title="事件触发线程"></a>事件触发线程</h4><ul>
<li>属于浏览器而不是JS引擎，用来控制事件循环，并且管理着一个事件队列(task queue)</li>
<li>当js执行碰到事件绑定和一些异步操作(如setTimeOut，也可来自浏览器内核的其他线程，如鼠标点击、AJAX异步请求等)，会走事件触发线程将对应的事件添加到对应的线程中(比如定时器操作，便把定时器事件添加到定时器线程)，等异步事件有了结果，便把他们的回调操作添加到事件队列，等待js引擎线程空闲时来处理。</li>
<li>当对应的事件符合触发条件被触发时，该线程会把事件添加到待处理队列的队尾，等待JS引擎的处理</li>
<li>因为JS是单线程，所以这些待处理队列中的事件都得排队等待JS引擎处理</li>
</ul>
<h4 id="定时触发器线程"><a href="#定时触发器线程" class="headerlink" title="定时触发器线程"></a>定时触发器线程</h4><ul>
<li><code>setInterval</code>与<code>setTimeout</code>所在线程</li>
<li>浏览器定时计数器并不是由JavaScript引擎计数的(因为JavaScript引擎是单线程的，如果处于阻塞线程状态就会影响记计时的准确)</li>
<li>通过单独线程来计时并触发定时(计时完毕后，添加到事件触发线程的事件队列中，等待JS引擎空闲后执行)，这个线程就是定时触发器线程，也叫定时器线程</li>
<li>W3C在HTML标准中规定，规定要求<code>setTimeout</code>中低于4ms的时间间隔算为4ms</li>
</ul>
<h4 id="异步http请求线程"><a href="#异步http请求线程" class="headerlink" title="异步http请求线程"></a>异步http请求线程</h4><ul>
<li>在XMLHttpRequest在连接后是通过浏览器新开一个线程请求</li>
<li>将检测到状态变更时，如果设置有回调函数，异步线程就产生状态变更事件，将这个回调再放入事件队列中再由JavaScript引擎执行</li>
<li>简单说就是当执行到一个http异步请求时，就把异步请求事件添加到异步请求线程，等收到响应(准确来说应该是http状态变化)，再把回调函数添加到事件队列，等待js引擎线程来执行</li>
</ul>
<p>了解了上面这些基础后，接下来我们开始进入今天的正题</p>
<h2 id="事件循环-Event-Loop-初探"><a href="#事件循环-Event-Loop-初探" class="headerlink" title="事件循环(Event Loop)初探"></a>事件循环(Event Loop)初探</h2><p>首先要知道，JS分为同步任务和异步任务</p>
<p>同步任务都在主线程(这里的主线程就是JS引擎线程)上执行，会形成一个<code>执行栈</code></p>
<p>主线程之外，事件触发线程管理着一个<code>任务队列</code>，只要异步任务有了运行结果，就在<code>任务队列</code>之中放一个事件回调</p>
<p>一旦<code>执行栈</code>中的所有同步任务执行完毕(也就是JS引擎线程空闲了)，系统就会读取<code>任务队列</code>，将可运行的异步任务(任务队列中的事件回调，只要任务队列中有事件回调，就说明可以执行)添加到执行栈中，开始执行</p>
<p>我们来看一段简单的代码</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> setTimeoutCallBack = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;我是定时器回调&#x27;</span>);</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">let</span> httpCallback = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;我是http请求回调&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 同步任务</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;我是同步任务1&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 异步定时任务</span></span><br><span class="line"><span class="built_in">setTimeout</span>(setTimeoutCallBack,<span class="number">1000</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 异步http请求任务</span></span><br><span class="line">ajax.<span class="title function_">get</span>(<span class="string">&#x27;/info&#x27;</span>,httpCallback);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 同步任务</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;我是同步任务2&#x27;</span>);</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<p>上述代码执行过程</p>
<p>JS是按照顺序从上往下依次执行的，可以先理解为这段代码时的执行环境就是主线程，也就是也就是当前执行栈</p>
<p>首先，执行<code>console.log(&#39;我是同步任务1&#39;)</code></p>
<p>接着，执行到<code>setTimeout</code>时，会移交给<code>定时器线程</code>，通知<code>定时器线程</code> 1s 后将 <code>setTimeoutCallBack</code> 这个回调交给<code>事件触发线程</code>处理，在 1s 后<code>事件触发线程</code>会收到 <code>setTimeoutCallBack</code> 这个回调并把它加入到<code>事件触发线程</code>所管理的事件队列中等待执行</p>
<p>接着，执行http请求，会移交给<code>异步http请求线程</code>发送网络请求，请求成功后将 <code>httpCallback</code> 这个回调交由事件触发线程处理，<code>事件触发线程</code>收到 <code>httpCallback</code> 这个回调后把它加入到<code>事件触发线程</code>所管理的事件队列中等待执行</p>
<p>再接着执行<code>console.log(&#39;我是同步任务2&#39;)</code></p>
<p>至此主线程执行栈中执行完毕，<code>JS引擎线程</code>已经空闲，开始向<code>事件触发线程</code>发起询问，询问<code>事件触发线程</code>的事件队列中是否有需要执行的回调函数，如果有将事件队列中的回调事件加入执行栈中，开始执行回调，如果事件队列中没有回调，<code>JS引擎线程</code>会一直发起询问，直到有为止</p>
<p>到了这里我们发现，浏览器上的所有线程的工作都很单一且独立，非常符合单一原则</p>
<p>定时触发线程只管理定时器且只关注定时不关心结果，定时结束就把回调扔给事件触发线程</p>
<p>异步http请求线程只管理http请求同样不关心结果，请求结束把回调扔给事件触发线程</p>
<p>事件触发线程只关心异步回调入事件队列</p>
<p>而我们JS引擎线程只会执行执行栈中的事件，执行栈中的代码执行完毕，就会读取事件队列中的事件并添加到执行栈中继续执行，这样反反复复就是我们所谓的<strong>事件循环(Event Loop)</strong></p>
<p><img src="/2022/09/16/web/JavaScript/js%E4%BB%8E%E5%9F%BA%E7%A1%80%E5%88%B0%E8%BF%9B%E9%98%B6/16fb7acab03b35fatplv-t2oaga2asx-zoom-in-crop-mark4536000.awebp" alt="img"></p>
<p>首先，执行栈开始顺序执行</p>
<p>判断是否为同步，异步则进入异步线程，最终事件回调给事件触发线程的任务队列等待执行，同步继续执行</p>
<p>执行栈空，询问任务队列中是否有事件回调</p>
<p>任务队列中有事件回调则把回调加入执行栈末尾继续从第一步开始执行</p>
<p>任务队列中没有事件回调则不停发起询问</p>
<h2 id="宏任务-macrotask-amp-微任务-microtask"><a href="#宏任务-macrotask-amp-微任务-microtask" class="headerlink" title="宏任务(macrotask) &amp; 微任务(microtask)"></a>宏任务(macrotask) &amp; 微任务(microtask)</h2><h3 id="宏任务-macrotask"><a href="#宏任务-macrotask" class="headerlink" title="宏任务(macrotask)"></a>宏任务(macrotask)</h3><p>在ECMAScript中，<code>macrotask</code>也被称为<code>task</code></p>
<p>我们可以将每次执行栈执行的代码当做是一个宏任务(包括每次从事件队列中获取一个事件回调并放到执行栈中执行)， 每一个宏任务会从头到尾执行完毕，不会执行其他</p>
<p>由于<code>JS引擎线程</code>和<code>GUI渲染线程</code>是互斥的关系，浏览器为了能够使<code>宏任务</code>和<code>DOM任务</code>有序的进行，会在一个<code>宏任务</code>执行结果后，在下一个<code>宏任务</code>执行前，<code>GUI渲染线程</code>开始工作，对页面进行渲染</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">宏任务 -&gt; GUI渲染 -&gt; 宏任务 -&gt; ...</span><br></pre></td></tr></table></figure>

<p>常见的宏任务</p>
<ul>
<li>主代码块</li>
<li>setTimeout</li>
<li>setInterval</li>
<li>setImmediate ()-Node</li>
<li>requestAnimationFrame ()-浏览器</li>
</ul>
<h3 id="微任务-microtask"><a href="#微任务-microtask" class="headerlink" title="微任务(microtask)"></a>微任务(microtask)</h3><p>ES6新引入了Promise标准，同时浏览器实现上多了一个<code>microtask</code>微任务概念，在ECMAScript中，<code>microtask</code>也被称为<code>jobs</code></p>
<p>我们已经知道<code>宏任务</code>结束后，会执行渲染，然后执行下一个<code>宏任务</code>， 而微任务可以理解成在当前<code>宏任务</code>执行后立即执行的任务</p>
<p>当一个<code>宏任务</code>执行完，会在渲染前，将执行期间所产生的所有<code>微任务</code>都执行完</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">宏任务 -&gt; 微任务 -&gt; GUI渲染 -&gt; 宏任务 -&gt; ...</span><br></pre></td></tr></table></figure>

<p>常见微任务</p>
<ul>
<li>process.nextTick ()-Node</li>
<li>Promise.then()</li>
<li>catch</li>
<li>finally</li>
<li>Object.observe</li>
<li>MutationObserver</li>
</ul>
<h3 id="简单区分宏任务与微任务"><a href="#简单区分宏任务与微任务" class="headerlink" title="简单区分宏任务与微任务"></a>简单区分宏任务与微任务</h3><p>看了上述宏任务微任务的解释你可能还不太清楚，没关系，往下看，先记住那些常见的宏微任务即可</p>
<p>我们通过几个例子来看，这几个例子思路来自掘金<code>云中君</code>的文章参考链接【14】，通过渲染背景颜色来区分宏任务和微任务，很直观，我觉得很有意思，所以这里也用这种例子</p>
<p>找一个空白的页面，在console中输入以下代码</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">style</span> = <span class="string">&#x27;background:black&#x27;</span>;</span><br><span class="line"><span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">style</span> = <span class="string">&#x27;background:red&#x27;</span>;</span><br><span class="line"><span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">style</span> = <span class="string">&#x27;background:blue&#x27;</span>;</span><br><span class="line"><span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">style</span> = <span class="string">&#x27;background:pink&#x27;</span>;</span><br></pre></td></tr></table></figure>

<p><img src="/2022/09/16/web/JavaScript/js%E4%BB%8E%E5%9F%BA%E7%A1%80%E5%88%B0%E8%BF%9B%E9%98%B6/16fb7c7576f1e3b1tplv-t2oaga2asx-zoom-in-crop-mark4536000.awebp" alt="img"></p>
<p>我们看到上面动图背景直接渲染了粉红色，根据上文里讲浏览器会先执行完一个宏任务，再执行当前执行栈的所有微任务，然后移交GUI渲染，上面四行代码均属于同一次宏任务，全部执行完才会执行渲染，渲染时<code>GUI线程</code>会将所有UI改动优化合并，所以视觉上，只会看到页面变成粉红色</p>
<p>再接着看</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">style</span> = <span class="string">&#x27;background:blue&#x27;</span>;</span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">style</span> = <span class="string">&#x27;background:black&#x27;</span></span><br><span class="line">&#125;,<span class="number">200</span>)</span><br></pre></td></tr></table></figure>

<p><img src="/2022/09/16/web/JavaScript/js%E4%BB%8E%E5%9F%BA%E7%A1%80%E5%88%B0%E8%BF%9B%E9%98%B6/16fb7c81efff6db0tplv-t2oaga2asx-zoom-in-crop-mark4536000.awebp" alt="img"></p>
<p>上述代码中，页面会先卡一下蓝色，再变成黑色背景，页面上写的是200毫秒，大家可以把它当成0毫秒，因为0毫秒的话由于浏览器渲染太快，录屏不好捕捉，我又没啥录屏慢放的工具，大家可以自行测试的，结果也是一样，最安全的方法是写一个<code>index.html</code>文件，在这个文件中插入上面的js脚本，然后浏览器打开，谷歌下使用控制台中<code>performance</code>功能查看一帧一帧的加载最为恰当，不过这样录屏不好录所以。。。</p>
<p>回归正题，之所以会卡一下蓝色，是因为以上代码属于两次<code>宏任务</code>，第一次<code>宏任务</code>执行的代码是将背景变成蓝色，然后触发渲染，将页面变成蓝色，再触发第二次宏任务将背景变成黑色</p>
<p>再来看</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">style</span> = <span class="string">&#x27;background:blue&#x27;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">1</span>);</span><br><span class="line"><span class="title class_">Promise</span>.<span class="title function_">resolve</span>().<span class="title function_">then</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">2</span>);</span><br><span class="line">    <span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">style</span> = <span class="string">&#x27;background:pink&#x27;</span></span><br><span class="line">&#125;);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">3</span>);</span><br></pre></td></tr></table></figure>

<p><img src="/2022/09/16/web/JavaScript/js%E4%BB%8E%E5%9F%BA%E7%A1%80%E5%88%B0%E8%BF%9B%E9%98%B6/16fb7c909570edd9tplv-t2oaga2asx-zoom-in-crop-mark4536000.awebp" alt="img"></p>
<p>控制台输出 1 3 2 , 是因为 promise 对象的 then 方法的回调函数是异步执行，所以 2 最后输出</p>
<p>页面的背景色直接变成粉色，没有经过蓝色的阶段，是因为，我们在宏任务中将背景设置为蓝色，但在进行渲染前执行了微任务， 在微任务中将背景变成了粉色，然后才执行的渲染</p>
<h3 id="微任务宏任务注意点"><a href="#微任务宏任务注意点" class="headerlink" title="微任务宏任务注意点"></a>微任务宏任务注意点</h3><ul>
<li>浏览器会先执行一个宏任务，紧接着执行当前执行栈产生的微任务，再进行渲染，然后再执行下一个宏任务</li>
<li>微任务和宏任务不在一个任务队列，不在一个任务队列<ul>
<li>例如<code>setTimeout</code>是一个宏任务，它的事件回调在宏任务队列，<code>Promise.then()</code>是一个微任务，它的事件回调在微任务队列，二者并不是一个任务队列</li>
<li>以Chrome 为例，有关渲染的都是在渲染进程中执行，渲染进程中的任务（DOM树构建，js解析…等等）需要主线程执行的任务都会在主线程中执行，而浏览器维护了一套事件循环机制，主线程上的任务都会放到消息队列中执行，主线程会循环消息队列，并从头部取出任务进行执行，如果执行过程中产生其他任务需要主线程执行的，渲染进程中的其他线程会把该任务塞入到消息队列的尾部，消息队列中的任务都是宏任务</li>
<li>微任务是如何产生的呢？当执行到script脚本的时候，js引擎会为全局创建一个执行上下文，在该执行上下文中维护了一个微任务队列，当遇到微任务，就会把微任务回调放在微队列中，当所有的js代码执行完毕，在退出全局上下文之前引擎会去检查该队列，有回调就执行，没有就退出执行上下文，这也就是为什么微任务要早于宏任务，也是大家常说的，每个宏任务都有一个微任务队列（由于定时器是浏览器的API，所以定时器是宏任务，在js中遇到定时器会也是放入到浏览器的队列中）</li>
</ul>
</li>
</ul>
<p>此时，你可能还很迷惑，没关系，请接着往下看</p>
<h3 id="图解宏任务和微任务"><a href="#图解宏任务和微任务" class="headerlink" title="图解宏任务和微任务"></a>图解宏任务和微任务</h3><p><img src="/2022/09/16/web/JavaScript/js%E4%BB%8E%E5%9F%BA%E7%A1%80%E5%88%B0%E8%BF%9B%E9%98%B6/16fb7adf5afc036dtplv-t2oaga2asx-zoom-in-crop-mark4536000.awebp" alt="img"></p>
<p>首先执行一个宏任务，执行结束后判断是否存在微任务</p>
<p>有微任务先执行所有的微任务，再渲染，没有微任务则直接渲染</p>
<p>然后再接着执行下一个宏任务</p>
<h2 id="图解完整的Event-Loop"><a href="#图解完整的Event-Loop" class="headerlink" title="图解完整的Event Loop"></a>图解完整的Event Loop</h2><p><img src="/2022/09/16/web/JavaScript/js%E4%BB%8E%E5%9F%BA%E7%A1%80%E5%88%B0%E8%BF%9B%E9%98%B6/16fb7ae3b678f1eatplv-t2oaga2asx-zoom-in-crop-mark4536000.awebp" alt="img"></p>
<p>首先，整体的script(作为第一个宏任务)开始执行的时候，会把所有代码分为<code>同步任务</code>、<code>异步任务</code>两部分</p>
<p>同步任务会直接进入主线程依次执行</p>
<p>异步任务会再分为宏任务和微任务</p>
<p>宏任务进入到Event Table中，并在里面注册回调函数，每当指定的事件完成时，Event Table会将这个函数移到Event Queue中</p>
<p>微任务也会进入到另一个Event Table中，并在里面注册回调函数，每当指定的事件完成时，Event Table会将这个函数移到Event Queue中</p>
<p>当主线程内的任务执行完毕，主线程为空时，会检查微任务的Event Queue，如果有任务，就全部执行，如果没有就执行下一个宏任务</p>
<p>上述过程会不断重复，这就是Event Loop，比较完整的事件循环</p>
<h2 id="关于Promise"><a href="#关于Promise" class="headerlink" title="关于Promise"></a>关于Promise</h2><p><code>new Promise(() =&gt; &#123;&#125;).then()</code> ，我们来看这样一个Promise代码</p>
<p>前面的 <code>new Promise()</code> 这一部分是一个构造函数，这是一个同步任务</p>
<p>后面的 <code>.then()</code> 才是一个异步微任务，这一点是非常重要的</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve</span>) =&gt;</span> &#123;</span><br><span class="line">	<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">1</span>)</span><br><span class="line">  <span class="title function_">resolve</span>()</span><br><span class="line">&#125;).<span class="title function_">then</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">	<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">2</span>)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">3</span>)</span><br></pre></td></tr></table></figure>

<p>上面代码输出<code>1 3 2</code></p>
<h2 id="关于-async-x2F-await-函数"><a href="#关于-async-x2F-await-函数" class="headerlink" title="关于 async&#x2F;await 函数"></a>关于 async&#x2F;await 函数</h2><p>async&#x2F;await本质上还是基于Promise的一些封装，而Promise是属于微任务的一种</p>
<p>所以在使用await关键字与Promise.then效果类似</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">4</span>))</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">test</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">1</span>)</span><br><span class="line">  <span class="keyword">await</span> <span class="title class_">Promise</span>.<span class="title function_">resolve</span>()</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">3</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">test</span>()</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">2</span>)</span><br></pre></td></tr></table></figure>

<p>上述代码输出<code>1 2 3 4</code></p>
<p>可以理解为，<code>await</code> 以前的代码，相当于与 <code>new Promise</code> 的同步代码，<code>await</code> 以后的代码相当于 <code>Promise.then</code>的异步</p>
<h2 id="举栗印证"><a href="#举栗印证" class="headerlink" title="举栗印证"></a>举栗印证</h2><p>首先给大家来一个比较直观的动图</p>
<p><img src="/2022/09/16/web/JavaScript/js%E4%BB%8E%E5%9F%BA%E7%A1%80%E5%88%B0%E8%BF%9B%E9%98%B6/16fb7d0f356a33a4tplv-t2oaga2asx-zoom-in-crop-mark4536000.awebp" alt="img"></p>
<p>之所以放这个动图，就是为了向大家推荐这篇好文，动图录屏自参考链接【1】</p>
<p>极力推荐大家看看这篇帖子，非常nice，分步动画生动且直观，有时间的话可以自己去体验下</p>
<p>不过在看这个帖子之前你要先了解下运行机制会更好读懂些</p>
<p>接下来这个来自网上随意找的一个比较简单的面试题，求输出结果</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">test</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">1</span>)</span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123; 	<span class="comment">// timer1</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">2</span>)</span><br><span class="line">  &#125;, <span class="number">1000</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">test</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123; 		<span class="comment">// timer2</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">3</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="keyword">function</span> (<span class="params">resolve</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">4</span>)</span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123; 	<span class="comment">// timer3</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">5</span>)</span><br><span class="line">  &#125;, <span class="number">100</span>)</span><br><span class="line">  <span class="title function_">resolve</span>()</span><br><span class="line">&#125;).<span class="title function_">then</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123; 	<span class="comment">// timer4</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">6</span>)</span><br><span class="line">  &#125;, <span class="number">0</span>)</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">7</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">8</span>)</span><br></pre></td></tr></table></figure>

<p>结合我们上述的JS运行机制再来看这道题就简单明了的多了</p>
<p>JS是顺序从上而下执行</p>
<p>执行到test()，test方法为同步，直接执行，<code>console.log(1)</code>打印1</p>
<p>test方法中setTimeout为异步宏任务，回调我们把它记做timer1放入宏任务队列</p>
<p>接着执行，test方法下面有一个setTimeout为异步宏任务，回调我们把它记做timer2放入宏任务队列</p>
<p>接着执行promise，new Promise是同步任务，直接执行，打印4</p>
<p>new Promise里面的setTimeout是异步宏任务，回调我们记做timer3放到宏任务队列</p>
<p>Promise.then是微任务，放到微任务队列</p>
<p>console.log(8)是同步任务，直接执行，打印8</p>
<p>主线程任务执行完毕，检查微任务队列中有Promise.then</p>
<p>开始执行微任务，发现有setTimeout是异步宏任务，记做timer4放到宏任务队列</p>
<p>微任务队列中的console.log(7)是同步任务，直接执行，打印7</p>
<p>微任务执行完毕，第一次循环结束</p>
<p>检查宏任务队列，里面有timer1、timer2、timer3、timer4，四个定时器宏任务，按照定时器延迟时间得到可以执行的顺序，即Event Queue：timer2、timer4、timer3、timer1，依次拿出放入执行栈末尾执行 <strong>(插播一条：浏览器 event loop 的 Macrotask queue，就是宏任务队列在每次循环中只会读取一个任务)</strong></p>
<p>执行timer2，console.log(3)为同步任务，直接执行，打印3</p>
<p>检查没有微任务，第二次Event Loop结束</p>
<p>执行timer4，console.log(6)为同步任务，直接执行，打印6</p>
<p>检查没有微任务，第三次Event Loop结束</p>
<p>执行timer3，console.log(5)同步任务，直接执行，打印5</p>
<p>检查没有微任务，第四次Event Loop结束</p>
<p>执行timer1，console.log(2)同步任务，直接执行，打印2</p>
<p>检查没有微任务，也没有宏任务，第五次Event Loop结束</p>
<p>结果：1，4，8，7，3，6，5，2</p>
<h2 id="提一下NodeJS中的运行机制"><a href="#提一下NodeJS中的运行机制" class="headerlink" title="提一下NodeJS中的运行机制"></a>提一下NodeJS中的运行机制</h2><p>上面的一切都是针对于浏览器的EventLoop</p>
<p>虽然NodeJS中的JavaScript运行环境也是V8，也是单线程，但是，还是有一些与浏览器中的表现是不一样的</p>
<p>其实nodejs与浏览器的区别，就是nodejs的宏任务分好几种类型，而这好几种又有不同的任务队列，而不同的任务队列又有顺序区别，而微任务是穿插在每一种宏任务之间的</p>
<p>在node环境下，process.nextTick的优先级高于Promise，可以简单理解为在宏任务结束后会先执行微任务队列中的nextTickQueue部分，然后才会执行微任务中的Promise部分</p>
<p><img src="/2022/09/16/web/JavaScript/js%E4%BB%8E%E5%9F%BA%E7%A1%80%E5%88%B0%E8%BF%9B%E9%98%B6/16fb7aed8db21b8dtplv-t2oaga2asx-zoom-in-crop-mark4536000.awebp" alt="img"></p>
<p>上图来自NodeJS官网</p>
<p>如上图所示，nodejs的宏任务分好几种类型，我们只简单介绍大体内容了解，不详细解释，不然又是啰哩啰嗦一大篇</p>
<p>NodeJS的Event Loop相对比较麻烦</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">Node会先执行所有类型为 timers 的 MacroTask，然后执行所有的 MicroTask(NextTick例外)</span><br><span class="line"></span><br><span class="line">进入 poll 阶段，执行几乎所有 MacroTask，然后执行所有的 MicroTask</span><br><span class="line"></span><br><span class="line">再执行所有类型为 check 的 MacroTask，然后执行所有的 MicroTask</span><br><span class="line"></span><br><span class="line">再执行所有类型为 close callbacks 的 MacroTask，然后执行所有的 MicroTask</span><br><span class="line"></span><br><span class="line">至此，完成一个 Tick，回到 timers 阶段</span><br><span class="line"></span><br><span class="line">……</span><br><span class="line"></span><br><span class="line">如此反复，无穷无尽……</span><br></pre></td></tr></table></figure>

<p>反观浏览器中Event Loop就比较容易理解</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">先执行一个 MacroTask，然后执行所有的 MicroTask</span><br><span class="line"></span><br><span class="line">再执行一个 MacroTask，然后执行所有的 MicroTask</span><br><span class="line"></span><br><span class="line">……</span><br><span class="line"></span><br><span class="line">如此反复，无穷无尽……</span><br></pre></td></tr></table></figure>

<p>好了，关于Node中各个类型阶段的解析，这里就不过多说明了，自己查阅资料吧，这里就是简单提一下，NodeJS的Event Loop解释起来比浏览器这繁杂，这里就只做个对比</p>
<h1 id="JS工具库"><a href="#JS工具库" class="headerlink" title="JS工具库"></a>JS工具库</h1><h2 id="jQuery"><a href="#jQuery" class="headerlink" title="jQuery"></a>jQuery</h2><h2 id="Vue"><a href="#Vue" class="headerlink" title="Vue"></a>Vue</h2><p>见Vue篇</p>
<h2 id="React"><a href="#React" class="headerlink" title="React"></a>React</h2><p>见React篇</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://mindcons.cn/2022/09/16/web/JavaScript/js%E4%BB%8E%E5%9F%BA%E7%A1%80%E5%88%B0%E8%BF%9B%E9%98%B6/" data-id="cldol83er001r3cx6h5n6go0k" data-title="JavaScript从基础到进阶" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/javascript/" rel="tag">javascript</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-web/进阶/数据结构和算法/常用数据结构与算法" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2022/09/03/web/%E8%BF%9B%E9%98%B6/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%92%8C%E7%AE%97%E6%B3%95/%E5%B8%B8%E7%94%A8%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/" class="article-date">
  <time class="dt-published" datetime="2022-09-03T01:03:02.000Z" itemprop="datePublished">2022-09-03</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/">数据结构与算法</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2022/09/03/web/%E8%BF%9B%E9%98%B6/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%92%8C%E7%AE%97%E6%B3%95/%E5%B8%B8%E7%94%A8%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/">常用数据结构与算法</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="数据结构"><a href="#数据结构" class="headerlink" title="数据结构"></a>数据结构</h1><h2 id="数组"><a href="#数组" class="headerlink" title="数组"></a>数组</h2><h3 id="求数组最大最小值"><a href="#求数组最大最小值" class="headerlink" title="求数组最大最小值"></a>求数组最大最小值</h3><ul>
<li>通过<code>prototype</code>属性扩展<code>min()</code>函数和<code>max()</code>函数</li>
</ul>
<h4 id="1-for-if"><a href="#1-for-if" class="headerlink" title="1.for+if"></a>1.<code>for</code>+<code>if</code></h4><p>通过prototype属性扩展min()函数和max()函数</p>
<p>算法1的思路是在自定义<code>min()</code>和<code>max()</code>函数中，通过循环由第一个值依次与后面的值作比较，动态更新最大值和最小值，从而找到结果</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 最小值</span></span><br><span class="line"><span class="title class_">Array</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">min</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> min = <span class="variable language_">this</span>[<span class="number">0</span>];</span><br><span class="line">    <span class="keyword">let</span> len = <span class="variable language_">this</span>.<span class="property">length</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">1</span>; i &lt; len; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="variable language_">this</span>[i] &lt; min) min = <span class="variable language_">this</span>[i]</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> min</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 最大值</span></span><br><span class="line"><span class="title class_">Array</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">max</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> max = <span class="variable language_">this</span>[<span class="number">0</span>];</span><br><span class="line">    <span class="keyword">let</span> len = <span class="variable language_">this</span>.<span class="property">length</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">1</span>; i &lt; len; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="variable language_">this</span>[i] &gt; max) max = <span class="variable language_">this</span>[i]</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> max</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 结果</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arr.<span class="title function_">min</span>()); <span class="comment">// 1</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arr.<span class="title function_">max</span>()); <span class="comment">// 9</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="2-借助Math对象的min-函数和max-函数"><a href="#2-借助Math对象的min-函数和max-函数" class="headerlink" title="2.借助Math对象的min()函数和max()函数"></a>2.借助<code>Math</code>对象的<code>min()</code>函数和<code>max()</code>函数</h4><p>算法2的主要思路是通过<code>apply()</code>函数改变函数的执行体，将数组作为参数传递给<code>apply()</code>函数。这样数组就可以直接调用<code>Math</code>对象的<code>min()</code>函数和<code>max()</code>函数来获取返回值。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Array</span>.<span class="property">min</span> = <span class="keyword">function</span>(<span class="params">array</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Math</span>.<span class="property">min</span>.<span class="title function_">apply</span>(<span class="title class_">Math</span>, array)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 最大值</span></span><br><span class="line"><span class="title class_">Array</span>.<span class="property">max</span> = <span class="keyword">function</span> (<span class="params">array</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Math</span>.<span class="property">max</span>.<span class="title function_">apply</span>(<span class="title class_">Math</span>, array)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 结果</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Array</span>.<span class="title function_">min</span>(arr)); <span class="comment">// 1</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Array</span>.<span class="title function_">max</span>(arr)); <span class="comment">// 9</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>



<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> values = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>]; </span><br><span class="line"><span class="keyword">let</span> max = <span class="title class_">Math</span>.<span class="title function_">max</span>(...val);</span><br></pre></td></tr></table></figure>



<h4 id="3-算法2的优化"><a href="#3-算法2的优化" class="headerlink" title="3.算法2的优化"></a>3.算法2的优化</h4><h3 id="实现数组排序"><a href="#实现数组排序" class="headerlink" title="实现数组排序"></a>实现数组排序</h3><h4 id="自己第一次想的"><a href="#自己第一次想的" class="headerlink" title="自己第一次想的"></a>自己第一次想的</h4><ul>
<li>取数组最小值和最大值，并记录索引</li>
<li>根据索引去过滤掉原数组中的这两个值，然后将这两个值从中间插入到新数组</li>
<li>递归上述操作<ul>
<li>注意点，不同的数组长度做一下边界处理</li>
<li>最后数组长度为1时，插入的时候，注意下边界处理</li>
</ul>
</li>
<li>核心：递归在最小值最大值组成的数组的中间，依次插入第二小值和第二大值，起始一定是最小，末尾一定是最大</li>
</ul>
<p>自己实现</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> arr = [<span class="number">7</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">6</span>, <span class="number">9</span> ,<span class="number">0</span> ,<span class="number">11</span>,<span class="number">11</span>]</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> getMin = <span class="keyword">function</span> <span class="title function_">getMin</span>(<span class="params">arr</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> minValue = <span class="number">0</span>,</span><br><span class="line">    minIndex = <span class="number">0</span></span><br><span class="line">    arr.<span class="title function_">forEach</span>(<span class="function">(<span class="params">item, index</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (index === <span class="number">0</span>) &#123;</span><br><span class="line">            minValue = item</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (item &lt;= minValue) &#123;</span><br><span class="line">            minValue = item</span><br><span class="line">            minIndex = index</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="comment">// console.log(&#x27;最小值&#x27;, minValue, minIndex)</span></span><br><span class="line">    <span class="keyword">return</span> &#123; minValue, minIndex &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> getMax = <span class="keyword">function</span> <span class="title function_">getMax</span>(<span class="params">arr</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> maxValue = <span class="number">0</span>,</span><br><span class="line">    maxIndex = <span class="number">0</span></span><br><span class="line">    arr.<span class="title function_">forEach</span>(<span class="function">(<span class="params">item, index</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (index === <span class="number">0</span>) &#123;</span><br><span class="line">            maxValue = item</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (item &gt; maxValue) &#123;</span><br><span class="line">            maxValue = item</span><br><span class="line">            maxIndex = index</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;最大值&#x27;</span>, maxValue, maxIndex)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> &#123; maxValue, maxIndex &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> filterMinAndMax = <span class="keyword">function</span> <span class="title function_">filterMinAndMax</span>(<span class="params">minIndex, maxIndex, arr</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> newArr = []</span><br><span class="line">    arr.<span class="title function_">forEach</span>(<span class="function">(<span class="params">item, index</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (index === minIndex || index === maxIndex) <span class="keyword">return</span></span><br><span class="line">        newArr.<span class="title function_">push</span>(item)</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="keyword">return</span> newArr</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> sortArray = [], newArr = []</span><br><span class="line"><span class="keyword">let</span> main = <span class="keyword">function</span> <span class="title function_">main</span>(<span class="params">arr</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span>(arr.<span class="property">length</span> === <span class="number">0</span> ) <span class="keyword">return</span></span><br><span class="line">    <span class="keyword">if</span>(arr.<span class="property">length</span> === <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">let</span> onlyValue = arr[<span class="number">0</span>]</span><br><span class="line">        <span class="keyword">const</span> insertIndex = sortArray.<span class="property">length</span> / <span class="number">2</span></span><br><span class="line">        <span class="keyword">if</span>(onlyValue &gt; sortArray[insertIndex]) &#123;</span><br><span class="line">            sortArray.<span class="title function_">splice</span>(insertIndex + <span class="number">1</span>, <span class="number">0</span>, onlyValue)</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            sortArray.<span class="title function_">splice</span>(insertIndex, <span class="number">0</span>, onlyValue)</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;res&#x27;</span>, sortArray)</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(arr.<span class="property">length</span> &gt; <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">let</span> &#123; minValue, minIndex &#125; = <span class="title function_">getMin</span>(arr)</span><br><span class="line">        <span class="keyword">let</span> &#123; maxValue, maxIndex &#125; = <span class="title function_">getMax</span>(arr)</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>( minValue, maxValue)</span><br><span class="line">        <span class="keyword">if</span>(sortArray.<span class="property">length</span> % <span class="number">2</span> === <span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">const</span> insertIndex = sortArray.<span class="property">length</span> / <span class="number">2</span></span><br><span class="line">            sortArray.<span class="title function_">splice</span>(insertIndex, <span class="number">0</span>, minValue, maxValue)</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;sortArray&#x27;</span>, sortArray)</span><br><span class="line">        &#125;</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">        newArr = <span class="title function_">filterMinAndMax</span>(minIndex, maxIndex, arr)</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;newArr&#x27;</span>, newArr)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">main</span>(newArr)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// getMax(arr)</span></span><br><span class="line"><span class="title function_">main</span>(arr)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>更加<code>js</code>的写法</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>


      
    </div>
    <footer class="article-footer">
      <a data-url="https://mindcons.cn/2022/09/03/web/%E8%BF%9B%E9%98%B6/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%92%8C%E7%AE%97%E6%B3%95/%E5%B8%B8%E7%94%A8%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/" data-id="cldol83ic007i3cx6c3a34eva" data-title="常用数据结构与算法" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/" rel="tag">数据结构与算法</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-web/CSS/布局及实战套路/float布局" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2022/09/01/web/CSS/%E5%B8%83%E5%B1%80%E5%8F%8A%E5%AE%9E%E6%88%98%E5%A5%97%E8%B7%AF/float%E5%B8%83%E5%B1%80/" class="article-date">
  <time class="dt-published" datetime="2022-08-31T23:28:42.000Z" itemprop="datePublished">2022-09-01</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/CSS/">CSS</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2022/09/01/web/CSS/%E5%B8%83%E5%B1%80%E5%8F%8A%E5%AE%9E%E6%88%98%E5%A5%97%E8%B7%AF/float%E5%B8%83%E5%B1%80/">float布局</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="浮动"><a href="#浮动" class="headerlink" title="浮动"></a>浮动</h1><p>通过浮动，可以使一个元素向其父元素的左侧，或者右侧移动（直观现象）</p>
<p>主要作用就是让页面中的元素可以<strong>水平排列</strong>，通过浮动，可以制作一些水平方向的布局</p>
<p>使用<code>float</code>属性，来设置元素的浮动</p>
<p>可选值：</p>
<ul>
<li><code>none</code>：默认值，元素不浮动</li>
<li><code>left</code>：元素向左浮动</li>
<li><code>right</code>：元素向右浮动</li>
</ul>
<h2 id="单独给一个子元素设置浮动"><a href="#单独给一个子元素设置浮动" class="headerlink" title="单独给一个子元素设置浮动"></a>单独给一个子元素设置浮动</h2><p>html</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box1&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box2&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>css</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&lt;style&gt;</span><br><span class="line">    <span class="selector-class">.box2</span> &#123;</span><br><span class="line">        <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">        <span class="attribute">height</span>: <span class="number">200px</span>;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="selector-class">.box1</span> &#123;</span><br><span class="line">        <span class="attribute">width</span>: <span class="number">100px</span>;</span><br><span class="line">        <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">    <span class="comment">/*    设置左浮动*/</span></span><br><span class="line">        <span class="attribute">float</span>: left;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="selector-class">.box1</span> &#123;</span><br><span class="line">        <span class="attribute">background-color</span>: <span class="number">#bfa</span>;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="selector-class">.box2</span> &#123;</span><br><span class="line">        <span class="attribute">background-color</span>: orange;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<p>初始：</p>
<p><img src="/2022/09/01/web/CSS/%E5%B8%83%E5%B1%80%E5%8F%8A%E5%AE%9E%E6%88%98%E5%A5%97%E8%B7%AF/float%E5%B8%83%E5%B1%80/image-20211121100642842.png" alt="image-20211121100642842"></p>
<p>设置浮动的效果：</p>
<p><code>box1</code>会脱离文档流，<code>box2</code>会填充到之前<code>box1</code>的起始位置</p>
<p><img src="/2022/09/01/web/CSS/%E5%B8%83%E5%B1%80%E5%8F%8A%E5%AE%9E%E6%88%98%E5%A5%97%E8%B7%AF/float%E5%B8%83%E5%B1%80/image-20211121100750890.png" alt="image-20211121100750890"></p>
<h2 id="给多个子元素一起设置浮动"><a href="#给多个子元素一起设置浮动" class="headerlink" title="给多个子元素一起设置浮动"></a>给多个子元素一起设置浮动</h2><p>html</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box1&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box2&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box3&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>css</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;style&gt;</span><br><span class="line"></span><br><span class="line">    <span class="selector-class">.box1</span>, <span class="selector-class">.box2</span>, <span class="selector-class">.box3</span> &#123;</span><br><span class="line">        <span class="attribute">width</span>: <span class="number">100px</span>;</span><br><span class="line">        <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">    <span class="comment">/*    设置左浮动*/</span></span><br><span class="line">        <span class="attribute">float</span>: left;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="selector-class">.box1</span> &#123;</span><br><span class="line">        <span class="attribute">background-color</span>: <span class="number">#bfa</span>;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="selector-class">.box2</span> &#123;</span><br><span class="line">        <span class="attribute">background-color</span>: orange;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<p>效果：</p>
<p>多个设置浮动的子元素，并并排显示</p>
<p><img src="/2022/09/01/web/CSS/%E5%B8%83%E5%B1%80%E5%8F%8A%E5%AE%9E%E6%88%98%E5%A5%97%E8%B7%AF/float%E5%B8%83%E5%B1%80/image-20211121101124317.png" alt="image-20211121101124317"></p>
<h2 id="浮动特点"><a href="#浮动特点" class="headerlink" title="浮动特点"></a>浮动特点</h2><ul>
<li><p>子元素设置浮动后，会完全从文档流中脱离，不再占用文档流的位置（可以理解为，自己又新建了一个图层）</p>
<ul>
<li><p>原来子元素的位置，会被之前文档流中新的子元素，重新占据位置</p>
</li>
<li><p>之前讲过的，水平布局的等式，自然不需要成立</p>
</li>
<li><p>浮动的元素，不会从父元素中移除</p>
</li>
<li><p>父元素中，没有浮动的块元素，始终会挡在浮动元素的上面</p>
<ul>
<li><p>如下，box1没有设置浮动，其他两个设置浮动</p>
<p><img src="/2022/09/01/web/CSS/%E5%B8%83%E5%B1%80%E5%8F%8A%E5%AE%9E%E6%88%98%E5%A5%97%E8%B7%AF/float%E5%B8%83%E5%B1%80/image-20211121102019886.png" alt="image-20211121102019886"></p>
</li>
</ul>
</li>
<li><p>在3个子元素都是浮动元素的情况下，box3不会超过同级上面的兄弟元素box2，最多是一样高，不会和box1跑一行去</p>
<ul>
<li><p>box1&#x2F;2&#x2F;3都设置浮动</p>
</li>
<li><p>如下，在最后，尽管第一行的margin-right还有空间，但box3是不会跑到box1的这一行的：</p>
<p><img src="/2022/09/01/web/CSS/%E5%B8%83%E5%B1%80%E5%8F%8A%E5%AE%9E%E6%88%98%E5%A5%97%E8%B7%AF/float%E5%B8%83%E5%B1%80/input.gif" alt="input"></p>
</li>
</ul>
</li>
<li><p>浮动目前来说，主要作用就是让页面中的元素可以水平排列，通过浮动，可以制作一些水平方向的布局</p>
</li>
</ul>
</li>
<li><p>浮动的元素，不会覆盖文字，所以我们可以利用浮动，来设置文字环绕图片的效果</p>
</li>
<li><p>子元素设置浮动后，将会从文档流中脱离，从文档流中脱离后，元素的一些特点也会变化</p>
<ul>
<li>块元素：<ul>
<li>块元素不再独占一行</li>
<li>块元素的高度和宽度都被内容撑开</li>
</ul>
</li>
<li>行内元素：<ul>
<li>宽高都是可以生效的，特点是和上面一样的</li>
</ul>
</li>
<li>脱离文档流后，不再区分块元素和行内元素</li>
</ul>
</li>
</ul>
<h2 id="浮动布局问题：高度塌陷-和BFC"><a href="#浮动布局问题：高度塌陷-和BFC" class="headerlink" title="浮动布局问题：高度塌陷 和BFC"></a>浮动布局问题：高度塌陷 和BFC</h2><h3 id="高度塌陷"><a href="#高度塌陷" class="headerlink" title="高度塌陷"></a>高度塌陷</h3><p>在浮动布局中，父元素的高度默认是被子元素撑开的</p>
<ul>
<li>当子元素浮动后，其会完全脱离文档流，</li>
<li>子元素此时将会无法撑起父元素高度，导致父元素高度丢失</li>
<li>父元素高度丢失后，剩下的子元素会自动上移，导致页面的布局混乱</li>
<li>所以，高度塌陷是浮动布局中比较常见的一个问题，这个问题必须要进行处理</li>
</ul>
<h3 id="BFC"><a href="#BFC" class="headerlink" title="BFC"></a>BFC</h3><p>BFC（Block Formatting Context），块级格式化环境</p>
<ul>
<li>BFC是css中的一个隐含属性，可以为一个元素开启BFC</li>
<li>开启BFC后，该元素会变成一个独立的布局区域</li>
<li>元素开启BFC后的特点：<ul>
<li>开启BFC的元素，不会被浮动元素覆盖</li>
<li>开启BFC的元素，子元素和父元素外边距不会重叠</li>
<li>开启BFC的元素，可以包含浮动的元素</li>
</ul>
</li>
<li>开启BFC的方式：<ul>
<li>设置元素的浮动（不推荐）</li>
<li>将元素设置为行内块元素（不推荐）</li>
<li>将元素的overflow设置为，一个非visible的值，一般我们用hidden即可</li>
<li>所有开启BFC的方式，都有副作用，我们只是要找一个副作用最小的<ul>
<li>设置overflow仍然是存在副作用的</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="clear"><a href="#clear" class="headerlink" title="clear"></a>clear</h3><p>由于box1的浮动，导致box1位置上移，也就是box3受到了box1浮动的影响，位置发生了改变</p>
<p>可以通过clear属性，来清楚浮动元素，对当前元素所产生的的影响</p>
<p>clear</p>
<ul>
<li>作用<ul>
<li>清楚浮动元素对当前元素所产生的影响</li>
<li>可选值<ul>
<li>left：清除左侧浮动元素对当前元素的影响</li>
<li>right：清除右侧浮动元素对当前元素的影响</li>
<li>both：清除两侧中，最大影响的那一侧</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>html</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box1&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box2&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>css</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;style&gt;</span><br><span class="line">    <span class="selector-class">.box1</span> &#123;</span><br><span class="line">        <span class="attribute">background-color</span>: <span class="number">#bfa</span>;</span><br><span class="line">        <span class="attribute">width</span>: <span class="number">100px</span>;</span><br><span class="line">        <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">        <span class="attribute">float</span>: left;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="selector-class">.box2</span> &#123;</span><br><span class="line">        <span class="attribute">background-color</span>: orange;</span><br><span class="line">        <span class="attribute">width</span>: <span class="number">500px</span>;</span><br><span class="line">        <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">        <span class="attribute">clear</span>: both;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<p><img src="/2022/09/01/web/CSS/%E5%B8%83%E5%B1%80%E5%8F%8A%E5%AE%9E%E6%88%98%E5%A5%97%E8%B7%AF/float%E5%B8%83%E5%B1%80/image-20211121154806912.png" alt="image-20211121154806912"></p>
<p>并不是说，box1没有浮动了，只是说，box2不再受到box1的影响了</p>
<p>原理：设置clear之后，浏览器会给box2自动计算一个上外边距</p>
<h3 id="解决高度塌陷的最终方案"><a href="#解决高度塌陷的最终方案" class="headerlink" title="解决高度塌陷的最终方案"></a>解决高度塌陷的最终方案</h3><p>html</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box1&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box2&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>css</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">    <span class="selector-class">.container</span> &#123;</span><br><span class="line">        <span class="attribute">border</span>: <span class="number">1px</span> solid palevioletred;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="selector-class">.box1</span> &#123;</span><br><span class="line">        <span class="attribute">background-color</span>: <span class="number">#bfa</span>;</span><br><span class="line">        <span class="attribute">width</span>: <span class="number">100px</span>;</span><br><span class="line">        <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">        <span class="attribute">float</span>: left;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="selector-class">.box2</span> &#123;</span><br><span class="line">        <span class="attribute">clear</span>: both;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<p>虽然box1设置了浮动，但由于box2中，清除了浮动对齐的影响，所以box2还占据着原来的位置，所以父元素仍然是被撑起来的</p>
<p>但问题是，box2这个div，是我们自己加的，属于用结构处理表现的问题了，</p>
<p>现在不想加box2这个div</p>
<p>我们要在元素的最后，添加一个标签，只能通过html来添加吗？</p>
<p>不是</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box1</span><span class="selector-pseudo">::after</span>&#123;</span><br><span class="line">    <span class="comment">/* 添加内容 */</span></span><br><span class="line">	<span class="attribute">content</span>:<span class="string">&#x27;&#x27;</span>;</span><br><span class="line">    <span class="comment">/* 清除其他元素浮动带来的影响 */</span></span><br><span class="line">    <span class="attribute">clear</span>: both;</span><br><span class="line">    <span class="comment">/* 默认是行内元素，设置为块元素 */</span></span><br><span class="line">    <span class="attribute">display</span>: block;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="外边距折叠和高度塌陷的合并写法"><a href="#外边距折叠和高度塌陷的合并写法" class="headerlink" title="外边距折叠和高度塌陷的合并写法"></a>外边距折叠和高度塌陷的合并写法</h3><p>类似上一节，解决外边距重叠的写法</p>
<p>给需要结局外边距折叠的父元素添加如下样式</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.clearfix</span><span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">	<span class="attribute">content</span>:<span class="string">&#x27;&#x27;</span>;</span><br><span class="line">    <span class="attribute">display</span>: table;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>解决外边距折叠和高度塌陷的合并写法</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.clearfix</span><span class="selector-pseudo">::before</span>, <span class="selector-class">.clearfix</span><span class="selector-pseudo">::after</span> &#123;	</span><br><span class="line">    <span class="attribute">content</span>: <span class="string">&#x27;&#x27;</span>;	</span><br><span class="line">    <span class="attribute">display</span>: table;	</span><br><span class="line">    <span class="attribute">clear</span>:both;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


      
    </div>
    <footer class="article-footer">
      <a data-url="https://mindcons.cn/2022/09/01/web/CSS/%E5%B8%83%E5%B1%80%E5%8F%8A%E5%AE%9E%E6%88%98%E5%A5%97%E8%B7%AF/float%E5%B8%83%E5%B1%80/" data-id="cldol83fd002t3cx6358hci5v" data-title="float布局" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/CSS/" rel="tag">CSS</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/CSS%E5%B8%83%E5%B1%80/" rel="tag">CSS布局</a></li></ul>

    </footer>
  </div>
  
</article>



  


  <nav id="page-nav">
    
    <a class="extend prev" rel="prev" href="/page/3/">&laquo; Prev</a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><span class="page-number current">4</span><a class="page-number" href="/page/5/">5</a><a class="page-number" href="/page/6/">6</a><span class="space">&hellip;</span><a class="page-number" href="/page/14/">14</a><a class="extend next" rel="next" href="/page/5/">Next &raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/CSS/">CSS</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/CSS%E9%A2%84%E5%A4%84%E7%90%86%E5%99%A8/">CSS预处理器</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/English/">English</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Express/">Express</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/HTML/">HTML</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Koa/">Koa</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Node-js/">Node.js</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/React/">React</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Vue/">Vue</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/books/">books</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/docker/">docker</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/electron/">electron</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/jQuery/">jQuery</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/javascript/">javascript</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/lua/">lua</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/webpack/">webpack</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E4%B9%A6%E7%B1%8D/">书籍</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E4%BD%8E%E4%BB%A3%E7%A0%81/">低代码</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%8F%AF%E8%A7%86%E5%8C%96/">可视化</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%AD%A6%E4%B9%A0%E6%96%B9%E5%BC%8F/">学习方式</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%AD%A6%E4%B9%A0%E8%B7%AF%E7%BA%BF/">学习路线</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%B0%8F%E7%A8%8B%E5%BA%8F/">小程序</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/">数据库</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/">数据结构与算法</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%A1%88%E4%BE%8B%E5%AE%9E%E6%88%98/">案例实战</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%88%AC%E8%99%AB/">爬虫</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%A7%BB%E5%8A%A8%E7%AB%AF%E5%BC%80%E5%8F%91/">移动端开发</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%BB%84%E4%BB%B6%E5%BA%93/">组件库</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/">设计模式</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/CSS/" rel="tag">CSS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CSS%E5%8A%A8%E7%94%BB/" rel="tag">CSS动画</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CSS%E5%B8%83%E5%B1%80/" rel="tag">CSS布局</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CSS%E9%80%89%E6%8B%A9%E5%99%A8/" rel="tag">CSS选择器</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CSS%E9%A2%84%E5%A4%84%E7%90%86%E5%99%A8/" rel="tag">CSS预处理器</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ElementPlus/" rel="tag">ElementPlus</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ElementUI/" rel="tag">ElementUI</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/English/" rel="tag">English</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Express/" rel="tag">Express</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/HTML/" rel="tag">HTML</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Koa/" rel="tag">Koa</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Linux/" rel="tag">Linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Node-js/" rel="tag">Node.js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/React/" rel="tag">React</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/TypeScript/" rel="tag">TypeScript</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Vant/" rel="tag">Vant</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Vue/" rel="tag">Vue</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Vue2/" rel="tag">Vue2</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Vue3/" rel="tag">Vue3</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/books/" rel="tag">books</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/docker/" rel="tag">docker</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/electron/" rel="tag">electron</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jQuery/" rel="tag">jQuery</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/javascript/" rel="tag">javascript</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/lua/" rel="tag">lua</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/python/" rel="tag">python</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vue-cli/" rel="tag">vue-cli</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/webpack/" rel="tag">webpack</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%B9%A6%E7%B1%8D/" rel="tag">书籍</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%BD%8E%E4%BB%A3%E7%A0%81/" rel="tag">低代码</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%8F%AF%E8%A7%86%E5%8C%96/" rel="tag">可视化</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%AD%A6%E4%B9%A0%E6%96%B9%E5%BC%8F/" rel="tag">学习方式</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%AD%A6%E4%B9%A0%E8%B7%AF%E7%BA%BF/" rel="tag">学习路线</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%B0%8F%E7%A8%8B%E5%BA%8F/" rel="tag">小程序</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/" rel="tag">数据库</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/" rel="tag">数据结构与算法</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%A1%88%E4%BE%8B%E5%AE%9E%E6%88%98/" rel="tag">案例实战</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%BA%90%E7%A0%81/" rel="tag">源码</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%88%AC%E8%99%AB/" rel="tag">爬虫</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%A7%BB%E5%8A%A8%E7%AB%AF%E5%BC%80%E5%8F%91/" rel="tag">移动端开发</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%BB%84%E4%BB%B6%E5%BA%93/" rel="tag">组件库</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%87%AA%E5%AE%9A%E4%B9%89%E5%B7%A5%E5%85%B7%E5%BA%93/" rel="tag">自定义工具库</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%AE%A4%E7%9F%A5/" rel="tag">认知</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" rel="tag">设计模式</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%BD%AF%E6%8A%80%E8%83%BD/" rel="tag">软技能</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%BF%90%E7%BB%B4/" rel="tag">运维</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/CSS/" style="font-size: 18.33px;">CSS</a> <a href="/tags/CSS%E5%8A%A8%E7%94%BB/" style="font-size: 10px;">CSS动画</a> <a href="/tags/CSS%E5%B8%83%E5%B1%80/" style="font-size: 13.33px;">CSS布局</a> <a href="/tags/CSS%E9%80%89%E6%8B%A9%E5%99%A8/" style="font-size: 10px;">CSS选择器</a> <a href="/tags/CSS%E9%A2%84%E5%A4%84%E7%90%86%E5%99%A8/" style="font-size: 15px;">CSS预处理器</a> <a href="/tags/ElementPlus/" style="font-size: 10px;">ElementPlus</a> <a href="/tags/ElementUI/" style="font-size: 10px;">ElementUI</a> <a href="/tags/English/" style="font-size: 10px;">English</a> <a href="/tags/Express/" style="font-size: 10px;">Express</a> <a href="/tags/HTML/" style="font-size: 11.67px;">HTML</a> <a href="/tags/Koa/" style="font-size: 13.33px;">Koa</a> <a href="/tags/Linux/" style="font-size: 11.67px;">Linux</a> <a href="/tags/Node-js/" style="font-size: 11.67px;">Node.js</a> <a href="/tags/React/" style="font-size: 10px;">React</a> <a href="/tags/TypeScript/" style="font-size: 10px;">TypeScript</a> <a href="/tags/Vant/" style="font-size: 11.67px;">Vant</a> <a href="/tags/Vue/" style="font-size: 13.33px;">Vue</a> <a href="/tags/Vue2/" style="font-size: 10px;">Vue2</a> <a href="/tags/Vue3/" style="font-size: 10px;">Vue3</a> <a href="/tags/books/" style="font-size: 10px;">books</a> <a href="/tags/docker/" style="font-size: 10px;">docker</a> <a href="/tags/electron/" style="font-size: 10px;">electron</a> <a href="/tags/jQuery/" style="font-size: 10px;">jQuery</a> <a href="/tags/javascript/" style="font-size: 11.67px;">javascript</a> <a href="/tags/lua/" style="font-size: 10px;">lua</a> <a href="/tags/python/" style="font-size: 10px;">python</a> <a href="/tags/vue-cli/" style="font-size: 10px;">vue-cli</a> <a href="/tags/webpack/" style="font-size: 10px;">webpack</a> <a href="/tags/%E4%B9%A6%E7%B1%8D/" style="font-size: 16.67px;">书籍</a> <a href="/tags/%E4%BD%8E%E4%BB%A3%E7%A0%81/" style="font-size: 10px;">低代码</a> <a href="/tags/%E5%8F%AF%E8%A7%86%E5%8C%96/" style="font-size: 10px;">可视化</a> <a href="/tags/%E5%AD%A6%E4%B9%A0%E6%96%B9%E5%BC%8F/" style="font-size: 10px;">学习方式</a> <a href="/tags/%E5%AD%A6%E4%B9%A0%E8%B7%AF%E7%BA%BF/" style="font-size: 10px;">学习路线</a> <a href="/tags/%E5%B0%8F%E7%A8%8B%E5%BA%8F/" style="font-size: 10px;">小程序</a> <a href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/" style="font-size: 10px;">数据库</a> <a href="/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/" style="font-size: 10px;">数据结构与算法</a> <a href="/tags/%E6%A1%88%E4%BE%8B%E5%AE%9E%E6%88%98/" style="font-size: 20px;">案例实战</a> <a href="/tags/%E6%BA%90%E7%A0%81/" style="font-size: 10px;">源码</a> <a href="/tags/%E7%88%AC%E8%99%AB/" style="font-size: 10px;">爬虫</a> <a href="/tags/%E7%A7%BB%E5%8A%A8%E7%AB%AF%E5%BC%80%E5%8F%91/" style="font-size: 10px;">移动端开发</a> <a href="/tags/%E7%BB%84%E4%BB%B6%E5%BA%93/" style="font-size: 11.67px;">组件库</a> <a href="/tags/%E8%87%AA%E5%AE%9A%E4%B9%89%E5%B7%A5%E5%85%B7%E5%BA%93/" style="font-size: 10px;">自定义工具库</a> <a href="/tags/%E8%AE%A4%E7%9F%A5/" style="font-size: 10px;">认知</a> <a href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" style="font-size: 10px;">设计模式</a> <a href="/tags/%E8%BD%AF%E6%8A%80%E8%83%BD/" style="font-size: 20px;">软技能</a> <a href="/tags/%E8%BF%90%E7%BB%B4/" style="font-size: 10px;">运维</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/01/">January 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/12/">December 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/11/">November 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/10/">October 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/09/">September 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/08/">August 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/07/">July 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/06/">June 2022</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2023/01/20/web/%E5%85%B6%E4%BB%96/lua/lua%E5%9F%BA%E7%A1%80/">lua基础</a>
          </li>
        
          <li>
            <a href="/2023/01/17/web/%E5%85%B6%E4%BB%96/python/%E7%88%AC%E8%99%AB%E5%9F%BA%E7%A1%80/">爬虫基础</a>
          </li>
        
          <li>
            <a href="/2023/01/13/web/%E8%BF%9B%E9%98%B6/%E6%95%B0%E6%8D%AE%E5%BA%93/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80/">数据库基础</a>
          </li>
        
          <li>
            <a href="/2023/01/12/web/%E6%A1%86%E6%9E%B6/React/React%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E5%92%8C%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86/React%E5%9F%BA%E7%A1%80/">React基本使用</a>
          </li>
        
          <li>
            <a href="/2023/01/09/web/%E5%85%B6%E4%BB%96/%E6%A0%87%E6%B3%A8/labelStudio%E5%AE%89%E8%A3%85%E5%8F%8A%E4%BD%BF%E7%94%A8/">labelStudio安装及使用</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2023 John Doe<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.4.1.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>