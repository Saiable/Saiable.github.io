<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>吕小布の博客 | 吕小布の博客</title><meta name="keywords" content="吕小布的博客"><meta name="author" content="Sai"><meta name="copyright" content="Sai"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="XMLHttpRequestXMLHttpRequest（XHR）对象用于与服务器交互。通过 XMLHttpRequest 可以在不刷新页面的情况下请求特定 URL，获取数据。这允许网页在不影响用户操作的情况下，更新页面的局部内容。XMLHttpRequest 在 AJAX 编程中被大量使用。 尽管名称如此，XMLHttpRequest 可以用于获取任何类型的数据，而不仅仅是 XML。它甚至支持">
<meta property="og:type" content="article">
<meta property="og:title" content="吕小布の博客">
<meta property="og:url" content="http://mindcons.cn/2022/07/08/web/JavaScript/Ajax/Ajax&Axios/index.html">
<meta property="og:site_name" content="吕小布の博客">
<meta property="og:description" content="XMLHttpRequestXMLHttpRequest（XHR）对象用于与服务器交互。通过 XMLHttpRequest 可以在不刷新页面的情况下请求特定 URL，获取数据。这允许网页在不影响用户操作的情况下，更新页面的局部内容。XMLHttpRequest 在 AJAX 编程中被大量使用。 尽管名称如此，XMLHttpRequest 可以用于获取任何类型的数据，而不仅仅是 XML。它甚至支持">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg">
<meta property="article:published_time" content="2022-07-07T23:28:47.150Z">
<meta property="article:modified_time" content="2022-07-09T01:17:55.000Z">
<meta property="article:author" content="Sai">
<meta property="article:tag" content="吕小布的博客">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="http://mindcons.cn/2022/07/08/web/JavaScript/Ajax/Ajax&amp;Axios/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":350},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '吕小布の博客',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2022-07-09 09:17:55'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 6.2.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://s2.loli.net/2022/07/02/xjocPR8fnLu64KU.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">66</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">9</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">3</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/search/"><i class="fa-fw fas fa-search"></i><span> 搜索</span></a></div><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page group hide" href="javascript:void(0);"><i class="fa-fw fas fa-search"></i><span> 文章</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></li></ul></div><div class="menus_item"><a class="site-page group hide" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 娱乐</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></li><li><a class="site-page child" href="/comics/"><i class="fa-fw fas fa-video"></i><span> 番剧</span></a></li></ul></div><div class="menus_item"><a class="site-page group hide" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 互动</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/sponsorWall/"><i class="fa-fw fas fa-money-check-alt"></i><span> 赞助墙</span></a></li><li><a class="site-page child" href="/comments/"><i class="fa-fw fas fa-comments"></i><span> 留言板</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div><div class="menus_item"><a class="site-page group hide" href="javascript:void(0);"><i class="fa-fw fas fa-coffee"></i><span> 其他</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/course/"><i class="fa-fw fas fa-book"></i><span> 搭建教程</span></a></li></ul></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">吕小布の博客</a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/search/"><i class="fa-fw fas fa-search"></i><span> 搜索</span></a></div><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page group hide" href="javascript:void(0);"><i class="fa-fw fas fa-search"></i><span> 文章</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></li></ul></div><div class="menus_item"><a class="site-page group hide" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 娱乐</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></li><li><a class="site-page child" href="/comics/"><i class="fa-fw fas fa-video"></i><span> 番剧</span></a></li></ul></div><div class="menus_item"><a class="site-page group hide" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 互动</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/sponsorWall/"><i class="fa-fw fas fa-money-check-alt"></i><span> 赞助墙</span></a></li><li><a class="site-page child" href="/comments/"><i class="fa-fw fas fa-comments"></i><span> 留言板</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div><div class="menus_item"><a class="site-page group hide" href="javascript:void(0);"><i class="fa-fw fas fa-coffee"></i><span> 其他</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/course/"><i class="fa-fw fas fa-book"></i><span> 搭建教程</span></a></li></ul></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">无题</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-07-07T23:28:47.150Z" title="发表于 2022-07-08 07:28:47">2022-07-08</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2022-07-09T01:17:55.000Z" title="更新于 2022-07-09 09:17:55">2022-07-09</time></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="XMLHttpRequest"><a href="#XMLHttpRequest" class="headerlink" title="XMLHttpRequest"></a><code>XMLHttpRequest</code></h1><p><code>XMLHttpRequest</code>（XHR）对象用于与服务器交互。通过 XMLHttpRequest 可以在不刷新页面的情况下请求特定 URL，获取数据。这允许网页在不影响用户操作的情况下，更新页面的局部内容。<code>XMLHttpRequest</code> 在 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Glossary/AJAX">AJAX</a> 编程中被大量使用。</p>
<p>尽管名称如此，<code>XMLHttpRequest</code> 可以用于获取任何类型的数据，而不仅仅是 XML。它甚至支持 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/HTTP">HTTP</a> 以外的协议（包括 file:&#x2F;&#x2F; 和 FTP），尽管可能受到更多出于安全等原因的限制。</p>
<p>如果您的通信流程需要从服务器端接收事件或消息数据，请考虑通过 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/API/EventSource"><code>EventSource</code></a> 接口使用 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/API/Server-sent_events">server-sent events</a>。对于全双工的通信， <a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/API/WebSockets_API">WebSocket</a> 可能是更好的选择。</p>
<h2 id="构造函数"><a href="#构造函数" class="headerlink" title="构造函数"></a>构造函数</h2><p><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/API/XMLHttpRequest/XMLHttpRequest"><code>XMLHttpRequest()</code></a></p>
<p>该构造函数用于初始化一个 <code>XMLHttpRequest</code> 实例对象。在调用下列任何其他方法之前，必须先调用该构造函数，或通过其他方式，得到一个实例对象。</p>
<h2 id="属性"><a href="#属性" class="headerlink" title="属性"></a>属性</h2><p><em>此接口继承了 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/API/XMLHttpRequestEventTarget"><code>XMLHttpRequestEventTarget</code></a> 和 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/API/EventTarget"><code>EventTarget</code></a> 的属性。</em></p>
<h3 id="XMLHttpRequest-onreadystatechange"><a href="#XMLHttpRequest-onreadystatechange" class="headerlink" title="XMLHttpRequest.onreadystatechange"></a><code>XMLHttpRequest.onreadystatechange</code></h3><p>当 <code>readyState</code> 属性发生变化时，调用的 <code>event handler</code>。</p>
<p>只要 <code>readyState</code> 属性发生变化，就会调用相应的<a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/Events/Event_handlers">处理函数 (en-US)</a>。这个回调函数会被用户线程所调用。**<code>XMLHttpRequest.onreadystatechange</code>** 会在 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/API/XMLHttpRequest"><code>XMLHttpRequest</code></a> 的<a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/API/XMLHttpRequest/readyState"><code>readyState</code></a> 属性发生改变时触发 <code>readystatechange (en-US)</code> 事件的时候被调用。</p>
<p>当一个 <code>XMLHttpRequest</code> 请求被 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/abort">abort()</a> 方法取消时，其对应的 <code>readystatechange</code> 事件不会被触发。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> xhr= <span class="keyword">new</span> <span class="title class_">XMLHttpRequest</span>(),</span><br><span class="line">    method = <span class="string">&quot;GET&quot;</span>,</span><br><span class="line">    url = <span class="string">&quot;https://developer.mozilla.org/&quot;</span>;</span><br><span class="line"></span><br><span class="line">xhr.<span class="title function_">open</span>(method, url, <span class="literal">true</span>);</span><br><span class="line">xhr.<span class="property">onreadystatechange</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">if</span>(xhr.<span class="property">readyState</span> === <span class="title class_">XMLHttpRequest</span>.<span class="property">DONE</span> &amp;&amp; xhr.<span class="property">status</span> === <span class="number">200</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(xhr.<span class="property">responseText</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">xhr.<span class="title function_">send</span>();</span><br></pre></td></tr></table></figure>

<h3 id="XMLHttpRequest-readyState（只读）"><a href="#XMLHttpRequest-readyState（只读）" class="headerlink" title="XMLHttpRequest.readyState（只读）"></a><code>XMLHttpRequest.readyState</code>（只读）</h3><p>返回 一个无符号短整型（<code>unsigned short</code>）数字，代表请求的状态码。</p>
<p>XMLHttpRequest.readyState 属性返回一个 XMLHttpRequest 代理当前所处的状态。一个 XHR 代理总是处于下列状态中的一个：</p>
<table>
<thead>
<tr>
<th>值</th>
<th>状态</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>0</td>
<td>UNSENT</td>
<td>代理被创建，但尚未调用 open() 方法。</td>
</tr>
<tr>
<td>1</td>
<td>OPENED</td>
<td>open() 方法已经被调用。</td>
</tr>
<tr>
<td>2</td>
<td>HEADERS_RECEIVED</td>
<td>send() 方法已经被调用，并且头部和状态已经可获得。</td>
</tr>
<tr>
<td>3</td>
<td>LOADING</td>
<td>下载中；responseText 属性已经包含部分数据。</td>
</tr>
<tr>
<td>4</td>
<td>DONE</td>
<td>下载操作已完成。</td>
</tr>
</tbody></table>
<ul>
<li><p>UNSENT</p>
<p>XMLHttpRequest 代理已被创建， 但尚未调用 open() 方法。</p>
<p>刚刚创建<code>xhr</code>对象时</p>
</li>
<li><p>OPENED</p>
<p>open() 方法已经被触发。在这个状态中，可以通过 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/setRequestHeader">setRequestHeader()</a> 方法来设置请求的头部， 可以调用 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/send">send()</a> 方法来发起请求。</p>
<p>刚刚调用<code>open</code>方法后</p>
</li>
<li><p>HEADERS_RECEIVED</p>
<p>send() 方法已经被调用，响应头也已经被接收。</p>
</li>
<li><p>LOADING</p>
<p>响应体部分正在被接收。如果 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/responseType">responseType</a> 属性是“text”或空字符串，<a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/responseText">responseText</a> 将会在载入的过程中拥有部分响应数据。</p>
<p><code>xhr.onprogress</code>的回调函数中</p>
</li>
<li><p>DONE</p>
<p>请求操作已经完成。这意味着数据传输已经彻底完成或失败。</p>
<p><code>xhr.onload</code>的回调函数中</p>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> xhr = <span class="keyword">new</span> <span class="title class_">XMLHttpRequest</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;UNSENT&#x27;</span>, xhr.<span class="property">readyState</span>); <span class="comment">// readyState 为 0</span></span><br><span class="line"></span><br><span class="line">xhr.<span class="title function_">open</span>(<span class="string">&#x27;GET&#x27;</span>, <span class="string">&#x27;/api&#x27;</span>, <span class="literal">true</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;OPENED&#x27;</span>, xhr.<span class="property">readyState</span>); <span class="comment">// readyState 为 1</span></span><br><span class="line"></span><br><span class="line">xhr.<span class="property">onprogress</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;LOADING&#x27;</span>, xhr.<span class="property">readyState</span>); <span class="comment">// readyState 为 3</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">xhr.<span class="property">onload</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;DONE&#x27;</span>, xhr.<span class="property">readyState</span>); <span class="comment">// readyState 为 4</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">xhr.<span class="title function_">send</span>(<span class="literal">null</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h3 id="XMLHttpRequest-response-（只读）"><a href="#XMLHttpRequest-response-（只读）" class="headerlink" title="XMLHttpRequest.response （只读）"></a><code>XMLHttpRequest.response</code> （只读）</h3><p><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/API/XMLHttpRequest">XMLHttpRequest</a> response 属性返回响应的正文。返回的类型为 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/ArrayBuffer">ArrayBuffer</a>、<a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/API/Blob">Blob</a> 、 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/API/Document">Document</a>、JavaScript <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a> 或 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/API/DOMString">DOMString</a> 中的一个。这取决于 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/API/XMLHttpRequest/responseType">responseType</a> 属性。</p>
<p><strong>语法</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> body = <span class="title class_">XMLHttpRequest</span>.<span class="property">response</span>;</span><br></pre></td></tr></table></figure>

<p><strong>取值</strong></p>
<p>一个对象，其类型取决于 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/API/XMLHttpRequest/responseType">responseType</a> 的值。你可以尝试设置 responseType 的值，以便通过特定的类型请求数据。 responseType 要在调用 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/API/XMLHttpRequest/open">open()</a> 初始化请求之后调用，并且要在调用 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/API/XMLHttpRequest/send">send()</a> 发送请求到服务器之前调用。</p>
<p>如果请求尚未完成或未成功，则取值是 null。例外的，读取文本数据时如果将 responseType 的值设置成 “text” 或空字符串（””）且当请求状态还在是 LOADING <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/API/XMLHttpRequest/readyState">readyState</a> (3) 时，response 包含到目前为止该请求已经取得的内容。</p>
<p>响应的类型如下所示。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;&#123;<span class="title function_">page</span>(<span class="string">&quot;/zh-CN/docs/Web/API/XMLHttpRequestResponseType&quot;</span>, <span class="string">&quot;取值&quot;</span>)&#125;&#125;</span><br></pre></td></tr></table></figure>

<p><strong>例子</strong></p>
<p>此例子提供了一个方法—— <code>load()</code> ，它可以从服务器加载和处理页面。它通过创建一个 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/API/XMLHttpRequest"><code>XMLHttpRequest</code></a> 对象并为 <code>readystatechange (en-US)</code> 事件创建一个监听器。这样的话，当 <code>readyState</code> 变成 <code>DONE</code> (4) 时就会获取 <code>response</code> 并将其传递给 <code>load()</code> 中提供的回调函数。</p>
<p>返回的内容会被作为原始文本数据处理（因为这里没有覆盖 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/API/XMLHttpRequest/responseType"><code>responseType</code></a> 的默认值）。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> url = <span class="string">&#x27;somePage.html&#x27;</span>; <span class="comment">// 一个本地页面</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">load</span>(<span class="params">url, callback</span>) &#123;</span><br><span class="line">  <span class="keyword">var</span> xhr = <span class="keyword">new</span> <span class="title class_">XMLHttpRequest</span>();</span><br><span class="line"></span><br><span class="line">  xhr.<span class="property">onreadystatechange</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (xhr.<span class="property">readyState</span> === <span class="number">4</span>) &#123;</span><br><span class="line">      <span class="title function_">callback</span>(xhr.<span class="property">response</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  xhr.<span class="title function_">open</span>(<span class="string">&#x27;GET&#x27;</span>, url, <span class="literal">true</span>);</span><br><span class="line">  xhr.<span class="title function_">send</span>(<span class="string">&#x27;&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="XMLHttpRequest-responseText"><a href="#XMLHttpRequest-responseText" class="headerlink" title="XMLHttpRequest.responseText"></a><code>XMLHttpRequest.responseText</code></h3><p>返回一个 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/API/DOMString"><code>DOMString</code></a>，该 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/API/DOMString"><code>DOMString</code></a> 包含对请求的响应，如果请求未成功或尚未发送，则返回 <code>null</code>。</p>
<p><code>XMLHttpRequest.responseText</code> 在一个请求被发送后，从服务器端返回文本。</p>
<p><strong>语法</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> resultText = <span class="title class_">XMLHttpRequest</span>.<span class="property">responseText</span>;</span><br></pre></td></tr></table></figure>

<p><strong>取值</strong></p>
<p><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/API/DOMString">DOMString</a> 是 XMLHttpRequest 返回的纯文本的值。当 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/API/DOMString">DOMString</a> 为 null 时，表示请求失败了。当<a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/API/DOMString">DOMString</a> 为 “” 时，表示这个请求还没有被 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/API/XMLHttpRequest/send">send()</a></p>
<p>当处理一个异步 request 的时候，尽管当前请求并没有结束，responseText 的返回值是当前从后端收到的内容。</p>
<p>当请求状态 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/API/XMLHttpRequest/readyState">readyState</a> 变为 XMLHttpRequest.DONE (4)，且 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/API/XMLHttpRequest/status">status</a> 值为 200（”OK”）时，responseText 是全部后端的返回数据</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> xhr = <span class="keyword">new</span> <span class="title class_">XMLHttpRequest</span>();</span><br><span class="line">xhr.<span class="title function_">open</span>(<span class="string">&#x27;GET&#x27;</span>, <span class="string">&#x27;/server&#x27;</span>, <span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// If specified, responseType must be empty string or &quot;text&quot;</span></span><br><span class="line">xhr.<span class="property">responseType</span> = <span class="string">&#x27;text&#x27;</span>;</span><br><span class="line"></span><br><span class="line">xhr.<span class="property">onload</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (xhr.<span class="property">readyState</span> === xhr.<span class="property">DONE</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (xhr.<span class="property">status</span> === <span class="number">200</span>) &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(xhr.<span class="property">response</span>);</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(xhr.<span class="property">responseText</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">xhr.<span class="title function_">send</span>(<span class="literal">null</span>);</span><br></pre></td></tr></table></figure>

<p><img src="/Ajax&Axios.assets/image-20220613061639334.png" alt="image-20220613061639334"></p>
<h3 id="XMLHttpRequest-responseType"><a href="#XMLHttpRequest-responseType" class="headerlink" title="XMLHttpRequest.responseType"></a><code>XMLHttpRequest.responseType</code></h3><p>一个用于定义响应类型的枚举值（enumerated value）。</p>
<p><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/API/XMLHttpRequest"><code>XMLHttpRequest</code></a> 属性 <strong><code>responseType</code></strong> 是一个枚举字符串值，用于指定响应中包含的数据类型。</p>
<p>它还允许作者更改响应类型。如果将 <code>responseType</code> 的值设置为空字符串，则会使用 <code>text</code> 作为默认值。</p>
<p><strong>语法</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> type = <span class="title class_">XMLHttpRequest</span>.<span class="property">responseType</span>;</span><br><span class="line"></span><br><span class="line"><span class="title class_">XMLHttpRequest</span>.<span class="property">responseType</span> = type;</span><br></pre></td></tr></table></figure>

<p><strong>取值</strong></p>
<p><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/String">Global_Objects&#x2F;String</a> 类型的值，指定响应包含的数据类型。它可以采用以下值：</p>
<ul>
<li><p>“”</p>
<p>空的 responseType 字符串与默认类型 “text” 相同。</p>
</li>
<li><p>“arraybuffer”</p>
<p><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/API/XMLHttpRequest/response">response</a> 是一个包含二进制数据的 JavaScript <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/ArrayBuffer">ArrayBuffer</a>。</p>
</li>
<li><p>“blob”</p>
<p><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/API/XMLHttpRequest/response">response</a> 是一个包含二进制数据的 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/API/Blob">Blob</a> 对象。</p>
</li>
<li><p>“document”</p>
<p><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/API/XMLHttpRequest/response">response</a> 是一个 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Glossary/HTML">HTML</a> <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/API/Document">Document</a> 或 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Glossary/XML">XML</a> <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/API/XMLDocument">XMLDocument</a>，根据接收到的数据的 MIME 类型而定。请参阅 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/API/XMLHttpRequest/HTML_in_XMLHttpRequest">HTML in XMLHttpRequest</a> 中的 HTML，了解有关使用 XHR 获取 HTML 内容的更多信息。</p>
</li>
<li><p>“json”</p>
<p><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/API/XMLHttpRequest/response">response</a> 是通过将接收到的数据内容解析为 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Glossary/JSON">JSON</a> 而创建的 JavaScript 对象。</p>
</li>
<li><p>“text”</p>
<p><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/API/XMLHttpRequest/response">response</a> 是 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/API/DOMString">DOMString</a> 对象中的文本。</p>
</li>
<li><p>“ms-stream” </p>
<p><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/API/XMLHttpRequest/response">response</a> 是流式下载的一部分；此响应类型仅允许用于下载请求，并且仅受 Internet Explorer 支持。</p>
</li>
</ul>
<blockquote>
<p>将 responseType 设置为特定值时，作者应确保服务器实际发送的响应与该格式兼容。如果服务器返回的数据与设置的 responseType 不兼容，则 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/API/XMLHttpRequest/response">response</a> 的值将为null .</p>
</blockquote>
<h3 id="XMLHttpRequest-responseURL（只读）"><a href="#XMLHttpRequest-responseURL（只读）" class="headerlink" title="XMLHttpRequest.responseURL（只读）"></a><code>XMLHttpRequest.responseURL</code>（只读）</h3><p>只读属性XMLHttpRequest.responseURL返回响应的序列化 URL，如果 URL 为空则返回空字符串。如果 URL 有锚点，则位于 URL # 后面的内容会被删除。如果 URL 有重定向，responseURL 的值会是经过多次重定向后的最终 URL。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> xhr = <span class="keyword">new</span> <span class="title class_">XMLHttpRequest</span>();</span><br><span class="line">xhr.<span class="title function_">open</span>(<span class="string">&#x27;GET&#x27;</span>, <span class="string">&#x27;http://example.com/test&#x27;</span>, <span class="literal">true</span>);</span><br><span class="line">xhr.<span class="property">onload</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(xhr.<span class="property">responseURL</span>); <span class="comment">// http://example.com/test</span></span><br><span class="line">&#125;;</span><br><span class="line">xhr.<span class="title function_">send</span>(<span class="literal">null</span>);</span><br></pre></td></tr></table></figure>

<h3 id="XMLHttpRequest-responseXML-（只读）"><a href="#XMLHttpRequest-responseXML-（只读）" class="headerlink" title="XMLHttpRequest.responseXML （只读）"></a><code>XMLHttpRequest.responseXML</code> （只读）</h3><p>XMLHttpRequest.responseXML 属性是一个只读值，它返回一个包含请求检索的 HTML 或 XML 的<a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/API/Document">Document</a>，如果请求未成功，尚未发送，或者检索的数据无法正确解析为 XML 或 HTML，则为 null。默认是当作“text &#x2F; xml” 来解析。当 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/API/XMLHttpRequest/responseType">responseType</a> 设置为 “document” 并且请求已异步执行时，响应将被当作 “text &#x2F; html” 来解析。responseXML 对于任何其他类型的数据以及 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/Data_URLs">data: URLs</a> 为 null。</p>
<blockquote>
<p>responseXML 在这个属性的历史堪称神器，它可以同时在 HTML 和 XML 中工作</p>
</blockquote>
<p>如果服务器没有明确指出 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/Content-Type">Content-Type</a> 头是 “text&#x2F;xml” 还是 “application&#x2F;xml”, 你可以使用<a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/API/XMLHttpRequest/overrideMimeType">XMLHttpRequest.overrideMimeType()</a> 强制 XMLHttpRequest 解析为 XML。</p>
<p><strong>值</strong></p>
<p> <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/API/Document">Document</a> 中包含从 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/API/XMLHttpRequest">XMLHttpRequest</a> 中收到的 HTML 节点或解析后的 XML 节点，也可能是在没有收到任何数据或数据类型错误的情况下返回的 null。</p>
<p><strong>例外</strong></p>
<p>InvalidStateError</p>
<p><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/API/XMLHttpRequest/responseType">responseType</a> 既不是 “document” 也不是空字符串 (接收的数据应是 XML 或 HTML)。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> xhr = <span class="keyword">new</span> <span class="title class_">XMLHttpRequest</span>();</span><br><span class="line">xhr.<span class="title function_">open</span>(<span class="string">&#x27;GET&#x27;</span>, <span class="string">&#x27;/server&#x27;</span>, <span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 如果已指明，responseType 必须是空字符串或 &quot;document&quot;</span></span><br><span class="line">xhr.<span class="property">responseType</span> = <span class="string">&#x27;document&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// overrideMimeType() 用来强制解析 response 为 XML</span></span><br><span class="line">xhr.<span class="title function_">overrideMimeType</span>(<span class="string">&#x27;text/xml&#x27;</span>);</span><br><span class="line"></span><br><span class="line">xhr.<span class="property">onload</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (xhr.<span class="property">readyState</span> === xhr.<span class="property">DONE</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (xhr.<span class="property">status</span> === <span class="number">200</span>) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(xhr.<span class="property">response</span>);</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(xhr.<span class="property">responseXML</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">xhr.<span class="title function_">send</span>(<span class="literal">null</span>);</span><br></pre></td></tr></table></figure>

<h3 id="XMLHttpRequest-status-（只读）"><a href="#XMLHttpRequest-status-（只读）" class="headerlink" title="XMLHttpRequest.status （只读）"></a><code>XMLHttpRequest.status</code> （只读）</h3><p>只读属性 XMLHttpRequest.status 返回了 XMLHttpRequest 响应中的数字状态码。status 的值是一个无符号短整型。在请求完成前，status 的值为 0。值得注意的是，如果 XMLHttpRequest 出错，浏览器返回的 status 也为 0。</p>
<p>status 码是标准的 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Status">HTTP status codes</a>。举个例子，status 200 代表一个成功的请求。如果服务器响应中没有明确指定 status 码，XMLHttpRequest.status 将会默认为 200。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> xhr = <span class="keyword">new</span> <span class="title class_">XMLHttpRequest</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;UNSENT&#x27;</span>, xhr.<span class="property">status</span>);</span><br><span class="line"></span><br><span class="line">xhr.<span class="title function_">open</span>(<span class="string">&#x27;GET&#x27;</span>, <span class="string">&#x27;/server&#x27;</span>, <span class="literal">true</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;OPENED&#x27;</span>, xhr.<span class="property">status</span>);</span><br><span class="line"></span><br><span class="line">xhr.<span class="property">onprogress</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;LOADING&#x27;</span>, xhr.<span class="property">status</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">xhr.<span class="property">onload</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;DONE&#x27;</span>, xhr.<span class="property">status</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">xhr.<span class="title function_">send</span>(<span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 输出如下：</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * UNSENT（未发送）0</span></span><br><span class="line"><span class="comment"> * OPENED（已打开）0</span></span><br><span class="line"><span class="comment"> * LOADING（载入中）200</span></span><br><span class="line"><span class="comment"> * DONE（完成）200</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="XMLHttpRequest-statusText-（只读）"><a href="#XMLHttpRequest-statusText-（只读）" class="headerlink" title="XMLHttpRequest.statusText （只读）"></a><code>XMLHttpRequest.statusText</code> （只读）</h3><p>只读属性 XMLHttpRequest.statusText 返回了XMLHttpRequest 请求中由服务器返回的一个<a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/API/DOMString">DOMString</a> 类型的文本信息，这则信息中也包含了响应的数字状态码。不同于使用一个数字来指示的状态码<a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/API/XMLHTTPRequest/status">XMLHTTPRequest.status</a>，这个属性包含了返回状态对应的文本信息，例如”OK”或是”Not Found”。如果请求的状态<a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/readyState">readyState</a>的值为”UNSENT”或者”OPENED”，则这个属性的值将会是一个空字符串。</p>
<p>如果服务器未明确指定一个状态文本信息，则statusText的值将会被自动赋值为”OK”。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> xhr = <span class="keyword">new</span> <span class="title class_">XMLHttpRequest</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;0 UNSENT&#x27;</span>, xhr.<span class="property">statusText</span>);</span><br><span class="line"></span><br><span class="line">xhr.<span class="title function_">open</span>(<span class="string">&#x27;GET&#x27;</span>, <span class="string">&#x27;/server&#x27;</span>, <span class="literal">true</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;1 OPENED&#x27;</span>, xhr.<span class="property">statusText</span>);</span><br><span class="line"></span><br><span class="line">xhr.<span class="property">onprogress</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;3 LOADING&#x27;</span>, xhr.<span class="property">statusText</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">xhr.<span class="property">onload</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;4 DONE&#x27;</span>, xhr.<span class="property">statusText</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">xhr.<span class="title function_">send</span>(<span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 输出如下：</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * 0 UNSENT</span></span><br><span class="line"><span class="comment"> * 1 OPENED</span></span><br><span class="line"><span class="comment"> * 3 LOADING OK</span></span><br><span class="line"><span class="comment"> * 4 DONE OK</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="XMLHttpRequest-timeout"><a href="#XMLHttpRequest-timeout" class="headerlink" title="XMLHttpRequest.timeout"></a><code>XMLHttpRequest.timeout</code></h3><p>XMLHttpRequest.timeout 是一个无符号长整型数，代表着一个请求在被自动终止前所消耗的毫秒数。默认值为 0，意味着没有超时。超时并不应该用在一个 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Glossary/document_environment">document environment</a> 中的同步 XMLHttpRequests 请求中，否则将会抛出一个 InvalidAccessError 类型的错误。当超时发生， <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/API/XMLHttpRequest/timeout_event">timeout</a> 事件将会被触发。</p>
<p>在 IE 中，超时属性可能只能在调用 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/API/XMLHttpRequest/open">open()</a> 方法之后且在调用 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/API/XMLHttpRequest/send">send()</a> 方法之前设置。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> xhr = <span class="keyword">new</span> <span class="title class_">XMLHttpRequest</span>();</span><br><span class="line">xhr.<span class="title function_">open</span>(<span class="string">&#x27;GET&#x27;</span>, <span class="string">&#x27;/server&#x27;</span>, <span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line">xhr.<span class="property">timeout</span> = <span class="number">2000</span>; <span class="comment">// 超时时间，单位是毫秒</span></span><br><span class="line"></span><br><span class="line">xhr.<span class="property">onload</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">// 请求完成。在此进行处理。</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">xhr.<span class="property">ontimeout</span> = <span class="keyword">function</span> (<span class="params">e</span>) &#123;</span><br><span class="line">  <span class="comment">// XMLHttpRequest 超时。在此做某事。</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">xhr.<span class="title function_">send</span>(<span class="literal">null</span>);</span><br></pre></td></tr></table></figure>

<h3 id="XMLHttpRequest-upload"><a href="#XMLHttpRequest-upload" class="headerlink" title="XMLHttpRequest.upload"></a><code>XMLHttpRequest.upload</code></h3><p>XMLHttpRequest.upload 属性返回一个 XMLHttpRequestUpload对象，用来表示上传的进度。这个对象是不透明的，但是作为一个<a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/API/XMLHttpRequestEventTarget">XMLHttpRequestEventTarget</a>，可以通过对其绑定事件来追踪它的进度。</p>
<p>可以被绑定在 upload 对象上的事件监听器如下：</p>
<table>
<thead>
<tr>
<th>事件</th>
<th>相应属性的信息类型</th>
</tr>
</thead>
<tbody><tr>
<td>onloadstart</td>
<td>获取开始</td>
</tr>
<tr>
<td>onprogress</td>
<td>数据传输进行中</td>
</tr>
<tr>
<td>onabort</td>
<td>获取操作终止</td>
</tr>
<tr>
<td>onerror</td>
<td>获取失败</td>
</tr>
<tr>
<td>onload</td>
<td>获取成功</td>
</tr>
<tr>
<td>ontimeout</td>
<td>获取操作在用户规定的时间内未完成</td>
</tr>
<tr>
<td>onloadend</td>
<td>获取完成（不论成功与否）</td>
</tr>
</tbody></table>
<h2 id="事件处理器"><a href="#事件处理器" class="headerlink" title="事件处理器"></a>事件处理器</h2><p>作为 XMLHttpRequest 实例的属性之一，所有浏览器都支持 onreadystatechange。</p>
<p>后来，许多浏览器实现了一些额外的事件（onload、onerror、onprogress 等）。详见<a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/API/XMLHttpRequest/Using_XMLHttpRequest">Using XMLHttpRequest</a>。</p>
<p>更多现代浏览器，包括 Firefox，除了可以设置 on* 属性外，也提供标准的监听器 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/API/EventTarget/addEventListener">addEventListener()</a> API 来监听XMLHttpRequest 事件。</p>
<h2 id="方法"><a href="#方法" class="headerlink" title="方法"></a>方法</h2><h3 id="XMLHttpRequest-abort"><a href="#XMLHttpRequest-abort" class="headerlink" title="XMLHttpRequest.abort()"></a><code>XMLHttpRequest.abort()</code></h3><p>如果该请求已被发出，XMLHttpRequest.abort() 方法将终止该请求。当一个请求被终止，它的  <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/API/XMLHttpRequest/readyState">readyState</a> 将被置为 XMLHttpRequest.UNSENT (0)，并且请求的 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/API/XMLHttpRequest/status">status</a> 置为 0。</p>
<p><strong>语法</strong>：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">xhrInstance.<span class="title function_">abort</span>();</span><br></pre></td></tr></table></figure>

<p><strong>参数</strong>：无。<br><strong>返回值</strong>：<code>undefined</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> xhr = <span class="keyword">new</span> <span class="title class_">XMLHttpRequest</span>(),</span><br><span class="line">    method = <span class="string">&quot;GET&quot;</span>,</span><br><span class="line">    url = <span class="string">&quot;https://developer.mozilla.org/&quot;</span>;</span><br><span class="line">xhr.<span class="title function_">open</span>(method, url, <span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line">xhr.<span class="title function_">send</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (<span class="variable constant_">OH_NOES_WE_NEED_TO_CANCEL_RIGHT_NOW_OR_ELSE</span>) &#123;</span><br><span class="line">  xhr.<span class="title function_">abort</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="XMLHttpRequest-getAllResponseHeaders"><a href="#XMLHttpRequest-getAllResponseHeaders" class="headerlink" title="XMLHttpRequest.getAllResponseHeaders()"></a><code>XMLHttpRequest.getAllResponseHeaders()</code></h3><p>XMLHttpRequest.getAllResponseHeaders() 方法返回所有的响应头，以 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Glossary/CRLF">CRLF</a> 分割的字符串，或者 null 如果没有收到任何响应。 注意： 对于复合请求（ multipart requests ），这个方法返回当前请求的头部，而不是最初的请求的头部。</p>
<p><strong>语法</strong>：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> headers = <span class="title class_">XMLHttpRequest</span>.<span class="title function_">getAllResponseHeaders</span>();</span><br></pre></td></tr></table></figure>

<p><strong>参数</strong>：无<br><strong>返回值</strong>：一个原始的 Header 头例子：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">date: Fri, 08 Dec 2017 21:04:30 GMT\r\n</span><br><span class="line">content-encoding: gzip\r\n</span><br><span class="line">x-content-type-options: nosniff\r\n</span><br><span class="line">server: meinheld/0.6.1\r\n</span><br><span class="line">x-frame-options: DENY\r\n</span><br><span class="line">content-type: text/html; charset=utf-8\r\n</span><br><span class="line">connection: keep-alive\r\n</span><br><span class="line">strict-transport-security: max-age=63072000\r\n</span><br><span class="line">vary: Cookie, Accept-Encoding\r\n</span><br><span class="line">content-length: 6502\r\n</span><br><span class="line">x-xss-protection: 1; mode=block\r\n</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>每一行通过\r\n来进行分割。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> request = <span class="keyword">new</span> <span class="title class_">XMLHttpRequest</span>();</span><br><span class="line">request.<span class="title function_">open</span>(<span class="string">&quot;GET&quot;</span>, <span class="string">&quot;foo.txt&quot;</span>, <span class="literal">true</span>);</span><br><span class="line">request.<span class="title function_">send</span>();</span><br><span class="line"></span><br><span class="line">request.<span class="property">onreadystatechange</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">if</span>(<span class="variable language_">this</span>.<span class="property">readyState</span> == <span class="variable language_">this</span>.<span class="property">HEADERS_RECEIVED</span>) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Get the raw header string</span></span><br><span class="line">    <span class="keyword">var</span> headers = request.<span class="title function_">getAllResponseHeaders</span>();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Convert the header string into an array</span></span><br><span class="line">    <span class="comment">// of individual headers</span></span><br><span class="line">    <span class="keyword">var</span> arr = headers.<span class="title function_">trim</span>().<span class="title function_">split</span>(<span class="regexp">/[\r\n]+/</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Create a map of header names to values</span></span><br><span class="line">    <span class="keyword">var</span> headerMap = &#123;&#125;;</span><br><span class="line">    arr.<span class="title function_">forEach</span>(<span class="keyword">function</span> (<span class="params">line</span>) &#123;</span><br><span class="line">      <span class="keyword">var</span> parts = line.<span class="title function_">split</span>(<span class="string">&#x27;: &#x27;</span>);</span><br><span class="line">      <span class="keyword">var</span> header = parts.<span class="title function_">shift</span>();</span><br><span class="line">      <span class="keyword">var</span> value = parts.<span class="title function_">join</span>(<span class="string">&#x27;: &#x27;</span>);</span><br><span class="line">      headerMap[header] = value;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>上面的代码执行后，你可以：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> contentType = headerMap[<span class="string">&quot;content-type&quot;</span>];</span><br></pre></td></tr></table></figure>



<p>上面的变量 contentType 可以获取到 HTTP header 里的 content-type 字段值。</p>
<h3 id="XMLHttpRequest-getResponseHeader"><a href="#XMLHttpRequest-getResponseHeader" class="headerlink" title="XMLHttpRequest.getResponseHeader()"></a><code>XMLHttpRequest.getResponseHeader()</code></h3><p>XMLHttpRequest.getResponseHeader()方法返回包含指定响应头文本的字符串。</p>
<p>如果在返回的响应头中有多个一样的名称，那么返回的值就会是用逗号和空格将值分隔的字符串。getResponseHeader() 方法以 UTF 编码返回值。搜索的报文名是不区分大小写的。</p>
<p><strong>语法</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> myHeader = <span class="title class_">XMLHttpRequest</span>.<span class="title function_">getResponseHeader</span>(name);</span><br></pre></td></tr></table></figure>

<p><strong>参数</strong></p>
<ul>
<li>name<ul>
<li>一个字符串，表示要返回的报文项名称。</li>
</ul>
</li>
</ul>
<p><strong>返回值</strong><br>报文项值，如果连接未完成，响应中不存在报文项，或者被 W3C 限制，则返回 null。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> client = <span class="keyword">new</span> <span class="title class_">XMLHttpRequest</span>(); <span class="comment">//新建 XMLHttpRequest 对象。</span></span><br><span class="line">client.<span class="title function_">open</span>(<span class="string">&quot;GET&quot;</span>, <span class="string">&quot;somefile.txt&quot;</span>, <span class="literal">true</span>); <span class="comment">// 采用异步，GET 方式获取 somefile.txt。</span></span><br><span class="line">client.<span class="title function_">send</span>(); <span class="comment">// 发送空的 query string。</span></span><br><span class="line">client.<span class="property">onreadystatechange</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123; <span class="comment">//设定侦听器 onreadystatechange。</span></span><br><span class="line">  <span class="keyword">if</span>(<span class="variable language_">this</span>.<span class="property">readyState</span> == <span class="variable language_">this</span>.<span class="property">HEADERS_RECEIVED</span>) &#123; <span class="comment">// 如果 readyState 表示响应头已返回</span></span><br><span class="line">    <span class="keyword">var</span> contentType=client.<span class="title function_">getResponseHeader</span>(<span class="string">&quot;Content-Type&quot;</span>)); <span class="comment">// 将此连接的 Content-Type 响应头项赋值到 contentType。</span></span><br><span class="line">    <span class="keyword">if</span>(contentType != my_expected_type) &#123; <span class="comment">// 如果这不是你的预期值</span></span><br><span class="line">      client.<span class="title function_">abort</span>(); <span class="comment">// 终止连接</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="XMLHttpRequest-open"><a href="#XMLHttpRequest-open" class="headerlink" title="XMLHttpRequest.open()"></a><code>XMLHttpRequest.open()</code></h3><p>XMLHttpRequest.open() 方法初始化一个请求。该方法要从 JavaScript 代码使用；从原生代码初始化一个请求，使用 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIXMLHttpRequest#openRequest()">openRequest()</a> 替代。</p>
<blockquote>
<p>注意：为已激活的请求调用此方法（open()或openRequest() 已被调用）相当于调用abort()。</p>
</blockquote>
<p><strong>语法</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">xhrReq.<span class="title function_">open</span>(method, url);</span><br><span class="line">xhrReq.<span class="title function_">open</span>(method, url, <span class="keyword">async</span>);</span><br><span class="line">xhrReq.<span class="title function_">open</span>(method, url, <span class="keyword">async</span>, user);</span><br><span class="line">xhrReq.<span class="title function_">open</span>(method, url, <span class="keyword">async</span>, user, password);</span><br></pre></td></tr></table></figure>

<p><strong>参数</strong></p>
<ul>
<li><p>method<br>要使用的 HTTP 方法，比如 GET、POST、PUT、DELETE、等。对于非 HTTP(S) URL 被忽略。</p>
</li>
<li><p>url<br>一个 DOMString 表示要向其发送请求的 URL。</p>
</li>
<li><p>async 可选<br>一个可选的布尔参数，表示是否异步执行操作，默认为 true。如果值为 false，send() 方法直到收到答复前不会返回。如果 true，已完成事务的通知可供事件监听器使用。如果 multipart 属性为 true 则这个必须为 true，否则将引发异常。</p>
<blockquote>
<p>注意：主线程上的同步请求很容易破坏用户体验，应该避免；实际上，许多浏览器已完全弃用主线程上的同步 XHR 支持。在 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/API/Worker">Worker</a> 中允许同步请求</p>
</blockquote>
</li>
<li><p>user 可选</p>
<p>可选的用户名用于认证用途；默认为 null。</p>
</li>
<li><p>password 可选</p>
<p>可选的密码用于认证用途，默认为 null。</p>
</li>
</ul>
<h3 id="XMLHttpRequest-overrideMimeType"><a href="#XMLHttpRequest-overrideMimeType" class="headerlink" title="XMLHttpRequest.overrideMimeType()"></a><code>XMLHttpRequest.overrideMimeType()</code></h3><p>XMLHttpRequest 的 overrideMimeType 方法是指定一个 MIME 类型用于替代服务器指定的类型，使服务端响应信息中传输的数据按照该指定 MIME 类型处理。例如强制使流方式处理为”text&#x2F;xml”类型处理时会被使用到，即使服务器在响应头中并没有这样指定。此方法必须在 send 方法之前调用方为有效。</p>
<p><strong>语法</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">XMLHttpRequest</span>.<span class="title function_">overrideMimeType</span>(mimeType)</span><br></pre></td></tr></table></figure>

<p><strong>参数</strong>：</p>
<ul>
<li><p>mimeType</p>
<p>一个 DOMString 指定具体的 MIME 类型去代替有服务器指定的 MIME 类型. 如果服务器没有指定类型，那么 XMLHttpRequest 将会默认为 “text&#x2F;xml”.</p>
</li>
</ul>
<p><strong>返回值</strong>：undefined.</p>
<p>这个样例指定 Content-Type 为“text&#x2F;plain”,为接受的数据重写 ContentType</p>
<blockquote>
<p>Note: 如果服务器没有指定一个<a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Type">Content-Type</a> 头，<a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/API/XMLHttpRequest">XMLHttpRequest</a> 默认 MIME 类型为”text&#x2F;xml”. 如果接受的数据不是有效的 XML，将会出现格”格式不正确“的错误。你能够通过调用 overrideMimeType() 指定各种类型来避免这种情况。</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Interpret the received data as plain text</span></span><br><span class="line"></span><br><span class="line">req = <span class="keyword">new</span> <span class="title class_">XMLHttpRequest</span>();</span><br><span class="line">req.<span class="title function_">overrideMimeType</span>(<span class="string">&quot;text/plain&quot;</span>);</span><br><span class="line">req.<span class="title function_">addEventListener</span>(<span class="string">&quot;load&quot;</span>, callback, <span class="literal">false</span>);</span><br><span class="line">req.<span class="title function_">open</span>(<span class="string">&quot;get&quot;</span>, url);</span><br><span class="line">req.<span class="title function_">send</span>();</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="XMLHttpRequest-send"><a href="#XMLHttpRequest-send" class="headerlink" title="XMLHttpRequest.send()"></a><code>XMLHttpRequest.send()</code></h3><p>XMLHttpRequest.send() 方法用于发送 HTTP 请求。如果是异步请求（默认为异步请求），则此方法会在请求发送后立即返回；如果是同步请求，则此方法直到响应到达后才会返回。XMLHttpRequest.send() 方法接受一个可选的参数，其作为请求主体；如果请求方法是 GET 或者 HEAD，则应将请求主体设置为 null。</p>
<p>如果没有使用 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/API/XMLHttpRequest/setRequestHeader">setRequestHeader()</a> 方法设置 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/Accept">Accept</a> 头部信息，则会发送带有 “* &#x2F; *” 的<a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/Accept">Accept</a> 头部。</p>
<blockquote>
<p>Note: 请注意不要使用一个简单的 ArrayBuffer 对象作为参数，ArrayBuffer 已经不再是 AJAX 规范的一部分，请改用 ArrayBufferView（有关信息请参考兼容性列表。）</p>
</blockquote>
<p><strong>语法</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">XMLHttpRequest</span>.<span class="title function_">send</span>(body)</span><br></pre></td></tr></table></figure>

<p><strong>参数</strong></p>
<ul>
<li><p>body 可选</p>
<ul>
<li><p>在 XHR 请求中要发送的数据体. 可以是：</p>
<ul>
<li><p>可以为 Document, 在这种情况下，它在发送之前被序列化。</p>
</li>
<li><p>为 XMLHttpRequestBodyInit, 从 per the Fetch spec （规范中）可以是 Blob, BufferSource (en-US), FormData, URLSearchParams, 或者 </p>
<p>USVString 对象。</p>
</li>
<li><p>null</p>
</li>
</ul>
</li>
<li><p>如果 body 没有指定值，则默认值为 null .</p>
</li>
</ul>
</li>
</ul>
<p><strong>返回值</strong>：undefined.</p>
<p>例外</p>
<table>
<thead>
<tr>
<th>Exception</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td>InvalidStateError</td>
<td>send() has already been invoked for the request, and&#x2F;or the request is complete.</td>
</tr>
<tr>
<td>NetworkError</td>
<td>The resource type to be fetched is a Blob, and the method is not GET.</td>
</tr>
</tbody></table>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">XMLHttpRequest</span>.<span class="title function_">send</span>();</span><br><span class="line"><span class="title class_">XMLHttpRequest</span>.<span class="title function_">send</span>(<span class="title class_">ArrayBuffer</span> data);</span><br><span class="line"><span class="title class_">XMLHttpRequest</span>.<span class="title function_">send</span>(<span class="title class_">ArrayBufferView</span> data);</span><br><span class="line"><span class="title class_">XMLHttpRequest</span>.<span class="title function_">send</span>(<span class="title class_">Blob</span> data);</span><br><span class="line"><span class="title class_">XMLHttpRequest</span>.<span class="title function_">send</span>(<span class="title class_">Document</span> data);</span><br><span class="line"><span class="title class_">XMLHttpRequest</span>.<span class="title function_">send</span>(<span class="title class_">DOMString</span>? data);</span><br><span class="line"><span class="title class_">XMLHttpRequest</span>.<span class="title function_">send</span>(<span class="title class_">FormData</span> data);</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<p>如果发送的数据是 Document 对象，需要在发送之前将其序列化。当发送一个 Document 对象时，Firefox 3 之前的版本都是使用 UTF-8 编码发送请求的；FireFox 3 则使用由 body.xmlEncoding 指定的编码格式正确的发送文档，但如果未指定编码格式，则使用 UTF-8 编码格式发送。</p>
<p>如果是一个 nsIInputStream 接口，它必须与 nsIUploadChannel 的 setUploadStream() 方法兼容。在这种情况下，将 Content-Length 的头部添加到请求中，它的值则使用 nsIInputStream 接口的 available() 方法获取。任何报头包括在数据流顶部的都会被当做报文主体。所以，应该在发送请求即调用 send() 方法之前使用<a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/API/XMLHttpRequest/send#setrequestheader()">setRequestHeader()</a> 方法设置 Content-Type 头部来指定数据流的 MIME 类型。</p>
<p>发送二进制内容的最佳方法（如上传文件）是使用一个与 send() 方法结合的 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypedArray">ArrayBufferView</a> 或者 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/API/Blob">Blobs</a></p>
<p><strong>案例: GET</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> xhr = <span class="keyword">new</span> <span class="title class_">XMLHttpRequest</span>();</span><br><span class="line">xhr.<span class="title function_">open</span>(<span class="string">&#x27;GET&#x27;</span>, <span class="string">&#x27;/server&#x27;</span>, <span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line">xhr.<span class="property">onload</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">   <span class="comment">// 请求结束后，在此处写处理代码</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">xhr.<span class="title function_">send</span>(<span class="literal">null</span>);</span><br><span class="line"><span class="comment">// xhr.send(&#x27;string&#x27;);</span></span><br><span class="line"><span class="comment">// xhr.send(new Blob());</span></span><br><span class="line"><span class="comment">// xhr.send(new Int8Array());</span></span><br><span class="line"><span class="comment">// xhr.send(document);</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>案例: POST</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> xhr = <span class="keyword">new</span> <span class="title class_">XMLHttpRequest</span>();</span><br><span class="line">xhr.<span class="title function_">open</span>(<span class="string">&quot;POST&quot;</span>, <span class="string">&#x27;/server&#x27;</span>, <span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//发送合适的请求头信息</span></span><br><span class="line">xhr.<span class="title function_">setRequestHeader</span>(<span class="string">&quot;Content-type&quot;</span>, <span class="string">&quot;application/x-www-form-urlencoded&quot;</span>);</span><br><span class="line"></span><br><span class="line">xhr.<span class="property">onload</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// 请求结束后，在此处写处理代码</span></span><br><span class="line">&#125;;</span><br><span class="line">xhr.<span class="title function_">send</span>(<span class="string">&quot;foo=bar&amp;lorem=ipsum&quot;</span>);</span><br><span class="line"><span class="comment">// xhr.send(&#x27;string&#x27;);</span></span><br><span class="line"><span class="comment">// xhr.send(new Blob());</span></span><br><span class="line"><span class="comment">// xhr.send(new Int8Array());</span></span><br><span class="line"><span class="comment">// xhr.send(document);</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="XMLHttpRequest-setRequestHeader"><a href="#XMLHttpRequest-setRequestHeader" class="headerlink" title="XMLHttpRequest.setRequestHeader()"></a><code>XMLHttpRequest.setRequestHeader()</code></h3><p>XMLHttpRequest.setRequestHeader() 是设置 HTTP 请求头部的方法。此方法必须在 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/API/XMLHttpRequest/open">open()</a> 方法和 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/API/XMLHttpRequest/send">send()</a> 之间调用。如果多次对同一个请求头赋值，只会生成一个合并了多个值的请求头。</p>
<p>如果没有设置 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/Accept">Accept</a> 属性，则此发送出<a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/API/XMLHttpRequest/send">send()</a> 的值为此属性的默认值：*&#x2F;*。</p>
<p>安全起见，有些请求头的值只能由 user agent 设置：<a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Glossary/Forbidden_header_name">forbidden header names</a> 和<a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Glossary/Forbidden_response_header_name">forbidden response header names (en-US)</a>。</p>
<blockquote>
<p>自定义一些 header 属性进行跨域请求时，可能会遇到”not allowed by Access-Control-Allow-Headers in preflight response”，你可能需要在你的服务端设置 “Access-Control-Allow-Headers”。</p>
</blockquote>
<p><strong>语法</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">myReq.<span class="title function_">setRequestHeader</span>(header, value);</span><br></pre></td></tr></table></figure>

<p><strong>参数</strong></p>
<ul>
<li>header<ul>
<li>属性的名称。</li>
</ul>
</li>
<li>value<ul>
<li>属性的值。</li>
</ul>
</li>
</ul>
<h2 id="事件"><a href="#事件" class="headerlink" title="事件"></a>事件</h2><h3 id="XMLHttpRequest-abort-event"><a href="#XMLHttpRequest-abort-event" class="headerlink" title="XMLHttpRequest: abort event"></a><code>XMLHttpRequest</code>: <code>abort event</code></h3><p>当一个请求终止时 abort 事件被触发，比如程序执行 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/API/XMLHttpRequest/abort">XMLHttpRequest.abort()</a>。</p>
<table>
<thead>
<tr>
<th>Bubbles</th>
<th>No</th>
</tr>
</thead>
<tbody><tr>
<td>Cancelable</td>
<td>No</td>
</tr>
<tr>
<td>Interface</td>
<td><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/API/ProgressEvent">ProgressEvent</a></td>
</tr>
<tr>
<td>Event handler property</td>
<td><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/conflicting/Web/API/XMLHttpRequest/abort_event">onabort</a></td>
</tr>
</tbody></table>
<p><code>html</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;controls&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">class</span>=<span class="string">&quot;xhr success&quot;</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">name</span>=<span class="string">&quot;xhr&quot;</span> <span class="attr">value</span>=<span class="string">&quot;Click to start XHR (success)&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">class</span>=<span class="string">&quot;xhr error&quot;</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">name</span>=<span class="string">&quot;xhr&quot;</span> <span class="attr">value</span>=<span class="string">&quot;Click to start XHR (error)&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">class</span>=<span class="string">&quot;xhr abort&quot;</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">name</span>=<span class="string">&quot;xhr&quot;</span> <span class="attr">value</span>=<span class="string">&quot;Click to start XHR (abort)&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">textarea</span> <span class="attr">readonly</span> <span class="attr">class</span>=<span class="string">&quot;event-log&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">textarea</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><code>js</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> xhrButtonSuccess = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.xhr.success&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> xhrButtonError = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.xhr.error&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> xhrButtonAbort = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.xhr.abort&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> log = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.event-log&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">handleEvent</span>(<span class="params">e</span>) &#123;</span><br><span class="line">    log.<span class="property">textContent</span> = log.<span class="property">textContent</span> + <span class="string">`<span class="subst">$&#123;e.type&#125;</span>: <span class="subst">$&#123;e.loaded&#125;</span> bytes transferred\n`</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">addListeners</span>(<span class="params">xhr</span>) &#123;</span><br><span class="line">    xhr.<span class="title function_">addEventListener</span>(<span class="string">&#x27;loadstart&#x27;</span>, handleEvent);</span><br><span class="line">    xhr.<span class="title function_">addEventListener</span>(<span class="string">&#x27;load&#x27;</span>, handleEvent);</span><br><span class="line">    xhr.<span class="title function_">addEventListener</span>(<span class="string">&#x27;loadend&#x27;</span>, handleEvent);</span><br><span class="line">    xhr.<span class="title function_">addEventListener</span>(<span class="string">&#x27;progress&#x27;</span>, handleEvent);</span><br><span class="line">    xhr.<span class="title function_">addEventListener</span>(<span class="string">&#x27;error&#x27;</span>, handleEvent);</span><br><span class="line">    xhr.<span class="title function_">addEventListener</span>(<span class="string">&#x27;abort&#x27;</span>, handleEvent);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">runXHR</span>(<span class="params">url</span>) &#123;</span><br><span class="line">    log.<span class="property">textContent</span> = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> xhr = <span class="keyword">new</span> <span class="title class_">XMLHttpRequest</span>();</span><br><span class="line">    <span class="title function_">addListeners</span>(xhr);</span><br><span class="line">    xhr.<span class="title function_">open</span>(<span class="string">&quot;GET&quot;</span>, url);</span><br><span class="line">    xhr.<span class="title function_">send</span>();</span><br><span class="line">    <span class="keyword">return</span> xhr;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">xhrButtonSuccess.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="title function_">runXHR</span>(<span class="string">&#x27;https://mdn.mozillademos.org/files/16553/DgsZYJNXcAIPwzy.jpg&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">xhrButtonError.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="title function_">runXHR</span>(<span class="string">&#x27;https://somewhere.org/i-dont-exist&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">xhrButtonAbort.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="title function_">runXHR</span>(<span class="string">&#x27;https://mdn.mozillademos.org/files/16553/DgsZYJNXcAIPwzy.jpg&#x27;</span>).<span class="title function_">abort</span>();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h3 id="XMLHttpRequest-error-事件"><a href="#XMLHttpRequest-error-事件" class="headerlink" title="XMLHttpRequest: error 事件"></a><code>XMLHttpRequest: error 事件</code></h3><p>当请求遇到错误时，将触发error 事件。</p>
<table>
<thead>
<tr>
<th>可冒泡</th>
<th>No</th>
</tr>
</thead>
<tbody><tr>
<td>可取消</td>
<td>No</td>
</tr>
<tr>
<td>接口</td>
<td><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/API/ProgressEvent">ProgressEvent</a></td>
</tr>
<tr>
<td>事件处理程序属性</td>
<td><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/conflicting/Web/API/XMLHttpRequest/error_event">onerror</a></td>
</tr>
</tbody></table>
<h3 id="XMLHttpRequest-load-event"><a href="#XMLHttpRequest-load-event" class="headerlink" title="XMLHttpRequest: load event"></a><code>XMLHttpRequest: load event</code></h3><p>当一个<a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/API/XMLHttpRequest">XMLHttpRequest</a>请求完成的时候会触发load 事件。</p>
<table>
<thead>
<tr>
<th>Bubbles</th>
<th>No</th>
</tr>
</thead>
<tbody><tr>
<td>Cancelable</td>
<td>No</td>
</tr>
<tr>
<td>Interface</td>
<td><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/API/ProgressEvent">ProgressEvent</a></td>
</tr>
<tr>
<td>Event handler property</td>
<td><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/conflicting/Web/API/XMLHttpRequest/load_event">onload</a></td>
</tr>
</tbody></table>
<h3 id="loadend"><a href="#loadend" class="headerlink" title="loadend"></a><code>loadend</code></h3><p>loadend 事件总是在一个资源的加载进度停止之后被触发 (例如，在已经触发 “error”，“abort” 或 “load” 事件之后)。这适用于 <code>XMLHttpRequest</code> 调用，以及 <code>&lt;img&gt; </code>或<code>&lt;video&gt;</code>之类元素的内容。</p>
<h3 id="loadstart"><a href="#loadstart" class="headerlink" title="loadstart"></a><code>loadstart</code></h3><p>当程序开始加载时，loadstart 事件将被触发。这个事件可以被 <code>XMLHttpRequest</code> 调用，也适用于 <code>&lt;img&gt; </code>和 <code>&lt;video&gt;</code> 元素。</p>
<h3 id="progress-event"><a href="#progress-event" class="headerlink" title="progress event"></a><code>progress event</code></h3><p>progress事件会在请求接收到数据的时候被周期性触发。</p>
<table>
<thead>
<tr>
<th>Bubbles</th>
<th>No</th>
</tr>
</thead>
<tbody><tr>
<td>Cancelable</td>
<td>No</td>
</tr>
<tr>
<td>Interface</td>
<td><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/API/ProgressEvent">ProgressEvent</a></td>
</tr>
<tr>
<td>Event handler property</td>
<td><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/conflicting/Web/API/XMLHttpRequest/progress_event">onprogress</a></td>
</tr>
</tbody></table>
<h3 id="timeout"><a href="#timeout" class="headerlink" title="timeout"></a><code>timeout</code></h3><p>当进度由于预定时间到期而终止时，会触发timeout 事件。</p>
<table>
<thead>
<tr>
<th>冒泡</th>
<th>否</th>
</tr>
</thead>
<tbody><tr>
<td>可取消</td>
<td>否</td>
</tr>
<tr>
<td>目标对象</td>
<td><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/API/XMLHttpRequest">XMLHttpRequest</a></td>
</tr>
<tr>
<td>接口</td>
<td><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/API/ProgressEvent">ProgressEvent</a></td>
</tr>
</tbody></table>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> client = <span class="keyword">new</span> <span class="title class_">XMLHttpRequest</span>()</span><br><span class="line">  client.<span class="title function_">open</span>(<span class="string">&quot;GET&quot;</span>, <span class="string">&quot;http://www.example.org/example.txt&quot;</span>)</span><br><span class="line">  client.<span class="property">ontimeout</span> = <span class="keyword">function</span>(<span class="params">e</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&quot;Timeout!!&quot;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  client.<span class="title function_">send</span>()</span><br></pre></td></tr></table></figure>



<h2 id="同步和异步请求"><a href="#同步和异步请求" class="headerlink" title="同步和异步请求"></a>同步和异步请求</h2><p><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/API/XMLHttpRequest/Synchronous_and_Asynchronous_Requests">同步和异步请求 - Web API 接口参考 | MDN (mozilla.org)</a></p>
<p><code>XMLHttpRequest</code> 支持同步和异步通信。但是，一般来说，出于性能原因，异步请求应优先于同步请求。</p>
<p>同步请求阻止代码的执行，这会导致屏幕上出现“冻结”和无响应的用户体验。</p>
<h3 id="异步请求"><a href="#异步请求" class="headerlink" title="异步请求"></a>异步请求</h3><p>如果你使用<code>XMLHttpRequest</code>发送异步请求，那么当请求的响应数据完全收到之时，会执行一个指定的回调函数，而在执行异步请求的同时，浏览器会正常地执行其他事务的处理。</p>
<h2 id="2-0新特性"><a href="#2-0新特性" class="headerlink" title="2.0新特性"></a>2.0新特性</h2><ul>
<li>可以上传文件</li>
<li>可以设置<code>HTTP</code>请求的时限</li>
<li>可以使用<code>FormDataa</code>对象管理表单数据</li>
<li>可以请求不同域名下的数据（跨域请求）</li>
<li>可以获取服务端的二进制数据</li>
<li>可以获取数据传输的进度信息</li>
</ul>
<p>应用：</p>
<ul>
<li>进行大文件的断点续传，兼容性好</li>
</ul>
<h1 id="AJAX"><a href="#AJAX" class="headerlink" title="AJAX"></a><code>AJAX</code></h1><p><strong>AJAX</strong>（Asynchronous <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Glossary/JavaScript">JavaScript</a> And <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Glossary/XML">XML</a> ）是一种使用 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Glossary/XHR_(XMLHttpRequest)">XMLHttpRequest</a> 技术构建更复杂，动态的网页的编程实践。</p>
<p>AJAX 允许只更新一个 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Glossary/HTML">HTML</a> 页面的部分 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Glossary/DOM">DOM</a>，而无须重新加载整个页面。AJAX 还允许异步工作，这意味着当网页的一部分正试图重新加载时，您的代码可以继续运行（相比之下，同步会阻止代码继续运行，直到这部分的网页完成重新加载）。</p>
<p>通过交互式网站和现代 Web 标准，AJAX 正在逐渐被 JavaScript 框架中的函数和官方的 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/API/Fetch_API"><code>Fetch API</code></a> 标准取代。</p>
<h1 id="Axios-教程二"><a href="#Axios-教程二" class="headerlink" title="Axios_教程二"></a><code>Axios</code>_教程二</h1><p>来源：<a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1NJ41197u6?p=1">https://www.bilibili.com/video/BV1NJ41197u6?p=1</a></p>
<h2 id="1-Http相关"><a href="#1-Http相关" class="headerlink" title="1.Http相关"></a>1.<code>Http</code>相关</h2><h3 id="1-1-MDN文档"><a href="#1-1-MDN文档" class="headerlink" title="1.1.MDN文档"></a>1.1.<code>MDN</code>文档</h3><p><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP">HTTP | MDN (mozilla.org)</a></p>
<p>这个页面的每个点都可以过一下，大概花一个多小时</p>
<ul>
<li><p><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Overview">HTTP 概述</a></p>
</li>
<li><p><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Caching">HTTP 缓存</a></p>
</li>
<li><p><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Cookies">HTTP Cookie</a></p>
</li>
<li><p><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/CORS">跨域资源共享（CORS）</a></p>
</li>
<li><p><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Basics_of_HTTP/Evolution_of_HTTP">HTTP 的演变</a></p>
</li>
<li><p><a target="_blank" rel="noopener" href="https://wiki.mozilla.org/Security/Guidelines/Web_Security">Mozilla Web 安全准则</a></p>
</li>
<li><p><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Messages">HTTP 消息</a></p>
</li>
<li><p><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Session">典型的 HTTP 会话</a></p>
</li>
<li><p><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Connection_management_in_HTTP_1.x">HTTP&#x2F;1.x 中的连接管理</a></p>
</li>
<li><p><a target="_blank" rel="noopener" href="https://www.html5rocks.com/en/tutorials/internals/howbrowserswork/">浏览器的工作原理</a></p>
<ul>
<li>一篇非常全面的关于浏览器内部实现与通过 HTTP 协议的请求流的文章。可以说是所有 Web 开发者的<strong>必读内容</strong>。</li>
</ul>
</li>
</ul>
<h3 id="1-2-HTTP请求交互的基本过程"><a href="#1-2-HTTP请求交互的基本过程" class="headerlink" title="1.2.HTTP请求交互的基本过程"></a>1.2.<code>HTTP</code>请求交互的基本过程</h3><p><img src="/Ajax&Axios.assets/image-20220511163157010.png" alt="image-20220511163157010"></p>
<ul>
<li>前台应用从浏览器端向服务器发送<code>HTTP</code>请求（请求报文）</li>
<li>后台服务器接收到请求后，调度服务器应用处理请求，向浏览器端返回<code>HTTP</code>响应（响应报文）</li>
<li>浏览器接收到响应，解析显示响应体&#x2F;调用监视回调</li>
</ul>
<p>浏览器要发<code>ajax</code>请求，有两种方式</p>
<ul>
<li><p><code>XHR</code>对象</p>
</li>
<li><p><code>Fetch</code>函数：浏览器自己实现了</p>
<p><img src="/Ajax&Axios.assets/image-20220511163507948.png" alt="image-20220511163507948"></p>
</li>
</ul>
<h3 id="1-3-HTTP请求报文"><a href="#1-3-HTTP请求报文" class="headerlink" title="1.3.HTTP请求报文"></a>1.3.<code>HTTP</code>请求报文</h3><p>请求报文的组成</p>
<ul>
<li><p>请求行</p>
<ul>
<li>请求方式</li>
<li>请求地址</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">method url </span><br><span class="line">GET /product_detail?id=2</span><br><span class="line">POST /login</span><br></pre></td></tr></table></figure>
</li>
<li><p>多个请求头</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Host:www.baidu.com</span><br><span class="line">Cookie:BAIDUID=AD808SFH8;BIDUPSID=SHKJ88DS;</span><br><span class="line">Content-Type:application/x-wwww-form-urlencoded 或者 application/json </span><br></pre></td></tr></table></figure>
</li>
<li><p>请求体</p>
<ul>
<li>不同的参数类型，要告诉服务器具体的<code>Content-Type</code></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">username=tom&amp;pwd=123</span><br><span class="line">&#123;&quot;username&quot;:&quot;tom&quot;,&quot;pwd&quot;:123&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="1-4-HTTP响应报文"><a href="#1-4-HTTP响应报文" class="headerlink" title="1.4.HTTP响应报文"></a>1.4.<code>HTTP</code>响应报文</h3><ul>
<li><p>响应状态行</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">status statusText</span><br></pre></td></tr></table></figure>
</li>
<li><p>多个响应头</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Content-Type:text/html;charset=8</span><br><span class="line">set-Cookie:BD_CK_SAM;path=/</span><br></pre></td></tr></table></figure>
</li>
<li><p>响应体</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">html 文本/json 文本/js/css/图片</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="1-5-POST请求体参数格式"><a href="#1-5-POST请求体参数格式" class="headerlink" title="1.5.POST请求体参数格式"></a>1.5.<code>POST</code>请求体参数格式</h3><ul>
<li><code>Content-Type:application/x-www-form-urlencoded;charset=utf-8</code><ul>
<li>用于键值对参数，参数的键值用<code>=</code>连接，参数之间用<code>&amp;</code>连接</li>
<li>例如：<code>name=%3D%6D%9U&amp;age=12</code></li>
</ul>
</li>
<li><code>Content-Type:application/json;charset=utf-8</code><ul>
<li>用于<code>json</code>字符串参数</li>
<li>例如：<code>&#123;&quot;name&quot;:&quot;sai&quot;,&quot;age&quot;:12&#125;</code></li>
</ul>
</li>
<li><code>Content-Type:multipart/form-data</code><ul>
<li>用于文件上传</li>
</ul>
</li>
</ul>
<h3 id="1-6-常见的响应状态码"><a href="#1-6-常见的响应状态码" class="headerlink" title="1.6.常见的响应状态码"></a>1.6.常见的响应状态码</h3><p>每个状态码对应的文本是固定的</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">200 OK 请求成功。一般用于GET和POST请求</span><br><span class="line">201 Created 已创建。成功请求并创建了新的资源</span><br><span class="line">401 Unauthorized 未授权/请求要求用户的身份认证</span><br><span class="line">404 Not Found 服务器无法根据客户端的请求找到资源</span><br><span class="line">500 Internal Server Error 服务器内部错误，无法完成请求</span><br></pre></td></tr></table></figure>

<h3 id="1-7-不同类型的请求及其作用"><a href="#1-7-不同类型的请求及其作用" class="headerlink" title="1.7.不同类型的请求及其作用"></a>1.7.不同类型的请求及其作用</h3><ul>
<li><code>GET</code>：从服务器读取数据</li>
<li><code>POST</code>：向服务器添加新数据</li>
<li><code>PUT</code>：更新服务器端已有数据</li>
<li><code>DELETE</code>：删除服务器端数据</li>
</ul>
<h3 id="1-8-API的分类"><a href="#1-8-API的分类" class="headerlink" title="1.8.API的分类"></a>1.8.<code>API</code>的分类</h3><ul>
<li><code>REST API</code>：<code>restful</code><ul>
<li>发送请求进行<code>CURD</code>那个操作由请求方式来决定</li>
<li>同一个请求路径可以进行多个操作</li>
<li>请求方式会用到<code>GET/POST/PUT/DELETE</code></li>
</ul>
</li>
<li>非<code>REST API</code>：<code>restless</code><ul>
<li>请求方式不决定请求的<code>CURD</code>操作</li>
<li>一个请求路径只对应一个操作</li>
<li>一般只有<code>GET/POST</code></li>
</ul>
</li>
</ul>
<h3 id="1-9-json-server搭建REST接口"><a href="#1-9-json-server搭建REST接口" class="headerlink" title="1.9.json-server搭建REST接口"></a>1.9.<code>json-server</code>搭建<code>REST</code>接口</h3><h4 id="1-9-1-json-server是什么"><a href="#1-9-1-json-server是什么" class="headerlink" title="1.9.1.json-server是什么"></a>1.9.1.<code>json-server</code>是什么</h4><p>可以30秒快速搭建<code>REST</code>接口</p>
<p><a target="_blank" rel="noopener" href="https://github.com/typicode/json-server">https://github.com/typicode/json-server</a></p>
<h4 id="1-9-2-使用json-server"><a href="#1-9-2-使用json-server" class="headerlink" title="1.9.2.使用json-server"></a>1.9.2.使用<code>json-server</code></h4><p>新建目录<code>json-server</code>，安装包</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install json-server -D</span><br></pre></td></tr></table></figure>

<p>目录下新建<code>src/db.json</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;posts&quot;: [</span><br><span class="line">    &#123; &quot;id&quot;: 1, &quot;title&quot;: &quot;json-server&quot;, &quot;author&quot;: &quot;typicode&quot; &#125;</span><br><span class="line">  ],</span><br><span class="line">  &quot;comments&quot;: [</span><br><span class="line">    &#123; &quot;id&quot;: 1, &quot;body&quot;: &quot;some comment&quot;, &quot;postId&quot;: 1 &#125;</span><br><span class="line">  ],</span><br><span class="line">  &quot;profile&quot;: &#123; &quot;name&quot;: &quot;typicode&quot; &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>运行</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npx json-server --watch ./src/db.json</span><br></pre></td></tr></table></figure>

<h4 id="1-9-3-使用浏览器访问测试"><a href="#1-9-3-使用浏览器访问测试" class="headerlink" title="1.9.3.使用浏览器访问测试"></a>1.9.3.使用浏览器访问测试</h4><p>根据提示打开浏览器</p>
<p><img src="/Ajax&Axios.assets/image-20220608203614657.png" alt="image-20220608203614657"></p>
<p>我们给数据源新增条数据，说明<code>GET</code>请求的<code>params</code>参数和<code>query</code>参数的区别</p>
<p><code>db.json</code></p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;posts&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="punctuation">&#123;</span> <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="number">1</span><span class="punctuation">,</span> <span class="attr">&quot;title&quot;</span><span class="punctuation">:</span> <span class="string">&quot;json-server&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;author&quot;</span><span class="punctuation">:</span> <span class="string">&quot;typicode&quot;</span> <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#123;</span> <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="number">2</span><span class="punctuation">,</span> <span class="attr">&quot;title&quot;</span><span class="punctuation">:</span> <span class="string">&quot;json-server2&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;author&quot;</span><span class="punctuation">:</span> <span class="string">&quot;typicode2&quot;</span> <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;comments&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="punctuation">&#123;</span> <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="number">1</span><span class="punctuation">,</span> <span class="attr">&quot;body&quot;</span><span class="punctuation">:</span> <span class="string">&quot;some comment&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;postId&quot;</span><span class="punctuation">:</span> <span class="number">1</span> <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;profile&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span> <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;typicode&quot;</span> <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<p>使用<code>params</code>参数查询数据1，返回的是一个新的对象</p>
<p><img src="/Ajax&Axios.assets/image-20220608203944861.png" alt="image-20220608203944861"></p>
<p>使用<code>query</code>参数查询数据1，返回的是根据参数过滤后的数据，仍然是一个数组</p>
<p><img src="/Ajax&Axios.assets/image-20220608204103413.png" alt="image-20220608204103413"></p>
<h4 id="1-9-4-使用axios访问测试"><a href="#1-9-4-使用axios访问测试" class="headerlink" title="1.9.4.使用axios访问测试"></a>1.9.4.使用<code>axios</code>访问测试</h4><p>使用<code>axios</code>在线库：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://cdn.bootcdn.net/ajax/libs/axios/0.27.2/axios.min.js</span><br></pre></td></tr></table></figure>

<h5 id="测试GET请求"><a href="#测试GET请求" class="headerlink" title="测试GET请求"></a>测试<code>GET</code>请求</h5><p><code>index.html</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">button</span> <span class="attr">onclick</span>=<span class="string">&quot;testGET()&quot;</span>&gt;</span>GET请求<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">button</span> <span class="attr">onclick</span>=<span class="string">&quot;testPOST()&quot;</span>&gt;</span>POST请求<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">button</span> <span class="attr">onclick</span>=<span class="string">&quot;testPUT()&quot;</span>&gt;</span>PUT请求<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">button</span> <span class="attr">onclick</span>=<span class="string">&quot;testDELETE()&quot;</span>&gt;</span>DELETE请求<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.bootcdn.net/ajax/libs/axios/0.27.2/axios.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">		<span class="keyword">function</span> <span class="title function_">testGET</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">			axios</span></span><br><span class="line"><span class="language-javascript">				.<span class="title function_">get</span>(<span class="string">&#x27;http://localhost:3000/posts&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">				.<span class="title function_">then</span>(<span class="function"><span class="params">respose</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">					<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;/posts get&#x27;</span>, respose.<span class="property">data</span>)</span></span><br><span class="line"><span class="language-javascript">				&#125;)</span></span><br><span class="line"><span class="language-javascript">		&#125;</span></span><br><span class="line"><span class="language-javascript">	</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>



<p><img src="/Ajax&Axios.assets/image-20220608210827674.png" alt="image-20220608210827674"></p>
<p>使用<code>params</code>参数</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">testGET</span>(<span class="params"></span>) &#123;</span><br><span class="line">	axios</span><br><span class="line">		.<span class="title function_">get</span>(<span class="string">&#x27;http://localhost:3000/posts/1&#x27;</span>)</span><br><span class="line">		.<span class="title function_">then</span>(<span class="function"><span class="params">respose</span> =&gt;</span> &#123;</span><br><span class="line">			<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;/posts get&#x27;</span>, respose.<span class="property">data</span>)</span><br><span class="line">		&#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="/Ajax&Axios.assets/image-20220608211010520.png" alt="image-20220608211010520"></p>
<p>使用<code>query</code>参数</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">testGET</span>(<span class="params"></span>) &#123;</span><br><span class="line">	axios</span><br><span class="line">		.<span class="title function_">get</span>(<span class="string">&#x27;http://localhost:3000/posts?id=2&#x27;</span>)</span><br><span class="line">		.<span class="title function_">then</span>(<span class="function"><span class="params">respose</span> =&gt;</span> &#123;</span><br><span class="line">			<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;/posts get&#x27;</span>, respose.<span class="property">data</span>)</span><br><span class="line">		&#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="/Ajax&Axios.assets/image-20220608211528801.png" alt="image-20220608211528801"></p>
<h5 id="测试POST请求"><a href="#测试POST请求" class="headerlink" title="测试POST请求"></a>测试<code>POST</code>请求</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">testPOST</span>(<span class="params"></span>) &#123;</span><br><span class="line">	axios</span><br><span class="line">		.<span class="title function_">post</span>(</span><br><span class="line">			<span class="string">&#x27;http://localhost:3000/posts&#x27;</span>,</span><br><span class="line">			&#123;<span class="string">&quot;title&quot;</span>: <span class="string">&quot;json-server3&quot;</span>, <span class="string">&quot;author&quot;</span>: <span class="string">&quot;typicode3&quot;</span> &#125;</span><br><span class="line">		)</span><br><span class="line">		.<span class="title function_">then</span>(<span class="function"><span class="params">response</span> =&gt;</span> &#123;</span><br><span class="line">			<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;/posts post&#x27;</span>, response.<span class="property">data</span>)</span><br><span class="line">		&#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>注意，新插入的数据中心，不用写<code>id</code>字段</p>
<p>结果：<code>db.json</code>中真被写入了一条数据</p>
<p><img src="/Ajax&Axios.assets/image-20220609055832043.png" alt="image-20220609055832043"></p>
<h5 id="测试PUT请求"><a href="#测试PUT请求" class="headerlink" title="测试PUT请求"></a>测试<code>PUT</code>请求</h5><p><code>PUT</code>请求要具体到某一条数据中，同时也不要写<code>id</code>字段</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">testPUT</span>(<span class="params"></span>) &#123;</span><br><span class="line">	axios</span><br><span class="line">		.<span class="title function_">put</span>(</span><br><span class="line">			<span class="string">&#x27;http://localhost:3000/posts/3&#x27;</span>,</span><br><span class="line">			&#123;<span class="string">&quot;title&quot;</span>: <span class="string">&quot;json-server3-put&quot;</span>, <span class="string">&quot;author&quot;</span>: <span class="string">&quot;typicode3-put&quot;</span> &#125;</span><br><span class="line">		)</span><br><span class="line">		.<span class="title function_">then</span>(<span class="function"><span class="params">response</span> =&gt;</span> &#123;</span><br><span class="line">			<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;/posts put&#x27;</span>, response.<span class="property">data</span>)</span><br><span class="line">		&#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>更新某一条数据，结果如下</p>
<p><img src="/Ajax&Axios.assets/image-20220609060926894.png" alt="image-20220609060926894"></p>
<h5 id="测试DELETE请求"><a href="#测试DELETE请求" class="headerlink" title="测试DELETE请求"></a>测试<code>DELETE</code>请求</h5><p>不需要携带参数，直接请求删除的某一条具体的数据，需要携带参数</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">testDELETE</span>(<span class="params"></span>) &#123;</span><br><span class="line">	axios</span><br><span class="line">		.<span class="title function_">delete</span>(</span><br><span class="line">			<span class="string">&#x27;http://localhost:3000/posts/3&#x27;</span></span><br><span class="line">		)</span><br><span class="line">		.<span class="title function_">then</span>(<span class="function"><span class="params">response</span> =&gt;</span> &#123;</span><br><span class="line">			<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;/posts delete&#x27;</span>, response.<span class="property">data</span>)</span><br><span class="line">		&#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>只有两条数据了</p>
<p><img src="/Ajax&Axios.assets/image-20220609061250178.png" alt="image-20220609061250178"></p>
<h2 id="2-XHR的理解和使用"><a href="#2-XHR的理解和使用" class="headerlink" title="2.XHR的理解和使用"></a>2.<code>XHR</code>的理解和使用</h2><h3 id="2-1-MDN文档"><a href="#2-1-MDN文档" class="headerlink" title="2.1.MDN文档"></a>2.1.<code>MDN</code>文档</h3><p><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/API/XMLHttpRequest">https://developer.mozilla.org/zh-CN/docs/Web/API/XMLHttpRequest</a></p>
<h3 id="2-2-理解"><a href="#2-2-理解" class="headerlink" title="2.2.理解"></a>2.2.理解</h3><ul>
<li>使用<code>XMLHttpRequest(XHR)</code>对象可以与服务器进行交互，也就是发送<code>ajax</code>请求</li>
<li>前端可以获取到数据，而无需让整个页面刷新</li>
<li>这使得<code>web</code>页面可以只更新页面的布局，而不影响用户的操作</li>
</ul>
<h3 id="2-3-区别一般http请求和ajax请求"><a href="#2-3-区别一般http请求和ajax请求" class="headerlink" title="2.3.区别一般http请求和ajax请求"></a>2.3.区别一般<code>http</code>请求和<code>ajax</code>请求</h3><ul>
<li><code>ajax</code>请求是一种特别的<code>http</code>请求</li>
<li>对服务器端来说，没有任何区别，区别在于浏览器</li>
<li>浏览器端发请求，只有<code>XHR</code>或<code>fetch</code>发出的才是<code>ajax</code>请求，其他所有的都是非<code>ajax</code>请求</li>
<li>浏览器端接受到响应<ul>
<li>一般请求：浏览器一般会直接显示响应体数据，也就是我们常说的刷新&#x2F;跳转页面</li>
<li><code>ajax</code>请求：浏览器不会对页面进行任何更新操作，只是调用监视的回调函数并传入响应相关数据</li>
</ul>
</li>
</ul>
<h3 id="2-4API"><a href="#2-4API" class="headerlink" title="2.4API"></a>2.4<code>API</code></h3><p><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/API/XMLHttpRequest">https://developer.mozilla.org/zh-CN/docs/Web/API/XMLHttpRequest</a></p>
<ul>
<li><code>XMLHttpRequest()</code>：创建<code>XHR</code>对象的构造函数</li>
<li><code>status</code>：响应状态码，比如200、204</li>
<li><code>status Text</code>：响应状态文本</li>
<li><code>readyState</code>：标识请求状态的只读属性<ul>
<li>0：初始</li>
<li>1：<code>open()</code>之后</li>
<li>2：<code>send()</code>之后</li>
<li>3：请求中</li>
<li>4：请求完成<ul>
<li>请求完成不代表请求成功</li>
<li>请求完成后，需要再判定状态码</li>
</ul>
</li>
</ul>
</li>
<li><code>onreadstatechange</code>：绑定<code>readyState</code>改变的监听</li>
<li><code>responseType</code>：指定响应数据类型，如果是<code>json</code>，得到响应后的自动解析响应</li>
<li><code>response</code>：响应体数据，类型取决于<code>responseType</code>的指定</li>
<li><code>timeout</code>：指定请求超时时间，默认为0代表没有限制</li>
<li><code>ontimeout</code>：绑定超时的监听</li>
<li><code>onerror</code>：绑定请求网络错误的监听</li>
<li><code>open()</code>：初始化一个请求，参数为:<code>(method, url [, async])</code></li>
<li><code>send(data)</code>：发送请求<ul>
<li>如果是同步请求，该方法会立即被执行</li>
</ul>
</li>
<li><code>abort()</code>：中断请求<ul>
<li>请求已经发出去了</li>
</ul>
</li>
<li><code>getResponseHeader(name)</code>：获取指定名称的响应头值</li>
<li><code>getAllResponseHeaders()</code>：获取所有响应头组成的字符串</li>
<li><code>setRequestHeader(name, value)</code>：设置请求头</li>
</ul>
<h3 id="2-5-XHR的ajax封装（简单版axios）"><a href="#2-5-XHR的ajax封装（简单版axios）" class="headerlink" title="2.5.XHR的ajax封装（简单版axios）"></a>2.5.<code>XHR</code>的<code>ajax</code>封装（简单版<code>axios</code>）</h3><h4 id="2-5-1-特点"><a href="#2-5-1-特点" class="headerlink" title="2.5.1.特点"></a>2.5.1.特点</h4><ul>
<li><p>函数的返回值为<code>promise</code>，成功的结果为<code>response</code>，异常的结果为<code>error</code></p>
</li>
<li><p>能处理多种类型的请求：<code>GET/POST/PUT/DELETE</code></p>
</li>
<li><p>函数的参数为一个配置对象</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">url</span>: <span class="string">&#x27;&#x27;</span>, <span class="comment">//请求地址</span></span><br><span class="line">    <span class="attr">method</span>: <span class="string">&#x27;&#x27;</span>, <span class="comment">// 请求方法</span></span><br><span class="line">    <span class="attr">params</span>: &#123;&#125;, <span class="comment">// GET/DELETE请求的query参数</span></span><br><span class="line">    <span class="attr">data</span>: &#123;&#125;, <span class="comment">// POST或DELETE请求的请求体参数</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>响应<code>json</code>数据自动解析为<code>js</code></p>
</li>
</ul>
<p>当我们知道一个函数的某些特点后，能够自己封装函数实现这些特点，是一项必备的能力</p>
<h4 id="2-5-2-编码实现"><a href="#2-5-2-编码实现" class="headerlink" title="2.5.2.编码实现"></a>2.5.2.编码实现</h4><p><strong>参数：</strong></p>
<ul>
<li><code>url</code>是必填项</li>
<li>其他配置项可以给定一个默认值</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">axios</span>(<span class="params">&#123;</span></span><br><span class="line"><span class="params">	url,</span></span><br><span class="line"><span class="params">	method=<span class="string">&#x27;GET&#x27;</span>,</span></span><br><span class="line"><span class="params">	params=&#123;&#125;,</span></span><br><span class="line"><span class="params">	data=&#123;&#125;</span></span><br><span class="line"><span class="params">&#125;</span>) &#123;</span><br><span class="line">	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>返回值：</strong></p>
<ul>
<li>返回值是一个<code>Promise</code></li>
<li><code>Promsie</code>内部<ul>
<li>执行异步<code>ajax</code>请求<ul>
<li>创建<code>xhr</code>对象</li>
<li>打开连接（初始化请求，还没有请求）</li>
<li>发送请求</li>
</ul>
</li>
<li>如果请求成功了，调用<code>resolve()</code></li>
<li>如果请求失败了，调用<code>reject()</code></li>
</ul>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">axios</span>(<span class="params">&#123;</span></span><br><span class="line"><span class="params">	url,</span></span><br><span class="line"><span class="params">	method=<span class="string">&#x27;GET&#x27;</span>,</span></span><br><span class="line"><span class="params">	params=&#123;&#125;,</span></span><br><span class="line"><span class="params">	data=&#123;&#125;</span></span><br><span class="line"><span class="params">&#125;</span>) &#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promsise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">		</span><br><span class="line">	&#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>使用测试</strong></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">button</span> <span class="attr">onclick</span>=<span class="string">&quot;testGET()&quot;</span>&gt;</span>GET请求<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">button</span> <span class="attr">onclick</span>=<span class="string">&quot;testPOST()&quot;</span>&gt;</span>POST请求<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">button</span> <span class="attr">onclick</span>=<span class="string">&quot;testPUT()&quot;</span>&gt;</span>PUT请求<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">button</span> <span class="attr">onclick</span>=<span class="string">&quot;testDELETE()&quot;</span>&gt;</span>DELETE请求<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">		</span><br><span class="line">		<span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;./js/axios.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">			</span></span><br><span class="line"><span class="language-javascript">			<span class="comment">// console.log(new axios(&#123;url:&#x27;http://localhost:3000/posts&#x27;&#125;))</span></span></span><br><span class="line"><span class="language-javascript">			<span class="keyword">function</span> <span class="title function_">testGET</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">				<span class="title function_">axios</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">					<span class="attr">url</span>: <span class="string">&#x27;http://localhost:3000/posts&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">					<span class="attr">method</span>: <span class="string">&#x27;GET&#x27;</span></span></span><br><span class="line"><span class="language-javascript">				&#125;)</span></span><br><span class="line"><span class="language-javascript">			&#125;</span></span><br><span class="line"><span class="language-javascript">		</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>结果：</p>
<p><img src="/Ajax&Axios.assets/image-20220616062306859.png" alt="image-20220616062306859"></p>
<p><strong>完善参数：</strong></p>
<ul>
<li><p><code>data</code>可以是<code>json</code>类型的字符串，也可以是<code>urlencoding</code>类型的字符串</p>
<ul>
<li><code>json</code>格式需要使用<code>JSON.stringify(data)</code>，同时需要添加请求头：<code>application/json;charset=utf-8</code></li>
<li>注意，有的后台只支持<code>urlencoding</code>格式的请求体参数，但我们这里的<code>json-server</code>是都支持的</li>
</ul>
</li>
<li><p><code>post</code>请求发送<code>json</code>数据的逻辑完善</p>
<p><code>axios.js</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">axios</span>(<span class="params">&#123;</span></span><br><span class="line"><span class="params">	url,</span></span><br><span class="line"><span class="params">	method=<span class="string">&#x27;GET&#x27;</span>,</span></span><br><span class="line"><span class="params">	params=&#123;&#125;,</span></span><br><span class="line"><span class="params">	data=&#123;&#125;</span></span><br><span class="line"><span class="params">&#125;</span>) &#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">		<span class="keyword">const</span> request = <span class="keyword">new</span> <span class="title class_">XMLHttpRequest</span>()</span><br><span class="line">		request.<span class="title function_">open</span>(method, url, <span class="literal">true</span>)</span><br><span class="line">		</span><br><span class="line">		<span class="keyword">if</span>(method === <span class="string">&#x27;GET&#x27;</span>) &#123;</span><br><span class="line">			request.<span class="title function_">send</span>(<span class="literal">null</span>)</span><br><span class="line">		&#125; <span class="keyword">else</span> <span class="keyword">if</span>(method === <span class="string">&#x27;POST&#x27;</span>) &#123;</span><br><span class="line">			request.<span class="title function_">setRequestHeader</span>(<span class="string">&#x27;Content-Type&#x27;</span>, <span class="string">&#x27;application/json;charset=utf-8&#x27;</span>)</span><br><span class="line">			request.<span class="title function_">send</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(data))</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>index.html</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">&lt;!<span class="variable constant_">DOCTYPE</span> html&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">	<span class="tag">&lt;<span class="name">head</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">		<span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">		<span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">	<span class="tag">&lt;/<span class="name">head</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">	<span class="tag">&lt;<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">		<span class="tag">&lt;<span class="name">button</span> <span class="attr">onclick</span>=<span class="string">&quot;testGET()&quot;</span>&gt;</span>GET请求<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">		<span class="tag">&lt;<span class="name">button</span> <span class="attr">onclick</span>=<span class="string">&quot;testPOST()&quot;</span>&gt;</span>POST请求<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">		<span class="tag">&lt;<span class="name">button</span> <span class="attr">onclick</span>=<span class="string">&quot;testPUT()&quot;</span>&gt;</span>PUT请求<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">		<span class="tag">&lt;<span class="name">button</span> <span class="attr">onclick</span>=<span class="string">&quot;testDELETE()&quot;</span>&gt;</span>DELETE请求<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">		</span></span><br><span class="line"><span class="language-xml">		<span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;./js/axios.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">		<span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="keyword">new</span> <span class="title function_">axios</span>(&#123;<span class="attr">url</span>:<span class="string">&#x27;http://localhost:3000/posts&#x27;</span>&#125;))</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			<span class="keyword">function</span> <span class="title function_">testPOST</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">				<span class="title function_">axios</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">					<span class="attr">url</span>: <span class="string">&#x27;http://localhost:3000/posts&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">					<span class="attr">method</span>: <span class="string">&#x27;POST&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">					<span class="attr">data</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">						<span class="attr">id</span>: <span class="number">3</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">						<span class="attr">title</span>: <span class="string">&#x27;axios-post&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">						<span class="attr">author</span>: <span class="string">&#x27;axios&#x27;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">					&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">				&#125;)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">		</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">	<span class="tag">&lt;/<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<p>结果，新增数据成功：</p>
<p><img src="/Ajax&Axios.assets/image-20220616063551173.png" alt="image-20220616063551173"></p>
</li>
</ul>
<h4 id="2-5-3-使用测试"><a href="#2-5-3-使用测试" class="headerlink" title="2.5.3.使用测试"></a>2.5.3.使用测试</h4><h2 id="3-axios的理解和使用"><a href="#3-axios的理解和使用" class="headerlink" title="3.axios的理解和使用"></a>3.<code>axios</code>的理解和使用</h2><ul>
<li><p><code>axios</code>既可以通过<code>axois.get()</code>调用函数的方式发请求</p>
</li>
<li><p>也可以通过传入固定的配置对象来发请求</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">axios</span>(&#123;</span><br><span class="line">    <span class="attr">method</span>: <span class="string">&#x27;post&#x27;</span>,</span><br><span class="line">    <span class="attr">url</span>: <span class="string">&#x27;/user/12345&#x27;</span></span><br><span class="line">    <span class="attr">data</span>: &#123;</span><br><span class="line">    	<span class="attr">firstName</span>: <span class="string">&#x27;Fred&#x27;</span>,</span><br><span class="line">    	<span class="attr">lastName</span>: <span class="string">&#x27;Flintstone&#x27;</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="3-1-axios是什么"><a href="#3-1-axios是什么" class="headerlink" title="3.1.axios是什么"></a>3.1.<code>axios</code>是什么</h3><h3 id="3-2-axios特点"><a href="#3-2-axios特点" class="headerlink" title="3.2.axios特点"></a>3.2.<code>axios</code>特点</h3><h3 id="3-3-axios常用特点"><a href="#3-3-axios常用特点" class="headerlink" title="3.3.axios常用特点"></a>3.3.<code>axios</code>常用特点</h3><h3 id="3-4-难点语法的理解和使用"><a href="#3-4-难点语法的理解和使用" class="headerlink" title="3.4.难点语法的理解和使用"></a>3.4.难点语法的理解和使用</h3><h4 id="3-4-1-axios-create-ocnfig"><a href="#3-4-1-axios-create-ocnfig" class="headerlink" title="3.4.1.axios.create(ocnfig)"></a>3.4.1.<code>axios.create(ocnfig)</code></h4><h4 id="3-4-2-拦截器函数-x2F-ajax请求"><a href="#3-4-2-拦截器函数-x2F-ajax请求" class="headerlink" title="3.4.2.拦截器函数&#x2F;ajax请求"></a>3.4.2.拦截器函数&#x2F;<code>ajax</code>请求</h4><h4 id="3-4-3-取消请求"><a href="#3-4-3-取消请求" class="headerlink" title="3.4.3.取消请求"></a>3.4.3.取消请求</h4><h2 id="4-axios源码分析"><a href="#4-axios源码分析" class="headerlink" title="4.axios源码分析"></a>4.<code>axios</code>源码分析</h2><h1 id="Axios-教程一（基本使用和封装）"><a href="#Axios-教程一（基本使用和封装）" class="headerlink" title="Axios_教程一（基本使用和封装）"></a><code>Axios</code>_教程一（基本使用和封装）</h1><p>官网：</p>
<p>github：</p>
<h2 id="网络请求模块的选择-axios"><a href="#网络请求模块的选择-axios" class="headerlink" title="网络请求模块的选择-axios"></a>网络请求模块的选择-axios</h2><p>Vue中发送网络请求有非常多的方式</p>
<ul>
<li>方式一：传统的Ajax是基于XMLHttpResponse(XHR)<ul>
<li>为什么不用它呢？<ul>
<li>配置和调用方式等非常的混乱</li>
<li>编码起来看起来就非常蛋疼</li>
<li>很少直接使用，而是用jQuery-Ajax</li>
</ul>
</li>
</ul>
</li>
<li>方式二：jQuery-Ajax<ul>
<li>为什么不用它呢？<ul>
<li>首先，我们先明确一点，在整个Vue开发中，都是不需要使用jQuery的</li>
<li>完全没有必要，只是为了一个网络请求，就引入jQuery</li>
</ul>
</li>
</ul>
</li>
<li>选择三：官方在Vue1.x的时候，推出了Vue-resource<ul>
<li>在Vue2.0推出后，Vue作者在Issues中说明，去掉了Vue-resource，并且以后也不再更新</li>
</ul>
</li>
<li>选择四：axios<ul>
<li>Vue作者推荐</li>
</ul>
</li>
</ul>
<p>在前端开发中，我们一种常见的网络请求方式就是JSONP</p>
<ul>
<li>使用JSONP最主要的原因，往往是为了解决跨域访问的问题</li>
</ul>
<p>JSONP的原理是什么呢？</p>
<ul>
<li>JSONP的核心在于通过<code>&lt;script&gt;</code>标签的src来帮助我们请求数据</li>
<li>原因是我们的项目部署在domain1.com服务器上时，是不能直接访问domain2.com服务器上的资料的</li>
<li>这个时候，我们利用<code>&lt;script&gt;</code>标签的src帮助我们去服务器请求到数据，将数据当做一个javascript函数来执行，并且执行的过程中传入我们需要的json</li>
<li>所以，封装jsonp的核心就在于我们监听window上的jsonp进行回调的名称</li>
</ul>
<h2 id="为什么选择AXIOS？"><a href="#为什么选择AXIOS？" class="headerlink" title="为什么选择AXIOS？"></a>为什么选择AXIOS？</h2><ul>
<li>在浏览器中发送XMLHttpRequest请求</li>
<li>在node.js中发送http请求</li>
<li>支持Promise API</li>
<li>拦截请求和相应</li>
<li>转换请求和相应数据</li>
<li>等等</li>
</ul>
<h2 id="axios框架的基本使用"><a href="#axios框架的基本使用" class="headerlink" title="axios框架的基本使用"></a>axios框架的基本使用</h2><ul>
<li>支持多种请求方式</li>
<li>axios(config)</li>
<li>axios.request(url, config)</li>
<li>axios.get(url[,config])</li>
<li>axios.delete(url[,config])</li>
<li>axios.head(url[,config])</li>
<li>axios.post(url[,data[,config]])</li>
<li>axios.put(url[,data[,config]])</li>
<li>axios.patch(url[,data[,config]])</li>
</ul>
<p>安装axios：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install axios@0.18.0 --save</span><br></pre></td></tr></table></figure>

<p>基本使用</p>
<p>main.js中导入：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span></span><br></pre></td></tr></table></figure>

<p>get请求</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">axios</span>(&#123;</span><br><span class="line">  <span class="attr">url</span>:<span class="string">&#x27;http://152.136.185.210:7878/api/m5/home/multidata&#x27;</span>,</span><br><span class="line">  <span class="attr">method</span>:<span class="string">&#x27;get&#x27;</span></span><br><span class="line">&#125;).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(res)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>get请求携带参数</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">axios</span>(&#123;</span><br><span class="line">    <span class="attr">url</span>:<span class="string">&#x27;http://152.136.185.210:7878/home/data&#x27;</span>,</span><br><span class="line">    <span class="attr">params</span>: &#123;</span><br><span class="line">        <span class="attr">type</span>: <span class="string">&#x27;pop&#x27;</span>,</span><br><span class="line">        <span class="attr">page</span>: <span class="number">1</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(res)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="axios发送并发请求"><a href="#axios发送并发请求" class="headerlink" title="axios发送并发请求"></a>axios发送并发请求</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">axios.<span class="title function_">all</span>([<span class="title function_">axios</span>(), <span class="title function_">axios</span>()]).<span class="title function_">then</span>(<span class="function"><span class="params">results</span> =&gt;</span> &#123;</span><br><span class="line"></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>



<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">axios.<span class="title function_">all</span>([</span><br><span class="line">  <span class="title function_">axios</span>(&#123;</span><br><span class="line">    <span class="attr">url</span>: <span class="string">&#x27;http://152.136.185.210:7878/api/m5/home/multidata&#x27;</span></span><br><span class="line">  &#125;),</span><br><span class="line">  <span class="title function_">axios</span>(&#123;</span><br><span class="line">    <span class="attr">url</span>:<span class="string">&#x27;http://152.136.185.210:7878/home/data&#x27;</span>,</span><br><span class="line">    <span class="attr">params</span>: &#123;</span><br><span class="line">      <span class="attr">type</span>: <span class="string">&#x27;pop&#x27;</span>,</span><br><span class="line">      <span class="attr">page</span>: <span class="number">1</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">]).<span class="title function_">then</span>(<span class="function"><span class="params">results</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(results)</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(results[<span class="number">0</span>])</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>将两个结果单独的拿出来：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">axios.<span class="title function_">all</span>([</span><br><span class="line">  <span class="title function_">axios</span>(&#123;</span><br><span class="line">    <span class="attr">url</span>: <span class="string">&#x27;http://152.136.185.210:7878/api/m5/home/multidata&#x27;</span></span><br><span class="line">  &#125;),</span><br><span class="line">  <span class="title function_">axios</span>(&#123;</span><br><span class="line">    <span class="attr">url</span>:<span class="string">&#x27;http://152.136.185.210:7878/home/data&#x27;</span>,</span><br><span class="line">    <span class="attr">params</span>: &#123;</span><br><span class="line">      <span class="attr">type</span>: <span class="string">&#x27;pop&#x27;</span>,</span><br><span class="line">      <span class="attr">page</span>: <span class="number">1</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">]).<span class="title function_">then</span>(axios.<span class="title function_">spread</span>(<span class="function">(<span class="params">res1, res2</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(res1)</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(res2)</span><br><span class="line">&#125;))</span><br></pre></td></tr></table></figure>

<h2 id="axios的配置信息相关"><a href="#axios的配置信息相关" class="headerlink" title="axios的配置信息相关"></a>axios的配置信息相关</h2><p>在上面的示例中，我们的BaseUrl是固定的</p>
<ul>
<li>事实上，在开发中可能很多参数都是固定的</li>
<li>这个时候我们可以进行一些抽取，也可以利用axios的全局配置</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">axios.<span class="property">defaults</span>.<span class="property">baseURL</span> = <span class="string">&#x27;http://152.136.185.210:7878&#x27;</span></span><br><span class="line">axios.<span class="property">defaults</span>.<span class="property">headers</span>.<span class="property">post</span>[<span class="string">&#x27;Content-Type&#x27;</span>]=<span class="string">&#x27;application/x-www-form-urlencoded&#x27;</span></span><br><span class="line"></span><br><span class="line">axios.<span class="title function_">all</span>([</span><br><span class="line">  <span class="title function_">axios</span>(&#123;</span><br><span class="line">    <span class="attr">url</span>: <span class="string">&#x27;/api/m5/home/multidata&#x27;</span></span><br><span class="line">  &#125;),</span><br><span class="line">  <span class="title function_">axios</span>(&#123;</span><br><span class="line">    <span class="attr">url</span>:<span class="string">&#x27;http://152.136.185.210:7878/home/data&#x27;</span>,</span><br><span class="line">    <span class="attr">params</span>: &#123;</span><br><span class="line">      <span class="attr">type</span>: <span class="string">&#x27;pop&#x27;</span>,</span><br><span class="line">      <span class="attr">page</span>: <span class="number">1</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">]).<span class="title function_">then</span>(axios.<span class="title function_">spread</span>(<span class="function">(<span class="params">res1, res2</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(res1)</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(res2)</span><br><span class="line">&#125;))</span><br></pre></td></tr></table></figure>

<p>常见的配置选项</p>
<ul>
<li>请求地址<ul>
<li>url:’&#x2F;user’,</li>
</ul>
</li>
<li>请求类型<ul>
<li>method:’get’,</li>
</ul>
</li>
<li>请根路径<ul>
<li>baseURL:’<a target="_blank" rel="noopener" href="http://www.test.com/api&#39;">http://www.test.com/api&#39;</a>,</li>
</ul>
</li>
<li>请求前的数据处理<ul>
<li>transformRequest:[function(data){}],</li>
</ul>
</li>
<li>请求后的数据处理<ul>
<li>transformResponse:[function(data){}],</li>
</ul>
</li>
<li>自定义的请求头<ul>
<li>headers:{‘x-Requested-With’:’XMLHttpRequest’},</li>
</ul>
</li>
<li>URL查询对象<ul>
<li>params:{id:12},</li>
</ul>
</li>
<li>查询对象序列化函数<ul>
<li>paramsSerializer:function(params){}</li>
</ul>
</li>
<li>request body<ul>
<li>data:{key:’aa’},</li>
</ul>
</li>
<li>超时设置s<ul>
<li>timeout:1000,</li>
</ul>
</li>
<li>跨域是否带Token<ul>
<li>withCredentials:false,</li>
</ul>
</li>
<li>自定义请求处理<ul>
<li>adapter:function(resolve,reject,config){},</li>
</ul>
</li>
<li>身份验证信息<ul>
<li>auth:{uname:’’,pwd:’12’}</li>
</ul>
</li>
<li>响应式的数据格式json&#x2F;blob&#x2F;document&#x2F;arrarybuffer&#x2F;text&#x2F;stream<ul>
<li>responseType:’json’</li>
</ul>
</li>
</ul>
<h2 id="axios的实例和模块封装"><a href="#axios的实例和模块封装" class="headerlink" title="axios的实例和模块封装"></a>axios的实例和模块封装</h2><p>当有多个请求接口时（在不同的服务器上），可以创建实例</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> instance1 = axios.<span class="title function_">create</span>(&#123;</span><br><span class="line">    <span class="attr">baseURL</span>: <span class="string">&#x27;http://152.136.185.210:7878&#x27;</span></span><br><span class="line">    <span class="attr">timeout</span>: <span class="number">5000</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="title function_">instance1</span>(&#123;</span><br><span class="line">    <span class="attr">url</span>: <span class="string">&#x27;/home/multidata&#x27;</span></span><br><span class="line">&#125;).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(res)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="title function_">instance1</span>(&#123;</span><br><span class="line">    <span class="attr">url</span>: <span class="string">&#x27;/home/data&#x27;</span>,</span><br><span class="line">    <span class="attr">params</span>: &#123;</span><br><span class="line">        <span class="attr">type</span>: <span class="string">&#x27;pop&#x27;</span>,</span><br><span class="line">        <span class="attr">page</span>: <span class="number">1</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// 上两个请求用实例1</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> instance2 = axios.<span class="title function_">create</span>(&#123;</span><br><span class="line">    <span class="attr">baseURL</span>: <span class="string">&#x27;http://111.111.11.1:1111&#x27;</span></span><br><span class="line">    <span class="attr">timeout</span>: <span class="number">1111</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 实例2对应另外一个服务的接口，</span></span><br><span class="line"><span class="comment">// 每个实例有自己独立的配置</span></span><br></pre></td></tr></table></figure>



<p><strong>axios的封装</strong></p>
<p>&#x2F;network&#x2F;request.js</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">request</span>(<span class="params">config, success, failure</span>) &#123;</span><br><span class="line">    <span class="comment">//1.创建axios的实例</span></span><br><span class="line">    <span class="keyword">const</span> instance = axios.<span class="title function_">create</span>(&#123;</span><br><span class="line">        <span class="attr">baseURL</span>: <span class="string">&#x27;http://111.111.11.1:1111&#x27;</span>,</span><br><span class="line">        <span class="attr">timeout</span>: <span class="number">1111</span></span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 发送真正的网络请求</span></span><br><span class="line">    <span class="comment">// 将结果给调用者传出去</span></span><br><span class="line">    <span class="title function_">instance</span>(config, success, failure)</span><br><span class="line">        .<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span>&#123; <span class="comment">// 这里的res是Promise执行成功返回的结果</span></span><br><span class="line">            <span class="title function_">success</span>(res) <span class="comment">// 将执行成功返回的结果传递出去</span></span><br><span class="line">        &#125;)</span><br><span class="line">        .<span class="title function_">catch</span>(<span class="params">error =&gt;</span>)&#123;</span><br><span class="line">            <span class="title function_">failure</span>(err)</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在main.js中使用</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;request&#125; <span class="keyword">from</span> <span class="string">&#x27;./network/request&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="title function_">request</span>(&#123;</span><br><span class="line">    <span class="attr">url</span>: <span class="string">&#x27;/home/multidata&#x27;</span></span><br><span class="line">    </span><br><span class="line">&#125;,<span class="function"><span class="params">res</span> =&gt;</span> &#123; <span class="comment">// 这里的res只是个形参</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(res) <span class="comment">// 拿到执行成功返回的结果</span></span><br><span class="line">&#125;,<span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(err)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>另一种写法：对象的写法</p>
<p>request.js</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">instance</span>(config.<span class="property">baseConfig</span>)</span><br><span class="line">    .<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">        config.<span class="title function_">success</span>(res)</span><br><span class="line">    &#125;)</span><br><span class="line">    .<span class="title function_">catch</span>(<span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">        config.<span class="title function_">faulure</span>(err)</span><br><span class="line">    &#125;)</span><br></pre></td></tr></table></figure>

<p>main.js</p>
<p>相当于把所有的配置，放在了一个大的config里面</p>
<p>在request.js中，对于传递的参数做一个解析</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">request</span>(&#123;</span><br><span class="line">    <span class="attr">baseConfig</span>: &#123;</span><br><span class="line"></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">success</span>: <span class="keyword">function</span>(<span class="params">res</span>) &#123;</span><br><span class="line"></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">failure</span>: <span class="keyword">function</span>(<span class="params">err</span>) &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>第三种写法：Promise</p>
<p>request.js</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">request</span>(<span class="params">config</span>) &#123;    </span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;        </span><br><span class="line">        <span class="keyword">const</span> instance = axios.<span class="title function_">create</span>(&#123;            </span><br><span class="line">            <span class="attr">baseURL</span>: <span class="string">&#x27;http://111.111.11.1:1111&#x27;</span>,            </span><br><span class="line">            <span class="attr">timeout</span>: <span class="number">1111</span>        </span><br><span class="line">        &#125;)</span><br><span class="line">        </span><br><span class="line">        <span class="title function_">instance</span>(config)            </span><br><span class="line">            .<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;                </span><br><span class="line">            <span class="title function_">resolve</span>(res)            </span><br><span class="line">        &#125;)            </span><br><span class="line">            .<span class="title function_">catch</span>(<span class="function"><span class="params">err</span> =&gt;</span> &#123;                </span><br><span class="line">            <span class="title function_">reject</span>(err)            </span><br><span class="line">        &#125;)    </span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>main.js中使用</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">request</span>(&#123;    </span><br><span class="line">    <span class="attr">url</span>:<span class="string">&#x27;/home/multidata&#x27;</span></span><br><span class="line">&#125;).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;    </span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(res)&#125;)</span><br><span class="line">.<span class="title function_">catch</span>(<span class="function"><span class="params">err</span> =&gt;</span> &#123;    </span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(err)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>第四种写法:instance本身返回的就是Promise</p>
<p>request.js</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">request</span>(<span class="params">config</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> instance = axios.<span class="title function_">create</span>(&#123;</span><br><span class="line">            <span class="attr">baseURL</span>: <span class="string">&#x27;http://111.111.11.1:1111&#x27;</span>,</span><br><span class="line">            <span class="attr">timeout</span>: <span class="number">1111</span></span><br><span class="line">        &#125;)</span><br><span class="line">		<span class="comment">// 直接return instance就可以了，其本身返回的就是Promise</span></span><br><span class="line">        <span class="keyword">return</span> <span class="title function_">instance</span>(config)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>main.js中使用</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">request</span>(&#123;    </span><br><span class="line">    <span class="attr">url</span>:<span class="string">&#x27;/home/multidata&#x27;</span></span><br><span class="line">&#125;).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;    </span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(res)&#125;)</span><br><span class="line">.<span class="title function_">catch</span>(<span class="function"><span class="params">err</span> =&gt;</span> &#123;    </span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(err)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="axios的拦截器的使用"><a href="#axios的拦截器的使用" class="headerlink" title="axios的拦截器的使用"></a>axios的拦截器的使用</h2><ul>
<li>axios提供了拦截器，用于我们每次在发送请求或者得到相应的请求后，进行对应的处理</li>
<li>如何使用拦截器呢</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//配置请求拦截</span></span><br><span class="line">instance.<span class="property">interceptors</span>.<span class="property">request</span>.<span class="title function_">use</span>(<span class="function"><span class="params">config</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;来到了request拦截success中&#x27;</span>)</span><br><span class="line">    <span class="keyword">return</span> config</span><br><span class="line">&#125;,<span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;来到了request拦截failure中&#x27;</span>)</span><br><span class="line">    <span class="keyword">return</span> err</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>



<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//配置响应拦截</span></span><br><span class="line">instance.<span class="property">interceptors</span>.<span class="property">reponse</span>.<span class="title function_">use</span>(<span class="function"><span class="params">response</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;来到了response拦截success中&#x27;</span>)</span><br><span class="line">    <span class="keyword">return</span> response.<span class="property">data</span></span><br><span class="line">&#125;,<span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;来到了response拦截failure中&#x27;</span>)</span><br><span class="line">    <span class="keyword">return</span> err</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>



<h1 id="Axios使用的最佳实践"><a href="#Axios使用的最佳实践" class="headerlink" title="Axios使用的最佳实践"></a><code>Axios</code>使用的最佳实践</h1><p>单独封装</p>
<h1 id="使用问题"><a href="#使用问题" class="headerlink" title="使用问题"></a>使用问题</h1><h2 id="怎么设置单独的headers"><a href="#怎么设置单独的headers" class="headerlink" title="怎么设置单独的headers"></a>怎么设置单独的headers</h2><h2 id="对接elementui上传文件时，怎么封装"><a href="#对接elementui上传文件时，怎么封装" class="headerlink" title="对接elementui上传文件时，怎么封装"></a>对接<code>elementui</code>上传文件时，怎么封装</h2></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a target="_blank" rel="noopener" href="https://github.com/Saiable">Sai</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="http://mindcons.cn/2022/07/08/web/JavaScript/Ajax/Ajax&amp;Axios/">http://mindcons.cn/2022/07/08/web/JavaScript/Ajax/Ajax&amp;Axios/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://mindcons.cn" target="_blank">吕小布の博客</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"></div><div class="post_share"><div class="social-share" data-image="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><div class="post-reward"><div class="reward-button"><i class="fas fa-qrcode"></i> 打赏</div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="https://s2.loli.net/2022/07/02/ZYspTWmDdytfLXa.png" target="_blank"><img class="post-qr-code-img" src="https://s2.loli.net/2022/07/02/ZYspTWmDdytfLXa.png" alt="wechat"/></a><div class="post-qr-code-desc">wechat</div></li><li class="reward-item"><a href="https://s2.loli.net/2022/07/02/3zcRHPK5m6C8sE2.png" target="_blank"><img class="post-qr-code-img" src="https://s2.loli.net/2022/07/02/3zcRHPK5m6C8sE2.png" alt="alipay"/></a><div class="post-qr-code-desc">alipay</div></li></ul></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2022/07/08/web/JavaScript/Componentization/ElementUI/"><img class="prev-cover" src="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info"></div></div></a></div><div class="next-post pull-right"><a href="/2022/07/08/web/JavaScript/vue3/"><img class="next-cover" src="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">Vue3基础使用</div></div></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://s2.loli.net/2022/07/02/xjocPR8fnLu64KU.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">Sai</div><div class="author-info__description">无来无去,不悔不怨</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">66</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">9</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">3</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/Saiable"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/xxxxx" target="_blank" title="QQ"><i class="fa-brands fa-qq"></i></a><a class="social-icon" href="https://github.com/xxxxx" target="_blank" title="WeChat"><i class="fa-brands fa-weixin"></i></a><a class="social-icon" href="https://github.com/Saiable" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:xxxxxx@gmail.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a><a class="social-icon" href="mailto:xxxxxx@gmail.com" target="_blank" title="Email"><i class="fa-solid fa-rss"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">时间再多一点的愿望无法满足，那就多清醒一会儿</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#XMLHttpRequest"><span class="toc-number">1.</span> <span class="toc-text">XMLHttpRequest</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0"><span class="toc-number">1.1.</span> <span class="toc-text">构造函数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B1%9E%E6%80%A7"><span class="toc-number">1.2.</span> <span class="toc-text">属性</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#XMLHttpRequest-onreadystatechange"><span class="toc-number">1.2.1.</span> <span class="toc-text">XMLHttpRequest.onreadystatechange</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#XMLHttpRequest-readyState%EF%BC%88%E5%8F%AA%E8%AF%BB%EF%BC%89"><span class="toc-number">1.2.2.</span> <span class="toc-text">XMLHttpRequest.readyState（只读）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#XMLHttpRequest-response-%EF%BC%88%E5%8F%AA%E8%AF%BB%EF%BC%89"><span class="toc-number">1.2.3.</span> <span class="toc-text">XMLHttpRequest.response （只读）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#XMLHttpRequest-responseText"><span class="toc-number">1.2.4.</span> <span class="toc-text">XMLHttpRequest.responseText</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#XMLHttpRequest-responseType"><span class="toc-number">1.2.5.</span> <span class="toc-text">XMLHttpRequest.responseType</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#XMLHttpRequest-responseURL%EF%BC%88%E5%8F%AA%E8%AF%BB%EF%BC%89"><span class="toc-number">1.2.6.</span> <span class="toc-text">XMLHttpRequest.responseURL（只读）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#XMLHttpRequest-responseXML-%EF%BC%88%E5%8F%AA%E8%AF%BB%EF%BC%89"><span class="toc-number">1.2.7.</span> <span class="toc-text">XMLHttpRequest.responseXML （只读）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#XMLHttpRequest-status-%EF%BC%88%E5%8F%AA%E8%AF%BB%EF%BC%89"><span class="toc-number">1.2.8.</span> <span class="toc-text">XMLHttpRequest.status （只读）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#XMLHttpRequest-statusText-%EF%BC%88%E5%8F%AA%E8%AF%BB%EF%BC%89"><span class="toc-number">1.2.9.</span> <span class="toc-text">XMLHttpRequest.statusText （只读）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#XMLHttpRequest-timeout"><span class="toc-number">1.2.10.</span> <span class="toc-text">XMLHttpRequest.timeout</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#XMLHttpRequest-upload"><span class="toc-number">1.2.11.</span> <span class="toc-text">XMLHttpRequest.upload</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8B%E4%BB%B6%E5%A4%84%E7%90%86%E5%99%A8"><span class="toc-number">1.3.</span> <span class="toc-text">事件处理器</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%96%B9%E6%B3%95"><span class="toc-number">1.4.</span> <span class="toc-text">方法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#XMLHttpRequest-abort"><span class="toc-number">1.4.1.</span> <span class="toc-text">XMLHttpRequest.abort()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#XMLHttpRequest-getAllResponseHeaders"><span class="toc-number">1.4.2.</span> <span class="toc-text">XMLHttpRequest.getAllResponseHeaders()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#XMLHttpRequest-getResponseHeader"><span class="toc-number">1.4.3.</span> <span class="toc-text">XMLHttpRequest.getResponseHeader()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#XMLHttpRequest-open"><span class="toc-number">1.4.4.</span> <span class="toc-text">XMLHttpRequest.open()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#XMLHttpRequest-overrideMimeType"><span class="toc-number">1.4.5.</span> <span class="toc-text">XMLHttpRequest.overrideMimeType()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#XMLHttpRequest-send"><span class="toc-number">1.4.6.</span> <span class="toc-text">XMLHttpRequest.send()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#XMLHttpRequest-setRequestHeader"><span class="toc-number">1.4.7.</span> <span class="toc-text">XMLHttpRequest.setRequestHeader()</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8B%E4%BB%B6"><span class="toc-number">1.5.</span> <span class="toc-text">事件</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#XMLHttpRequest-abort-event"><span class="toc-number">1.5.1.</span> <span class="toc-text">XMLHttpRequest: abort event</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#XMLHttpRequest-error-%E4%BA%8B%E4%BB%B6"><span class="toc-number">1.5.2.</span> <span class="toc-text">XMLHttpRequest: error 事件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#XMLHttpRequest-load-event"><span class="toc-number">1.5.3.</span> <span class="toc-text">XMLHttpRequest: load event</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#loadend"><span class="toc-number">1.5.4.</span> <span class="toc-text">loadend</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#loadstart"><span class="toc-number">1.5.5.</span> <span class="toc-text">loadstart</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#progress-event"><span class="toc-number">1.5.6.</span> <span class="toc-text">progress event</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#timeout"><span class="toc-number">1.5.7.</span> <span class="toc-text">timeout</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%90%8C%E6%AD%A5%E5%92%8C%E5%BC%82%E6%AD%A5%E8%AF%B7%E6%B1%82"><span class="toc-number">1.6.</span> <span class="toc-text">同步和异步请求</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BC%82%E6%AD%A5%E8%AF%B7%E6%B1%82"><span class="toc-number">1.6.1.</span> <span class="toc-text">异步请求</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-0%E6%96%B0%E7%89%B9%E6%80%A7"><span class="toc-number">1.7.</span> <span class="toc-text">2.0新特性</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#AJAX"><span class="toc-number">2.</span> <span class="toc-text">AJAX</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Axios-%E6%95%99%E7%A8%8B%E4%BA%8C"><span class="toc-number">3.</span> <span class="toc-text">Axios_教程二</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-Http%E7%9B%B8%E5%85%B3"><span class="toc-number">3.1.</span> <span class="toc-text">1.Http相关</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1-MDN%E6%96%87%E6%A1%A3"><span class="toc-number">3.1.1.</span> <span class="toc-text">1.1.MDN文档</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2-HTTP%E8%AF%B7%E6%B1%82%E4%BA%A4%E4%BA%92%E7%9A%84%E5%9F%BA%E6%9C%AC%E8%BF%87%E7%A8%8B"><span class="toc-number">3.1.2.</span> <span class="toc-text">1.2.HTTP请求交互的基本过程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-3-HTTP%E8%AF%B7%E6%B1%82%E6%8A%A5%E6%96%87"><span class="toc-number">3.1.3.</span> <span class="toc-text">1.3.HTTP请求报文</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-4-HTTP%E5%93%8D%E5%BA%94%E6%8A%A5%E6%96%87"><span class="toc-number">3.1.4.</span> <span class="toc-text">1.4.HTTP响应报文</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-5-POST%E8%AF%B7%E6%B1%82%E4%BD%93%E5%8F%82%E6%95%B0%E6%A0%BC%E5%BC%8F"><span class="toc-number">3.1.5.</span> <span class="toc-text">1.5.POST请求体参数格式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-6-%E5%B8%B8%E8%A7%81%E7%9A%84%E5%93%8D%E5%BA%94%E7%8A%B6%E6%80%81%E7%A0%81"><span class="toc-number">3.1.6.</span> <span class="toc-text">1.6.常见的响应状态码</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-7-%E4%B8%8D%E5%90%8C%E7%B1%BB%E5%9E%8B%E7%9A%84%E8%AF%B7%E6%B1%82%E5%8F%8A%E5%85%B6%E4%BD%9C%E7%94%A8"><span class="toc-number">3.1.7.</span> <span class="toc-text">1.7.不同类型的请求及其作用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-8-API%E7%9A%84%E5%88%86%E7%B1%BB"><span class="toc-number">3.1.8.</span> <span class="toc-text">1.8.API的分类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-9-json-server%E6%90%AD%E5%BB%BAREST%E6%8E%A5%E5%8F%A3"><span class="toc-number">3.1.9.</span> <span class="toc-text">1.9.json-server搭建REST接口</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-9-1-json-server%E6%98%AF%E4%BB%80%E4%B9%88"><span class="toc-number">3.1.9.1.</span> <span class="toc-text">1.9.1.json-server是什么</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-9-2-%E4%BD%BF%E7%94%A8json-server"><span class="toc-number">3.1.9.2.</span> <span class="toc-text">1.9.2.使用json-server</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-9-3-%E4%BD%BF%E7%94%A8%E6%B5%8F%E8%A7%88%E5%99%A8%E8%AE%BF%E9%97%AE%E6%B5%8B%E8%AF%95"><span class="toc-number">3.1.9.3.</span> <span class="toc-text">1.9.3.使用浏览器访问测试</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-9-4-%E4%BD%BF%E7%94%A8axios%E8%AE%BF%E9%97%AE%E6%B5%8B%E8%AF%95"><span class="toc-number">3.1.9.4.</span> <span class="toc-text">1.9.4.使用axios访问测试</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%B5%8B%E8%AF%95GET%E8%AF%B7%E6%B1%82"><span class="toc-number">3.1.9.4.1.</span> <span class="toc-text">测试GET请求</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%B5%8B%E8%AF%95POST%E8%AF%B7%E6%B1%82"><span class="toc-number">3.1.9.4.2.</span> <span class="toc-text">测试POST请求</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%B5%8B%E8%AF%95PUT%E8%AF%B7%E6%B1%82"><span class="toc-number">3.1.9.4.3.</span> <span class="toc-text">测试PUT请求</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%B5%8B%E8%AF%95DELETE%E8%AF%B7%E6%B1%82"><span class="toc-number">3.1.9.4.4.</span> <span class="toc-text">测试DELETE请求</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-XHR%E7%9A%84%E7%90%86%E8%A7%A3%E5%92%8C%E4%BD%BF%E7%94%A8"><span class="toc-number">3.2.</span> <span class="toc-text">2.XHR的理解和使用</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-MDN%E6%96%87%E6%A1%A3"><span class="toc-number">3.2.1.</span> <span class="toc-text">2.1.MDN文档</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-%E7%90%86%E8%A7%A3"><span class="toc-number">3.2.2.</span> <span class="toc-text">2.2.理解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-%E5%8C%BA%E5%88%AB%E4%B8%80%E8%88%AChttp%E8%AF%B7%E6%B1%82%E5%92%8Cajax%E8%AF%B7%E6%B1%82"><span class="toc-number">3.2.3.</span> <span class="toc-text">2.3.区别一般http请求和ajax请求</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-4API"><span class="toc-number">3.2.4.</span> <span class="toc-text">2.4API</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-5-XHR%E7%9A%84ajax%E5%B0%81%E8%A3%85%EF%BC%88%E7%AE%80%E5%8D%95%E7%89%88axios%EF%BC%89"><span class="toc-number">3.2.5.</span> <span class="toc-text">2.5.XHR的ajax封装（简单版axios）</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-5-1-%E7%89%B9%E7%82%B9"><span class="toc-number">3.2.5.1.</span> <span class="toc-text">2.5.1.特点</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-5-2-%E7%BC%96%E7%A0%81%E5%AE%9E%E7%8E%B0"><span class="toc-number">3.2.5.2.</span> <span class="toc-text">2.5.2.编码实现</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-5-3-%E4%BD%BF%E7%94%A8%E6%B5%8B%E8%AF%95"><span class="toc-number">3.2.5.3.</span> <span class="toc-text">2.5.3.使用测试</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-axios%E7%9A%84%E7%90%86%E8%A7%A3%E5%92%8C%E4%BD%BF%E7%94%A8"><span class="toc-number">3.3.</span> <span class="toc-text">3.axios的理解和使用</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-axios%E6%98%AF%E4%BB%80%E4%B9%88"><span class="toc-number">3.3.1.</span> <span class="toc-text">3.1.axios是什么</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-axios%E7%89%B9%E7%82%B9"><span class="toc-number">3.3.2.</span> <span class="toc-text">3.2.axios特点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3-axios%E5%B8%B8%E7%94%A8%E7%89%B9%E7%82%B9"><span class="toc-number">3.3.3.</span> <span class="toc-text">3.3.axios常用特点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-4-%E9%9A%BE%E7%82%B9%E8%AF%AD%E6%B3%95%E7%9A%84%E7%90%86%E8%A7%A3%E5%92%8C%E4%BD%BF%E7%94%A8"><span class="toc-number">3.3.4.</span> <span class="toc-text">3.4.难点语法的理解和使用</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-4-1-axios-create-ocnfig"><span class="toc-number">3.3.4.1.</span> <span class="toc-text">3.4.1.axios.create(ocnfig)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-4-2-%E6%8B%A6%E6%88%AA%E5%99%A8%E5%87%BD%E6%95%B0-x2F-ajax%E8%AF%B7%E6%B1%82"><span class="toc-number">3.3.4.2.</span> <span class="toc-text">3.4.2.拦截器函数&#x2F;ajax请求</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-4-3-%E5%8F%96%E6%B6%88%E8%AF%B7%E6%B1%82"><span class="toc-number">3.3.4.3.</span> <span class="toc-text">3.4.3.取消请求</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-axios%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90"><span class="toc-number">3.4.</span> <span class="toc-text">4.axios源码分析</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Axios-%E6%95%99%E7%A8%8B%E4%B8%80%EF%BC%88%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8%E5%92%8C%E5%B0%81%E8%A3%85%EF%BC%89"><span class="toc-number">4.</span> <span class="toc-text">Axios_教程一（基本使用和封装）</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BD%91%E7%BB%9C%E8%AF%B7%E6%B1%82%E6%A8%A1%E5%9D%97%E7%9A%84%E9%80%89%E6%8B%A9-axios"><span class="toc-number">4.1.</span> <span class="toc-text">网络请求模块的选择-axios</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E9%80%89%E6%8B%A9AXIOS%EF%BC%9F"><span class="toc-number">4.2.</span> <span class="toc-text">为什么选择AXIOS？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#axios%E6%A1%86%E6%9E%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8"><span class="toc-number">4.3.</span> <span class="toc-text">axios框架的基本使用</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#axios%E5%8F%91%E9%80%81%E5%B9%B6%E5%8F%91%E8%AF%B7%E6%B1%82"><span class="toc-number">4.4.</span> <span class="toc-text">axios发送并发请求</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#axios%E7%9A%84%E9%85%8D%E7%BD%AE%E4%BF%A1%E6%81%AF%E7%9B%B8%E5%85%B3"><span class="toc-number">4.5.</span> <span class="toc-text">axios的配置信息相关</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#axios%E7%9A%84%E5%AE%9E%E4%BE%8B%E5%92%8C%E6%A8%A1%E5%9D%97%E5%B0%81%E8%A3%85"><span class="toc-number">4.6.</span> <span class="toc-text">axios的实例和模块封装</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#axios%E7%9A%84%E6%8B%A6%E6%88%AA%E5%99%A8%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-number">4.7.</span> <span class="toc-text">axios的拦截器的使用</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Axios%E4%BD%BF%E7%94%A8%E7%9A%84%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5"><span class="toc-number">5.</span> <span class="toc-text">Axios使用的最佳实践</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E9%97%AE%E9%A2%98"><span class="toc-number">6.</span> <span class="toc-text">使用问题</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%80%8E%E4%B9%88%E8%AE%BE%E7%BD%AE%E5%8D%95%E7%8B%AC%E7%9A%84headers"><span class="toc-number">6.1.</span> <span class="toc-text">怎么设置单独的headers</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AF%B9%E6%8E%A5elementui%E4%B8%8A%E4%BC%A0%E6%96%87%E4%BB%B6%E6%97%B6%EF%BC%8C%E6%80%8E%E4%B9%88%E5%B0%81%E8%A3%85"><span class="toc-number">6.2.</span> <span class="toc-text">对接elementui上传文件时，怎么封装</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2022/08/05/web/JavaScript/web%E5%9F%BA%E7%A1%80%E5%8F%8A%E8%BF%9B%E9%98%B6/" title="web基础及进阶">web基础及进阶</a><time datetime="2022-08-05T12:04:30.320Z" title="发表于 2022-08-05 20:04:30">2022-08-05</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2022/07/31/web/Node/koa_EN/" title="Koa2 build API service">Koa2 build API service</a><time datetime="2022-07-31T15:52:13.000Z" title="发表于 2022-07-31 23:52:13">2022-07-31</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2022/07/25/web/Node/koa/" title="Koa2搭建API服务">Koa2搭建API服务</a><time datetime="2022-07-25T15:52:13.000Z" title="发表于 2022-07-25 23:52:13">2022-07-25</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2022/07/25/web/%E5%85%B6%E4%BB%96/%E8%BF%90%E7%BB%B4/Neovim/%E3%80%8ANeovim%20%E9%85%8D%E7%BD%AE%E5%AE%9E%E6%88%98%EF%BC%9A%E4%BB%8E0%E5%88%B01%E6%89%93%E9%80%A0%E8%87%AA%E5%B7%B1%E7%9A%84IDE%E3%80%8B/" title="Neovim 配置实战：从0到1打造自己的IDE">Neovim 配置实战：从0到1打造自己的IDE</a><time datetime="2022-07-25T12:34:51.000Z" title="发表于 2022-07-25 20:34:51">2022-07-25</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2022/07/25/web/JavaScript/vue_%E6%95%99%E7%A8%8B3/" title="Vue基本使用">Vue基本使用</a><time datetime="2022-07-25T12:30:40.000Z" title="发表于 2022-07-25 20:30:40">2022-07-25</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2022 By Sai</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text">Hi, welcome to my <a target="_blank" rel="noopener" href="https://saiable.github.io/">blog</a>!</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><div class="js-pjax"></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>